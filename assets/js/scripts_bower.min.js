function inArray(a,b){return b.indexOf(a)>-1}function isEmpty(a){if(null==a)return!0;if(a.length>0)return!1;if(0===a.length)return!0;for(var b in a)if(hasOwnProperty.call(a,b))return!1;return!0}function toArray(a){return Array.isArray(a)?a:Object.keys(a).map(function(b){return a[b]})}function apiToJsTime(a){var b;return b=a+21600,b*=1e3}function correctEventTime(a){const b=60*(new Date).getTimezoneOffset()*1e3;return apiToJsTime(a)+b-216e5}!function(a,b,c){"use strict";function d(a){return D(a)?a:Object.keys(a).map(function(b){return a[b]})}function e(a){return null===a}function f(a,b){return-1==Object.keys(a).map(function(d){return b[d]!==c&&b[d]==a[d]}).indexOf(!1)}function g(a,b){if(""===b)return a;var c=a.indexOf(b.charAt(0));return-1!==c&&g(a.substr(c+1),b.substr(1))}function h(a,b,c){var d=0;return a.filter(function(a){var e=x(c)?b>d&&c(a):b>d;return d=e?d+1:d,e})}function i(a,b,c){return c.round(a*c.pow(10,b))/c.pow(10,b)}function j(a,b,c){return b=b||[],Object.keys(a).forEach(function(d){if(C(a[d])&&!D(a[d])){var e=c?c+"."+d:c;j(a[d],b,e||d)}else{var f=c?c+"."+d:d;b.push(f)}}),b}function k(a){return a&&a.$evalAsync&&a.$watch}function l(){return function(a,b){return a>b}}function m(){return function(a,b){return a>=b}}function n(){return function(a,b){return b>a}}function o(){return function(a,b){return b>=a}}function p(){return function(a,b){return a==b}}function q(){return function(a,b){return a!=b}}function r(){return function(a,b){return a===b}}function s(){return function(a,b){return a!==b}}function t(a){return function(b,c){return b=C(b)?d(b):b,!(!D(b)||y(c))&&b.some(function(b){return C(b)||z(c)?a(c)(b):b===c})}}function u(a,b){return b=b||0,b>=a.length?a:D(a[b])?u(a.slice(0,b).concat(a[b],a.slice(b+1)),b):u(a,b+1)}function v(a){return function(b,c){function e(a,b){return!y(b)&&a.some(function(a){return H(a,b)})}if(b=C(b)?d(b):b,!D(b))return b;var f=[],g=a(c);return y(c)?b.filter(function(a,b,c){return c.indexOf(a)===b}):b.filter(function(a){var b=g(a);return!e(f,b)&&(f.push(b),!0)})}}function w(a,b,c){return b?a+c+w(a,--b,c):a}var x=b.isDefined,y=b.isUndefined,z=b.isFunction,A=b.isString,B=b.isNumber,C=b.isObject,D=b.isArray,E=b.forEach,F=b.extend,G=b.copy,H=b.equals;String.prototype.contains||(String.prototype.contains=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),b.module("a8m.angular",[]).filter("isUndefined",function(){return function(a){return b.isUndefined(a)}}).filter("isDefined",function(){return function(a){return b.isDefined(a)}}).filter("isFunction",function(){return function(a){return b.isFunction(a)}}).filter("isString",function(){return function(a){return b.isString(a)}}).filter("isNumber",function(){return function(a){return b.isNumber(a)}}).filter("isArray",function(){return function(a){return b.isArray(a)}}).filter("isObject",function(){return function(a){return b.isObject(a)}}).filter("isEqual",function(){return function(a,c){return b.equals(a,c)}}),b.module("a8m.conditions",[]).filter({isGreaterThan:l,">":l,isGreaterThanOrEqualTo:m,">=":m,isLessThan:n,"<":n,isLessThanOrEqualTo:o,"<=":o,isEqualTo:p,"==":p,isNotEqualTo:q,"!=":q,isIdenticalTo:r,"===":r,isNotIdenticalTo:s,"!==":s}),b.module("a8m.is-null",[]).filter("isNull",function(){return function(a){return e(a)}}),b.module("a8m.after-where",[]).filter("afterWhere",function(){return function(a,b){if(a=C(a)?d(a):a,!D(a)||y(b))return a;var c=a.map(function(a){return f(b,a)}).indexOf(!0);return a.slice(-1===c?0:c)}}),b.module("a8m.after",[]).filter("after",function(){return function(a,b){return a=C(a)?d(a):a,D(a)?a.slice(b):a}}),b.module("a8m.before-where",[]).filter("beforeWhere",function(){return function(a,b){if(a=C(a)?d(a):a,!D(a)||y(b))return a;var c=a.map(function(a){return f(b,a)}).indexOf(!0);return a.slice(0,-1===c?a.length:++c)}}),b.module("a8m.before",[]).filter("before",function(){return function(a,b){return a=C(a)?d(a):a,D(a)?a.slice(0,b?--b:b):a}}),b.module("a8m.chunk-by",[]).filter("chunkBy",[function(){function a(a,b){for(var c=[];a--;)c[a]=b;return c}return function(b,c,d){return D(b)?b.map(function(b,e,f){return e*=c,b=f.slice(e,e+c),!y(d)&&b.length<c?b.concat(a(c-b.length,d)):b}).slice(0,Math.ceil(b.length/c)):b}}]),b.module("a8m.concat",[]).filter("concat",[function(){return function(a,b){if(y(b))return a;if(D(a))return C(b)?a.concat(d(b)):a.concat(b);if(C(a)){var c=d(a);return C(b)?c.concat(d(b)):c.concat(b)}return a}}]),b.module("a8m.contains",[]).filter({contains:["$parse",t],some:["$parse",t]}),b.module("a8m.count-by",[]).filter("countBy",["$parse",function(a){return function(b,c){var e,f={},g=a(c);return b=C(b)?d(b):b,!D(b)||y(c)?b:(b.forEach(function(a){e=g(a),f[e]||(f[e]=0),f[e]++}),f)}}]),b.module("a8m.defaults",[]).filter("defaults",["$parse",function(a){return function(b,c){if(b=C(b)?d(b):b,!D(b)||!C(c))return b;var e=j(c);return b.forEach(function(b){e.forEach(function(d){var e=a(d),f=e.assign;y(e(b))&&f(b,e(c))})}),b}}]),b.module("a8m.every",[]).filter("every",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!(D(b)&&!y(c))||b.every(function(b){return C(b)||z(c)?a(c)(b):b===c})}}]),b.module("a8m.filter-by",[]).filter("filterBy",["$parse",function(a){return function(b,e,f){var g;return f=A(f)||B(f)?String(f).toLowerCase():c,b=C(b)?d(b):b,!D(b)||y(f)?b:b.filter(function(b){return e.some(function(c){if(~c.indexOf("+")){var d=c.replace(new RegExp("\\s","g"),"").split("+");g=d.reduce(function(c,d,e){return 1===e?a(c)(b)+" "+a(d)(b):c+" "+a(d)(b)})}else g=a(c)(b);return!(!A(g)&&!B(g))&&String(g).toLowerCase().contains(f)})})}}]),b.module("a8m.first",[]).filter("first",["$parse",function(a){return function(b){var e,f,g;return b=C(b)?d(b):b,D(b)?(g=Array.prototype.slice.call(arguments,1),e=B(g[0])?g[0]:1,f=B(g[0])?B(g[1])?c:g[1]:g[0],g.length?h(b,e,f?a(f):f):b[0]):b}}]),b.module("a8m.flatten",[]).filter("flatten",function(){return function(a,b){return b=b||!1,a=C(a)?d(a):a,D(a)?b?[].concat.apply([],a):u(a,0):a}}),b.module("a8m.fuzzy-by",[]).filter("fuzzyBy",["$parse",function(a){return function(b,c,e,f){var h,i,j=f||!1;return b=C(b)?d(b):b,!D(b)||y(c)||y(e)?b:(i=a(c),b.filter(function(a){return h=i(a),!!A(h)&&(h=j?h:h.toLowerCase(),e=j?e:e.toLowerCase(),!1!==g(h,e))}))}}]),b.module("a8m.fuzzy",[]).filter("fuzzy",function(){return function(a,b,c){function e(a,b){var c,d;return 0<Object.keys(a).filter(function(e){return c=a[e],!!d||!!A(c)&&(c=f?c:c.toLowerCase(),d=!1!==g(c,b))}).length}var f=c||!1;return a=C(a)?d(a):a,!D(a)||y(b)?a:(b=f?b:b.toLowerCase(),a.filter(function(a){return A(a)?(a=f?a:a.toLowerCase(),!1!==g(a,b)):!!C(a)&&e(a,b)}))}}),b.module("a8m.group-by",["a8m.filter-watcher"]).filter("groupBy",["$parse","filterWatcher",function(a,b){return function(c,d){function e(a,b){var c,d={};return E(a,function(a){c=b(a),d[c]||(d[c]=[]),d[c].push(a)}),d}if(!C(c)||y(d))return c;var f=a(d);return b.isMemoized("groupBy",arguments)||b.memoize("groupBy",arguments,this,e(c,f))}}]),b.module("a8m.is-empty",[]).filter("isEmpty",function(){return function(a){return C(a)?!d(a).length:!a.length}}),b.module("a8m.join",[]).filter("join",function(){return function(a,b){return y(a)||!D(a)?a:(y(b)&&(b=" "),a.join(b))}}),b.module("a8m.last",[]).filter("last",["$parse",function(a){return function(b){var e,f,g,i=G(b);return i=C(i)?d(i):i,D(i)?(g=Array.prototype.slice.call(arguments,1),e=B(g[0])?g[0]:1,f=B(g[0])?B(g[1])?c:g[1]:g[0],g.length?h(i.reverse(),e,f?a(f):f).reverse():i[i.length-1]):i}}]),b.module("a8m.map",[]).filter("map",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.map(function(b){return a(c)(b)})}}]),b.module("a8m.omit",[]).filter("omit",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.filter(function(b){return!a(c)(b)})}}]),b.module("a8m.pick",[]).filter("pick",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.filter(function(b){return a(c)(b)})}}]),b.module("a8m.range",[]).filter("range",function(){return function(a,b){for(var c=0;c<parseInt(b);c++)a.push(c);return a}}),b.module("a8m.remove-with",[]).filter("removeWith",function(){return function(a,b){return y(b)?a:(a=C(a)?d(a):a,a.filter(function(a){return!f(b,a)}))}}),b.module("a8m.remove",[]).filter("remove",function(){return function(a){a=C(a)?d(a):a;var b=Array.prototype.slice.call(arguments,1);return D(a)?a.filter(function(a){return!b.some(function(b){return H(b,a)})}):a}}),b.module("a8m.reverse",[]).filter("reverse",[function(){return function(a){return a=C(a)?d(a):a,A(a)?a.split("").reverse().join(""):D(a)?a.slice().reverse():a}}]),b.module("a8m.search-field",[]).filter("searchField",["$parse",function(a){return function(b){var c,e;b=C(b)?d(b):b;var f=Array.prototype.slice.call(arguments,1);return D(b)&&f.length?b.map(function(b){return e=f.map(function(d){return(c=a(d))(b)}).join(" "),F(b,{searchField:e})}):b}}]),b.module("a8m.to-array",[]).filter("toArray",function(){return function(a,b){return C(a)?b?Object.keys(a).map(function(b){return F(a[b],{$key:b})}):d(a):a}}),b.module("a8m.unique",[]).filter({unique:["$parse",v],uniq:["$parse",v]}),b.module("a8m.where",[]).filter("where",function(){return function(a,b){return y(b)?a:(a=C(a)?d(a):a,a.filter(function(a){return f(b,a)}))}}),b.module("a8m.xor",[]).filter("xor",["$parse",function(a){return function(b,c,e){function f(b,c){var d=a(e);return c.some(function(a){return e?H(d(a),d(b)):H(a,b)})}return e=e||!1,b=C(b)?d(b):b,c=C(c)?d(c):c,D(b)&&D(c)?b.concat(c).filter(function(a){return!(f(a,b)&&f(a,c))}):b}}]),b.module("a8m.math.byteFmt",["a8m.math"]).filter("byteFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1==0&&c>=0&&B(b)&&isFinite(b)?1024>b?i(b,c,a)+" B":1048576>b?i(b/1024,c,a)+" KB":1073741824>b?i(b/1048576,c,a)+" MB":i(b/1073741824,c,a)+" GB":"NaN"}}]),b.module("a8m.math.degrees",["a8m.math"]).filter("degrees",["$math",function(a){return function(b,c){if(B(c)&&isFinite(c)&&c%1==0&&c>=0&&B(b)&&isFinite(b)){var d=180*b/a.PI;return a.round(d*a.pow(10,c))/a.pow(10,c)}return"NaN"}}]),b.module("a8m.math.kbFmt",["a8m.math"]).filter("kbFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1==0&&c>=0&&B(b)&&isFinite(b)?1024>b?i(b,c,a)+" KB":1048576>b?i(b/1024,c,a)+" MB":i(b/1048576,c,a)+" GB":"NaN"}}]),b.module("a8m.math",[]).factory("$math",["$window",function(a){return a.Math}]),b.module("a8m.math.max",["a8m.math"]).filter("max",["$math","$parse",function(a,b){function c(c,d){var e=c.map(function(a){return b(d)(a)});return e.indexOf(a.max.apply(a,e))}return function(b,d){return D(b)?y(d)?a.max.apply(a,b):b[c(b,d)]:b}}]),b.module("a8m.math.min",["a8m.math"]).filter("min",["$math","$parse",function(a,b){function c(c,d){var e=c.map(function(a){return b(d)(a)});return e.indexOf(a.min.apply(a,e))}return function(b,d){return D(b)?y(d)?a.min.apply(a,b):b[c(b,d)]:b}}]),b.module("a8m.math.percent",["a8m.math"]).filter("percent",["$math","$window",function(a,b){return function(c,d,e){var f=A(c)?b.Number(c):c;return d=d||100,e=e||!1,!B(f)||b.isNaN(f)?c:e?a.round(f/d*100):f/d*100}}]),b.module("a8m.math.radians",["a8m.math"]).filter("radians",["$math",function(a){return function(b,c){if(B(c)&&isFinite(c)&&c%1==0&&c>=0&&B(b)&&isFinite(b)){var d=3.14159265359*b/180;return a.round(d*a.pow(10,c))/a.pow(10,c)}return"NaN"}}]),b.module("a8m.math.radix",[]).filter("radix",function(){return function(a,b){var c=/^[2-9]$|^[1-2]\d$|^3[0-6]$/;return B(a)&&c.test(b)?a.toString(b).toUpperCase():a}}),b.module("a8m.math.shortFmt",["a8m.math"]).filter("shortFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1==0&&c>=0&&B(b)&&isFinite(b)?1e3>b?b:1e6>b?i(b/1e3,c,a)+" K":1e9>b?i(b/1e6,c,a)+" M":i(b/1e9,c,a)+" B":"NaN"}}]),b.module("a8m.math.sum",[]).filter("sum",function(){return function(a,b){return D(a)?a.reduce(function(a,b){return a+b},b||0):a}}),b.module("a8m.ends-with",[]).filter("endsWith",function(){return function(a,b,c){var d,e=c||!1;return!A(a)||y(b)?a:(a=e?a:a.toLowerCase(),d=a.length-b.length,-1!==a.indexOf(e?b:b.toLowerCase(),d))}}),b.module("a8m.latinize",[]).filter("latinize",[function(){function a(a){return a.replace(/[^\u0000-\u007E]/g,function(a){return c[a]||a})}for(var b=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],c={},d=0;d<b.length;d++)for(var e=b[d].letters.split(""),f=0;f<e.length;f++)c[e[f]]=b[d].base;return function(b){return A(b)?a(b):b}}]),b.module("a8m.ltrim",[]).filter("ltrim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp("^"+c+"+"),""):a}}),b.module("a8m.match",[]).filter("match",function(){return function(a,b,c){var d=new RegExp(b,c);return A(a)?a.match(d):null}}),b.module("a8m.repeat",[]).filter("repeat",[function(){return function(a,b,c){var d=~~b;return A(a)&&d?w(a,--b,c||""):a}}]),b.module("a8m.rtrim",[]).filter("rtrim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp(c+"+$"),""):a}}),b.module("a8m.slugify",[]).filter("slugify",[function(){return function(a,b){var c=y(b)?"-":b;return A(a)?a.toLowerCase().replace(/\s+/g,c):a}}]),b.module("a8m.starts-with",[]).filter("startsWith",function(){return function(a,b,c){var d=c||!1;return!A(a)||y(b)?a:(a=d?a:a.toLowerCase(),!a.indexOf(d?b:b.toLowerCase()))}}),b.module("a8m.stringular",[]).filter("stringular",function(){return function(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,c){return y(b[c])?a:b[c]})}}),b.module("a8m.strip-tags",[]).filter("stripTags",function(){return function(a){return A(a)?a.replace(/<\S[^><]*>/g,""):a}}),b.module("a8m.test",[]).filter("test",function(){return function(a,b,c){var d=new RegExp(b,c);return A(a)?d.test(a):a}}),b.module("a8m.trim",[]).filter("trim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp("^"+c+"+|"+c+"+$","g"),""):a}}),b.module("a8m.truncate",[]).filter("truncate",function(){return function(a,b,c,d){return b=y(b)?a.length:b,d=d||!1,c=c||"",!A(a)||a.length<=b?a:a.substring(0,d?-1===a.indexOf(" ",b)?a.length:a.indexOf(" ",b):b)+c}}),b.module("a8m.ucfirst",[]).filter("ucfirst",[function(){return function(a){return A(a)?a.split(" ").map(function(a){return a.charAt(0).toUpperCase()+a.substring(1)}).join(" "):a}}]),b.module("a8m.uri-component-encode",[]).filter("uriComponentEncode",["$window",function(a){return function(b){return A(b)?a.encodeURIComponent(b):b}}]),b.module("a8m.uri-encode",[]).filter("uriEncode",["$window",function(a){return function(b){return A(b)?a.encodeURI(b):b}}]),b.module("a8m.wrap",[]).filter("wrap",function(){return function(a,b,c){return A(a)&&x(b)?[b,a,c||b].join(""):a}}),b.module("a8m.filter-watcher",[]).provider("filterWatcher",function(){this.$get=["$window","$rootScope",function(a,c){function d(a,c){return[a,b.toJson(c)].join("#").replace(/"/g,"")}function e(a){var b=a.targetScope.$id;E(l[b],function(a){delete j[a]}),delete l[b]}function f(){m(function(){c.$$phase||(j={})})}function g(a,b){var c=a.$id;return y(l[c])&&(a.$on("$destroy",e),l[c]=[]),l[c].push(b)}function h(a,b){var c=d(a,b);return j[c]}function i(a,b,c,e){var h=d(a,b);return j[h]=e,k(c)?g(c,h):f(),e}var j={},l={},m=a.setTimeout;return{isMemoized:h,memoize:i}}]}),b.module("angular.filter",["a8m.ucfirst","a8m.uri-encode","a8m.uri-component-encode","a8m.slugify","a8m.latinize","a8m.strip-tags","a8m.stringular","a8m.truncate","a8m.starts-with","a8m.ends-with","a8m.wrap","a8m.trim","a8m.ltrim","a8m.rtrim","a8m.repeat","a8m.test","a8m.match","a8m.to-array","a8m.concat","a8m.contains","a8m.unique","a8m.is-empty","a8m.after","a8m.after-where","a8m.before","a8m.before-where","a8m.defaults","a8m.where","a8m.reverse","a8m.remove","a8m.remove-with","a8m.group-by","a8m.count-by","a8m.chunk-by","a8m.search-field","a8m.fuzzy-by","a8m.fuzzy","a8m.omit","a8m.pick","a8m.every","a8m.filter-by","a8m.xor","a8m.map","a8m.first","a8m.last","a8m.flatten","a8m.join","a8m.range","a8m.math","a8m.math.max","a8m.math.min","a8m.math.percent","a8m.math.radix","a8m.math.sum","a8m.math.degrees","a8m.math.radians","a8m.math.byteFmt","a8m.math.kbFmt","a8m.math.shortFmt","a8m.angular","a8m.conditions","a8m.is-null","a8m.filter-watcher"])}(window,window.angular);var duScrollDefaultEasing=function(e){"use strict";return e<.5?Math.pow(2*e,2)/2:1-Math.pow(2*(1-e),2)/2},duScroll=angular.module("duScroll",["duScroll.scrollspy","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.spyContext","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollSpyWait",100).value("duScrollSpyRefreshInterval",0).value("duScrollGreedy",!1).value("duScrollOffset",0).value("duScrollEasing",duScrollDefaultEasing).value("duScrollCancelOnEvents","scroll mousedown mousewheel touchmove keydown").value("duScrollBottomSpy",!1).value("duScrollActiveClass","active");"undefined"!=typeof module&&module&&module.exports&&(module.exports=duScroll),angular.module("duScroll.scrollHelpers",["duScroll.requestAnimation"]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset","duScrollCancelOnEvents",function(e,t,n,r,o,l,u,i){"use strict";var c={},a=function(e){return"undefined"!=typeof HTMLDocument&&e instanceof HTMLDocument||e.nodeType&&e.nodeType===e.DOCUMENT_NODE},s=function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e.nodeType&&e.nodeType===e.ELEMENT_NODE},d=function(e){return s(e)||a(e)?e:e[0]};c.duScrollTo=function(t,n,r,o){var l;if(angular.isElement(t)?l=this.duScrollToElement:angular.isDefined(r)&&(l=this.duScrollToAnimated),l)return l.apply(this,arguments);var u=d(this);return a(u)?e.scrollTo(t,n):(u.scrollLeft=t,void(u.scrollTop=n))};var f,m;c.duScrollToAnimated=function(e,l,u,c){u&&!c&&(c=o);var a=this.duScrollLeft(),s=this.duScrollTop(),d=Math.round(e-a),p=Math.round(l-s),S=null,g=0,v=this,h=function(e){(!e||g&&e.which>0)&&(i&&v.unbind(i,h),n(f),m.reject(),f=null)};if(f&&h(),m=t.defer(),0===u||!d&&!p)return 0===u&&v.duScrollTo(e,l),m.resolve(),m.promise;var y=function(e){null===S&&(S=e),g=e-S;var t=g>=u?1:c(g/u);v.scrollTo(a+Math.ceil(d*t),s+Math.ceil(p*t)),t<1?f=r(y):(i&&v.unbind(i,h),f=null,m.resolve())};return v.duScrollTo(a,s),i&&v.bind(i,h),f=r(y),m.promise},c.duScrollToElement=function(e,t,n,r){var o=d(this);angular.isNumber(t)&&!isNaN(t)||(t=u);var l=this.duScrollTop()+d(e).getBoundingClientRect().top-t;return s(o)&&(l-=o.getBoundingClientRect().top),this.duScrollTo(0,l,n,r)},c.duScrollLeft=function(t,n,r){if(angular.isNumber(t))return this.duScrollTo(t,this.duScrollTop(),n,r);var o=d(this);return a(o)?e.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:o.scrollLeft},c.duScrollTop=function(t,n,r){if(angular.isNumber(t))return this.duScrollTo(this.duScrollLeft(),t,n,r);var o=d(this);return a(o)?e.scrollY||document.documentElement.scrollTop||document.body.scrollTop:o.scrollTop},c.duScrollToElementAnimated=function(e,t,n,r){return this.duScrollToElement(e,t,n||l,r)},c.duScrollTopAnimated=function(e,t,n){return this.duScrollTop(e,t||l,n)},c.duScrollLeftAnimated=function(e,t,n){return this.duScrollLeft(e,t||l,n)},angular.forEach(c,function(e,t){angular.element.prototype[t]=e;var n=t.replace(/^duScroll/,"scroll");angular.isUndefined(angular.element.prototype[n])&&(angular.element.prototype[n]=e)})}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function(e){"use strict";var t=["webkit","moz","o","ms"];return function(n,r){if(e[n])return e[n];for(var o,l=n.substr(0,1).toUpperCase()+n.substr(1),u=0;u<t.length;u++)if(o=t[u]+l,e[o])return e[o];return r}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(e,t){"use strict";var n=0;return e("requestAnimationFrame",function(e,r){var o=(new Date).getTime(),l=Math.max(0,16-(o-n)),u=t(function(){e(o+l)},l);return n=o+l,u})}]).factory("cancelAnimation",["polyfill","$timeout",function(e,t){"use strict";return e("cancelAnimationFrame",function(e){t.cancel(e)})}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","$timeout","$interval","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait","duScrollSpyRefreshInterval","duScrollBottomSpy","duScrollActiveClass",function(e,t,n,r,o,l,u,i,c,a,s){"use strict";var d=function(n){var l=!1,c=!1,d=function(){c=!1;var t,l=n.container,i=l[0],d=0;if("undefined"!=typeof HTMLElement&&i instanceof HTMLElement||i.nodeType&&i.nodeType===i.ELEMENT_NODE)d=i.getBoundingClientRect().top,t=Math.round(i.scrollTop+i.clientHeight)>=i.scrollHeight;else{var f=o[0].body.scrollHeight||o[0].documentElement.scrollHeight;t=Math.round(r.pageYOffset+r.innerHeight)>=f}var m,p,S,g,v,h,y=a&&t?"bottom":"top";for(g=n.spies,p=n.currentlyActive,S=void 0,m=0;m<g.length;m++)v=g[m],(h=v.getTargetPosition())&&v.$element&&(a&&t||h.top+v.offset-d<20&&(u||-1*h.top+d)<h.height)&&(!S||S[y]<h[y])&&(S={spy:v},S[y]=h[y]);S&&(S=S.spy),p===S||u&&!S||(p&&p.$element&&(p.$element.removeClass(s),e.$broadcast("duScrollspy:becameInactive",p.$element,angular.element(p.getTargetElement()))),S&&(S.$element.addClass(s),e.$broadcast("duScrollspy:becameActive",S.$element,angular.element(S.getTargetElement()))),n.currentlyActive=S)};return i?function(){l?c=!0:(d(),l=t(function(){l=!1,c&&d()},i,!1))}:d},f={},m=function(e){var t=e.$id,n={spies:[]};return n.handler=d(n),f[t]=n,e.$on("$destroy",function(){p(e)}),t},p=function(e){var t=e.$id,r=f[t],o=r.container;r.intervalPromise&&n.cancel(r.intervalPromise),o&&o.off("scroll",r.handler),delete f[t]},S=m(e),g=function(e){return f[e.$id]?f[e.$id]:e.$parent?g(e.$parent):f[S]},v=function(e){var t,n,r=e.$scope;if(r)return g(r);for(n in f)if(t=f[n],-1!==t.spies.indexOf(e))return t},h=function(e){for(;e.parentNode;)if((e=e.parentNode)===document)return!0;return!1};return{addSpy:function(e){var t=v(e);t&&(t.spies.push(e),t.container&&h(t.container)||(t.container&&t.container.off("scroll",t.handler),t.container=l.getContainer(e.$scope),c&&!t.intervalPromise&&(t.intervalPromise=n(t.handler,c,0,!1)),t.container.on("scroll",t.handler).triggerHandler("scroll")))},removeSpy:function(t){var n=v(t);t===n.currentlyActive&&(e.$broadcast("duScrollspy:becameInactive",n.currentlyActive.$element),n.currentlyActive=null);var r=n.spies.indexOf(t);-1!==r&&n.spies.splice(r,1),t.$element=null},createContext:m,destroyContext:p,getContextForScope:g}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function(e){"use strict";var t={},n=function(e,n){var r=e.$id;return t[r]=n,r},r=function(e){return t[e.$id]?e.$id:e.$parent?r(e.$parent):void 0};return{getContainerId:r,getContainer:function(n){var o=r(n);return o?t[o]:e},setContainer:n,removeContainer:function(e){var n=r(e);n&&delete t[n]}}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","duScrollOffset","scrollContainerAPI",function(e,t,n){"use strict";return{link:function(r,o,l){o.on("click",function(o){if(l.href&&-1!==l.href.indexOf("#")||""!==l.duSmoothScroll){var u=l.href?l.href.replace(/.*(?=#[^\s]+$)/,"").substring(1):l.duSmoothScroll,i=document.getElementById(u)||document.getElementsByName(u)[0];if(i&&i.getBoundingClientRect){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault();var c=l.offset?parseInt(l.offset,10):t,a=l.duration?parseInt(l.duration,10):e;n.getContainer(r).duScrollToElement(angular.element(i),isNaN(c)?0:c,isNaN(a)?0:a)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(e){"use strict";return{restrict:"A",scope:!0,compile:function(t,n,r){return{pre:function(t,n,r,o){e.createContext(t)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(e){"use strict";return{restrict:"A",scope:!0,compile:function(t,n,r){return{pre:function(t,n,r,o){r.$observe("duScrollContainer",function(r){angular.isString(r)&&(r=document.getElementById(r)),r=angular.isElement(r)?angular.element(r):n,e.setContainer(t,r),t.$on("$destroy",function(){e.removeContainer(t)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","duScrollOffset","$timeout","$rootScope",function(e,t,n,r){"use strict";var o=function(e,t,n,r){angular.isElement(e)?this.target=e:angular.isString(e)&&(this.targetId=e),this.$scope=t,this.$element=n,this.offset=r};return o.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)||document.getElementsByName(this.targetId)[0]),this.target},o.prototype.getTargetPosition=function(){var e=this.getTargetElement();if(e)return e.getBoundingClientRect()},o.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function(l,u,i){var c,a=i.ngHref||i.href;if(a&&-1!==a.indexOf("#")?c=a.replace(/.*(?=#[^\s]+$)/,"").substring(1):i.duScrollspy?c=i.duScrollspy:i.duSmoothScroll&&(c=i.duSmoothScroll),c){var s=n(function(){var n=new o(c,l,u,-(i.offset?parseInt(i.offset,10):t));e.addSpy(n),l.$on("$locationChangeSuccess",n.flushTargetCache.bind(n));var a=r.$on("$stateChangeSuccess",n.flushTargetCache.bind(n));l.$on("$destroy",function(){e.removeSpy(n),a()})},0,!1);l.$on("$destroy",function(){n.cancel(s)})}}}}]),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.timepicker"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/timepicker/timepicker.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){k?(k=!1,i(),c.css({height:0})):(c.css({height:c[0].scrollHeight+"px"}),c[0].offsetWidth,c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i))}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){(angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers)&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a)}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,
require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b,this.close=a.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(a){return{require:"alert",link:function(b,c,d,e){a(function(){e.close()},parseInt(d.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(a,b){function c(a){var c=[],d=a.split("");return angular.forEach(e,function(b,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;h>g;g++)d[g]="",a[g]="$";a=a.join(""),c.push({index:f,apply:b.apply})}}),{regex:new RegExp("^"+d.join("")+"$"),map:b(c,"index")}}function d(a,b,c){return 1===b&&c>28?29===c&&(a%4==0&&a%100!=0||a%400==0):3!==b&&5!==b&&8!==b&&10!==b||31>c}this.parsers={};var e={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b)}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(b,e){if(!angular.isString(b)||!e)return b;e=a.DATETIME_FORMATS[e]||e,this.parsers[e]||(this.parsers[e]=c(e));var f=this.parsers[e],g=f.regex,h=f.map,i=b.match(g);if(i&&i.length){for(var j,k={year:1900,month:0,date:1,hours:0},l=1,m=i.length;m>l;l++){var n=h[l-1];n.apply&&n.apply.call(k,i[l])}return d(k.year,k.month,k.date)&&(j=new Date(k.year,k.month,k.date,k.hours)),j}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(c,e){i[c]=angular.isDefined(b[c])?8>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):h[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=h[d]?new Date(h[d]):null}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(b.initDate)?a.$parent.$eval(b.initDate):new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)&&(a.activeDateId=b.uid,!0)},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$modelValue){var a=new Date(j.$modelValue),b=!isNaN(a);b?this.activeDate=a:f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),j.$setValidity("date",b)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$modelValue?new Date(j.$modelValue):null;j.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$modelValue?new Date(j.$modelValue):null;return{date:a,label:g(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$modelValue?new Date(j.$modelValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){e(function(){i.element[0].focus()},0,!1)};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!=0||a%100==0&&a%400!=0?i[b]:29}function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(1-j);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=h(b.rows[0][0].date),p=b.rows.length;b.weekNumbers.push(o++)<p;);}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a){var b=e.activeDate.getDate();if("left"===a)b-=1;else if("up"===a)b-=7;else if("right"===a)b+=1;else if("down"===a)b+=7;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(c,1),b=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),b)}else"home"===a?b=1:"end"===a&&(b=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(b)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;12>f;f++)c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{uid:b.uniqueId+"-"+f});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a){var b=e.activeDate.getMonth();if("left"===a)b-=1;else if("up"===a)b-=3;else if("right"===a)b+=1;else if("down"===a)b+=3;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(c)}else"home"===a?b=0:"end"===a&&(b=11);e.activeDate.setMonth(b)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());f>c;c++)b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a){var b=d.activeDate.getFullYear();"left"===a?b-=1:"up"===a?b-=5:"right"===a?b+=1:"down"===a?b+=5:"pageup"===a||"pagedown"===a?b+=("pageup"===a?-1:1)*d.step.years:"home"===a?b=e(d.activeDate.getFullYear()):"end"===a&&(b=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(b)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function m(a){if(a){if(angular.isDate(a)&&!isNaN(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=f.parse(a,n)||new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}var n,o=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,p=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.getText=function(a){return h[a+"Text"]||g[a+"Text"]},j.$observe("datepickerPopup",function(a){n=a||g.datepickerPopup,k.$render()});var q=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");q.attr({"ng-model":"date","ng-change":"dateSelection()"});var r=angular.element(q.children()[0]);j.datepickerOptions&&angular.forEach(h.$parent.$eval(j.datepickerOptions),function(a,b){r.attr(l(b),a)}),h.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(a){if(j[a]){var c=b(j[a]);if(h.$parent.$watch(c,function(b){h.watchData[a]=b}),r.attr(l(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;h.$watch("watchData."+a,function(a,b){a!==b&&d(h.$parent,a)})}}}),j.dateDisabled&&r.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),k.$parsers.unshift(m),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a),k.$setViewValue(h.date),k.$render(),o&&(h.isOpen=!1,i[0].focus())},i.bind("input change keyup",function(){h.$apply(function(){h.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,n):"";i.val(a),h.date=m(k.$modelValue)};var s=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1})},t=function(a){h.keydown(a)};i.bind("keydown",t),h.keydown=function(a){27===a.which?(a.preventDefault(),a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0)},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=p?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",s)):c.unbind("click",s)}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(k.$modelValue)?(a=new Date(k.$modelValue),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}h.dateSelection(a)},h.close=function(){h.isOpen=!1,i[0].focus()};var u=a(q)(h);q.remove(),p?c.find("body").append(u):i.after(u),h.$on("$destroy",function(){u.remove(),i.unbind("keydown",t),c.unbind("click",s)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(f,g){e=f,this.config=g,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=g.itemsPerPage},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b){a.page!==b&&b>0&&b<=a.totalPages&&(e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages},a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),(e=d+k-1)>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g;return a.replace(b,function(a,b){return(b?"-":"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(e,f,g,h,i,j){return function(e,k,l){function m(a){var b=a||n.trigger||l;return{show:b,hide:c[b]||b}}var n=angular.extend({},b,d),o=a(e),p=j.startSymbol(),q=j.endSymbol(),r="<div "+o+'-popup title="'+p+"title"+q+'" content="'+p+"content"+q+'" placement="'+p+"placement"+q+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(){var a=f(r);return function(b,c,d){function f(){D.isOpen?l():j()}function j(){(!C||b.$eval(d[k+"Enable"]))&&(s(),D.popupDelay?z||(z=g(o,D.popupDelay,!1),z.then(function(a){a()})):o()())}function l(){b.$apply(function(){p()})}function o(){return z=null,y&&(g.cancel(y),y=null),D.content?(q(),w.css({top:0,left:0,display:"block"}),D.$digest(),E(),D.isOpen=!0,D.$digest(),E):angular.noop}function p(){D.isOpen=!1,g.cancel(z),z=null,D.animation?y||(y=g(r,500)):r()}function q(){w&&r(),x=D.$new(),w=a(x,function(a){A?h.find("body").append(a):c.after(a)})}function r(){y=null,w&&(w.remove(),w=null),x&&(x.$destroy(),x=null)}function s(){t(),u()}function t(){var a=d[k+"Placement"];D.placement=angular.isDefined(a)?a:n.placement}function u(){var a=d[k+"PopupDelay"],b=parseInt(a,10);D.popupDelay=isNaN(b)?n.popupDelay:b}function v(){var a=d[k+"Trigger"];F(),B=m(a),B.show===B.hide?c.bind(B.show,f):(c.bind(B.show,j),c.bind(B.hide,l))}var w,x,y,z,A=!!angular.isDefined(n.appendToBody)&&n.appendToBody,B=m(void 0),C=angular.isDefined(d[k+"Enable"]),D=b.$new(!0),E=function(){var a=i.positionElements(c,w,D.placement,A);a.top+="px",a.left+="px",w.css(a)};D.isOpen=!1,d.$observe(e,function(a){D.content=a,!a&&D.isOpen&&p()}),d.$observe(k+"Title",function(a){D.title=a});var F=function(){c.unbind(B.show,j),c.unbind(B.hide,l)};v();var G=b.$eval(d[k+"Animation"]);D.animation=angular.isDefined(G)?!!G:n.animation;var H=b.$eval(d[k+"AppendToBody"]);A=angular.isDefined(H)?H:A,A&&b.$on("$locationChangeSuccess",function(){D.isOpen&&p()}),b.$on("$destroy",function(){g.cancel(y),g.cancel(z),F(),r(),D=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10);return(a.showMeridian?b>0&&13>b:b>=0&&24>b)?(a.showMeridian&&(12===b&&(b=0),a.meridian===p[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function j(a){k(),o.$setViewValue(new Date(n)),l(a)}function k(){o.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=n.getHours(),d=n.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),a.minutes="m"===b?d:i(d),a.meridian=n.getHours()<12?p[0]:p[1]}function m(a){var b=new Date(n.getTime()+6e4*a);n.setHours(b.getHours(),b.getMinutes()),j()}var n=new Date,o={$setViewValue:angular.noop},p=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){o=c,o.$render=this.render;var e=d.eq(0),g=d.eq(1);(angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel)&&this.setupMousewheelEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var q=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){q=parseInt(a,10)});var r=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){r=parseInt(a,10)}),a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,o.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(n.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g();angular.isDefined(a)?(n.setHours(a),j("h")):d(!0)},b.bind("blur",function(){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h();angular.isDefined(a)?(n.setMinutes(a),j("m")):d(void 0,!0)},c.bind("blur",function(){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var a=o.$modelValue?new Date(o.$modelValue):null;isNaN(a)?(o.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(n=a),k(),l())},a.incrementHours=function(){m(60*q)},a.decrementHours=function(){m(60*-q)},a.incrementMinutes=function(){m(r)},a.decrementMinutes=function(){m(-r)},a.toggleMeridian=function(){m(720*(n.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n\t  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n\t<li ng-transclude></li>\n\t<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n\t\t<span class="btn-group pull-left">\n\t\t\t<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n\t\t\t<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n\t\t</span>\n\t\t<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n\t</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){
a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n\t<tbody>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n\t\t\t<td ng-show="showMeridian"></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n\t\t\t\t<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t</td>\n\t\t\t<td>:</td>\n\t\t\t<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n\t\t\t\t<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t</td>\n\t\t\t<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n\t\t</tr>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n\t\t\t<td ng-show="showMeridian"></td>\n\t\t</tr>\n\t</tbody>\n</table>\n')}]),angular.module("ualib.ui.templates",["page/templates/page-section.tpl.html","page/templates/page.tpl.html","tabs/templates/tab.tpl.html","tabs/templates/tabset.tpl.html"]),angular.module("page/templates/page-section.tpl.html",[]).run(["$templateCache",function(a){a.put("page/templates/page-section.tpl.html",'<div class="page-slice" id="{{section}}" ng-transclude>\n</div>')}]),angular.module("page/templates/page.tpl.html",[]).run(["$templateCache",function(a){a.put("page/templates/page.tpl.html",'<div class="row" ng-cloak>\n    <div class="col-md-9" ng-transclude></div>\n  <div class="col-md-3 page-section-menu">\n    <div ui-scrollfix bound-by-parent class="hidden-sm hidden-xs">\n      <ul class="nav nav-pills nav-stacked">\n        <li ng-repeat="section in menu" du-scrollspy="{{section.link}}">\n          <a ng-href="#{{section.link}}" du-smooth-scroll>\n            <span class="fa fa-fw" ng-class="section.icon" ng-if="section.icon"></span>\n            {{section.title}}\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>')}]),angular.module("tabs/templates/tab.tpl.html",[]).run(["$templateCache",function(a){a.put("tabs/templates/tab.tpl.html",'<li ng-class="{active: active, disabled: disabled}">\n    <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>')}]),angular.module("tabs/templates/tabset.tpl.html",[]).run(["$templateCache",function(a){a.put("tabs/templates/tabset.tpl.html",'<div ng-class="{\'row tabset-vertical\': vertical}">\n    <div ng-class="tabClass">\n        <ul class="nav nav-{{type || (vertical ? \'pills\' : \'tabs\')}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n    </div>\n    <div class="tab-content" ng-class="contentClass">\n        <div class="tab-pane"\n             ng-repeat="tab in tabs"\n             ng-class="{active: tab.active}"\n             tab-content-transclude="tab">\n        </div>\n    </div>\n</div>')}]),angular.module("ualib.ui",["ui.bootstrap","duScroll","ualib.ui.templates"]).value("duScrollBottomSpy",!0).value("duScrollOffset",30),angular.module("ualib.ui").directive("dropdownSticky",[function(){return{restrict:"AC",link:function(a,b){b.bind("click",function(a){a.stopPropagation()}),a.$on("$destroy",function(){b.unbind("click")})}}}]),angular.module("ualib.ui").constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(a){var b=null;this.open=function(e){b||(a.bind("click",c),a.bind("keydown",d)),b&&b!==e&&(b.isOpen=!1),b=e},this.close=function(e){b===e&&(b=null,a.unbind("click",c),a.unbind("keydown",d))};var c=function(a){if(b){var c=b.getToggleElement();a&&c&&c[0].contains(a.target)||b.$apply(function(){b.isOpen=!1})}},d=function(a){27===a.which&&(b.focusToggleElement(),c())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(a,b,c,d,e,f){var g,h=this,i=a.$new(),j=d.openClass,k=angular.noop,l=b.onToggle?c(b.onToggle):angular.noop;this.init=function(d){h.$element=d,b.isOpen&&(g=c(b.isOpen),k=g.assign,a.$watch(g,function(a){i.isOpen=!!a}))},this.toggle=function(a){return i.isOpen=arguments.length?!!a:!i.isOpen},this.isOpen=function(){return i.isOpen},i.getToggleElement=function(){return h.toggleElement},i.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},i.$watch("isOpen",function(b,c){f[b?"addClass":"removeClass"](h.$element,j),b?(i.focusToggleElement(),e.open(i)):e.close(i),k(a,b),angular.isDefined(b)&&b!==c&&l(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){i.isOpen=!1}),a.$on("$destroy",function(){i.$destroy()})}]).directive("dropdown",function(){return{restrict:"AC",controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownToggle",function(){return{restrict:"AC",require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ualib.ui").filter("highlight",[function(){return function(a,b,c){if(b&&a){var d=/(<\S[^><]*>)/g,e=c?b:[].concat.apply([],b.split('"').map(function(a,b){return b%2?a:a.split(" ")})).filter(Boolean).join("|"),f=new RegExp("("+e+")","gi");a=a.split(d).map(function(a){return a.match(d)?a:a.replace(f,'<span class="mark">$1</span>')}).join("")}return a}}]),angular.module("ualib.ui").run(["$rootScope","$document","$location","$timeout",function(a,b,c,d){window.history&&history.replaceState&&(a.$on("PageWithMenu:loaded",function(){var a=c.hash()||c.path().split("/")[1];a&&d(function(){b.scrollToElement(angular.element(document.getElementById(a)))},200)}),a.$on("duScrollspy:becameActive",function(b,d){var e=d.find("a").eq(0).prop("hash").substr(1);e&&(c.hash()?c.hash(e):c.path(e),c.replace(),a.$apply())}))}]).directive("pageWithMenu",[function(){return{restrict:"C",transclude:!0,replace:!0,templateUrl:"page/templates/page.tpl.html",controller:["$scope","$element",function(a,b){var c=a.menu=[];this.addSection=function(a){c.push(a)},b.addClass("loaded")}]}}]).directive("pageSection",["$rootScope",function(a){return{require:"^pageWithMenu",restrict:"EC",transclude:!0,replace:!0,scope:{title:"@",icon:"@"},templateUrl:"page/templates/page-section.tpl.html",link:function(b,c,d,e){var f=c.find("h2")[0];if(f){var g=angular.isDefined(b.title)?b.title:f.textContent,h=b.icon||!1;b.section=g.replace(/[\s\-\\/"'&]+/g,"_"),e.addSection({title:g,icon:h,link:b.section})}a.$broadcast("PageWithMenu:loaded")}}}]),angular.module("ualib.ui").directive("uiScrollfix",["$window",function(a){"use strict";function b(){return angular.isDefined(a.pageYOffset)?a.pageYOffset:(document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body).scrollTop}function c(a){for(var b=a.offsetLeft,c=a.offsetTop;a=a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop;return{left:b,top:c}}return{restrict:"AC",require:"^?uiScrollfixTarget",link:function(d,e,f,g){function h(){var a=i?f.uiScrollfix:c(e[0]).top+j,d=g?n[0].scrollTop:b();if(null!==o&&(o[0].offsetHeight+c(o[0]).top<=d+e[0].offsetHeight+l?e.addClass("scrollfix-bottom-limit"):e.hasClass("scrollfix-bottom-limit")&&e.removeClass("scrollfix-bottom-limit")),!e.hasClass("scrollfix")&&d>a){if(!m){var h=e[0].offsetWidth;e.css("width",h+"px")}e.addClass("scrollfix"),k=a,l=e[0].offsetTop}else e.hasClass("scrollfix")&&k>d&&(e.removeClass("scrollfix"),m||e.css("width","auto"),l=0)}var i=!0,j=-80,k=0,l=0,m=f.hasOwnProperty("uiScrollfixFluidWidth"),n=g&&g.$element||angular.element(a),o=angular.isDefined(f.boundByParent)?e.parent():null;f.uiScrollfix?"string"==typeof f.uiScrollfix&&("-"===f.uiScrollfix.charAt(0)?(i=!1,j=-parseFloat(f.uiScrollfix.substr(1))):"+"===f.uiScrollfix.charAt(0)&&(i=!1,j=parseFloat(f.uiScrollfix.substr(1)))):i=!1,k=i?f.uiScrollfix:c(e[0]).top+j,n.on("scroll",h),d.$on("$destroy",function(){n.off("scroll",h)})}}}]).directive("uiScrollfixTarget",[function(){"use strict";return{controller:["$element",function(a){this.$element=a}]}}]),angular.module("ualib.ui").controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length&&!1!==a.active?a.active=!0:a.active?b.select(a):a.active=!1},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@",tabClass:"@",contentClass:"@"},controller:"TabsetController",templateUrl:"tabs/templates/tabset.tpl.html",link:function(a,b,c){a.vertical=!!angular.isDefined(c.vertical)&&a.$parent.$eval(c.vertical),a.justified=!!angular.isDefined(c.justified)&&a.$parent.$eval(c.justified)}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"tabs/templates/tab.tpl.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:[function(){}],compile:function(b,c,d){return function(b,c,e,f){b.$watch("active",function(a){a&&f.select(b)}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("databases.templates",["databases/databases-list.tpl.html"]),angular.module("databases/databases-list.tpl.html",[]).run(["$templateCache",function(a){a.put("databases/databases-list.tpl.html",'<div class="jumbotron-header">\n    <div class="jumbotron">\n        <div class="container">\n            <div class="row">\n                <div class="col-sm-12">\n                    <ol class="breadcrumb" typeof="BreadcrumbList" vocab="http://schema.org/">\n                        <li><a title="Go to The University of Alabama Libraries." href="/#/home" class="home">The University of Alabama Libraries</a></li>\n                        <li><a title="Go to News." href="/#/databases" class="post post-page">Databases</a></li>\n                    </ol>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-md-7">\n                    <h1>Databases</h1>\n                </div>\n                <div class="hidden-xs col-md-5">\n                    <div class="well">\n                        <p class="lead">Check out our database trials and tell us what you think!</p>\n                        <a class="btn btn-primary" href="/research-tools/e-resources/electronic-resource-trials/" title="database trials">See Trials <span class="fa fa-fw fa-eye"></span></span></a>\n                        <a class="btn btn-default" href="/forms/electronic-resource-trial-evaluation-form/" title="database trials evaluation form">Evaluate <span class="fa fa-fw fa-check-square-o"></span></span></a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="container">\n    <div class="row">\n        <div class="col-md-12">\n            <div class="alert alert-warning" role="alert"> <span class="fa fa-exclamation-triangle"></span> You have arrived at our legacy databases page, which is no longer being updated. Please visit our <a href="http://guides.lib.ua.edu/az.php">new databases page</a> and make a note if you are linking to us from off-site, or have this location bookmarked.</div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-sm-3 col-sm-push-9">\n            <form class="facets-form">\n                <div class="form-group">\n                <span class="page-header">\n                    <h4>Filter Databases By</h4>\n                </span>\n                </div>\n                <div class="form-group">\n                    <input type="text" class="form-control" ng-model="db.search" placeholder="Keyword search">\n                </div>\n\n                <div class="form-group hidden-xs">\n                    <h5>Title starts with</h5>\n                    <div class="facet-group alphanum-group">\n                        <div class="btn-group">\n                            <label class="btn btn-default" ng-repeat="na in numAlpha" ng-model="db.startsWith" btn-radio="\'{{na}}\'" ng-disabled="startsWithDisabled[na]" uncheckable>{{na}}</label>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group hidden-xs">\n                    <h5>Subjects</h5>\n                    <div class="facet-group">\n                        <div class="radio" ng-class="{\'disabled\': subj.disabled}" ng-repeat="subj in subjects">\n                            <label>\n                                <input type="checkbox" ng-model="db.subjects[subj.subject]" ng-disabled="subj.disabled">\n                                {{subj.subject}} ({{subj.total}})\n                            </label>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group hidden-xs">\n                    <h5>Types</h5>\n                    <div class="facet-group">\n                        <div class="radio" ng-class="{\'disabled\': type.disabled}" ng-repeat="type in types">\n                            <label>\n                                <input type="checkbox" ng-model="db.types[type.type]"  ng-disabled="type.disabled">\n                                {{type.type}} ({{type.total}})\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <button type="button" class="btn btn-block btn-primary" ng-click="resetFilters()"><span class="fa fa-fw fa-refresh"></span> Reset filters</button>\n                </div>\n            </form>\n        </div>\n        <div class="col-sm-9 col-sm-pull-3 databases-list-container">\n            <p>\n            <h4 class="text-right">Showing {{pager.firstItem}} - {{pager.lastItem}} of {{pager.totalItems}} results</h4>\n            <div ng-if="!!activeFilters.startsWith || activeFilters.subjects || activeFilters.types">\n\n                <ol class="breadcrumb facetcrumb">\n                    <li ng-if="!!activeFilters.startsWith"><strong>Starts with:</strong> <button type="button" class="btn btn-default" ng-click="db.startsWith = \'\'">"{{db.startsWith}}" <span class="text-muted" aria-hidden="true">&times;</span></button></li>\n                    <li ng-if="activeFilters.subjects"><strong>Subjects:</strong> <button type="button" class="btn btn-default" ng-click="db.subjects[subject] = false" ng-repeat="(subject, key) in db.subjects">{{subject}} <span class="text-muted" aria-hidden="true">&times;</span></button></li>\n                    <li ng-if="activeFilters.types"><strong>Types:</strong> <button type="button" class="btn btn-default" ng-click="db.types[type] = false" ng-repeat="(type, key) in db.types">{{type}} <span class="text-muted" aria-hidden="true">&times;</span></button></li>\n                    <li class="pull-right"><button type="button" class="btn btn-primary btn-small reset-btn" title="Reset filters" ng-click="resetFilters()"><i class="fa fa-refresh"></i></button></li>\n                </ol>\n            </div>\n\n\n            </p>\n\n            <div class="text-center">\n                <pagination class="pagination-sm" ng-model="pager.page" total-items="pager.totalItems" max-size="pager.maxSize" boundary-links="true" rotate="false" items-per-page="pager.perPage" ng-change="pageChange()" ng-if="pager.totalItems > pager.perPage"></pagination>\n            </div>\n\n            <div class="media animate-repeat" ng-repeat="item in filteredDB | after:(pager.page-1)*pager.perPage | limitTo:20">\n                <div class="media-body">\n\n                    <h4 class="media-heading">\n                        <a ng-href="{{item.url}}" title="{{item.title}}" ng-bind-html="item.title | highlight:db.search"></a>\n                        \x3c!--<small ng-if="item.presentedBy">({{item.presentedBy}})</small>--\x3e\n                        <small ng-bind-html="item.coverage | highlight:db.search"></small>\n\n                        <small class="pull-right">\n                            <span class="label label-success" ng-if="item.hasFullText == \'A\'">All Full Text</span>\n                            <span class="label label-info" ng-if="item.hasFullText == \'P\'">Primarily Full Text</span>\n                            <span class="label label-warning" ng-if="item.hasFullText == \'S\'">Some Full Text</span>\n                            <span class="label label-danger" ng-if="item.hasFullText == \'N\'">No Full Text</span>\n                        </small>\n                    </h4>\n\n                    <p class="text-justify" ng-bind-html="item.description | highlight:db.search"></p>\n\n                    <div ng-if="item.location">\n                        <strong>Access:</strong> {{item.location}}\n                    </div>\n                    <div class="databases-details" ng-if="(item.subjects | where:{type:1}).length > 0">\n                        <strong>Primary subjects: </strong>\n                        <span ng-repeat="subj in item.subjects | where:{type:1}" ng-bind-html="subj.subject | highlight:db.search"></span>\n                    </div>\n                    <div class="databases-details" ng-if="item.types">\n                        <strong>Types of material: </strong>\n                        <span ng-repeat="type in item.types" ng-bind-html="type.type | highlight:db.search"></span>\n                    </div>\n                    <div class="databases-details" ng-if="item.vendor">\n                        <strong>Vendor: </strong>\n                        <span ng-bind-html="item.vendor | highlight:db.search"></span>\n                    </div>\n                    <div class="scout-coverage">\n                        <strong>Scout coverage: </strong>\n                    <span class="fa text-info" ng-class="{\'fa-circle\': item.notInEDS == \'Y\', \'fa-adjust\': item.notInEDS == \'P\', \'fa-circle-o\': !item.notInEDS}">\n                    </span>\n                        <span ng-if="item.notInEDS == \'Y\'">Full</span>\n                        <span  ng-if="item.notInEDS == \'P\'">Partial</span>\n                        <span  ng-if="!item.notInEDS">Not in Scout</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class="text-center">\n                <pagination class="pagination-sm" ng-model="pager.page" total-items="pager.totalItems" max-size="pager.maxSize" boundary-links="true" rotate="false" items-per-page="pager.perPage" ng-change="pageChange()" ng-if="pager.totalItems > pager.perPage"></pagination>\n            </div>\n\n            <div class="alert alert-warning text-center" role="alert" ng-show="pager.totalItems < 1">\n                <h2>No results found <span ng-if="db.search"> for "{{db.search}}"</span></h2>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("ualib.databases",["ngRoute","ngResource","ngAnimate","ngSanitize","ui.bootstrap","angular.filter","duScroll","ualib.ui","databases.templates"]).constant("DB_PROXY_PREPEND_URL","http://libdata.lib.ua.edu/login?url="),angular.module("ualib.databases").factory("databasesFactory",["$resource","$http","$filter","DB_PROXY_PREPEND_URL",function(a,b,c,d){function e(a,b){return a=angular.isArray(a)?a:[a],a.concat(b)}return a("//www.lib.ua.edu/databases/api/:db",{db:"all"},{get:{cache:!0,method:"GET",transformResponse:e(b.defaults.transformResponse,function(a){var b=angular.fromJson(a),e=c("orderBy")(b.databases,"title");return angular.forEach(e,function(a,b){var c;switch(e[b].location){case"UA":c="On campus only";break;case"UA, Remote":c="myBama login required off campus";break;case"www":case"WWW":c=!1;break;default:c=e[b].location}"1"==e[b].auth&&(e[b].url=d+e[b].url),e[b].access=c,e[b].position=b,e[b].inScout="Y"===e[b].notInEDS}),b.databases=e,b})}})}]),angular.module("ualib.databases").config(["$routeProvider",function(a){a.when("/databases",{reloadOnSearch:!1,resolve:{databases:["databasesFactory",function(a){return a.get({db:"active"}).$promise.then(function(a){return a},function(a,b,c,d){console.log("ERROR: databases"),console.log({data:a,status:b,headers:c,config:d})})}]},templateUrl:"databases/databases-list.tpl.html",controller:"DatabasesListCtrl"})}]).controller("DatabasesListCtrl",["$scope","databases","$filter","$location","$document",function(a,b,c,d,e){function f(a,b){if(b){b=(""+b).toLowerCase();var c=[].concat.apply([],b.split('"').map(function(a,b){return b%2?a:a.split(" ")})).filter(Boolean);return c.filter(function(b){return(""+a).toLowerCase().indexOf(b)>-1}).length===c.length}return!0}function g(){a.pager.totalItems=a.filteredDB.length;var b=Math.floor(a.pager.totalItems/a.pager.maxSize);b<a.pager.page&&(a.pager.page=b||1),a.pager.firstItem=(a.pager.page-1)*a.pager.perPage+1,a.pager.lastItem=Math.min(a.pager.totalItems,a.pager.page*a.pager.perPage)}function h(b){var c=Object.keys(a.db.subjects).filter(function(b){return a.db.subjects[b]});return b.subjects.filter(function(b){return a.db.subjects[b.subject]}).length===c.length}function i(b){var c=Object.keys(a.db.types).filter(function(b){return a.db.types[b]});return b.types.filter(function(b){return a.db.types[b.type]}).length===c.length}function j(b){function c(a){-1==e.indexOf(a.sid)?(e.push(a.sid),f[a.sid]=1):f[a.sid]++}function d(a){-1==g.indexOf(a.tid)?(g.push(a.tid),h[a.tid]=1):h[a.tid]++}for(var e=[],f={},g=[],h={},i=0,j=b.length;j>i;i++)b[i].subjects.map(c),b[i].types.map(d);a.subjects.map(function(a){var b=a;return b.disabled=-1==e.indexOf(b.sid),b.total=f[a.sid]||0,b}),a.types.map(function(a){var b=a;return b.disabled=-1==g.indexOf(b.tid),b.total=h[a.tid]||0,b})}function k(b){a.startsWithDisabled={},a.numAlpha.map(function(d){for(var e=-1==d.indexOf("-")?"^"+d+".+$":"^["+d+"].+$",f=0,g=b.length;g>f;f++)if(c("test")(b[f].title,e,"i"))return;a.startsWithDisabled[d]=!0})}function l(a,b){return a.subjects.filter(function(a){return 1===parseInt(a.type)&&b[a.subject]}).length}function m(a){angular.forEach(a,function(a,b){angular.isDefined(a)&&""!==a?angular.isObject(a)?(a=Object.keys(a).filter(function(b){return a[b]}).join(","),a.length>0?d.search(b,a):d.search(b,null)):d.search(b,a):d.search(b,null)})}function n(){var b=d.search(),c={};angular.copy(a.db,c),a.activeFilters=b,b.page&&(a.pager.page=b.page),angular.forEach(c,function(a,d){if(angular.isDefined(b[d]))if("subjects"==d||"types"==d){var e={};b[d].split(",").forEach(function(a){e[a]=!0}),c[d]=e}else c[d]=b[d];else c[d]=angular.isObject(a)?{}:""}),a.db=c}var o=[];a.numAlpha="abcdefghijklmnopqrstuvwxyz".toUpperCase().split(""),a.numAlpha.unshift("0-9"),b.$promise.then(function(b){o=b.databases,a.subjects=b.subjects,a.types=b.types,a.resetFilters(),n(),a.totalItems=b.totalRecords,k(o),j(o)}),a.$on("$locationChangeSuccess",function(){n()});var p=a.$watch("db",function(b,d){var e=o;if(e=c("filter")(e,h),e=c("filter")(e,i),e=c("filter")(e,b.search,f),b.startsWith){var k=-1==b.startsWith.indexOf("-")?"^"+b.startsWith+".+$":"^["+b.startsWith+"].+$";e=c("filter")(e,function(a){return c("test")(a.title,k,"i")})}e.sort(function(a,c){var d=l(a,b.subjects),e=l(c,b.subjects);return d===e?a.position-c.position:d>e?-1:1}),a.filteredDB=e,g();var n=angular.extend({},b);j(e),m(n)},!0);a.resetFilters=function(){a.db={subjects:{},types:{},search:"",startsWith:""},a.pager={page:1,perPage:20,maxSize:10,totalItems:0}},a.pageChange=function(){g(),m({page:a.pager.page}),e.duScrollTo(0,30,500,function(a){return--a*a*a+1})},a.$on("$destroy",function(){p()})}]),angular.module("ui.tinymce",[]).value("uiTinymceConfig",{}).directive("uiTinymce",["$rootScope","$compile","$timeout","$window","$sce","uiTinymceConfig",function($rootScope,$compile,$timeout,$window,$sce,uiTinymceConfig){uiTinymceConfig=uiTinymceConfig||{};var generatedIds=0;return uiTinymceConfig.baseUrl&&(tinymce.baseURL=uiTinymceConfig.baseUrl),{require:["ngModel","^?form"],link:function(scope,element,attrs,ctrls){function toggleDisable(disabled){disabled?(ensureInstance(),tinyInstance&&tinyInstance.getBody().setAttribute("contenteditable",!1)):(ensureInstance(),tinyInstance&&!tinyInstance.settings.readonly&&tinyInstance.getBody().setAttribute("contenteditable",!0))}function ensureInstance(){tinyInstance||(tinyInstance=tinymce.get(attrs.id))}if($window.tinymce){var expression,tinyInstance,ngModel=ctrls[0],form=ctrls[1]||null,options={},updateView=function(editor){var content=editor.getContent({format:options.format}).trim();content=$sce.trustAsHtml(content),ngModel.$setViewValue(content),$rootScope.$$phase||scope.$apply()};attrs.$set("id","ui-tinymce-"+generatedIds++),expression={},angular.extend(expression,scope.$eval(attrs.uiTinymce));var setupOptions={setup:function(ed){ed.on("init",function(){ngModel.$render(),ngModel.$setPristine(),form&&form.$setPristine()}),ed.on("ExecCommand",function(){ed.save(),updateView(ed)}),ed.on("change NodeChange",function(){ed.save(),updateView(ed)}),ed.on("blur",function(){element[0].blur()}),ed.on("ObjectResized",function(){ed.save(),updateView(ed)}),ed.on("remove",function(){element.remove()}),expression.setup&&expression.setup(ed,{updateView:updateView})},format:expression.format||"html",selector:"#"+attrs.id};angular.extend(options,uiTinymceConfig,expression,setupOptions),$timeout(function(){options.baseURL&&(tinymce.baseURL=options.baseURL),tinymce.init(options),toggleDisable(scope.$eval(attrs.ngDisabled))}),ngModel.$formatters.unshift(function(modelValue){return modelValue?$sce.trustAsHtml(modelValue):""}),ngModel.$parsers.unshift(function(viewValue){return viewValue?$sce.getTrustedHtml(viewValue):""}),ngModel.$render=function(){ensureInstance();var viewValue=ngModel.$viewValue?$sce.getTrustedHtml(ngModel.$viewValue):"";tinyInstance&&tinyInstance.getDoc()&&(tinyInstance.setContent(viewValue),tinyInstance.fire("change"))},attrs.$observe("disabled",toggleDisable),scope.$on("$tinymce:refresh",function(e,id){var eid=attrs.id;if(angular.isUndefined(id)||id===eid){var parentElement=element.parent(),clonedElement=element.clone();clonedElement.removeAttr("id"),clonedElement.removeAttr("style"),clonedElement.removeAttr("aria-hidden"),tinymce.execCommand("mceRemoveEditor",!1,eid),parentElement.append($compile(clonedElement)(scope))}}),scope.$on("$destroy",function(){ensureInstance(),tinyInstance&&(tinyInstance.remove(),tinyInstance=null)})}}}}]),
!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(a){return function(b,c){if("__setXHR_"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="7.0.17",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(a,b,c){function d(d){d.method=d.method||"POST",d.headers=d.headers||{};var e=b.defer(),f=e.promise;return d.headers.__setXHR_=function(){return function(a){a&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){a.config=d,e.notify?e.notify(a):f.progressFunc&&c(function(){f.progressFunc(a)})},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&(a.config=d,e.notify?e.notify(a):f.progressFunc&&c(function(){f.progressFunc(a)}))},!1))}},a(d).then(function(a){e.resolve(a)},function(a){e.reject(a)},function(a){e.notify(a)}),f.success=function(a){return f.then(function(b){a(b.data,b.status,b.headers,d)}),f},f.error=function(a){return f.then(null,function(b){a(b.data,b.status,b.headers,d)}),f},f.progress=function(a){return f.progressFunc=a,f.then(null,null,function(b){a(b)}),f},f.abort=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),f},f.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(f,arguments),a.apply(f,arguments)}}(d.xhrFn),f},f}this.upload=function(a){function b(c,d,e){if(void 0!==d)if(angular.isDate(d)&&(d=d.toISOString()),angular.isString(d))c.append(e,d);else if("form"===a.sendFieldsAs)if(angular.isObject(d))for(var f in d)d.hasOwnProperty(f)&&b(c,d[f],e+"["+f+"]");else c.append(e,d);else d=angular.isString(d)?d:angular.toJson(d),"json-blob"===a.sendFieldsAs?c.append(e,new Blob([d],{type:"application/json"})):c.append(e,d)}return a.headers=a.headers||{},a.headers["Content-Type"]=void 0,a.transformRequest=a.transformRequest?angular.isArray(a.transformRequest)?a.transformRequest:[a.transformRequest]:[],a.transformRequest.push(function(c){var d,e=new FormData,f={};for(d in a.fields)a.fields.hasOwnProperty(d)&&(f[d]=a.fields[d]);c&&(f.data=c);for(d in f)if(f.hasOwnProperty(d)){var g=f[d];a.formDataAppender?a.formDataAppender(e,d,g):b(e,g,d)}if(null!=a.file){var h=a.fileFormDataName||"file";if(angular.isArray(a.file))for(var i=angular.isString(h),j=0;j<a.file.length;j++)e.append(i?h:h[j],a.file[j],a.fileName&&a.fileName[j]||a.file[j].name);else e.append(h,a.file,a.fileName||a.file.name)}return e}),d(a)},this.http=function(b){return b.transformRequest=b.transformRequest||function(b){return window.ArrayBuffer&&b instanceof window.ArrayBuffer||b instanceof Blob?b:a.defaults.transformRequest[0].apply(this,arguments)},d(b)},this.setDefaults=function(a){this.defaults=a||{}},this.defaults={},this.version=ngFileUpload.version}]),function(){ngFileUpload.service("Upload",["$parse","$timeout","$compile","UploadValidate",function(a,b,c,d){var e=d;return e.getAttrWithDefaults=function(a,b){return null!=a[b]?a[b]:null==e.defaults[b]?e.defaults[b]:e.defaults[b].toString()},e.attrGetter=function(b,c,d,e){if(!d)return this.getAttrWithDefaults(c,b);try{return e?a(this.getAttrWithDefaults(c,b))(d,e):a(this.getAttrWithDefaults(c,b))(d)}catch(f){if(b.search(/min|max|pattern/i))return this.getAttrWithDefaults(c,b);throw f}},e.updateModel=function(c,d,f,g,h,i,j){function k(){var j=h&&h.length?h[0]:null;if(c){var k=!e.attrGetter("ngfMultiple",d,f)&&!e.attrGetter("multiple",d)&&!l;a(e.attrGetter("ngModel",d)).assign(f,k?j:h)}var m=e.attrGetter("ngfModel",d);m&&a(m).assign(f,h),g&&a(g)(f,{$files:h,$file:j,$event:i}),b(function(){})}var l=e.attrGetter("ngfKeep",d,f);if(!0===l){if(!h||!h.length)return;var m=(c&&c.$modelValue||d.$$ngfPrevFiles||[]).slice(0),n=!1;if(!0===e.attrGetter("ngfKeepDistinct",d,f)){for(var o=m.length,p=0;p<h.length;p++){for(var q=0;o>q&&h[p].name!==m[q].name;q++);q===o&&(m.push(h[p]),n=!0)}if(!n)return;h=m}else h=m.concat(h)}d.$$ngfPrevFiles=h,j?k():e.validate(h,c,d,f,e.attrGetter("ngfValidateLater",d),function(){b(function(){k()})})},e}])}(),function(){function a(a,c,d,e,f,g,h,i){function j(){return"input"===c[0].tagName.toLowerCase()&&d.type&&"file"===d.type.toLowerCase()}function k(){return t("ngfChange")||t("ngfSelect")}function l(b){for(var c=b.__files_||b.target&&b.target.files,f=[],g=0;g<c.length;g++)f.push(c[g]);i.updateModel(e,d,a,k(),f.length?f:null,b)}function m(a){if(c!==a)for(var b=0;b<c[0].attributes.length;b++){var d=c[0].attributes[b];"type"!==d.name&&"class"!==d.name&&"id"!==d.name&&"style"!==d.name&&((null==d.value||""===d.value)&&("required"===d.name&&(d.value="required"),"multiple"===d.name&&(d.value="multiple")),a.attr(d.name,d.value))}}function n(){if(j())return c;var a=angular.element('<input type="file">');return m(a),a.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),b.push({el:c,ref:a}),document.body.appendChild(a[0]),a}function o(b){if(c.attr("disabled")||t("ngfSelectDisabled",a))return!1;var d=p(b);return null!=d?d:(r(b),q(navigator.userAgent)?setTimeout(function(){w[0].click()},0):w[0].click(),!1)}function p(a){var b=a.changedTouches||a.originalEvent&&a.originalEvent.changedTouches;if("touchstart"===a.type)return v=b?b[0].clientY:0,!0;if(a.stopPropagation(),a.preventDefault(),"touchend"===a.type){var c=b?b[0].clientY:0;if(Math.abs(c-v)>20)return!1}}function q(a){var b=a.match(/Android[^\d]*(\d+)\.(\d+)/);if(b&&b.length>2){var c=i.defaults.androidFixMinorVersion||4;return parseInt(b[1])<4||parseInt(b[1])===c&&parseInt(b[2])<c}return-1===a.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(a)}function r(b){w.val()&&(w.val(null),i.updateModel(e,d,a,k(),null,b,!0))}function s(a){if(w&&!w.attr("__ngf_ie10_Fix_")){if(!w[0].parentNode)return void(w=null);a.preventDefault(),a.stopPropagation(),w.unbind("click");var b=w.clone();return w.replaceWith(b),w=b,w.attr("__ngf_ie10_Fix_","true"),w.bind("change",l),w.bind("click",s),w[0].click(),!1}w.removeAttr("__ngf_ie10_Fix_")}var t=function(a,b){return i.attrGetter(a,d,b)},u=[];u.push(a.$watch(t("ngfMultiple"),function(){w.attr("multiple",t("ngfMultiple",a))})),u.push(a.$watch(t("ngfCapture"),function(){w.attr("capture",t("ngfCapture",a))})),d.$observe("accept",function(){w.attr("accept",t("accept"))}),u.push(function(){d.$$observers&&delete d.$$observers.accept});var v=0,w=c;j()||(w=n()),w.bind("change",l),j()?c.bind("click",r):c.bind("click touchstart touchend",o),i.registerValidators(e,w,d,a),-1!==navigator.appVersion.indexOf("MSIE 10")&&w.bind("click",s),a.$on("$destroy",function(){j()||w.remove(),angular.forEach(u,function(a){a()})}),g(function(){for(var a=0;a<b.length;a++){var c=b[a];document.body.contains(c.el[0])||(b.splice(a,1),c.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(c,w,l)}var b=[];ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(b,c,d,e){return{restrict:"AEC",require:"?ngModel",link:function(f,g,h,i){a(f,g,h,i,b,c,d,e)}}}])}(),function(){function a(a){return"img"===a.tagName.toLowerCase()?"image":"audio"===a.tagName.toLowerCase()?"audio":"video"===a.tagName.toLowerCase()?"video":/\./}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(a,b,c){var d=a;return d.dataUrl=function(a,d){if(d&&null!=a.dataUrl||!d&&null!=a.blobUrl){var e=c.defer();return b(function(){e.resolve(d?a.dataUrl:a.blobUrl)}),e.promise}var f=d?a.$ngfDataUrlPromise:a.$ngfBlobUrlPromise;if(f)return f;var g=c.defer();return b(function(){if(window.FileReader&&a&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||a.size<4e6)){var c=window.URL||window.webkitURL;if(c&&c.createObjectURL&&!d){var e;try{e=c.createObjectURL(a)}catch(f){return void b(function(){a.blobUrl="",g.reject()})}b(function(){a.blobUrl=e,e&&g.resolve(e)})}else{var h=new FileReader;h.onload=function(c){b(function(){a.dataUrl=c.target.result,g.resolve(c.target.result)})},h.onerror=function(){b(function(){a.dataUrl="",g.reject()})},h.readAsDataURL(a)}}else b(function(){a[d?"dataUrl":"blobUrl"]="",g.reject()})}),f=d?a.$ngfDataUrlPromise=g.promise:a.$ngfBlobUrlPromise=g.promise,f.finally(function(){delete a[d?"$ngfDataUrlPromise":"$ngfBlobUrlPromise"]}),f},d}]);var b=angular.element("<style>.ngf-hide{display:none !important}</style>");document.getElementsByTagName("head")[0].appendChild(b[0]),ngFileUpload.directive("ngfSrc",["$compile","$timeout","Upload",function(b,c,d){return{restrict:"AE",link:function(b,e,f){c(function(){var g=b.$watch(f.ngfSrc,function(g){if(angular.isString(g))return e.removeClass("ngf-hide"),e.attr("src",g);if(g&&g.type&&0===g.type.indexOf(a(e[0]))){var h=d.attrGetter("ngfNoObjectUrl",f,b);d.dataUrl(g,h).finally(function(){c(function(){h&&g.dataUrl||!h&&g.blobUrl?(e.removeClass("ngf-hide"),e.attr("src",h?g.dataUrl:g.blobUrl)):e.addClass("ngf-hide")})})}else e.addClass("ngf-hide")});b.$on("$destroy",function(){g()})})}}}]),ngFileUpload.directive("ngfBackground",["Upload","$compile","$timeout",function(a,b,c){return{restrict:"AE",link:function(b,d,e){c(function(){var f=b.$watch(e.ngfBackground,function(f){if(angular.isString(f))return d.css("background-image","url('"+f+"')");if(f&&f.type&&0===f.type.indexOf("image")){var g=a.attrGetter("ngfNoObjectUrl",e,b);a.dataUrl(f,g).finally(function(){c(function(){g&&f.dataUrl||!g&&f.blobUrl?d.css("background-image","url('"+(g?f.dataUrl:f.blobUrl)+"')"):d.css("background-image","")})})}else d.css("background-image","")});b.$on("$destroy",function(){f()})})}}}]),ngFileUpload.config(["$compileProvider",function(a){a.imgSrcSanitizationWhitelist&&a.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|local|file|data|blob):/),a.aHrefSanitizationWhitelist&&a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(a,b){return function(c,d){return angular.isString(c)?b.trustAsResourceUrl(c):c&&!c.dataUrl?(void 0===c.dataUrl&&angular.isObject(c)&&(c.dataUrl=null,a.dataUrl(c,d)),""):(c&&c.dataUrl?b.trustAsResourceUrl(c.dataUrl):c)||""}}])}(),function(){function a(b){if(b.length>2&&"/"===b[0]&&"/"===b[b.length-1])return b.substring(1,b.length-1);var c=b.split(","),d="";if(c.length>1)for(var e=0;e<c.length;e++)d+="("+a(c[e])+")",e<c.length-1&&(d+="|");else 0===b.indexOf(".")&&(b="*"+b),d="^"+b.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",d=d.replace(/\\\*/g,".*").replace(/\\\?/g,".");return d}function b(a){if(angular.isString(a)){if(a.search(/kb/i)===a.length-2)return parseFloat(1e3*a.substring(0,a.length-2));if(a.search(/mb/i)===a.length-2)return parseFloat(1e6*a.substring(0,a.length-2));if(a.search(/gb/i)===a.length-2)return parseFloat(1e9*a.substring(0,a.length-2));if(a.search(/b/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/s/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/m/i)===a.length-1)return parseFloat(60*a.substring(0,a.length-1));if(a.search(/h/i)===a.length-1)return parseFloat(3600*a.substring(0,a.length-1))}return a}ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(c,d,e){var f=c;return f.registerValidators=function(a,b,c,d){function e(a){angular.forEach(a.$ngfValidations,function(b){a.$setValidity(b.name,b.valid)})}a&&(a.$ngfValidations=[],a.$formatters.push(function(g){return f.attrGetter("ngfValidateLater",c,d)||!a.$$ngfValidated?(f.validate(g,a,c,d,!1,function(){e(a),a.$$ngfValidated=!1}),g&&0===g.length&&(g=null),!b||null!=g&&0!==g.length||b.val()&&b.val(null)):(e(a),a.$$ngfValidated=!1),g}))},f.validatePattern=function(b,c){if(!c)return!0;var d=new RegExp(a(c),"gi");return null!=b.type&&d.test(b.type.toLowerCase())||null!=b.name&&d.test(b.name.toLowerCase())},f.validate=function(a,c,d,e,g,h){function i(b,d,e){if(a){for(var f="ngf"+b[0].toUpperCase()+b.substr(1),g=a.length,h=null;g--;){var i=a[g],j=k(f,{$file:i});null==j&&(j=d(k("ngfValidate")||{}),h=null==h||h),null!=j&&(e(i,j)||(i.$error=b,i.$errorParam=j,a.splice(g,1),h=!1))}null!==h&&c.$ngfValidations.push({name:b,valid:h})}}function j(b,d,e,f,g){if(a){var i=0,j=!1,m="ngf"+b[0].toUpperCase()+b.substr(1);a=void 0===a.length?[a]:a,angular.forEach(a,function(a){if(0!==a.type.search(e))return!0;var n=k(m,{$file:a})||d(k("ngfValidate",{$file:a})||{});n&&(l++,i++,f(a,n).then(function(c){g(c,n)||(a.$error=b,a.$errorParam=n,j=!0)},function(){k("ngfValidateForce",{$file:a})&&(a.$error=b,a.$errorParam=n,j=!0)}).finally(function(){l--,i--,i||c.$ngfValidations.push({name:b,valid:!j}),l||h.call(c,c.$ngfValidations)}))})}}c=c||{},c.$ngfValidations=c.$ngfValidations||[],angular.forEach(c.$ngfValidations,function(a){a.valid=!0});var k=function(a,b){return f.attrGetter(a,d,e,b)};if(g)return void h.call(c);if(c.$$ngfValidated=!0,null==a||0===a.length)return void h.call(c);if(a=void 0===a.length?[a]:a.slice(0),i("pattern",function(a){return a.pattern},f.validatePattern),i("minSize",function(a){return a.size&&a.size.min},function(a,c){return a.size>=b(c)}),i("maxSize",function(a){return a.size&&a.size.max},function(a,c){return a.size<=b(c)}),i("validateFn",function(){return null},function(a,b){return!0===b||null===b||""===b}),!a.length)return void h.call(c,c.$ngfValidations);var l=0;j("maxHeight",function(a){return a.height&&a.height.max},/image/,this.imageDimensions,function(a,b){return a.height<=b}),j("minHeight",function(a){return a.height&&a.height.min},/image/,this.imageDimensions,function(a,b){return a.height>=b}),j("maxWidth",function(a){return a.width&&a.width.max},/image/,this.imageDimensions,function(a,b){return a.width<=b}),j("minWidth",function(a){return a.width&&a.width.min},/image/,this.imageDimensions,function(a,b){return a.width>=b}),j("ratio",function(a){return a.ratio},/image/,this.imageDimensions,function(a,b){for(var c=b.toString().split(","),d=!1,e=0;e<c.length;e++){var f=c[e],g=f.search(/x/i);f=g>-1?parseFloat(f.substring(0,g))/parseFloat(f.substring(g+1)):parseFloat(f),Math.abs(a.width/a.height-f)<1e-4&&(d=!0)}return d}),j("maxDuration",function(a){return a.duration&&a.duration.max},/audio|video/,this.mediaDuration,function(a,c){return a<=b(c)}),j("minDuration",function(a){return a.duration&&a.duration.min},/audio|video/,this.mediaDuration,function(a,c){return a>=b(c)}),j("validateAsyncFn",function(){return null},/./,function(a,b){return b},function(a){return!0===a||null===a||""===a}),l||h.call(c,c.$ngfValidations)},f.imageDimensions=function(a){if(a.width&&a.height){var b=d.defer();return e(function(){b.resolve({width:a.width,height:a.height})}),b.promise}if(a.$ngfDimensionPromise)return a.$ngfDimensionPromise;var c=d.defer();return e(function(){return 0!==a.type.indexOf("image")?void c.reject("not image"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].clientWidth,d=h[0].clientHeight;h.remove(),a.width=b,a.height=d,c.resolve({width:b,height:d})}function f(){h.remove(),c.reject("load error")}function g(){e(function(){h[0].parentNode&&(h[0].clientWidth?d():i>10?f():g())},1e3)}var h=angular.element("<img>").attr("src",b).css("visibility","hidden").css("position","fixed");h.on("load",d),h.on("error",f);var i=0;g(),angular.element(document.getElementsByTagName("body")[0]).append(h)},function(){c.reject("load error")})}),a.$ngfDimensionPromise=c.promise,a.$ngfDimensionPromise.finally(function(){delete a.$ngfDimensionPromise}),a.$ngfDimensionPromise},f.mediaDuration=function(a){if(a.duration){var b=d.defer();return e(function(){b.resolve(a.duration)}),b.promise}if(a.$ngfDurationPromise)return a.$ngfDurationPromise;var c=d.defer();return e(function(){return 0!==a.type.indexOf("audio")&&0!==a.type.indexOf("video")?void c.reject("not media"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].duration;a.duration=b,h.remove(),c.resolve(b)}function f(){h.remove(),c.reject("load error")}function g(){e(function(){h[0].parentNode&&(h[0].duration?d():i>10?f():g())},1e3)}var h=angular.element(0===a.type.indexOf("audio")?"<audio>":"<video>").attr("src",b).css("visibility","none").css("position","fixed");h.on("loadedmetadata",d),h.on("error",f);var i=0;g(),angular.element(document.body).append(h)},function(){c.reject("load error")})}),a.$ngfDurationPromise=c.promise,a.$ngfDurationPromise.finally(function(){delete a.$ngfDurationPromise}),a.$ngfDurationPromise},f}])}(),function(){function a(a,c,d,e,f,g,h,i){function j(){return c.attr("disabled")||n("ngfDropDisabled",a)}function k(a,b,c,d){var e=n("ngfDragOverClass",a,{$event:c}),f=n("ngfDragOverClass")||"dragover";if(angular.isString(e))return void d(e);if(e&&(e.delay&&(r=e.delay),e.accept||e.reject)){var g=c.dataTransfer.items;if(null!=g)for(var h=n("ngfPattern",a,{$event:c}),j=0;j<g.length;j++)if("file"===g[j].kind||""===g[j].kind){if(!i.validatePattern(g[j],h)){f=e.reject;break}f=e.accept}}d(f)}function l(a,b,c,d){function e(a,b,c){if(null!=b)if(b.isDirectory){var d=(c||"")+b.name;a.push({name:b.name,type:"directory",path:d});var f=b.createReader(),g=[];i++;var h=function(){f.readEntries(function(d){try{if(d.length)g=g.concat(Array.prototype.slice.call(d||[],0)),h();else{for(var f=0;f<g.length;f++)e(a,g[f],(c||"")+b.name+"/");i--}}catch(j){i--,console.error(j)}},function(){i--})};h()}else i++,b.file(function(b){try{i--,b.path=(c||"")+b.name,a.push(b)}catch(d){i--,console.error(d)}},function(){i--})}var f=[],i=0,j=a.dataTransfer.items;if(j&&j.length>0&&"file"!==h.protocol())for(var k=0;k<j.length;k++){if(j[k].webkitGetAsEntry&&j[k].webkitGetAsEntry()&&j[k].webkitGetAsEntry().isDirectory){var l=j[k].webkitGetAsEntry();if(l.isDirectory&&!c)continue;null!=l&&e(f,l)}else{var m=j[k].getAsFile();null!=m&&f.push(m)}if(!d&&f.length>0)break}else{var n=a.dataTransfer.files;if(null!=n)for(var o=0;o<n.length&&(f.push(n.item(o)),d||!(f.length>0));o++);}var p=0;!function q(a){g(function(){if(i)10*p++<2e4&&q(10);else{if(!d&&f.length>1){for(k=0;"directory"===f[k].type;)k++;f=[f[k]]}b(f)}},a||0)}()}var m=b(),n=function(a,b,c){return i.attrGetter(a,d,b,c)};if(n("dropAvailable")&&g(function(){a[n("dropAvailable")]?a[n("dropAvailable")].value=m:a[n("dropAvailable")]=m}),!m)return void(!0===n("ngfHideOnDropNotAvailable",a)&&c.css("display","none"));i.registerValidators(e,null,d,a);var o,p=null,q=f(n("ngfStopPropagation")),r=1;c[0].addEventListener("dragover",function(b){if(!j()){if(b.preventDefault(),q(a)&&b.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var e=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy"}g.cancel(p),o||(o="C",k(a,d,b,function(a){o=a,c.addClass(o)}))}},!1),c[0].addEventListener("dragenter",function(b){j()||(b.preventDefault(),q(a)&&b.stopPropagation())},!1),c[0].addEventListener("dragleave",function(){j()||(p=g(function(){c.removeClass(o),o=null},r||1))},!1),c[0].addEventListener("drop",function(b){j()||(b.preventDefault(),q(a)&&b.stopPropagation(),c.removeClass(o),o=null,l(b,function(c){i.updateModel(e,d,a,n("ngfChange")||n("ngfDrop"),c,b)},!1!==n("ngfAllowDir",a),n("multiple")||n("ngfMultiple",a)))},!1),c[0].addEventListener("paste",function(b){if(!j()){var c=[],f=b.clipboardData||b.originalEvent.clipboardData;if(f&&f.items){for(var g=0;g<f.items.length;g++)-1!==f.items[g].type.indexOf("image")&&c.push(f.items[g].getAsFile());i.updateModel(e,d,a,n("ngfChange")||n("ngfDrop"),c,b)}}},!1)}function b(){var a=document.createElement("div");return"draggable"in a&&"ondrop"in a&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload",function(b,c,d,e){return{restrict:"AEC",require:"?ngModel",link:function(f,g,h,i){a(f,g,h,i,b,c,d,e)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(a,c){b()&&c.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(a,c,d){return function(e,f,g){if(b()){var h=a(d.attrGetter("ngfDropAvailable",g));c(function(){h(e),h.assign&&h.assign(e,!0)})}}}])}(),!function(e,n){"use strict";var r=["ng","oc.lazyLoad"],o={},t=[],i=[],a=[],s=[],u=e.noop,c={},l=[];e.module("oc.lazyLoad",["ng"]).provider("$ocLazyLoad",["$controllerProvider","$provide","$compileProvider","$filterProvider","$injector","$animateProvider",function(d,f,p,m,v,y){function L(n,o,t){if(o){var i,s,d,f=[];for(i=o.length-1;i>=0;i--)if(s=o[i],e.isString(s)||(s=E(s)),s&&-1===l.indexOf(s)&&(!w[s]||-1!==a.indexOf(s))){var h=-1===r.indexOf(s);if(d=g(s),h&&(r.push(s),L(n,d.requires,t)),d._runBlocks.length>0)for(c[s]=[];d._runBlocks.length>0;)c[s].push(d._runBlocks.shift());e.isDefined(c[s])&&(h||t.rerun)&&(f=f.concat(c[s])),j(n,d._invokeQueue,s,t.reconfig),j(n,d._configBlocks,s,t.reconfig),u(h?"ocLazyLoad.moduleLoaded":"ocLazyLoad.moduleReloaded",s),o.pop(),l.push(s)}var p=n.getInstanceInjector();e.forEach(f,function(e){p.invoke(e)})}}function $(n,r){function t(n,r){var o,t=!0;return r.length&&(o=i(n),e.forEach(r,function(e){t=t&&i(e)!==o})),t}function i(n){return e.isArray(n)?M(n.toString()):e.isObject(n)?M(S(n)):e.isDefined(n)&&null!==n?M(n.toString()):n}var a=n[2][0],s=n[1],c=!1;e.isUndefined(o[r])&&(o[r]={}),e.isUndefined(o[r][s])&&(o[r][s]={});var l=function(e,n){o[r][s].hasOwnProperty(e)||(o[r][s][e]=[]),t(n,o[r][s][e])&&(c=!0,o[r][s][e].push(n),u("ocLazyLoad.componentLoaded",[r,s,e]))};if(e.isString(a))l(a,n[2][1]);else{if(!e.isObject(a))return!1;e.forEach(a,function(n,r){e.isString(n)?l(n,a[1]):l(r,n)})}return c}function j(n,r,o,i){if(r){var a,s,u,c;for(a=0,s=r.length;s>a;a++)if(u=r[a],e.isArray(u)){if(null!==n){if(!n.hasOwnProperty(u[0]))throw new Error("unsupported provider "+u[0]);c=n[u[0]]}var l=$(u,o);if("invoke"!==u[1])l&&e.isDefined(c)&&c[u[1]].apply(c,u[2]);else{var d=function(n){var r=t.indexOf(o+"-"+n);(-1===r||i)&&(-1===r&&t.push(o+"-"+n),e.isDefined(c)&&c[u[1]].apply(c,u[2]))};if(e.isFunction(u[2][0]))d(u[2][0]);else if(e.isArray(u[2][0]))for(var f=0,h=u[2][0].length;h>f;f++)e.isFunction(u[2][0][f])&&d(u[2][0][f])}}}}function E(n){var r=null;return e.isString(n)?r=n:e.isObject(n)&&n.hasOwnProperty("name")&&e.isString(n.name)&&(r=n.name),r}function _(n){if(!e.isString(n))return!1;try{return g(n)}catch(r){if(/No module/.test(r)||r.message.indexOf("$injector:nomod")>-1)return!1}}var w={},O={$controllerProvider:d,$compileProvider:p,$filterProvider:m,$provide:f,$injector:v,$animateProvider:y},x=!1,b=!1,z=[],D={};z.push=function(e){-1===this.indexOf(e)&&Array.prototype.push.apply(this,arguments)},this.config=function(n){e.isDefined(n.modules)&&(e.isArray(n.modules)?e.forEach(n.modules,function(e){w[e.name]=e}):w[n.modules.name]=n.modules),e.isDefined(n.debug)&&(x=n.debug),e.isDefined(n.events)&&(b=n.events)},this._init=function(o){if(0===i.length){var t=[o],a=["ng:app","ng-app","x-ng-app","data-ng-app"],u=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/,c=function(e){return e&&t.push(e)};e.forEach(a,function(n){a[n]=!0,c(document.getElementById(n)),n=n.replace(":","\\:"),void 0!==o[0]&&o[0].querySelectorAll&&(e.forEach(o[0].querySelectorAll("."+n),c),e.forEach(o[0].querySelectorAll("."+n+"\\:"),c),e.forEach(o[0].querySelectorAll("["+n+"]"),c))}),e.forEach(t,function(n){if(0===i.length){var r=" "+o.className+" ",t=u.exec(r);t?i.push((t[2]||"").replace(/\s+/g,",")):e.forEach(n.attributes,function(e){0===i.length&&a[e.name]&&i.push(e.value)})}})}0!==i.length||(n.jasmine||n.mocha)&&e.isDefined(e.mock)||console.error("No module found during bootstrap, unable to init ocLazyLoad. You should always use the ng-app directive or angular.boostrap when you use ocLazyLoad.");var l=function d(n){if(-1===r.indexOf(n)){r.push(n);var o=e.module(n);j(null,o._invokeQueue,n),j(null,o._configBlocks,n),e.forEach(o.requires,d)}};e.forEach(i,function(e){l(e)}),i=[],s.pop()};var S=function(n){try{return JSON.stringify(n)}catch(r){var o=[];return JSON.stringify(n,function(n,r){if(e.isObject(r)&&null!==r){if(-1!==o.indexOf(r))return;o.push(r)}return r})}},M=function(e){var n,r,o,t=0;if(0==e.length)return t;for(n=0,o=e.length;o>n;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t|=0;return t};this.$get=["$log","$rootElement","$rootScope","$cacheFactory","$q",function(n,t,a,c,d){function f(e){var r=d.defer();return n.error(e.message),r.reject(e),r.promise}var p,m=c("ocLazyLoad");return x||(n={},n.error=e.noop,n.warn=e.noop,n.info=e.noop),O.getInstanceInjector=function(){return p||(p=t.data("$injector")||e.injector())},u=function(e,r){b&&a.$broadcast(e,r),x&&n.info(e,r)},{_broadcast:u,_$log:n,_getFilesCache:function(){return m},toggleWatch:function(e){e?s.push(!0):s.pop()},getModuleConfig:function(n){if(!e.isString(n))throw new Error("You need to give the name of the module to get");return w[n]?e.copy(w[n]):null},setModuleConfig:function(n){if(!e.isObject(n))throw new Error("You need to give the module config object to set");return w[n.name]=n,n},getModules:function(){return r},isLoaded:function(n){var o=function(e){var n=r.indexOf(e)>-1;return n||(n=!!_(e)),n};if(e.isString(n)&&(n=[n]),e.isArray(n)){var t,i;for(t=0,i=n.length;i>t;t++)if(!o(n[t]))return!1;return!0}throw new Error("You need to define the module(s) name(s)")},_getModuleName:E,_getModule:function(e){try{return g(e)}catch(n){throw(/No module/.test(n)||n.message.indexOf("$injector:nomod")>-1)&&(n.message='The module "'+S(e)+'" that you are trying to load does not exist. '+n.message),n}},moduleExists:_,_loadDependencies:function(n,r){var o,t,i,a=[],s=this;if(null===(n=s._getModuleName(n)))return d.when();try{o=s._getModule(n)}catch(u){return f(u)}return t=s.getRequires(o),e.forEach(t,function(o){if(e.isString(o)){var t=s.getModuleConfig(o);if(null===t)return void z.push(o);o=t,t.name=void 0}if(s.moduleExists(o.name))return i=o.files.filter(function(e){return s.getModuleConfig(o.name).files.indexOf(e)<0}),0!==i.length&&s._$log.warn('Module "',n,'" attempted to redefine configuration for dependency. "',o.name,'"\n Additional Files Loaded:',i),e.isDefined(s.filesLoader)?void a.push(s.filesLoader(o,r).then(function(){return s._loadDependencies(o)})):f(new Error("Error: New dependencies need to be loaded from external files ("+o.files+"), but no loader has been defined."));if(e.isArray(o)){var u=[];e.forEach(o,function(e){var n=s.getModuleConfig(e);null===n?u.push(e):n.files&&(u=u.concat(n.files))}),u.length>0&&(o={files:u})}else e.isObject(o)&&o.hasOwnProperty("name")&&o.name&&(s.setModuleConfig(o),z.push(o.name));if(e.isDefined(o.files)&&0!==o.files.length){if(!e.isDefined(s.filesLoader))return f(new Error('Error: the module "'+o.name+'" is defined in external files ('+o.files+"), but no loader has been defined."));a.push(s.filesLoader(o,r).then(function(){return s._loadDependencies(o)}))}}),d.all(a)},inject:function(n){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],t=this,a=d.defer();if(e.isDefined(n)&&null!==n){if(e.isArray(n)){var s=[];return e.forEach(n,function(e){s.push(t.inject(e,r,o))}),d.all(s)}t._addToLoadList(t._getModuleName(n),!0,o)}if(i.length>0){var u=i.slice();!function f(e){z.push(e),D[e]=a.promise,t._loadDependencies(e,r).then(function(){try{l=[],L(O,z,r)}catch(e){return t._$log.error(e.message),void a.reject(e)}i.length>0?f(i.shift()):a.resolve(u)},function(e){a.reject(e)})}(i.shift())}else{if(r&&r.name&&D[r.name])return D[r.name];a.resolve()}return a.promise},getRequires:function(n){var o=[];return e.forEach(n.requires,function(e){-1===r.indexOf(e)&&o.push(e)}),o},_invokeQueue:j,_registerInvokeList:$,_register:L,_addToLoadList:h,_unregister:function(n){e.isDefined(n)&&e.isArray(n)&&e.forEach(n,function(e){o[e]=void 0})}}}],this._init(e.element(n.document))}]);var f=e.bootstrap;e.bootstrap=function(n,r,o){return e.forEach(r.slice(),function(e){h(e,!0,!0)}),f(n,r,o)};var h=function(n,r,o){(s.length>0||r)&&e.isString(n)&&-1===i.indexOf(n)&&(i.push(n),o&&a.push(n))},g=e.module;e.module=function(e,n,r){return h(e,!1,!0),g(e,n,r)},"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="oc.lazyLoad")}(angular,window),function(e){"use strict";e.module("oc.lazyLoad").directive("ocLazyLoad",["$ocLazyLoad","$compile","$animate","$parse","$timeout",function(n,r,o,t,i){return{restrict:"A",terminal:!0,priority:1e3,compile:function(i,a){var s=i[0].innerHTML;return i.html(""),function(i,a,u){var c=t(u.ocLazyLoad);i.$watch(function(){return c(i)||u.ocLazyLoad},function(t){e.isDefined(t)&&n.load(t).then(function(){o.enter(s,a),r(a.contents())(i)})},!0)}}}}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$q","$window","$interval",function(n,r,o,t){var a=!1,s=o.document.getElementsByTagName("head")[0]||o.document.getElementsByTagName("body")[0];return n.buildElement=function(u,c,l){var d,f,h=r.defer(),g=n._getFilesCache(),p=function(e){var n=(new Date).getTime();return e.indexOf("?")>=0?"&"===e.substring(0,e.length-1)?e+"_dc="+n:e+"&_dc="+n:e+"?_dc="+n};switch(e.isUndefined(g.get(c))&&g.put(c,h.promise),u){case"css":d=o.document.createElement("link"),d.type="text/css",d.rel="stylesheet",d.href=!1===l.cache?p(c):c;break;case"js":d=o.document.createElement("script"),d.src=!1===l.cache?p(c):c;break;default:g.remove(c),h.reject(new Error('Requested type "'+u+'" is not known. Could not inject "'+c+'"'))}d.onload=d.onreadystatechange=function(e){d.readyState&&!/^c|loade/.test(d.readyState)||f||(d.onload=d.onreadystatechange=null,f=1,n._broadcast("ocLazyLoad.fileLoaded",c),h.resolve())},d.onerror=function(){g.remove(c),h.reject(new Error("Unable to load "+c))},d.async=l.serie?0:1;var m=s.lastChild;if(l.insertBefore){var v=e.element(e.isDefined(window.jQuery)?l.insertBefore:document.querySelector(l.insertBefore));v&&v.length>0&&(m=v[0])}if(m.parentNode.insertBefore(d,m),"css"==u){var y=o.navigator.userAgent.toLowerCase();if(/iP(hone|od|ad)/.test(o.navigator.platform)){var L=o.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),$=parseFloat([parseInt(L[1],10),parseInt(L[2],10),parseInt(L[3]||0,10)].join("."));a=6>$}else if(y.indexOf("android")>-1){var j=parseFloat(y.slice(y.indexOf("android")+8));a=4.4>j}else if(y.indexOf("safari")>-1){var E=y.match(/version\/([\.\d]+)/i);a=E&&E[1]&&parseFloat(E[1])<6}if(a)var _=1e3,w=t(function(){try{d.sheet.cssRules,t.cancel(w),d.onload()}catch(e){--_<=0&&d.onerror()}},20)}return h.promise},n}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$q",function(n,r){return n.filesLoader=function(o){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=[],a=[],s=[],u=[],c=null,l=n._getFilesCache();n.toggleWatch(!0),e.extend(t,o);var d=function(r){var o,d=null;if(e.isObject(r)&&(d=r.type,r=r.path),c=l.get(r),e.isUndefined(c)||!1===t.cache){if(null!==(o=/^(css|less|html|htm|js)?(?=!)/.exec(r))&&(d=o[1],r=r.substr(o[1].length+1,r.length)),!d)if(null!==(o=/[.](css|less|html|htm|js)?((\?|#).*)?$/.exec(r)))d=o[1];else{if(n.jsLoader.hasOwnProperty("ocLazyLoadLoader")||!n.jsLoader.hasOwnProperty("requirejs"))return void n._$log.error("File type could not be determined. "+r);d="js"}"css"!==d&&"less"!==d||-1!==i.indexOf(r)?"html"!==d&&"htm"!==d||-1!==a.indexOf(r)?"js"===d||-1===s.indexOf(r)?s.push(r):n._$log.error("File type is not valid. "+r):a.push(r):i.push(r)}else c&&u.push(c)};if(t.serie?d(t.files.shift()):e.forEach(t.files,function(e){d(e)}),i.length>0){var f=r.defer();n.cssLoader(i,function(r){e.isDefined(r)&&n.cssLoader.hasOwnProperty("ocLazyLoadLoader")?(n._$log.error(r),f.reject(r)):f.resolve()},t),u.push(f.promise)}if(a.length>0){var h=r.defer();n.templatesLoader(a,function(r){e.isDefined(r)&&n.templatesLoader.hasOwnProperty("ocLazyLoadLoader")?(n._$log.error(r),h.reject(r)):h.resolve()},t),u.push(h.promise)}if(s.length>0){var g=r.defer();n.jsLoader(s,function(r){
e.isDefined(r)&&(n.jsLoader.hasOwnProperty("ocLazyLoadLoader")||n.jsLoader.hasOwnProperty("requirejs"))?(n._$log.error(r),g.reject(r)):g.resolve()},t),u.push(g.promise)}if(0===u.length){var p=r.defer(),m="Error: no file to load has been found, if you're trying to load an existing module you should use the 'inject' method instead of 'load'.";return n._$log.error(m),p.reject(m),p.promise}return t.serie&&t.files.length>0?r.all(u).then(function(){return n.filesLoader(o,t)}):r.all(u).finally(function(e){return n.toggleWatch(!1),e})},n.load=function(o){var t,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=this,s=null,u=[],c=r.defer(),l=e.copy(o),d=e.copy(i);if(e.isArray(l))return e.forEach(l,function(e){u.push(a.load(e,d))}),r.all(u).then(function(e){c.resolve(e)},function(e){c.reject(e)}),c.promise;if(e.isString(l)?(s=a.getModuleConfig(l))||(s={files:[l]}):e.isObject(l)&&(s=e.isDefined(l.path)&&e.isDefined(l.type)?{files:[l]}:a.setModuleConfig(l)),null===s){return t='Module "'+(a._getModuleName(l)||"unknown")+'" is not configured, cannot load.',n._$log.error(t),c.reject(new Error(t)),c.promise}e.isDefined(s.template)&&(e.isUndefined(s.files)&&(s.files=[]),e.isString(s.template)?s.files.push(s.template):e.isArray(s.template)&&s.files.concat(s.template));var h=e.extend({},d,s);return e.isUndefined(s.files)&&e.isDefined(s.name)&&n.moduleExists(s.name)?n.inject(s.name,h,!0):(n.filesLoader(s,h).then(function(){n.inject(null,h).then(function(e){c.resolve(e)},function(e){c.reject(e)})},function(e){c.reject(e)}),c.promise)},n}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$q",function(n,r){return n.cssLoader=function(o,t,i){var a=[];e.forEach(o,function(e){a.push(n.buildElement("css",e,i))}),r.all(a).then(function(){t()},function(e){t(e)})},n.cssLoader.ocLazyLoadLoader=!0,n}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$q",function(n,r){return n.jsLoader=function(o,t,i){var a=[];e.forEach(o,function(e){a.push(n.buildElement("js",e,i))}),r.all(a).then(function(){t()},function(e){t(e)})},n.jsLoader.ocLazyLoadLoader=!0,n}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(n){n.decorator("$ocLazyLoad",["$delegate","$templateCache","$q","$http",function(n,r,o,t){return n.templatesLoader=function(i,a,s){var u=[],c=n._getFilesCache();return e.forEach(i,function(n){var i=o.defer();u.push(i.promise),t.get(n,s).success(function(o){e.isString(o)&&o.length>0&&e.forEach(e.element(o),function(e){"SCRIPT"===e.nodeName&&"text/ng-template"===e.type&&r.put(e.id,e.innerHTML)}),e.isUndefined(c.get(n))&&c.put(n,!0),i.resolve()}).error(function(e){i.reject(new Error('Unable to load template file "'+n+'": '+e))})}),o.all(u).then(function(){a()},function(e){a(e)})},n.templatesLoader.ocLazyLoadLoader=!0,n}])}])}(angular),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,n){var r;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),t=o.length>>>0;if(0===t)return-1;var i=+n||0;if(Math.abs(i)===1/0&&(i=0),i>=t)return-1;for(r=Math.max(i>=0?i:t-Math.abs(i),0);t>r;){if(r in o&&o[r]===e)return r;r++}return-1}),angular.module("manage.templates",["manageAlerts/manageAlerts.tpl.html","manageAlerts/manageAlertsItemFields.tpl.html","manageDatabases/manageDatabases.tpl.html","manageERCarousel/manageERCarousel.tpl.html","manageERCarousel/manageSlideFields.tpl.html","manageERCarousel/manageSlideList.tpl.html","manageHours/manageEx.tpl.html","manageHours/manageHours.tpl.html","manageHours/manageHoursUsers.tpl.html","manageHours/manageLoc.tpl.html","manageHours/manageSem.tpl.html","manageHours/manageUsers.tpl.html","manageNews/manageNews.tpl.html","manageNews/manageNewsAdmins.tpl.html","manageNews/manageNewsItemFields.tpl.html","manageNews/manageNewsList.tpl.html","manageOneSearch/mainOneSearch.tpl.html","manageOneSearch/manageOneSearch.tpl.html","manageOneSearch/oneSearchStat.tpl.html","manageSoftware/manageSoftware.tpl.html","manageSoftware/manageSoftwareComputerMaps.tpl.html","manageSoftware/manageSoftwareItemFields.tpl.html","manageSoftware/manageSoftwareList.tpl.html","manageSoftware/manageSoftwareLocCat.tpl.html","manageUserGroups/manageUG.tpl.html","manageUserGroups/viewMyWebApps.tpl.html","oneSearchErrors/oneSearchErrors.tpl.html","staffDirectory/staffDirectory.tpl.html","staffDirectory/staffDirectoryDepartments.tpl.html","staffDirectory/staffDirectoryPeople.tpl.html","staffDirectory/staffDirectoryProfile.tpl.html","staffDirectory/staffDirectorySubjects.tpl.html","submittedForms/submittedForms.tpl.html"]),angular.module("manageAlerts/manageAlerts.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageAlerts/manageAlerts.tpl.html",'<div class="container">\n    <h2>Manage Website Alerts</h2>\n\n    <div ng-if="hasAccess">\n        <h3>Add New Alert</h3>\n        <form ng-submit="createAlert(newAlert)">\n            <div class="sdOpen">\n                <div alerts-item-fields alertdata="newAlert" list="data"></div>\n                <div class="row form-group text-center">\n                    <button type="submit" class="btn btn-success"\n                            ng-disabled="uploading ||\n                                         newAlert.message.length < 1 ||\n                                         newAlert.dateStart.length < 1 ||\n                                         newAlert.dateEnd.length < 1">\n                        Create New Alert\n                    </button><br>\n                    {{newAlert.formResponse}}\n                </div>\n            </div>\n        </form>\n\n        <h3>Alerts</h3>\n        <div class="row form-inline">\n            <div class="form-group col-md-12">\n                <label for="filterBy">Filter <small>{{filteredList.length}}</small> results by</label>\n                <div id="filterBy">\n                    <input type="text" class="form-control" placeholder="Message contains" ng-model="alertFilter">\n                </div>\n            </div>\n        </div>\n        <div class="text-center">\n            <pagination total-items="filteredList.length" ng-model="currentPage" max-size="maxPageSize" class="pagination-sm"\n                        boundary-links="true" rotate="false" items-per-page="perPage" ng-show="filteredList.length > perPage"></pagination>\n        </div>\n        <div class="table-responsive">\n            <table class="table table-condensed table-hover">\n                <thead>\n                <tr>\n                    <th class="hidden-xs">\n                        <a ng-click="sortBy(0)"\n                           ng-class="{\'sortable\': !sortModes[0].reverse && sortMode == 0, \'sortable-reverse\': sortModes[0].reverse && sortMode == 0}">\n                            Message\n                        </a>\n                    </th>\n                    <th class="hidden-xs">\n                        <a ng-click="sortBy(1)"\n                           ng-class="{\'sortable\': !sortModes[1].reverse && sortMode == 1, \'sortable-reverse\': sortModes[1].reverse && sortMode == 1}">\n                            Type\n                        </a>\n                    </th>\n                    <th class="hidden-xs">\n                        <a ng-click="sortBy(2)"\n                           ng-class="{\'sortable\': !sortModes[2].reverse && sortMode == 2, \'sortable-reverse\': sortModes[2].reverse && sortMode == 2}">\n                            Start Date\n                        </a>\n                    </th>\n                    <th class="hidden-xs">\n                        <a ng-click="sortBy(3)"\n                           ng-class="{\'sortable\': !sortModes[3].reverse && sortMode == 3, \'sortable-reverse\': sortModes[3].reverse && sortMode == 3}">\n                            End Date\n                        </a>\n                    </th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr ng-repeat="alert in filteredList = (data.alerts | filter:{message:alertFilter}\n                                                                    | orderBy:sortModes[sortMode].by:sortModes[sortMode].reverse)\n                                                                    | startFrom:(currentPage-1)*perPage\n                                                                    | limitTo:perPage">\n                    <td>\n                        <h4 ng-click="toggleAlerts(alert)" style="cursor: pointer;">\n                            <a>\n                                <span class="fa fa-fw fa-caret-right" ng-hide="alert.show"></span>\n                                <span class="fa fa-fw fa-caret-down" ng-show="alert.show"></span>\n                                {{alert.message}}\n                            </a>\n                        </h4>\n                        <div ng-show="alert.show">\n                            <form ng-submit="updateAlert(alert)">\n                                <div alerts-item-fields alertdata="alert" list="data"></div>\n                                <div class="row form-group text-center">\n                                    <button type="submit" class="btn btn-success"\n                                            ng-disabled="uploading ||\n                                             alert.message.length < 1 ||\n                                             alert.dateStart.length < 1 ||\n                                             alert.dateEnd.length < 1">\n                                        Update Alert\n                                    </button>\n                                    <button type="button" class="btn btn-danger" ng-click="deleteAlert(alert)"\n                                            ng-disabled="uploading">\n                                        Delete Alert\n                                    </button>\n                                    <br>\n                                    {{alert.formResponse}}\n                                </div>\n                            </form>\n                        </div>\n                    </td>\n                    <td ng-click="toggleAlerts(alert)" style="cursor: pointer;">\n                        <h4>\n                            <small ng-if="alert.selType.value == 0"><span class="label label-success">success</span></small>\n                            <small ng-if="alert.selType.value == 1"><span class="label label-warning">warning</span></small>\n                            <small ng-if="alert.selType.value == 2"><span class="label label-danger">danger</span></small>\n                        </h4>\n                    </td>\n                    <td ng-click="toggleAlerts(alert)" style="cursor: pointer;">\n                        {{alert.dateStart | date : \'MMM d, y\'}}\n                    </td>\n                    <td ng-click="toggleAlerts(alert)" style="cursor: pointer;">\n                        {{alert.dateEnd | date : \'MMM d, y\'}}\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n\n        <div class="text-center">\n            <pagination total-items="filteredList.length" ng-model="currentPage" max-size="maxPageSize" class="pagination-sm"\n                        boundary-links="true" rotate="false" items-per-page="perPage" ng-show="filteredList.length > perPage"></pagination>\n        </div>\n    </div>\n    <div ng-if="!hasAccess">\n        <h3>Sorry, you don\'t have permissions to edit alerts</h3>\n    </div>\n</div>')}]),angular.module("manageAlerts/manageAlertsItemFields.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageAlerts/manageAlertsItemFields.tpl.html",'<div class="row">\n    <div class="col-md-2 form-group">\n        <label for="type">Type</label>\n        <select class="form-control" ng-model="alert.selType" id="type"\n                ng-options="type.name for type in types">\n        </select>\n    </div>\n    <div class="col-md-2 form-group">\n        <label for="from">Active From</label>\n        <input type="text" class="form-control" id="from" datepicker-popup="{{dpFormat}}"\n               ng-model="alert.dateStart" is-open="alert.dpStart" close-text="Close"\n               ng-click="onAlertDPFocus(alert, true)"/>\n    </div>\n    <div class="col-md-2 form-group">\n        <label for="until">Active Until</label>\n        <input type="text" class="form-control" id="until" datepicker-popup="{{dpFormat}}"\n               ng-model="alert.dateEnd" is-open="alert.dpEnd" close-text="Close"\n               ng-click="onAlertDPFocus(alert, false)"/>\n    </div>\n    <div class="col-md-6 form-group">\n        <label for="url">URL (optional)</label>\n        <input type="text" class="form-control" placeholder="http://lib.ua.edu/more-details/" ng-model="alert.url"\n               id="url" maxlength="1024">\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12 form-group">\n        <label for="message">Message</label>\n        <textarea class="form-control" ng-model="alert.message" rows="3" maxlength="200" id="message" required></textarea>\n    </div>\n</div>\n')}]),angular.module("manageDatabases/manageDatabases.tpl.html",[]).run(["$templateCache",function($templateCache){
$templateCache.put("manageDatabases/manageDatabases.tpl.html",'<div class="container">\n    <h2>Manage Databases</h2>\n\n    <div ng-if="hasAccess">\n        <div>\n            <div class="row form-inline">\n                <div class="form-group col-md-12">\n                    <label for="filterBy">Filter <small>{{filteredDB.length}}</small> results by</label>\n                    <div id="filterBy">\n                        <input type="text" class="form-control" placeholder="Title starts with" ng-model="filters.titleStart">\n                        <input type="text" class="form-control" placeholder="Title contains" ng-model="filters.title">\n                        <input type="text" class="form-control" placeholder="Description contains" ng-model="filters.description">\n                        <input type="text" class="form-control" placeholder="Subjects contain" ng-model="filters.subjects">\n                        <input type="text" class="form-control" placeholder="Media Types contain" ng-model="filters.types">\n                        <input type="text" class="form-control" placeholder="Publisher contains" ng-model="filters.publisher">\n                        <input type="text" class="form-control" placeholder="Vendor contains" ng-model="filters.vendor">\n                        <select class="form-control" ng-model="filters.disabled" ng-options="val.value as val.name for val in disValues">\n                        </select>\n                    </div>\n                    <label for="sortBy">Sort by</label>\n                    <div id="sortBy">\n                        <button type="button" class="btn btn-default" ng-model="sortMode" btn-radio="0" ng-click="sortBy(0)">\n                            Title\n                            <span class="fa fa-fw fa-long-arrow-down" ng-show="!sortModes[0].reverse"></span>\n                            <span class="fa fa-fw fa-long-arrow-up" ng-show="sortModes[0].reverse"></span>\n                        </button>\n                        <button type="button" class="btn btn-default" ng-model="sortMode" btn-radio="1" ng-click="sortBy(1)">\n                            Creation Date\n                            <span class="fa fa-fw fa-long-arrow-down" ng-show="!sortModes[1].reverse"></span>\n                            <span class="fa fa-fw fa-long-arrow-up" ng-show="sortModes[1].reverse"></span>\n                        </button>\n                        <button type="button" class="btn btn-default" ng-model="sortMode" btn-radio="2" ng-click="sortBy(2)">\n                            Last Modified\n                            <span class="fa fa-fw fa-long-arrow-down" ng-show="!sortModes[2].reverse"></span>\n                            <span class="fa fa-fw fa-long-arrow-up" ng-show="sortModes[2].reverse"></span>\n                        </button>\n                        <button type="button" class="btn btn-default" ng-model="sortMode" btn-radio="3" ng-click="sortBy(3)">\n                            Temporary Disabled\n                            <span class="fa fa-fw fa-long-arrow-down" ng-show="!sortModes[3].reverse"></span>\n                            <span class="fa fa-fw fa-long-arrow-up" ng-show="sortModes[3].reverse"></span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            <div class="text-center">\n                <pagination total-items="filteredDB.length" ng-model="currentPage" max-size="maxPageSize" class="pagination-sm"\n                            boundary-links="true" rotate="false" items-per-page="perPage" ng-show="filteredDB.length > perPage"></pagination>\n            </div>\n            <div class="row row-clickable"\n                 ng-repeat="db in filteredDB | startFrom:(currentPage-1)*perPage | limitTo:perPage track by $index"\n                 ng-class="{sdOpen: db.show}">\n                <div class="col-md-12" ng-click="toggleDB(db)" style="cursor: pointer;">\n                    <div class="col-md-10">\n                        <h4>\n                            <a>\n                                <span class="fa fa-fw fa-caret-right" ng-hide="db.show"></span>\n                                <span class="fa fa-fw fa-caret-down" ng-show="db.show"></span>\n                            </a>\n                            <a>{{db.title}}</a>\n                            <small>{{db.publisher}} <span ng-show="db.vendor.length > 0">: {{db.vendor}}</span></small>\n                        </h4>\n                    </div>\n                    <div class="col-md-1 text-right">\n                        <h4>\n                            <small ng-if="db.tmpDisabled == 1"><span class="label label-warning">Tmp</span></small>\n                            <small ng-if="db.changed"><span class="label label-danger">Unsaved</span></small>\n                        </h4>\n                    </div>\n                    <div class="col-md-1">\n                        <h4 ng-show="db.disabled == 1 || db.tmpDisabled == 1"><small><span class="label label-danger">Disabled</span></small></h4>\n                    </div>\n                </div>\n                <div class="col-md-12" ng-if="db.show">\n                    <form ng-submit="updateDB(db)">\n                        <div class="col-md-6 form-group">\n                            <label for="{{db.id}}_title">Title</label>\n                            <input type="text" class="form-control" placeholder="{{db.title}}" ng-model="db.title"\n                                   id="{{db.id}}_title" maxlength="200" required ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-2 form-group">\n                            <label for="{{db.id}}_Publisher">Publisher</label>\n                            <input type="text" class="form-control" placeholder="{{db.publisher}}" ng-model="db.publisher"\n                                   id="{{db.id}}_Publisher" maxlength="100" ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-2 form-group">\n                            <label for="{{db.id}}_Vendor">Vendor</label>\n                            <input type="text" class="form-control" placeholder="{{db.vendor}}" ng-model="db.vendor"\n                                   id="{{db.id}}_Vendor" maxlength="100" ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-2 form-group">\n                            <label for="{{db.id}}_Format">Format</label>\n                            <input type="text" class="form-control" placeholder="{{db.format}}" ng-model="db.format"\n                                   id="{{db.id}}_Format" maxlength="50" ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-6 form-group">\n                            <label for="{{db.id}}_URL">URL</label>\n                            <input type="text" class="form-control" placeholder="{{db.url}}" ng-model="db.url"\n                                   id="{{db.id}}_URL" maxlength="2000" required ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-3 form-group">\n                            <label for="{{db.id}}_Location">Location</label>\n                            <input type="text" class="form-control" placeholder="{{db.location}}" ng-model="db.location"\n                                   id="{{db.id}}_Location" maxlength="50" ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-1 form-group">\n                            <label for="{{db.id}}_NotInEDS">In EDS</label>\n                            <select class="form-control" ng-model="db.notInEDS" ng-options="val for val in inEDSValues"\n                                    id="{{db.id}}_NotInEDS" ng-change="changed(db)">\n                            </select>\n                        </div>\n                        <div class="col-md-1 form-group">\n                            <label for="{{db.id}}_Full-text">Fulltext</label>\n                            <select class="form-control" ng-model="db.hasFullText" ng-options="val for val in fullTextValues"\n                                    id="{{db.id}}_Full-text" ng-change="changed(db)">\n                            </select>\n                        </div>\n                        <div class="col-md-1 form-group">\n                            <label for="{{db.id}}_Authenticate">Authenticate</label>\n                            <input type="checkbox" class="form-control" ng-model="db.auth" ng-true-value="1" ng-false-value="0"\n                                   id="{{db.id}}_Authenticate" ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-6 form-group">\n                            <label for="{{db.id}}_Coverage">Coverage</label>\n                            <input type="text" class="form-control" placeholder="{{db.coverage}}" ng-model="db.coverage"\n                                   id="{{db.id}}_Coverage" maxlength="256" ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-3 form-group">\n                            <label for="{{db.id}}_Notes">Notes</label>\n                            <input type="text" class="form-control" placeholder="{{db.notes}}" ng-model="db.notes"\n                                   id="{{db.id}}_Notes" maxlength="100" ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-3 form-group">\n                            <label for="{{db.id}}_Status">Status</label>\n                            <input type="text" class="form-control" placeholder="{{db.status}}" ng-model="db.status"\n                                   id="{{db.id}}_Status" maxlength="100" ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-12 form-group">\n                            <label for="{{db.id}}_descr">Database Description</label>\n                            <textarea class="form-control" rows="3" id="{{db.id}}_descr" ng-model="db.description" maxlength="4096"\n                                      required ng-change="changed(db)"></textarea>\n                        </div>\n                        <div class="col-md-1 form-group">\n                            <label for="{{db.id}}_presented">PresentedBy</label>\n                            <input type="text" class="form-control" placeholder="{{db.presentedBy}}" ng-model="db.presentedBy"\n                                   id="{{db.id}}_presented" maxlength="50" ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-1 form-group">\n                            <label for="{{db.id}}_Audience1">Audience1</label>\n                            <input type="text" class="form-control" placeholder="{{db.audience1}}" ng-model="db.audience1"\n                                   id="{{db.id}}_Audience1" maxlength="30" ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-2 form-group">\n                            <label for="{{db.id}}_Audience2">Audience2</label>\n                            <input type="text" class="form-control" placeholder="{{db.audience2}}" ng-model="db.audience2"\n                                   id="{{db.id}}_Audience2" maxlength="30" ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-2 form-group">\n                            <label for="{{db.id}}_updatedBy">Updated by</label>\n                            <p id="{{db.id}}_updatedBy">{{db.updatedBy}}</p>\n                        </div>\n                        <div class="col-md-2 form-group">\n                            <label for="{{db.id}}_dAuthor">Description Author</label>\n                            <input type="text" class="form-control" placeholder="{{db.descrAuthor}}" ng-model="db.descrAuthor"\n                                   id="{{db.id}}_dAuthor" maxlength="50" required ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-2 form-group">\n                            <label for="{{db.id}}_date1">Created/Modified</label>\n                            <p id="{{db.id}}_date1">{{db.dateCreated}}<br>{{db.lastModified}}</p>\n                        </div>\n                        <div class="col-md-1 form-group">\n                            <label for="{{db.id}}_Disable">Disabled</label>\n                            <input type="checkbox" class="form-control" ng-model="db.disabled" ng-true-value="1" ng-false-value="0"\n                                   id="{{db.id}}_Disable" ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-1 form-group">\n                            <label for="{{db.id}}_tmpDisable">TmpDisable</label>\n                            <input type="checkbox" class="form-control" ng-model="db.tmpDisabled" ng-true-value="1" ng-false-value="0"\n                                   id="{{db.id}}_tmpDisable" ng-change="changed(db)">\n                        </div>\n                        <div class="col-md-12">\n                            <div class="row">\n                                <div class="col-md-6 form-group">\n                                    <label for="{{db.id}}_subjects">Subjects</label>\n                                    <ul class="list-group" id="{{db.id}}_subjects">\n                                        <li class="list-group-item" ng-repeat="subject in db.subjects">\n                                            <button type="button" class="btn btn-danger" ng-click="deleteSubject(db,subject)">Delete</button>\n                                            {{subject.subject}} : {{subject.type}}\n                                        </li>\n                                        <li class="list-group-item">\n                                            <div class="row">\n                                                <div class="col-md-7">\n                                                    <select class="form-control" ng-model="db.selSubj" ng-options="sub.subject for sub in subjects">\n                                                    </select>\n                                                </div>\n                                                <div class="col-md-2">\n                                                    <select class="form-control" ng-model="db.subjType" ng-options="val for val in subjectValues">\n                                                    </select>\n                                                </div>\n                                                <div class="col-md-3">\n                                                    <button type="button" class="btn btn-success" ng-click="addSubject(db)">Add Subject</button>\n                                                </div>\n                                            </div>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <div class="col-md-6 form-group">\n                                    <label for="{{db.id}}_types">Types</label>\n                                    <ul class="list-group" id="{{db.id}}_types">\n                                        <li class="list-group-item" ng-repeat="type in db.types">\n                                            <button type="button" class="btn btn-danger" ng-click="deleteType(db,type)">Delete</button>\n                                            {{type.type}}\n                                        </li>\n                                        <li class="list-group-item form-inline">\n                                            <select class="form-control" ng-model="db.selType" ng-options="typ.type for typ in types">\n                                            </select>\n                                            <button type="button" class="btn btn-success" ng-click="addType(db)">Add Type</button>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="col-md-12 text-center">\n                            <button type="submit" class="btn btn-success">Update information</button>\n                            <button type="button" class="btn btn-danger" ng-click="deleteDB(db)">\n                                Delete {{db[0]}} database\n                            </button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n        <div class="text-center">\n            <pagination total-items="filteredDB.length" ng-model="currentPage" max-size="maxPageSize" class="pagination-sm"\n                        boundary-links="true" rotate="false" items-per-page="perPage" ng-show="filteredDB.length > perPage"></pagination>\n        </div>\n\n        <h3>Create new Database</h3>\n        <form ng-submit="createDB()">\n            <div class="row sdOpen">\n                <div class="col-md-12">\n                    <div class="col-md-6 form-group">\n                        <label for="title">Title</label>\n                        <input type="text" class="form-control" placeholder="Database Title" ng-model="newDB.title"\n                               id="title" maxlength="200" required>\n                    </div>\n                    <div class="col-md-2 form-group">\n                        <label for="Publisher">Publisher</label>\n                        <input type="text" class="form-control" placeholder="Publisher" ng-model="newDB.publisher"\n                               id="Publisher" maxlength="100">\n                    </div>\n                    <div class="col-md-2 form-group">\n                        <label for="Vendor">Vendor</label>\n                        <input type="text" class="form-control" placeholder="Vendor" ng-model="newDB.vendor"\n                               id="Vendor" maxlength="100">\n                    </div>\n                    <div class="col-md-2 form-group">\n                        <label for="Format">Format</label>\n                        <input type="text" class="form-control" placeholder="Format" ng-model="newDB.format"\n                               id="Format" maxlength="50">\n                    </div>\n                    <div class="col-md-6 form-group">\n                        <label for="URL">URL</label>\n                        <input type="text" class="form-control" placeholder="http://www.example.com/" ng-model="newDB.url"\n                               id="URL" maxlength="2000" required>\n                    </div>\n                    <div class="col-md-3 form-group">\n                        <label for="Location">Location</label>\n                        <input type="text" class="form-control" placeholder="Location" ng-model="newDB.location"\n                               id="Location" maxlength="50">\n                    </div>\n                    <div class="col-md-1 form-group">\n                        <label for="NotInEDS">In EDS</label>\n                        <select class="form-control" ng-model="newDB.notInEDS" ng-options="val for val in inEDSValues"\n                                id="NotInEDS">\n                        </select>\n                    </div>\n                    <div class="col-md-1 form-group">\n                        <label for="Full-text">Fulltext</label>\n                        <select class="form-control" ng-model="newDB.hasFullText" ng-options="val for val in fullTextValues"\n                                id="Full-text">\n                        </select>\n                    </div>\n                    <div class="col-md-1 form-group">\n                        <label for="Authenticate">Authenticate</label>\n                        <input type="checkbox" class="form-control" ng-model="newDB.auth" ng-true-value="\'1\'" ng-false-value="\'0\'"\n                               id="Authenticate">\n                    </div>\n                    <div class="col-md-6 form-group">\n                        <label for="Coverage">Coverage</label>\n                        <input type="text" class="form-control" placeholder="Database Coverage" ng-model="newDB.coverage"\n                               id="Coverage" maxlength="256">\n                    </div>\n                    <div class="col-md-3 form-group">\n                        <label for="dAuthor">Description Author</label>\n                        <input type="text" class="form-control" placeholder="Enter Author Name" ng-model="newDB.descrAuthor"\n                               id="dAuthor" maxlength="50">\n                    </div>\n                    <div class="col-md-3 form-group">\n                        <label for="Status">Status</label>\n                        <input type="text" class="form-control" placeholder="Status" ng-model="newDB.status"\n                               id="Status" maxlength="100">\n                    </div>\n                    <div class="col-md-12 form-group">\n                        <label for="descr">Database Description</label>\n                        <textarea class="form-control" rows="3" id="descr" ng-model="newDB.description" maxlength="4096" required></textarea>\n                    </div>\n                    <div class="col-md-2 form-group">\n                        <label for="presented">Presented by</label>\n                        <input type="text" class="form-control" placeholder="Presented By" ng-model="newDB.presentedBy"\n                               id="presented" maxlength="50">\n                    </div>\n                    <div class="col-md-2 form-group">\n                        <label for="Audience1">Audience One</label>\n                        <input type="text" class="form-control" placeholder="Audience One" ng-model="newDB.audience1"\n                               id="Audience1" maxlength="30">\n                    </div>\n                    <div class="col-md-2 form-group">\n                        <label for="Audience2">Audience Two</label>\n                        <input type="text" class="form-control" placeholder="Audience Two" ng-model="newDB.audience2"\n                               id="Audience2" maxlength="30">\n                    </div>\n                    <div class="col-md-4 form-group">\n                        <label for="Notes">Notes</label>\n                        <input type="text" class="form-control" placeholder="Notes" ng-model="newDB.notes"\n                               id="Notes" maxlength="100">\n                    </div>\n                    <div class="col-md-1 form-group">\n                        <label for="Disable">Disabled</label>\n                        <input type="checkbox" class="form-control" ng-model="newDB.disabled" ng-true-value="\'1\'" ng-false-value="\'0\'"\n                               id="Disable">\n                    </div>\n                    <div class="col-md-1 form-group">\n                        <label for="tmpDisable">TmpDisable</label>\n                        <input type="checkbox" class="form-control" ng-model="newDB.tmpDisabled" ng-true-value="\'1\'" ng-false-value="\'0\'"\n                               id="tmpDisable">\n                    </div>\n                    <div class="row">\n                        <div class="col-md-6 form-group">\n                            <label for="subjects">Subjects</label>\n                            <ul class="list-group" id="subjects">\n                                <li class="list-group-item" ng-repeat="subject in newDB.subjects">\n                                    <button type="button" class="btn btn-danger" ng-click="delSubjNewDB($index)">Delete</button>\n                                    {{subject.subject}} : {{subject.type}}\n                                </li>\n                                <li class="list-group-item col-md-12">\n                                    <div class="col-md-7">\n                                        <select class="form-control" ng-model="newDB.selSubj" ng-options="sub.subject for sub in subjects">\n                                        </select>\n                                    </div>\n                                    <div class="col-md-2">\n                                        <select class="form-control" ng-model="newDB.subjType" ng-options="val for val in subjectValues">\n                                        </select>\n                                    </div>\n                                    <div class="col-md-3">\n                                        <button type="button" class="btn btn-success" ng-click="addSubjNewDB()">Add Subject</button>\n                                    </div>\n                                </li>\n                            </ul>\n                        </div>\n                        <div class="col-md-6 form-group">\n                            <label for="types">Types</label>\n                            <ul class="list-group" id="types">\n                                <li class="list-group-item" ng-repeat="type in newDB.types">\n                                    <button type="button" class="btn btn-danger" ng-click="delTypeNewDB($index)">Delete</button>\n                                    {{type.type}}\n                                </li>\n                                <li class="list-group-item form-inline">\n                                    <select class="form-control" ng-model="newDB.selType" ng-options="typ.type for typ in types">\n                                    </select>\n                                    <button type="button" class="btn btn-success" ng-click="addTypeNewDB()">Add Type</button>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div class="col-md-12 text-center">\n                        <button type="submit" class="btn btn-success">Create Database Record</button><br>\n                        {{formResponse}}\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    <div ng-if="!hasAccess">\n        <h3>Sorry, you don\'t have permissions to edit databases</h3>\n    </div>\n</div>')}]),angular.module("manageERCarousel/manageERCarousel.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageERCarousel/manageERCarousel.tpl.html",'<div class="container">\n    <h2>Manage ER Carousel Slides</h2>\n\n    <div manage-slide-list>\n    </div>\n\n    <div ng-if="!hasAccess">\n        <h3>Sorry, you don\'t have permissions to edit slides</h3>\n    </div>\n</div>')}]),angular.module("manageERCarousel/manageSlideFields.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageERCarousel/manageSlideFields.tpl.html",'<div class="row">\n    <div class="col-xs-12 col-sm-6 form-group">\n        <label for="title">Title</label>\n        <input type="text" class="form-control" placeholder="Slide Title" ng-model="slide.title"\n               id="title" maxlength="150" required>\n    </div>\n    <div class="col-xs-12 col-sm-6 form-group">\n        <label for="url">URL</label>\n        <input type="text" class="form-control" placeholder="http://www.example.com" ng-model="slide.url"\n               id="url" maxlength="1024" required>\n    </div>\n</div>\n<div class="row">\n    <div class="col-xs-6 col-sm-3 form-group">\n        <label for="priority">Priority</label>\n        <input type="number" class="form-control" placeholder="13" ng-model="slide.tmpPriority"\n               id="priority" required>\n    </div>\n    <div class="col-xs-6 col-sm-3 form-group">\n        <label for="browse">Select Image</label>\n        <div id="browse">\n            <button type="file" ngf-select="" ng-model="slide.picFile" accept="image/*" ngf-multiple="false"\n                    ngf-change="generateThumb($files, slide)" class="btn btn-primary">\n                <span class="fa fa-fw fa-plus"></span>Browse\n            </button>\n        </div>\n    </div>\n    <div class="col-xs-12 col-sm-6 form-group">\n        <label for="selected">Selected Image</label>\n        <div id="selected">\n            <div ng-repeat="img in slide.selectedFiles">\n                <img ngf-src="img" width="150px" height="100px">\n                <button type="button" class="btn btn-danger" ng-click="slide.selectedFiles.splice($index,1)">\n                    <span class="fa fa-fw fa-close"></span>\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n')}]),angular.module("manageERCarousel/manageSlideList.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageERCarousel/manageSlideList.tpl.html",'<div>\n    <form ng-submit="createSlide(newSlide)">\n        <div class="sdOpen">\n            <h3>Add New Slide</h3>\n            <div slide-fields-list slide="newSlide"></div>\n            <div class="row text-center form-group">\n                <button type="submit" class="btn btn-success" ng-disabled="uploading">\n                    <span class="fa fa-plus"></span> Create New Slide\n                </button><br>\n                {{newSlide.formResponse}}\n            </div>\n        </div>\n    </form>\n\n    <h3>Slides (only top <span class="label label-info">{{numShow}}</span> slides will be shown)</h3>\n    <div class="row" ng-repeat="slide in slides | orderBy:\'priority\':true">\n        <div class="col-xs-2 col-sm-1">\n            <h2 class="clickable" ng-click="toggleSlide(slide)">\n                <span class="label label-success" ng-if="$index < numShow">{{$index + 1}}</span>\n            </h2>\n            <button type="button" class="btn btn-danger" ng-click="approveSlide(slide)"\n                    ng-if="slide.status < 1 && admin">\n                <span class="fa fa-thumbs-o-up"></span> Approve\n            </button>\n            <span class="label label-warning" ng-if="slide.status < 1 && !admin">Approval Pending</span>\n        </div>\n        <div class="col-xs-10 col-sm-4 col-md-3">\n            <a class="thumbnail clickable" ng-click="toggleSlide(slide)">\n                <img ng-src="{{slide.image}}" alt="Click to edit slide">\n            </a>\n        </div>\n        <div class="col-xs-12 col-sm-7 col-md-8 clickable" ng-hide="slide.show" ng-click="toggleSlide(slide)">\n            <h4><a>{{slide.title}}</a></h4>\n            <h5><a>{{slide.url}}</a></h5>\n        </div>\n        <div class="col-xs-12 col-sm-7 col-md-8" ng-show="slide.show">\n            <form ng-submit="updateSlide(slide)">\n                <div slide-fields-list slide="slide"></div>\n                <div class="row text-center">\n                    <button type="submit" class="btn btn-success" ng-disabled="uploading">\n                        <span class="fa fa-save"></span> Update Slide\n                    </button>\n                    <button type="button" class="btn btn-danger" ng-click="deleteSlide(slide)">\n                        <span class="fa fa-trash-o"></span> Delete Slide\n                    </button><br>\n                    {{slide.formResponse}}\n                </div>\n            </form>\n        </div>\n    </div>\n\n</div>\n\n')}]),angular.module("manageHours/manageEx.tpl.html",[]).run(["$templateCache",function($templateCache){
$templateCache.put("manageHours/manageEx.tpl.html",'<div>\n    <h3>List of Exceptions</h3>\n    <div class="text-right">\n        <button type="button" class="btn btn-danger" ng-click="deleteOldExc()" ng-disabled="loading">Delete All Outdated Exceptions</button>\n        <br>{{resultDel}}\n    </div>\n    <table class="table table-hover table-condensed" ng-repeat="excData in allowedLibraries.exc" ng-if="$index == selLib.index">\n        <thead>\n        <tr>\n            <th>Exception Description</th>\n            <th class="text-center" style="width:140px;">Date</th>\n            <th class="text-center" style="width:80px;">Days</th>\n            <th class="text-center" style="width:320px;">Hours</th>\n            <th class="text-center" style="width:120px;">Action</th>\n        </tr>\n        </thead>\n        <tr ng-repeat="exception in excData track by exception.id" ng-click="expandExc($event, exception)">\n            <td style="cursor: pointer;">\n                <div ng-hide="isExpExc(exception.id)"><a>{{exception.desc}}</a></div>\n                <div ng-if="isExpExc(exception.id)"><input type="text" class="form-control" ng-model="exception.desc" ng-required /></div>\n            </td>\n            <td class="text-center" style="cursor: pointer;">\n                <div ng-hide="isExpExc(exception.id)">{{exception.datems | date : \'MMM d, y\'}}</div>\n                <div ng-if="isExpExc(exception.id)">\n\n                    <input type="text" class="form-control" datepicker-popup="{{format}}"\n                           ng-model="exception.datems" is-open="exception.dp"\n                           ng-required="true" close-text="Close"\n                           ng-focus="onExcFocus($event, $index)" />\n                </div>\n            </td>\n            <td class="text-center" style="cursor: pointer;">\n                <div ng-hide="isExpExc(exception.id)">{{exception.days}}</div>\n                <div ng-if="isExpExc(exception.id)"><input type="text" class="form-control" ng-model="exception.days" ng-required /></div>\n            </td>\n            <td class="text-center">\n                <div class="row">\n                    <div class="col-md-6 form-group">\n                        <select class="form-control" ng-model="exception.from">\n                            <option ng-repeat="hours in hrsFrom" ng-selected="exception.from == hours.value" ng-value="hours.value">{{hours.name}}</option>\n                        </select>\n                    </div>\n                    <div class="col-md-6 form-group">\n                        <select class="form-control" ng-model="exception.to">\n                            <option ng-repeat="hours in hrsTo" ng-selected="exception.to == hours.value" ng-value="hours.value">{{hours.name}}</option>\n                        </select>\n                    </div>\n                </div>\n            </td>\n            <td class="form-group text-center">\n                <div ng-show="isExpExc(exception.id)">\n                    <button type="button" class="btn btn-success" ng-click="updateExc(exception)" ng-disabled="loading">\n                        <span class="fa fa-fw fa-edit"></span>\n                    </button>\n                    <button type="button" class="btn btn-danger" ng-click="deleteExc(exception, $index)" ng-disabled="loading">\n                        <span class="fa fa-fw fa-close"></span>\n                    </button>\n                    <br>{{result}}\n                </div>\n            </td>\n        </tr>\n        <tr class="sdOpen">\n            <td>\n                <input type="text" class="form-control" ng-model="newException.desc" placeholder="Exception Description" ng-required />\n            </td>\n            <td class="text-center">\n\n                <input type="text" class="form-control" datepicker-popup="{{format}}" show-button-bar="false"\n                       ng-model="newException.datems" is-open="newException.dp" close-text="Close"\n                       ng-required="true" placeholder="MM/DD/YYYY" ng-focus="onExcFocus($event)" />\n            </td>\n            <td class="text-center">\n                <input type="text" class="form-control" ng-model="newException.days" placeholder="Days" ng-required />\n            </td>\n            <td class="text-center">\n                <div class="row">\n                    <div class="col-md-6">\n                        <select class="form-control" ng-model="newException.from">\n                            <option ng-repeat="hours in hrsFrom" ng-selected="newException.from == hours.value" ng-value="hours.value">{{hours.name}}</option>\n                        </select>\n                    </div>\n                    <div class="col-md-6">\n                        <select class="form-control" ng-model="newException.to">\n                            <option ng-repeat="hours in hrsTo" ng-selected="newException.to == hours.value" ng-value="hours.value">{{hours.name}}</option>\n                        </select>\n                    </div>\n                </div>\n            </td>\n            <td class="form-group text-right">\n                <label for="isGlobal">Create For All Libraries</label>\n                <input type="checkbox" ng-model="newException.isGlobal" id="isGlobal">\n                <br>\n                <button type="button" class="btn btn-success" ng-click="createExc()"\n                        ng-disabled="loading || newException.desc.length < 1 || !(newException.days > 0) || newException.datems.length < 1">\n                    Create Exception\n                </button>\n                <br>{{result}}\n            </td>\n        </tr>\n    </table>\n</div>')}]),angular.module("manageHours/manageHours.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageHours/manageHours.tpl.html",'<div class="container">\n    <h2>\n        Manage Hours <small>{{selLib.name}}</small>\n    </h2>\n\n    <div ng-if="hasAccess">\n        <div class="row">\n            <div class="col-md-4 form-group">\n                <select class="form-control" ng-model="selLib" ng-options="lib.name for lib in allowedLibraries.libraries">\n                </select>\n            </div>\n        </div>\n        <div class="alert alert-warning" role="alert">\n            <span class="fa fa-exclamation-triangle"></span> Warning: Please use exceptions in order to create periods with the non\n            standard hours (for example, Finals week).\n        </div>\n        <div class="alert alert-info" role="alert">\n            <span class="fa fa-info-circle"></span> Note: set <strong>From</strong> and <strong>To</strong> hours to\n            <strong>Midnight</strong> in order to indicate <strong>Open 24 hours</strong>.\n        </div>\n        <tabset justified="true">\n            <tab ng-repeat="tab in tabs" heading="{{tab.name}}" active="tab.active">\n                <div ng-if="tab.number == 0">\n                    <div semester-list semesters="allowedLibraries.sem">\n                    </div>\n                </div>\n                <div ng-if="tab.number == 1" >\n                    <div exception-list exceptions="allowedLibraries.exc">\n                    </div>\n                </div>\n            </tab>\n        </tabset>\n    </div>\n    <div ng-if="userInfo.hours.admin">\n        <h3><a href="/#/manage-hours-users">Manage Users</a></h3>\n    </div>\n    <div ng-if="!hasAccess">\n        <h3>Sorry, you don\'t have permissions to manage hours</h3>\n    </div>\n</div>')}]),angular.module("manageHours/manageHoursUsers.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageHours/manageHoursUsers.tpl.html",'<div class="container">\n    <h2>Manage Hours Users</h2>\n\n    <tabset justified="true" ng-if="hasAccess">\n        <tab ng-repeat="tab in tabs" heading="{{tab.name}}" active="tab.active">\n            <div ng-show="tab.number == 0">\n                <div hours-user-list>\n                </div>\n            </div>\n            <div ng-show="tab.number == 1">\n                <div hours-location-list>\n                </div>\n            </div>\n        </tab>\n    </tabset>\n    <div ng-if="!hasAccess">\n        <h3>Sorry, you don\'t have permissions to manage hours users</h3>\n    </div>\n</div>')}]),angular.module("manageHours/manageLoc.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageHours/manageLoc.tpl.html",'<table class="table table-hover table-condensed">\n    <thead>\n    <tr>\n        <th>Library Name</th>\n        <th class="text-center">ID</th>\n        <th class="text-center">Parent ID</th>\n        <th class="text-center">Action</th>\n    </tr>\n    </thead>\n    <tr ng-repeat="lib in dataUL.locations" ng-click="expandLoc(lib)">\n        <td>\n            {{lib.name}}\n        </td>\n        <td class="text-center">\n            {{lib.lid}}\n        </td>\n        <td class="text-center">\n            {{lib.parent}}\n        </td>\n        <td class="text-right">\n        </td>\n    </tr>\n    <tr>\n        <td>\n            <input type="text" class="form-control" size="30" ng-model="newLocation" placeholder="Library Name" ng-required />\n        </td>\n        <td class="text-center">\n        </td>\n        <td class="text-center">\n            <select class="form-control" ng-model="newParent" ng-options="lib.name for lib in dataUL.locations">\n                <option value="" selected>Select parent library</option>\n            </select>\n        </td>\n        <td class="text-right">\n            <button type="button" class="btn btn-success" ng-click="createLoc(newLocation, newParent)" ng-disabled="isLoading">Create Location</button>\n            <br>{{result2}}\n        </td>\n    </tr>\n</table>\n')}]),angular.module("manageHours/manageSem.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageHours/manageSem.tpl.html",'<div>\n    <h3>Semester List</h3>\n    <table class="table table-hover table-condensed" ng-repeat="semData in allowedLibraries.sem" ng-if="$index == selLib.index">\n        <thead>\n        <tr>\n            <th>Semester</th>\n            <th class="text-center" style="width:10%">Sun</th>\n            <th class="text-center" style="width:10%">Mon</th>\n            <th class="text-center" style="width:10%">Tue</th>\n            <th class="text-center" style="width:10%">Wed</th>\n            <th class="text-center" style="width:10%">Thu</th>\n            <th class="text-center" style="width:10%">Fri</th>\n            <th class="text-center" style="width:10%">Sat</th>\n        </tr>\n        </thead>\n        <tr ng-repeat="sem in semData" ng-click="expandSem($event, sem)" style="cursor: pointer;">\n            <th ng-hide="isExpSem(sem.dsid)">\n                <h4><a>{{sem.name}}</a></h4>\n                {{sem.startdate | date : \'MMM d, y\'}}<br>{{sem.enddate | date : \'MMM d, y\'}}\n            </th>\n            <th ng-if="isExpSem(sem.dsid)">\n                <h4><a>{{sem.name}}</a></h4>\n                <div class="col-md-7 form-group">\n                    <label for="{{sem.dsid}}_startDate">Start Date</label>\n                    <input type="text" class="form-control" datepicker-popup="{{format}}" size="3"\n                           ng-model="sem.startdate" is-open="sem.dp" ng-required="true" close-text="Close"\n                           ng-focus="onSemFocus($event, $index)" id="{{sem.dsid}}_startDate" placeholder="MM/DD/YYYY"/>\n                </div>\n                <div class="col-md-5 form-group">\n                    <div id="{{sem.dsid}}_action">\n                        <button type="button" class="btn btn-success" ng-click="saveChanges(sem)" ng-disabled="loading">\n                            <span class="fa fa-fw fa-edit"></span>\n                        </button>\n                        <button type="button" class="btn btn-danger" ng-click="deleteSem(sem, $index)" ng-disabled="loading">\n                            <span class="fa fa-fw fa-close"></span>\n                        </button><br>\n                        {{result}}\n                    </div>\n                </div>\n            </th>\n            <td class="text-center" ng-repeat="day in sem.dow">\n                <div ng-hide="isExpSem(sem.dsid)">\n                    {{day.hours}}\n                </div>\n                <div ng-if="isExpSem(sem.dsid)">\n                    <select class="form-control" ng-model="day.from">\n                        <option ng-repeat="hours in hrsFrom" ng-selected="day.from == hours.value" ng-value="hours.value">{{hours.name}}</option>\n                    </select>\n                    <select class="form-control" ng-model="day.to">\n                        <option ng-repeat="hours in hrsTo" ng-selected="day.to == hours.value" ng-value="hours.value">{{hours.name}}</option>\n                    </select>\n                </div>\n            </td>\n        </tr>\n    </table>\n\n    <h3>Create New Semester</h3>\n    <div class="sdOpen">\n        <table class="table table-hover table-condensed">\n            <thead>\n            <tr>\n                <th>Semester</th>\n                <th class="text-center" style="width:10%;">Sun</th>\n                <th class="text-center" style="width:10%;">Mon</th>\n                <th class="text-center" style="width:10%;">Tue</th>\n                <th class="text-center" style="width:10%;">Wed</th>\n                <th class="text-center" style="width:10%;">Thu</th>\n                <th class="text-center" style="width:10%;">Fri</th>\n                <th class="text-center" style="width:10%;">Sat</th>\n            </tr>\n            </thead>\n            <tr>\n                <th>\n                    <div class="input-group">\n                        <input type="text" class="form-control" ng-minlength="4" ng-maxlength="32" ng-model="newSemester.name" placeholder="Semester Name" ng-required /><br>\n                        <input type="text" class="form-control" datepicker-popup="{{format}}" placeholder="Start Date (MM/DD/YYYY)"\n                               ng-model="newSemester.startdate" is-open="newSemester.dp" ng-required="true" close-text="Close"\n                               ng-focus="onSemFocus($event)" />\n                    </div>\n                    <div class="form-group">\n                        <button type="button" class="btn btn-success" ng-click="createSem()"\n                                ng-disabled="loading || newSemester.name.length < 1 || newSemester.startdate.length < 1">\n                            Create New Semester\n                        </button>\n                    </div>\n                    {{result}}\n                </th>\n                <td class="text-center" style="width:11%" ng-repeat="day in newSemester.dow">\n                    <select class="form-control" ng-model="day.from">\n                        <option ng-repeat="hours in hrsFrom" ng-selected="day.from == hours.value" ng-value="hours.value">{{hours.name}}</option>\n                    </select>\n                    <select class="form-control" ng-model="day.to">\n                        <option ng-repeat="hours in hrsTo" ng-selected="day.to == hours.value" ng-value="hours.value">{{hours.name}}</option>\n                    </select>\n                </td>\n            </tr>\n        </table>\n    </div>\n</div>')}]),angular.module("manageHours/manageUsers.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageHours/manageUsers.tpl.html",'<table class="table table-hover table-condensed">\n    <thead>\n    <tr>\n        <th>User Login</th>\n        <th class="text-center">Access to This Page</th>\n        <th class="text-center">Library Access</th>\n        <th class="text-center">Action</th>\n    </tr>\n    </thead>\n    <tr ng-repeat="user in dataUL.users | orderBy:\'name\'" ng-click="expandUser(user)">\n        <th scope="row">{{user.fullName}}\n        </th>\n        <td class="text-center">\n            <input type="checkbox" ng-model="user.role">\n        </td>\n        <td class="text-left">\n            <div class="row" ng-repeat="lib in dataUL.locations">\n                <div class="col-md-2">\n                    <input type="checkbox" ng-model="user.access[$index]" ng-show="isExpUser(user.uid)">\n                </div>\n                <div class="col-md-10">\n                    <div ng-show="isExpUser(user.uid) || user.access[$index]">{{lib.name}}</div>\n                </div>\n            </div>\n        </td>\n        <td class="text-center">\n            <div ng-show="isExpUser(user.uid)">\n                <button type="button" class="btn btn-success" ng-click="updateUser(user)" ng-disabled="isLoading">\n                    Save\n                </button>\n                <button type="button" class="btn btn-danger" ng-click="deleteUser(user, $index)" ng-disabled="isLoading">\n                    Delete\n                </button><br>\n                {{result}}\n            </div>\n        </td>\n    </tr>\n    <tr>\n        <th scope="row">\n            <select class="form-control" ng-model="newUser" ng-options="user.fullName for user in wpUsers | orderBy:\'fullName\'">\n            </select>\n        </th>\n        <td class="text-center">\n            <input type="checkbox" ng-model="newUserAdmin">\n        </td>\n        <td class="text-left">\n            <div class="row" ng-repeat="lib in dataUL.locations">\n                <div class="col-md-2">\n                    <input type="checkbox" ng-model="newUserAccess[$index]">\n                </div>\n                <div class="col-md-10">\n                    {{lib.name}}\n                </div>\n            </div>\n        </td>\n        <td class="text-center">\n            <div>\n                <button type="button" class="btn btn-success" ng-click="createUser(newUser)" ng-disabled="isLoading || newUser.login.length <= 1">\n                    Grant Access\n                </button><br>\n                {{result2}}\n            </div>\n        </td>\n    </tr>\n</table>\n')}]),angular.module("manageNews/manageNews.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageNews/manageNews.tpl.html",'<div class="container">\n    <h2>Manage News and Exhibitions</h2>\n\n    <tabset justified="true" ng-if="hasAccess">\n        <tab ng-repeat="tab in tabs" heading="{{tab.name}}" active="tab.active">\n            <div ng-show="tab.number == 0">\n                <div manage-news-list>\n                </div>\n            </div>\n            <div ng-show="tab.number == 1" >\n                <div manage-admins-list>\n                </div>\n            </div>\n        </tab>\n    </tabset>\n    <div ng-if="!hasAccess">\n        <h3>Sorry, you don\'t have permissions to edit news</h3>\n    </div>\n</div>')}]),angular.module("manageNews/manageNewsAdmins.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageNews/manageNewsAdmins.tpl.html",'<div class="row" ng-if="userInfo.news.admin">\n    <div class="col-md-12">\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                <h3 class="panel-title">People who can approve submitted News and Exhibits</h3>\n            </div>\n            <div class="panel-body">\n                <ul class="list-group">\n                    <li class="list-group-item" ng-repeat="admin in data.admins">\n                        {{admin.name}}\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="row" ng-if="!userInfo.news.admin">\n    <div class="col-md-12">\n        <div class="panel panel-default">\n            <div class="panel-heading">\n                <h3 class="panel-title">People who can approve submitted News and Exhibits</h3>\n            </div>\n            <div class="panel-body">\n                <ul class="list-group">\n                    <li class="list-group-item" ng-repeat="admin in data.admins">\n                        {{admin.name}}\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("manageNews/manageNewsItemFields.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageNews/manageNewsItemFields.tpl.html",'<div class="row">\n    <div class="col-md-6 form-group">\n        <label for="title">Title</label>\n        <input type="text" class="form-control" placeholder="News/Exhibit Title" ng-model="news.title"\n               id="title" maxlength="100" required>\n    </div>\n    <div class="col-md-2 form-group">\n        <div ng-show="news.type > 0">\n            <label for="from">Active From</label>\n            <input type="text" class="form-control" id="from" datepicker-popup="{{dpFormat}}"\n                   ng-model="news.activeFrom" is-open="news.dpFrom" close-text="Close"\n                   ng-click="onNewsDPFocus($event, news, true)"/>\n        </div>\n    </div>\n    <div class="col-md-2 form-group">\n        <div ng-show="news.type > 0">\n            <label for="until">Active Until</label>\n            <input type="text" class="form-control" id="until" datepicker-popup="{{dpFormat}}"\n                   ng-model="news.activeUntil" is-open="news.dpUntil" close-text="Close"\n                   ng-click="onNewsDPFocus($event, news, false)"/>\n        </div>\n    </div>\n    <div class="col-md-1 form-group">\n        <label for="isExhibit">Exhibit</label>\n        <div class="checkbox text-center" id="isExhibit">\n            <input type="checkbox" ng-model="news.type" ng-true-value="1" ng-false-value="0">\n        </div>\n    </div>\n    <div class="col-md-1 form-group">\n        <label for="sticky">Sticky</label>\n        <div class="checkbox text-center" id="sticky">\n            <input type="checkbox" ng-model="news.sticky" ng-true-value="1" ng-false-value="0">\n        </div>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-2 form-group">\n        <label for="browse">Select Image</label>\n        <div id="browse">\n            <button type="file" ngf-select="" ng-model="news.picFile" ngf-multiple="false" accept="image/*"\n                    ngf-change="generateThumb($files, news)" class="btn btn-success">\n                <span class="fa fa-fw fa-plus"></span>Browse\n            </button>\n        </div>\n    </div>\n    <div class="col-md-4 form-group">\n        <label for="selected">Selected Image</label>\n        <div id="selected">\n            <div class="col-md-3" ng-repeat="img in news.images">\n                <img ng-src="{{img.image}}" width="150px" height="100px">\n                <button type="button" class="btn btn-danger" ng-click="news.images.splice($index,1)">\n                    <span class="fa fa-fw fa-close"></span>\n                </button>\n            </div>\n            <div class="col-md-3" ng-repeat="img in news.selectedFiles">\n                <img ngf-src="img" width="150px" height="100px">\n                <button type="button" class="btn btn-danger" ng-click="news.selectedFiles.splice($index,1)">\n                    <span class="fa fa-fw fa-close"></span>\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="col-md-6 form-group">\n        <label for="altText">Alternative text (note: required for accessibliity)</label>\n        <div id="altText">\n            <input ng-model="news.altText" style="width: 100%;"></input>\n        </div>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12 form-group">\n        <label>Detailed Description</label>\n        <textarea ui-tinymce="tinymceOptions" ng-model="news.description" rows="5" maxlength="64000" required></textarea>\n    </div>\n</div>\n<div class="row form-group">\n    <div class="col-md-12">\n        <h4><small>Select contact person from the list or enter new contact information</small></h4>\n    </div>\n    <div class="form-group">\n        <div class="col-md-3">\n            <label for="contact1">Library Faculty and Staff</label>\n            <select class="form-control" id="contact1" ng-options="people.fullName for people in data.people"\n                    ng-model="news.contactID">\n            </select>\n        </div>\n        <div class="col-md-3">\n            <label for="contact2">Name</label>\n            <input type="text" class="form-control" placeholder="Contact Name" ng-model="news.contactName"\n                   id="contact2" maxlength="60">\n        </div>\n        <div class="col-md-3">\n            <label for="contact3">Email</label>\n            <input type="text" class="form-control" placeholder="Contact Email" ng-model="news.contactEmail"\n                   id="contact3"  maxlength="1024">\n        </div>\n        <div class="col-md-3">\n            <label for="contact4">Phone</label>\n            <input type="text" class="form-control" placeholder="Contact Phone" ng-model="news.contactPhone"\n                   id="contact4" maxlength="20">\n        </div>\n    </div>\n</div>\n')}]),angular.module("manageNews/manageNewsList.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageNews/manageNewsList.tpl.html",'<div>\n    <form name="addNewsExh" ng-submit="createNews()">\n        <div class="sdOpen">\n            <h3>Add News Record</h3>\n            <div news-item-fields-list newsdata="newNews" list="data"></div>\n            <div class="row text-center form-group">\n                <button type="submit" class="btn btn-success" ng-disabled="uploading">Create New Record</button><br>\n                {{newNews.formResponse}}\n            </div>\n        </div>\n    </form>\n\n    <h3>News</h3>\n    <div class="row form-inline">\n        <div class="form-group col-md-12">\n            <label for="filterBy">Filter <small>{{filteredNews.length}}</small> results by</label>\n            <div id="filterBy">\n                <input type="text" class="form-control" placeholder="Title contains" ng-model="titleFilter">\n                <input type="text" class="form-control" placeholder="Description contains" ng-model="descrFilter">\n            </div>\n        </div>\n    </div>\n    <div class="text-center">\n        <pagination total-items="filteredNews.length" ng-model="currentPage" max-size="maxPageSize" class="pagination-sm"\n                    boundary-links="true" rotate="false" items-per-page="perPage" ng-show="filteredNews.length > perPage"></pagination>\n    </div>\n    <div class="table-responsive">\n        <table class="table table-condensed table-hover">\n            <thead>\n            <tr>\n                <th style="width:80px">\n                    Thumbnail\n                </th>\n                <th class="hidden-xs">\n                    <a\n                       ng-click="sortBy(0)"\n                       ng-class="{\'sortable\': !sortModes[0].reverse && sortMode == 0, \'sortable-reverse\': sortModes[0].reverse && sortMode == 0}">\n                        Details\n                    </a>\n                </th>\n                <th class="hidden-xs" style="width: 8%">\n                    <a\n                       ng-click="sortBy(1)"\n                       ng-class="{\'sortable\': !sortModes[1].reverse && sortMode == 1, \'sortable-reverse\': sortModes[1].reverse && sortMode == 1}">\n                        Date\n                    </a>\n                </th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="news in filteredNews = (data.news | filter:{title:titleFilter}\n                                                             | filter:{description:descrFilter}\n                                                             | orderBy:sortModes[sortMode].by:sortModes[sortMode].reverse)\n                                                             | startFrom:(currentPage-1)*perPage\n                                                             | limitTo:perPage"\n                >\n                <td ng-click="toggleNews(news)" style="cursor: pointer;">\n                    <table>\n                        <tr>\n                            <td>\n                                <a>\n                                    <span class="fa fa-fw fa-caret-right" ng-hide="news.show"></span>\n                                    <span class="fa fa-fw fa-caret-down" ng-show="news.show"></span>\n                                </a>\n                            </td>\n                            <td style="width:64px">\n                                <img ng-show="news.tb.length > 0" ng-src="{{news.tb}}" class="thumb" width="64px" height="64px">\n                                <img ng-hide="news.tb.length > 0" ngf-src="news.selectedFiles[0]" class="thumb" width="64px" height="64px">\n                            </td>\n                        </tr>\n                    </table>\n                </td>\n                <td>\n                    <div class="row">\n                        <div class="col-md-10">\n                            <h4 style="cursor: pointer;" ng-click="toggleNews(news)">\n                                <a>{{news.title}}</a>\n                                <small>{{news.creator}}</small>\n                            </h4>\n                        </div>\n                        <div class="col-md-2 text-right">\n                            <button type="button" class="btn btn-danger" ng-click="approveNews(news)"\n                                    ng-if="news.status == 0 && userInfo.news.admin">\n                                Approve\n                            </button>\n                            <span ng-if="news.status == 0 && !userInfo.news.admin">Approval Pending</span>\n                        </div>\n                    </div>\n                    <form name="editNewsExh{{news.nid}}" ng-submit="updateNews(news)" ng-if="news.show">\n                        <div news-item-fields-list newsdata="news" list="data"></div>\n                        <div class="row text-center">\n                            <button type="submit" class="btn btn-success" ng-disabled="uploading">Update information</button>\n                            <button type="button" class="btn btn-danger" ng-click="deleteNews(news)">\n                                Delete News\n                            </button><br>\n                            {{news.formResponse}}\n                        </div>\n                    </form>\n                </td>\n                <td class="hidden-xs" ng-click="toggleNews(news)" style="cursor: pointer;">\n                    <h5>{{news.created | date : \'MMM d, y\'}}</h5>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n<div class="text-center">\n    <pagination total-items="filteredNews.length" ng-model="currentPage" max-size="maxPageSize" class="pagination-sm"\n                boundary-links="true" rotate="false" items-per-page="perPage" ng-show="filteredNews.length > perPage"></pagination>\n</div>\n<div class="text-center">\n    <h4 ng-show="filteredNews.length == 0">Nothing found</h4>\n</div>\n\n')}]),angular.module("manageOneSearch/mainOneSearch.tpl.html",[]).run(["$templateCache",function($templateCache){
$templateCache.put("manageOneSearch/mainOneSearch.tpl.html",'<div class="container">\n    <h2>Manage OneSearch</h2>\n\n    <tabset justified="true" ng-if="hasAccess">\n        <tab ng-repeat="tab in tabs" heading="{{tab.name}}" active="tab.active">\n            <div ng-if="tab.number == 0">\n                <div recommended-links-list>\n                </div>\n            </div>\n            <div ng-if="tab.number == 1" >\n                <div search-statistics-list>\n                </div>\n            </div>\n        </tab>\n    </tabset>\n    <div ng-if="!hasAccess">\n        <h3>Sorry, you don\'t have permissions to manage oneSearch</h3>\n    </div>\n</div>')}]),angular.module("manageOneSearch/manageOneSearch.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageOneSearch/manageOneSearch.tpl.html",'<h3>OneSearch Recommended Links</h3>\n\n<form ng-submit="addRecommendation()">\n    <div class="row sdOpen">\n        <div class="col-md-3 form-group">\n            <label for="K">Keyword</label>\n            <input type="text" class="form-control" placeholder="Keyword" maxlength="200" ng-model="addRec.keyword"\n                   id="K" required>\n        </div>\n        <div class="col-md-3 form-group">\n            <label for="L">Link URL</label>\n            <input type="text" class="form-control" placeholder="http://www.example.com/" maxlength="1024"\n                   id="L" ng-model="addRec.link" required>\n        </div>\n        <div class="col-md-3 form-group">\n            <label for="LT">Link Title</label>\n            <input type="text" class="form-control" placeholder="Link Title" maxlength="100" ng-model="addRec.description"\n                   id="LT" required>\n        </div>\n        <div class="col-md-3 form-group">\n            <label for="B">&nbsp</label><br>\n            <button type="submit" class="btn btn-success" id="B">Add Recommended Link</button>\n        </div>\n    </div>\n</form>\n<div ng-show="response.length > 0">\n    {{response}}\n</div>\n\n<div class="row form-inline">\n    <div class="form-group col-md-12">\n        <label for="filterBy">Filter <small>{{filteredList.length}}</small> results by</label>\n        <div id="filterBy">\n            <input type="text" class="form-control" placeholder="Keyword contains" ng-model="filterKeyword">\n            <input type="text" class="form-control" placeholder="Title contains" ng-model="filterLinkTitle">\n            <input type="text" class="form-control" placeholder="URL contains" ng-model="filterLink">\n        </div>\n    </div>\n</div>\n\n<div id="onesearch-recommended-links-table-wrapper" class="table-responsive">\n    <table class="table table-condensed table-hover">\n        <thead>\n        <tr>\n            <th class="hidden-xs" style="width:20%">\n                <a\n                        ng-click="sortBy(0)"\n                        ng-class="{\'sortable\': !sortModes[0].reverse && sortMode == 0, \'sortable-reverse\': sortModes[0].reverse && sortMode == 0}">\n                    Keyword\n                </a>\n            </th>\n            <th class="hidden-xs">\n                <a\n                        ng-click="sortBy(1)"\n                        ng-class="{\'sortable\': !sortModes[1].reverse && sortMode == 1, \'sortable-reverse\': sortModes[1].reverse && sortMode == 1}">\n                    Title\n                </a>\n            </th>\n            <th class="hidden-xs">\n                <a\n                        ng-click="sortBy(2)"\n                        ng-class="{\'sortable\': !sortModes[2].reverse && sortMode == 2, \'sortable-reverse\': sortModes[2].reverse && sortMode == 2}">\n                    URL\n                </a>\n            </th>\n            <th style="width:120px">\n                Action\n            </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="rec in (filteredList = recList.RecList | filter:{keyword:filterKeyword}\n                                                              | filter:{link:filterLink}\n                                                              | filter:{description:filterLinkTitle}\n                                                              | orderBy:sortModes[sortMode].by:sortModes[sortMode].reverse)"\n                ng-click="expand(rec)">\n            <td>\n                <span ng-show="expanded != rec.id">{{rec.keyword}}</span>\n                <span ng-show="expanded == rec.id">\n                    <input type="text" class="form-control" placeholder="Keyword" maxlength="200" ng-model="rec.keyword">\n                </span>\n            </td>\n            <td>\n                <span ng-show="expanded != rec.id">{{rec.description}}</span>\n                <span ng-show="expanded == rec.id">\n                    <input type="text" class="form-control" placeholder="Title" maxlength="100" ng-model="rec.description">\n                </span>\n            </td>\n            <td>\n                <span ng-show="expanded != rec.id"><a href="{{rec.link}}">{{rec.link}}</a></span>\n                <span ng-show="expanded == rec.id">\n                    <input type="text" class="form-control" placeholder="URL" maxlength="1024" ng-model="rec.link">\n                </span>\n            </td>\n            <td>\n                <span ng-show="expanded == rec.id">\n                    <button type="button" class="btn btn-success" ng-click="updateRec(rec)">\n                        <span class="fa fa-fw fa-edit"></span>\n                    </button>\n                    <button type="button" class="btn btn-danger" ng-click="deleteRec(rec, $index)">\n                        <span class="fa fa-fw fa-close"></span>\n                    </button>\n                </span>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n</div>\n')}]),angular.module("manageOneSearch/oneSearchStat.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageOneSearch/oneSearchStat.tpl.html",'<h3>OneSearch Statistics</h3>\n\n\n<div class="table-responsive">\n    <table class="table table-condensed table-hover">\n        <thead>\n        <tr>\n            <th style="width:80px;">\n                Number\n            </th>\n            <th>\n                Keyword\n            </th>\n            <th style="width:150px;">\n                Count\n            </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="stat in statList">\n            <td>\n                {{$index}}\n            </td>\n            <td>\n                {{stat.keyword}}\n            </td>\n            <td>\n                {{stat.count}}\n            </td>\n        </tr>\n        </tbody>\n    </table>\n</div>\n')}]),angular.module("manageSoftware/manageSoftware.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageSoftware/manageSoftware.tpl.html",'<div class="container">\n    <h2>Manage Software</h2>\n\n    <tabset justified="true" ng-if="hasAccess">\n        <tab ng-repeat="tab in tabs" heading="{{tab.name}}" active="tab.active">\n            <div ng-if="tab.number == 0">\n                <div software-manage-list>\n                </div>\n            </div>\n            <div ng-if="tab.number == 1" >\n                <div software-manage-loc-cat>\n                </div>\n            </div>\n            <div ng-if="tab.number == 2" >\n                <div software-manage-computer-maps>\n                </div>\n            </div>\n        </tab>\n    </tabset>\n    <div ng-if="!hasAccess">\n        <h3>Sorry, you don\'t have permissions to edit software</h3>\n    </div>\n</div>')}]),angular.module("manageSoftware/manageSoftwareComputerMaps.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageSoftware/manageSoftwareComputerMaps.tpl.html",'<div>\n    <div class="row">\n        <form class="form-inline">\n            <div class="col-md-6 form-group">\n                <label for="plan">Choose Floor Plan</label>\n                <select class="form-control" ng-model="selMap" ng-change="updateMap()" id="plan"\n                        ng-options="map.name for map in SWList.maps | orderBy:\'name\'">\n                </select>\n            </div>\n        </form>\n    </div>\n    <div class="alert alert-info" role="alert">\n        <span class="fa fa-exclamation-triangle"></span> Note: Right-click on the floor plan map in order to add a computer or left-click on existing one in order to edit it.\n    </div>\n    <div class="row">\n        <div class="comps-map" id="computer-map"\n             style="background: transparent url(\'//www.lib.ua.edu/softwareList/floorMaps/{{selMap.floor_plan_file}}\') no-repeat 0 0;\n                    width:{{selMap.width}}px;\n                    height:{{selMap.height}}px;\n                    clear: both;"\n             ng-mousedown="createComp($event)"\n            >\n            <span class="comp-normal"\n                 ng-repeat="comp in selMap.computers"\n                 style="left:{{comp.mapX}}px;top:{{comp.mapY}}px;position: absolute;"\n                 ng-click="expand($index)"\n                 ng-class="{\n                 \'fa fa-windows\': comp.type == 1,\n                 \'fa fa-apple\': comp.type == 2,\n                 \'comp-selected\': selComp == $index,\n                 \'comp-turned-off\': comp.status !== 1\n                 }"\n                    >\n            </span>\n            <div class="selected-form" ng-show="selComp >= 0" style="left:{{selCompX}}px;top:{{selCompY}}px;">\n                <div class="row">\n                    <div class="col-md-8">\n                        <h4>&nbsp; Computer ID: {{selMap.computers[selComp].compid}}</h4>\n                    </div>\n                    <div class="col-md-4 text-right">\n                        <button type="button" class="btn btn-primary" ng-click="selComp = -1" style="left:450px;top:-15px;">\n                            <span class="fa fa-fw fa-close"></span>\n                        </button>\n                    </div>\n                </div>\n                <form ng-submit="updateComp()">\n                    <div class="row">\n                        <div class="col-md-12">\n                            <div class="col-md-4 form-group">\n                                <label for="sel_X">Coordinate X</label>\n                                <input type="text" class="form-control" placeholder="X" ng-model="selMap.computers[selComp].mapX" id="sel_X"\n                                       maxlength="4" required>\n                            </div>\n                            <div class="col-md-4 form-group">\n                                <label for="sel_Y">Coordinate Y</label>\n                                <input type="text" class="form-control" placeholder="Y" ng-model="selMap.computers[selComp].mapY" id="sel_Y"\n                                       maxlength="4" required>\n                            </div>\n                            <div class="col-md-4 form-group">\n                                <label for="sel_status">Status</label>\n                                <select class="form-control" ng-model="selCompStatus" ng-options="status.name for status in compStatus"\n                                        id="sel_status">\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-6 form-group">\n                        <label for="sel_name">Computer Name</label>\n                        <input type="text" class="form-control" placeholder="Enter Computer Name" ng-model="selMap.computers[selComp].name"\n                               id="sel_name" maxlength="100" required>\n                    </div>\n                    <div class="col-md-6 form-group">\n                        <label for="sel_os">OS</label>\n                        <select class="form-control" ng-model="selCompOS" ng-options="opSys.name for opSys in os" id="sel_os">\n                        </select>\n                    </div>\n                    <div class="col-md-12 form-group">\n                        <label for="sel_loc">Location</label>\n                        <select class="form-control" ng-model="selCompLoc"\n                                ng-options="loc.fullName for loc in SWList.locations | orderBy:\'fullName\'" id="sel_loc">\n                        </select>\n                    </div>\n                    <div class="col-md-12 text-center form-group">\n                        <label></label>\n                        <button type="submit" class="btn btn-success" ng-disabled="selMap.computers[selComp].name.length == 0">\n                            <span class="fa fa-fw fa-edit"></span> Update Information\n                        </button>\n                        <button type="button" class="btn btn-danger" ng-click="deleteComp()">\n                            <span class="fa fa-fw fa-close"></span> Delete Computer\n                        </button><br>\n                        {{compResponse}}\n                    </div>\n                </form>\n            </div>\n            <div class="selected-form row" ng-show="showCreate"\n                 style="left:{{newComp.mapX}}px;top:{{newComp.mapY}}px;"\n                    >\n                <div class="col-md-8">\n                    <h4>New Computer</h4>\n                </div>\n                <div class="col-md-4 text-right">\n                    <button type="button" class="btn btn-primary" ng-click="showCreate = false" style="left:450px;top:-15px;">\n                        <span class="fa fa-fw fa-close"></span>\n                    </button>\n                </div>\n                <form ng-submit="addComp()">\n                    <div class="col-md-6 form-group">\n                        <label for="newComp_X">Coordinate X</label>\n                        <input type="text" class="form-control" placeholder="X" ng-model="newComp.mapX" id="newComp_X"\n                               maxlength="4" required>\n                    </div>\n                    <div class="col-md-6 form-group">\n                        <label for="newComp_Y">Coordinate Y</label>\n                        <input type="text" class="form-control" placeholder="Y" ng-model="newComp.mapY" id="newComp_Y"\n                               maxlength="4" required>\n                    </div>\n                    <div class="col-md-6 form-group">\n                        <label for="newComp_name">Computer Name</label>\n                        <input type="text" class="form-control" placeholder="Enter Computer Name" ng-model="newComp.name"\n                               id="newComp_name" maxlength="100" required>\n                    </div>\n                    <div class="col-md-6 form-group">\n                        <label for="newComp_os">OS</label>\n                        <select class="form-control" ng-model="newComp.selType" ng-options="opSys.name for opSys in os" id="newComp_os">\n                        </select>\n                    </div>\n                    <div class="col-md-12 form-group">\n                        <label for="newComp_loc">Location</label>\n                        <select class="form-control" ng-model="newComp.selLoc"\n                                ng-options="loc.fullName for loc in SWList.locations | orderBy:\'fullName\'" id="newComp_loc">\n                        </select>\n                    </div>\n                    <div class="col-md-12 text-center form-group">\n                        <label></label>\n                        <button type="submit" class="btn btn-success" ng-disabled="newComp.name.length == 0">\n                            <span class="fa fa-fw fa-plus"></span> Create Computer\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n\n\n</div>')}]),angular.module("manageSoftware/manageSoftwareItemFields.tpl.html",[]).run(["$templateCache",function($templateCache){
$templateCache.put("manageSoftware/manageSoftwareItemFields.tpl.html",'<div class="row">\n    <div class="col-md-6 form-group">\n        <label for="up">Upload Icon</label>\n        <input type="file" ngf-select="" accept="image/png" ng-model="sw.picFile"\n               ngf-change="generateThumb(sw, $files)" id="up">\n        <span class="progress" ng-show="sw.picFile[0].progress >= 0">\n            <div class="ng-binding" style="width:{{sw.picFile[0].progress}}%" ng-bind="sw.picFile[0].progress + \'%\'"></div>\n        </span>\n    </div>\n    <div class="col-md-6 form-group">\n        <label for="title">Title</label>\n        <input type="text" class="form-control" placeholder="Software Title" ng-model="sw.title"\n               id="title" maxlength="50" required>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-6 form-group">\n        <label for="descr">Description</label>\n                        <textarea class="form-control" rows="3" id="descr" ng-model="sw.description"\n                                  maxlength="4096" required></textarea>\n    </div>\n    <div class="col-md-6 form-group">\n        <label for="mod">List of Installed Modules</label>\n                        <textarea class="form-control" rows="3" id="mod" ng-model="sw.modules"\n                                  maxlength="4096"></textarea>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12 form-group">\n        <label for="links">Links</label>\n        <ul class="list-group" id="links">\n            <li class="list-group-item" ng-repeat="link in sw.links">\n                <button type="button" class="btn btn-danger" ng-click="deleteLink(sw,link)">\n                    <span class="fa fa-fw fa-close"></span>\n                </button>\n                {{link.description}} <a ng-href="{{link.url}}">{{link.title}}</a>\n            </li>\n            <li class="list-group-item col-md-12">\n                <div class="col-md-4">\n                    <input type="text" class="form-control" placeholder="Link Description"\n                           ng-model="sw.newLink.description" maxlength="200">\n                </div>\n                <div class="col-md-3">\n                    <input type="text" class="form-control" placeholder="Link Title"\n                           ng-model="sw.newLink.title" maxlength="100">\n                </div>\n                <div class="col-md-4">\n                    <input type="text" class="form-control" placeholder="http://www.example.com/"\n                           ng-model="sw.newLink.url" maxlength="1024">\n                </div>\n                <div class="col-md-1">\n                    <button type="button" class="btn btn-success" ng-click="addLink(sw)"\n                            ng-disabled="sw.newLink.title.length == 0 || sw.newLink.url.length < 2">\n                        <span class="fa fa-fw fa-plus"></span>\n                    </button>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-12 form-group">\n        <label for="ver">Versions</label>\n        <ul class="list-group" id="ver">\n            <li class="list-group-item col-md-12" ng-repeat="version in sw.versions">\n                <div class="col-md-1">\n                    <button type="button" class="btn btn-danger" ng-click="deleteVersion(sw,version)">\n                        <span class="fa fa-fw fa-close"></span>\n                    </button>\n                    <span class="fa fa-fw fa-windows" ng-show="version.os == 1"></span>\n                    <span class="fa fa-fw fa-apple" ng-show="version.os == 2"></span>\n                </div>\n                <div class="col-md-3">\n                    <input type="text" class="form-control" placeholder="Version" ng-model="version.version"\n                           maxlength="50">\n                </div>\n                <div class="col-md-8 form-group">\n                    <label for="loc">Locations</label>\n                    <ul class="list-group" id="loc">\n                        <li class="list-group-item col-md-12" ng-repeat="loc in version.locations">\n                            <div class="col-md-8">\n                                <button type="button" class="btn btn-danger" ng-click="deleteLocation(sw,version,loc)">\n                                    <span class="fa fa-fw fa-close"></span>\n                                </button>\n                                {{loc.name}}\n                            </div>\n                            <div class="col-md-4">\n                                <div class="col-md-6" ng-show="checkDevices(loc.devices, 1)">\n                                    <span class="fa fa-fw fa-windows"></span>\n                                    <span class="fa fa-fw fa-desktop"></span>\n                                </div>\n                                <div class="col-md-6" ng-show="checkDevices(loc.devices, 2)">\n                                    <span class="fa fa-fw fa-apple"></span>\n                                    <span class="fa fa-fw fa-desktop"></span>\n                                </div>\n                                <div class="col-md-6" ng-show="checkDevices(loc.devices, 4)">\n                                    <span class="fa fa-fw fa-windows"></span>\n                                    <span class="fa fa-fw fa-laptop"></span>\n                                </div>\n                                <div class="col-md-6" ng-show="checkDevices(loc.devices, 8)">\n                                    <span class="fa fa-fw fa-apple"></span>\n                                    <span class="fa fa-fw fa-laptop"></span>\n                                </div>\n                            </div>\n                        </li>\n                        <li class="list-group-item col-md-12">\n                            <div class="col-md-8">\n                                <select class="form-control" ng-model="version.newLoc.selLoc"\n                                        ng-options="loc.fullName for loc in data.locations | orderBy:\'fullName\'">\n                                </select>\n                            </div>\n                            <div class="col-md-3">\n                                <div class="col-md-6" ng-repeat="device in version.newLoc.devices track by $index"\n                                     ng-show="(($index == 0 || $index == 2) && version.os == 1) ||\n                                                              (($index == 1 || $index == 3) && version.os == 2)">\n                                    <input type="checkbox" ng-model="version.newLoc.devices[$index]">\n                                                    <span ng-show="$index <= 1">\n                                                        <span class="fa fa-fw fa-desktop"></span>\n                                                    </span>\n                                                    <span ng-show="$index > 1">\n                                                        <span class="fa fa-fw fa-laptop"></span>\n                                                    </span>\n                                </div>\n                            </div>\n                            <div class="col-md-1">\n                                <button type="button" class="btn btn-success" ng-click="addLocation(sw,version)">\n                                    <span class="fa fa-fw fa-plus"></span>\n                                </button>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </li>\n            <li class="list-group-item col-md-6">\n                <div class="col-md-6">\n                    <input type="text" class="form-control" placeholder="Version" ng-model="sw.newVer.version"\n                           maxlength="50">\n                </div>\n                <div class="col-md-4">\n                    <select class="form-control" ng-model="sw.newVer.selOS" ng-options="opSys.name for opSys in os">\n                    </select>\n                </div>\n                <div class="col-md-2">\n                    <button type="button" class="btn btn-success" ng-click="addVersion(sw)"\n                            ng-disabled="sw.newVer.version.length == 0">\n                        <span class="fa fa-fw fa-plus"></span>\n                    </button>\n                </div>\n            </li>\n        </ul>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-6 form-group">\n        <label for="cat">Categories</label>\n        <ul class="list-group" id="cat">\n            <li class="list-group-item col-md-12">\n                <div class="col-md-4" ng-repeat="category in sw.categories">\n                    <button type="button" class="btn btn-danger" ng-click="deleteCategory(sw,category)">\n                        <span class="fa fa-fw fa-close"></span>\n                    </button>\n                    {{category.name}}\n                </div>\n            </li>\n            <li class="list-group-item col-md-12">\n                <div class="col-md-10">\n                    <select class="form-control" ng-model="sw.selCat" ng-options="cat.name for cat in data.categories">\n                    </select>\n                </div>\n                <div class="col-md-2">\n                    <button type="button" class="btn btn-success" ng-click="addCategory(sw)">\n                        <span class="fa fa-fw fa-plus"></span>\n                    </button>\n                </div>\n            </li>\n        </ul>\n    </div>\n    <div class="col-md-3 form-group">\n        <label for="effectDate">Maintenance Effective Date</label>\n        <input type="text" class="form-control" placeholder="YYYY-MM-DD" ng-model="sw.main_effect"\n               maxlength="10" id="effectDate">\n    </div>\n    <div class="col-md-3 form-group">\n        <label for="expDate">Maintenance Expiration Date</label>\n        <input type="text" class="form-control" placeholder="YYYY-MM-DD" ng-model="sw.main_exp"\n               maxlength="10" id="expDate">\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-2 form-group">\n        <label for="trf">TRF</label>\n        <input type="text" class="form-control" placeholder="TRF number" ng-model="sw.trf"\n               maxlength="100" id="trf">\n    </div>\n    <div class="col-md-2 form-group">\n        <label for="po">PO</label>\n        <input type="text" class="form-control" placeholder="PO number" ng-model="sw.po"\n               maxlength="100" id="po">\n    </div>\n    <div class="col-md-2 form-group">\n        <label for="numL">Number of Licenses</label>\n        <input type="text" class="form-control" placeholder="Number of Licenses" ng-model="sw.num_licenses"\n               maxlength="100" id="numL">\n    </div>\n    <div class="col-md-2 form-group">\n        <label for="trfNotes">TRF Notes</label>\n        <input type="text" class="form-control" placeholder="TRF notes" ng-model="sw.trf_notes"\n               maxlength="100" id="trfNotes">\n    </div>\n    <div class="col-md-2 form-group">\n        <label for="lMode">License Mode</label>\n        <select class="form-control" ng-model="sw.selMode" ng-options="mode.name for mode in data.licenseModes"\n                id="lMode">\n        </select>\n    </div>\n    <div class="col-md-2 form-group">\n        <label for="purDate">Purchase Date</label>\n        <input type="text" class="form-control" placeholder="YYYY-MM-DD" ng-model="sw.purch_date"\n               maxlength="10" id="purDate">\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-6 form-group">\n        <label for="prodKey">Product Key</label>\n        <input type="text" class="form-control" placeholder="Product Key" ng-model="sw.pkey"\n               maxlength="100" id="prodKey">\n    </div>\n    <div class="col-md-6 form-group">\n        <label for="apDev">Approved for Devices</label>\n        <input type="text" class="form-control" placeholder="List of Devices" ng-model="sw.devices"\n               maxlength="100" id="apDev">\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-1">\n        <label>Vendor</label>\n    </div>\n    <div class="col-md-11">\n        <div class="col-md-4 form-group">\n            <label for="vendorName">Company</label>\n            <input type="text" class="form-control" placeholder="Company Name" ng-model="sw.vendor_name"\n                   maxlength="60" id="vendorName">\n        </div>\n        <div class="col-md-3 form-group">\n            <label for="vendorContact">Contact</label>\n            <input type="text" class="form-control" placeholder="Contact Name" ng-model="sw.vendor_contact"\n                   maxlength="60" id="vendorContact">\n        </div>\n        <div class="col-md-3 form-group">\n            <label for="vendorEmail">Email</label>\n            <input type="text" class="form-control" placeholder="Contact Email" ng-model="sw.vendor_email"\n                   maxlength="255" id="vendorEmail">\n        </div>\n        <div class="col-md-2 form-group">\n            <label for="vendorPhone">Phone</label>\n            <input type="text" class="form-control" placeholder="Contact Phone" ng-model="sw.vendor_phone"\n                   maxlength="20" id="vendorPhone">\n        </div>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-1">\n        <label>Owner</label>\n    </div>\n    <div class="col-md-11">\n        <div class="col-md-4 form-group">\n            <label for="ownerDept">Department</label>\n            <input type="text" class="form-control" placeholder="Owner Department" ng-model="sw.owner.department"\n                   maxlength="100" id="ownerDept" required>\n        </div>\n        <div class="col-md-3 form-group">\n            <label for="ownerName">Contact</label>\n            <input type="text" class="form-control" placeholder="Owner Contact Name" ng-model="sw.owner.name"\n                   maxlength="60" id="ownerName">\n        </div>\n        <div class="col-md-3 form-group">\n            <label for="ownerEmail">Email</label>\n            <input type="text" class="form-control" placeholder="Owner Contact Email" ng-model="sw.owner.email"\n                   maxlength="128" id="ownerEmail">\n        </div>\n        <div class="col-md-2 form-group">\n            <label for="ownerPhone">Phone</label>\n            <input type="text" class="form-control" placeholder="Owner Contact Phone" ng-model="sw.owner.phone"\n                   maxlength="13" id="ownerPhone">\n        </div>\n    </div>\n</div>\n<div class="row" ng-repeat="partner in sw.partners">\n    <div class="col-md-1">\n        <label>Partner{{$index + 1}}</label>\n        <button type="button" class="btn btn-success" ng-click="addPartner(sw)" ng-if="$index == 0">\n            <span class="fa fa-fw fa-plus"></span>\n        </button>\n        <button type="button" class="btn btn-danger" ng-click="deletePartner(sw, partner)" ng-if="$index !== 0">\n            <span class="fa fa-fw fa-close"></span>\n        </button>\n    </div>\n    <div class="col-md-11">\n        <div class="col-md-4 form-group">\n            <label for="partnerDept">Department</label>\n            <input type="text" class="form-control" placeholder="Partner Department" ng-model="partner.department"\n                   maxlength="100" id="partnerDept">\n        </div>\n        <div class="col-md-3 form-group">\n            <label for="partnerName">Contact</label>\n            <input type="text" class="form-control" placeholder="Partner Contact Name" ng-model="partner.name"\n                   maxlength="60" id="partnerName">\n        </div>\n        <div class="col-md-3 form-group">\n            <label for="partnerEmail">Email</label>\n            <input type="text" class="form-control" placeholder="Partner Contact Email" ng-model="partner.email"\n                   maxlength="128" id="partnerEmail">\n        </div>\n        <div class="col-md-2 form-group">\n            <label for="partnerPhone">Phone</label>\n            <input type="text" class="form-control" placeholder="Partner Contact Phone" ng-model="partner.phone"\n                   maxlength="13" id="partnerPhone">\n        </div>\n    </div>\n</div>\n<div class="row">\n    <div class="col-md-1">\n        <label>Requester</label>\n    </div>\n    <div class="col-md-11">\n        <div class="col-md-4 form-group">\n            <label for="requesterDept">Department</label>\n            <input type="text" class="form-control" placeholder="requester Department" ng-model="sw.requester.department"\n                   maxlength="100" id="requesterDept">\n        </div>\n        <div class="col-md-3 form-group">\n            <label for="requesterName">Contact</label>\n            <input type="text" class="form-control" placeholder="Requester Contact Name" ng-model="sw.requester.name"\n                   maxlength="60" id="requesterName">\n        </div>\n        <div class="col-md-3 form-group">\n            <label for="requesterEmail">Email</label>\n            <input type="text" class="form-control" placeholder="Requester Contact Email" ng-model="sw.requester.email"\n                   maxlength="128" id="requesterEmail">\n        </div>\n        <div class="col-md-2 form-group">\n            <label for="requesterPhone">Phone</label>\n            <input type="text" class="form-control" placeholder="Requester Contact Phone" ng-model="sw.requester.phone"\n                   maxlength="13" id="requesterPhone">\n        </div>\n    </div>\n</div>\n')}]),angular.module("manageSoftware/manageSoftwareList.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageSoftware/manageSoftwareList.tpl.html",'<div>\n    <div class="row form-inline">\n        <div class="form-group col-md-12">\n            <div class="col-md-6">\n                <label for="filterBy">Filter <small>{{filteredSW.length}}</small> results by</label>\n                <div id="filterBy">\n                    <input type="text" class="form-control" placeholder="Title contains" ng-model="titleFilter">\n                    <input type="text" class="form-control" placeholder="Description contains" ng-model="descrFilter">\n                </div>\n            </div>\n            <div class="col-md-3">\n                <label for="sortBy">Sort by</label>\n                <div id="sortBy">\n                    <button type="button" class="btn btn-default" ng-model="sortButton" btn-radio="0" ng-click="sortBy(0)">\n                        Title\n                        <span class="fa fa-fw fa-long-arrow-down" ng-show="!sortModes[0].reverse"></span>\n                        <span class="fa fa-fw fa-long-arrow-up" ng-show="sortModes[0].reverse"></span>\n                    </button>\n                    <button type="button" class="btn btn-default" ng-model="sortButton" btn-radio="1" ng-click="sortBy(1)">\n                        Status\n                        <span class="fa fa-fw fa-long-arrow-down" ng-show="!sortModes[1].reverse"></span>\n                        <span class="fa fa-fw fa-long-arrow-up" ng-show="sortModes[1].reverse"></span>\n                    </button>\n                </div>\n            </div>\n            <div class="col-md-3">\n                <label>Export</label>\n                <div>\n                    <button type="button" class="btn btn-default" ng-click="export()">\n                        <span class="fa fa-fw fa-download"></span> JSON\n                    </button><br>\n                    <a target="_self" ng-href="{{exportUrl}}" download="softwareData.json" ng-if="exportUrl">Download file</a>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="text-center">\n        <pagination total-items="filteredSW.length" ng-model="currentPage" max-size="maxPageSize" class="pagination-sm"\n                    boundary-links="true" rotate="false" items-per-page="perPage" ng-show="filteredSW.length > perPage"></pagination>\n    </div>\n    <div class="row row-clickable"\n         ng-repeat="sw in filteredSW = (SWList.software | filter:{title:titleFilter}\n                                                        | filter:{description:descrFilter}\n                                                        | orderBy:sortModes[sortMode].by:sortModes[sortMode].reverse)\n        | startFrom:(currentPage-1)*perPage | limitTo:perPage"\n         ng-class="{sdOpen: sw.show}">\n        <div class="col-md-12" ng-click="toggleSW(sw)" style="cursor: pointer;">\n            <table class="table">\n                <tr>\n                    <td style="width: 15px;">\n                        <a>\n                            <span class="fa fa-fw fa-caret-right" ng-hide="sw.show"></span>\n                            <span class="fa fa-fw fa-caret-down" ng-show="sw.show"></span>\n                        </a>\n                    </td>\n                    <td style="width:64px;">\n                        <img ng-hide="sw.picFile.length > 0" src="{{sw.icon}}" class="thumb" width="64px" height="64px">\n                        <img ng-show="sw.picFile.length > 0" ngf-src="sw.picFile[0]" class="thumb" width="64px" height="64px">\n                    </td>\n                    <td>\n                        <h4>\n                            <a>{{sw.title}}</a>\n                        </h4>\n                    </td>\n                    <td style="width: 79px;">\n                        <button type="button" class="btn btn-danger" ng-click="publishSW(sw)" ng-show="sw.status == 0">\n                            Publish\n                        </button>\n                    </td>\n                </tr>\n            </table>\n        </div>\n        <div ng-if="sw.show">\n            <form name="editSW{{sw.sid}}" ng-submit="updateSW(sw)">\n                <div software-item-fields-list swdata="sw" list="SWList"></div>\n                <div class="row form-group text-center">\n                    <button type="submit" class="btn btn-success">Update information</button>\n                    <button type="button" class="btn btn-success" ng-click="unpublishSW(sw)" ng-hide="sw.status == 0">\n                        Unpublish\n                    </button>\n                    <button type="button" class="btn btn-primary" ng-click="copySW(sw)">\n                        Copy to New\n                    </button>\n                    <button type="button" class="btn btn-danger" ng-click="deleteSW(sw)">\n                        Delete {{sw.title}} software\n                    </button><br>\n                    {{sw.formResponse}}\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n<div class="text-center">\n    <pagination total-items="filteredSW.length" ng-model="currentPage" max-size="maxPageSize" class="pagination-sm"\n                boundary-links="true" rotate="false" items-per-page="perPage" ng-show="filteredSW.length > perPage"></pagination>\n</div>\n<div class="text-center">\n    <h4 ng-show="filteredSW.length == 0">Nothing found</h4>\n</div>\n\n<h3>Add New Software</h3>\n<form name="addNewSW" ng-submit="createSW()">\n    <div class="sdOpen">\n        <div software-item-fields-list swdata="newSW" list="SWList"></div>\n        <div class="row form-group text-center">\n            <button type="submit" class="btn btn-success">Create Software Record</button><br>\n            {{newSW.formResponse}}\n        </div>\n    </div>\n</form>\n\n')}]),angular.module("manageSoftware/manageSoftwareLocCat.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageSoftware/manageSoftwareLocCat.tpl.html",'<div class="row">\n    <div class="col-md-6">\n        <h3>Locations</h3>\n        <div class="row">\n            <div class="col-md-2">\n                <input type="text" class="form-control" placeholder="Parent ID" ng-model="newLocation.parent"\n                       maxlength="3">\n            </div>\n            <div class="col-md-8">\n                <input type="text" class="form-control" placeholder="New Location Name" ng-model="newLocation.name"\n                       maxlength="50">\n            </div>\n            <div class="col-md-2">\n                <button type="button" class="btn btn-success" ng-click="addLocation()" ng-disabled="newLocation.name.length == 0">\n                    <span class="fa fa-fw fa-plus"></span>\n                </button>\n            </div>\n            {{locResponse}}\n        </div>\n        <table class="table table-hover">\n            <thead>\n            <tr>\n                <th style="width:50px;">ID</th>\n                <th style="width:75px;">Parent</th>\n                <th>Name</th>\n                <th style="width:120px;">Action</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="location in SWList.locations" ng-click="selectLocation(location)">\n                <td>\n                    {{location.lid}}\n                </td>\n                <td>\n                    <span ng-hide="selLocation == location.lid">\n                        {{location.parent}}\n                    </span>\n                    <span ng-show="selLocation == location.lid">\n                        <input type="text" class="form-control" placeholder="Parent ID" ng-model="location.parent"\n                               maxlength="3">\n                    </span>\n                </td>\n                <td>\n                    <span ng-hide="selLocation == location.lid">\n                        {{location.name}}\n                    </span>\n                    <span ng-show="selLocation == location.lid">\n                        <input type="text" class="form-control" placeholder="Location Name" ng-model="location.name"\n                               maxlength="50">\n                    </span>\n                </td>\n                <td>\n                    <div ng-show="selLocation == location.lid">\n                        <button type="button" class="btn btn-success" ng-click="editLocation(location)">\n                            <span class="fa fa-fw fa-edit"></span>\n                        </button>\n                        <button type="button" class="btn btn-danger" ng-click="deleteLocation(location)">\n                            <span class="fa fa-fw fa-close"></span>\n                        </button>\n                    </div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n    <div class="col-md-6">\n        <h3>Categories</h3>\n        <div class="row">\n            <div class="col-md-10">\n                <input type="text" class="form-control" placeholder="New Category" ng-model="newCategory" maxlength="30">\n            </div>\n            <div class="col-md-2">\n                <button type="button" class="btn btn-success" ng-click="addCategory()" ng-disabled="newCategory.length == 0">\n                    <span class="fa fa-fw fa-plus"></span>\n                </button>\n            </div>\n            {{catResponse}}\n        </div>\n        <table class="table table-hover">\n            <thead>\n            <tr>\n                <th style="width:50px;">ID</th>\n                <th>Name</th>\n                <th style="width:120px;">Action</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="category in SWList.categories" ng-click="selectCategory(category)">\n                <td>\n                    {{category.cid}}\n                </td>\n                <td>\n                    <span ng-hide="selCategory == category.cid">\n                        {{category.name}}\n                    </span>\n                    <span ng-show="selCategory == category.cid">\n                        <input type="text" class="form-control" placeholder="Category Name" ng-model="category.name"\n                               maxlength="30">\n                    </span>\n                </td>\n                <td>\n                    <div ng-show="selCategory == category.cid">\n                        <button type="button" class="btn btn-success" ng-click="editCategory(category)">\n                            <span class="fa fa-fw fa-edit"></span>\n                        </button>\n                        <button type="button" class="btn btn-danger" ng-click="deleteCategory(category)">\n                            <span class="fa fa-fw fa-close"></span>\n                        </button>\n                    </div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n\n</div>\n')}]),angular.module("manageUserGroups/manageUG.tpl.html",[]).run(["$templateCache",function($templateCache){
$templateCache.put("manageUserGroups/manageUG.tpl.html",'<div class="container">\n    <h2>Web Applications Admin Interface</h2>\n\n    <tabset justified="true" ng-if="hasAccess">\n        <tab ng-repeat="tab in tabs" heading="{{tab.name}}" active="tab.active">\n            <div ng-show="tab.number == 0">\n                <table class="table table-hover table-condensed">\n                    <thead>\n                    <tr>\n                        <th style="width:15%;"><a ng-click="sortBy(0)" style="cursor: pointer;">Login</a></th>\n                        <th style="width:15%;" class="text-center"><a ng-click="sortBy(1)" style="cursor: pointer;">Name</a></th>\n                        <th class="text-center">Access Rights to Web Applications</th>\n                        <th class="text-center" style="width:120px;">Action</th>\n                    </tr>\n                    </thead>\n                    <tr ng-repeat="user in users | orderBy:sortModes[sortMode].by:sortModes[sortMode].reverse" ng-click="expandUser(user)">\n                        <th scope="row" class="clickable">\n                            {{user.wpLogin}}\n                        </th>\n                        <td class="text-center clickable">\n                            {{user.name}}\n                        </td>\n                        <td>\n                            <div ng-show="isExpUser(user.id)">\n                                <div class="row" ng-repeat="app in apps">\n                                    <div class="col-md-2 text-right">\n                                        <input type="checkbox" ng-model="user.access[$index]">\n                                    </div>\n                                    <div class="col-md-10">\n                                        <a href="{{app.link}}">{{app.appName}}</a>\n                                    </div>\n                                </div>\n                            </div>\n                            <div ng-hide="isExpUser(user.id)" class="row text-center">\n                                <div class="col-md-3" ng-repeat="app in apps" ng-show="user.access[$index]">\n                                    <a href="{{app.link}}">{{app.appName}}</a>\n                                </div>\n                            </div>\n                        </td>\n                        <td class="text-center">\n                            <div ng-show="isExpUser(user.id)" class="form-group">\n                                <button type="button" class="btn btn-success" ng-click="updateUser(user)" ng-disabled="isLoading">\n                                    <span class="fa fa-fw fa-edit"></span>\n                                </button>\n                                <button type="button" class="btn btn-danger" ng-click="deleteUser(user, $index)" ng-disabled="isLoading">\n                                    <span class="fa fa-fw fa-close"></span>\n                                </button>\n                                <br>\n                                {{result}}\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan="2">\n                            <select class="form-control" ng-model="newUser" ng-options="wpUser.fullName for wpUser in wpUsers | orderBy:\'last_name\'">\n                            </select>\n                        </td>\n                        <td>\n                            <div class="row" ng-repeat="app in apps">\n                                <div class="col-md-2 text-right">\n                                    <input type="checkbox" ng-model="newUserAccess[$index]">\n                                </div>\n                                <div class="col-md-10">\n                                    <a href="{{app.link}}">{{app.appName}}</a>\n                                </div>\n                            </div>\n                        </td>\n                        <td class="text-center">\n                            <div class="form-group">\n                                <button type="button" class="btn btn-success" ng-click="createUser(newUser)" ng-disabled="isLoading || newUser.login.length <= 1">\n                                    <span class="fa fa-fw fa-plus"></span> Grant Access\n                                </button><br>\n                                {{result2}}\n                            </div>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n            <div ng-show="tab.number == 1">\n                <h4>Web applications with data manageable by users:</h4>\n                <h4 class="text-center">\n                    <a href="/edit-directory-profile/">Edit my Directory Profile</a>\n                </h4>\n                <h4 class="text-center" ng-repeat="app in apps" ng-show="$index > 0">\n                    <a href="{{app.link}}">{{app.appName}}</a>\n                </h4>\n                <p>When we create new web application it has to be added to the database manually.</p>\n            </div>\n        </tab>\n    </tabset>\n    <div ng-if="!hasAccess">\n        <div view-my-web-apps>\n        </div>\n    </div>\n</div>')}]),angular.module("manageUserGroups/viewMyWebApps.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("manageUserGroups/viewMyWebApps.tpl.html",'<h3>My Web Applications</h3>\n\n<div class="form-group" ng-if="appsAccess">\n    <label for="webapps">Web Application Back-End access links</label>\n    <ul class="list-group" id="webapps">\n        <li class="list-group-item">\n            <a href="/edit-directory-profile/">Edit my Directory Profile</a>\n        </li>\n        <li class="list-group-item" ng-repeat="app in userInfo.myApps">\n            <a ng-href="{{app.link}}">{{app.appName}}</a>\n        </li>\n    </ul>\n</div>\n<div ng-if="!appsAccess">\n    <h4>Sorry, you have to be logged in to manage applications</h4>\n</div>')}]),angular.module("oneSearchErrors/oneSearchErrors.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("oneSearchErrors/oneSearchErrors.tpl.html",'<div class="container">\n    <h2>OneSearch Errors</h2>\n\n    <tabset ng-if="dataProcessed">\n        <tab ng-repeat="tab in tabs" heading="{{tab.name}}" active="tab.active">\n            <div ng-if="tab.number == 0">\n                <div error-graph errors="errors" range="today"></div>\n            </div>\n            <div ng-if="tab.number == 1" >\n                <div error-graph errors="errors" range="month"></div>\n            </div>\n            <div ng-if="tab.number == 2" >\n                <div error-graph errors="errors" range="year"></div>\n            </div>\n        </tab>\n    </tabset>\n    <table class="table-colors">\n        <tr>\n            <td class="table-ebsco"></td>\n            <td>EBSCO API errors</td>\n        </tr>\n        <tr>\n            <td class="table-catalog"></td>\n            <td>Catalog API errors</td>\n        </tr>\n        <tr>\n            <td class="table-eJournals"></td>\n            <td>Serial Solutions eJournals errors</td>\n        </tr>\n    </table>\n\n    <div class="row">\n        <h3>Detailed Error List</h3>\n        <div class="btn-group">\n            <label class="btn btn-primary" ng-model="eEngine.engine" btn-radio="0">EBSCO</label>\n            <label class="btn btn-primary" ng-model="eEngine.engine" btn-radio="1">Catalog</label>\n            <label class="btn btn-primary" ng-model="eEngine.engine" btn-radio="2">eJournals</label>\n        </div>\n        <div class="col-xs-12" ng-repeat="year in errors.tree[eEngine.engine].years">\n            <h4 class="clickable" ng-click="year.open = !year.open">\n                <a>{{year.name}}</a>\n                <span class="label label-warning">{{year.counter}}</span>\n            </h4>\n            <div class="col-xs-12" ng-repeat="month in year.months" ng-if="year.open">\n                <h5 class="clickable" ng-click="month.open = !month.open">\n                    <a>{{month.name}}</a>\n                    <span class="label label-warning">{{month.counter}}</span>\n                </h5>\n                <div class="col-xs-12" ng-repeat="day in month.days" ng-if="month.open">\n                    <h6 class="clickable"  ng-click="day.open = !day.open">\n                        <a>{{day.day}}</a>\n                        <span class="label label-warning">{{day.counter}}</span>\n                    </h6>\n                    <p ng-repeat="error in day.errors" ng-if="day.open">\n                        <span class="label label-info">\n                            {{error.recorded | date : \'hh:mm a\'}}\n                        </span>\n                        {{error.description}}\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("staffDirectory/staffDirectory.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("staffDirectory/staffDirectory.tpl.html",'<div class="container">\n    <h2>Library Staff Directory Management</h2>\n\n    <tabset justified="true" ng-if="hasAccess">\n        <tab ng-repeat="tab in tabs" heading="{{tab.name}}" active="tab.active">\n            <div ng-if="tab.number == 0">\n                <div manage-sd-people>\n                </div>\n            </div>\n            <div ng-if="tab.number == 1" >\n                <div manage-sd-subjects>\n                </div>\n            </div>\n            <div ng-if="tab.number == 2">\n                <div manage-sd-departments>\n                </div>\n            </div>\n        </tab>\n    </tabset>\n    <div ng-if="!hasAccess">\n        <h3>Sorry, you don\'t have permissions to manage staff directory</h3>\n    </div>\n</div>')}]),angular.module("staffDirectory/staffDirectoryDepartments.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("staffDirectory/staffDirectoryDepartments.tpl.html",'<div class="row">\n    <div class="col-md-6">\n        <h3>Departments</h3>\n        <div class="row sdOpen">\n            <div class="col-md-5">\n                <input type="text" class="form-control" placeholder="Department Name" ng-model="newDept.name"\n                       maxlength="100">\n            </div>\n            <div class="col-md-5">\n                <select class="form-control" ng-model="newDept.selLib" ng-options="lib.name for lib in Directory.libraries">\n                </select>\n            </div>\n            <div class="col-md-2">\n                <button type="button" class="btn btn-success" ng-click="addDepartment()" ng-disabled="newDept.name.length == 0">\n                    <span class="fa fa-fw fa-plus"></span>\n                </button>\n            </div>\n            {{depResponse}}\n        </div>\n        <table class="table table-hover">\n            <thead>\n            <tr>\n                <th>Department</th>\n                <th>Location</th>\n                <th style="width:120px;">Action</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="dept in Directory.departments" ng-click="expandDepartment(dept)">\n                <td>\n                    <span ng-hide="dept.show">{{dept.name}}</span>\n                    <span ng-show="dept.show">\n                        <input type="text" class="form-control" placeholder="Department Name" ng-model="dept.name"\n                               maxlength="100">\n                    </span>\n                </td>\n                <td>\n                    <span ng-hide="dept.show">{{dept.selLib.name}}</span>\n                    <span ng-show="dept.show">\n                        <select class="form-control" ng-model="dept.selLib" ng-options="lib.name for lib in Directory.libraries">\n                        </select>\n                    </span>\n                </td>\n                <td>\n                    <div ng-show="dept.show">\n                        <button type="button" class="btn btn-success" ng-click="editDepartment(dept)" ng-disabled="dept.name.length == 0">\n                            <span class="fa fa-fw fa-edit"></span>\n                        </button>\n                        <button type="button" class="btn btn-danger" ng-click="deleteDepartment(dept)">\n                            <span class="fa fa-fw fa-close"></span>\n                        </button>\n                    </div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n    <div class="col-md-6">\n        <h3>Libraries/Locations</h3>\n        <div class="row sdOpen">\n            <div class="col-md-10">\n                <input type="text" class="form-control" placeholder="Location Name" ng-model="newLoc.name"\n                       maxlength="100">\n            </div>\n            <div class="col-md-2">\n                <button type="button" class="btn btn-success" ng-click="addLibrary()" ng-disabled="newLoc.name.length == 0">\n                    <span class="fa fa-fw fa-plus"></span>\n                </button>\n            </div>\n            {{libResponse}}\n        </div>\n        <table class="table table-hover">\n            <thead>\n            <tr>\n                <th>Library/Location</th>\n                <th style="width:120px;">Action</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="lib in Directory.libraries" ng-click="expandLibrary(lib)">\n                <td>\n                    <span ng-hide="lib.show">{{lib.name}}</span>\n                    <span ng-show="lib.show">\n                        <input type="text" class="form-control" placeholder="Library Name" ng-model="lib.name"\n                               maxlength="100">\n                    </span>\n                </td>\n                <td>\n                    <div ng-show="lib.show">\n                        <button type="button" class="btn btn-success" ng-click="editLibrary(lib)" ng-disabled="lib.name.length == 0">\n                            <span class="fa fa-fw fa-edit"></span>\n                        </button>\n                        <button type="button" class="btn btn-danger" ng-click="deleteLibrary(lib)">\n                            <span class="fa fa-fw fa-close"></span>\n                        </button>\n                    </div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n\n        <h3>Divisions</h3>\n        <div class="row sdOpen">\n            <div class="col-md-10">\n                <input type="text" class="form-control" placeholder="Division Name" ng-model="newDiv.name"\n                       maxlength="100">\n            </div>\n            <div class="col-md-2">\n                <button type="button" class="btn btn-success" ng-click="addDivision()" ng-disabled="newDiv.name.length == 0">\n                    <span class="fa fa-fw fa-plus"></span>\n                </button>\n            </div>\n            {{divResponse}}\n        </div>\n        <table class="table table-hover">\n            <thead>\n            <tr>\n                <th>Division</th>\n                <th style="width:120px;">Action</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="division in Directory.divisions" ng-click="expandDivision(division)" ng-if="division.divid > 0">\n                <td>\n                    <span ng-hide="division.show">{{division.name}}</span>\n                    <span ng-show="division.show">\n                        <input type="text" class="form-control" placeholder="Division Name" ng-model="division.name"\n                               maxlength="100">\n                    </span>\n                </td>\n                <td>\n                    <div ng-show="division.show">\n                        <button type="button" class="btn btn-success" ng-click="editDivision(division)"\n                                ng-disabled="division.name.length == 0">\n                            <span class="fa fa-fw fa-edit"></span>\n                        </button>\n                        <button type="button" class="btn btn-danger" ng-click="deleteDivision(division)">\n                            <span class="fa fa-fw fa-close"></span>\n                        </button>\n                    </div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n</div>\n')}]),angular.module("staffDirectory/staffDirectoryPeople.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("staffDirectory/staffDirectoryPeople.tpl.html",'<div>\n    <h3>Add New Person</h3>\n    <form ng-submit="addPerson()">\n        <div class="row sdOpen">\n            <div class="col-md-2 form-group">\n                <label for="rank">Rank</label>\n                <select class="form-control" ng-model="newPerson.rank" ng-options="rank for rank in ranks" id="rank">\n                </select>\n            </div>\n            <div class="col-md-3 form-group">\n                <label for="firstName">First Name</label>\n                <input type="text" class="form-control" placeholder="First Name" maxlength="25"\n                       ng-model="newPerson.first" id="firstName" required>\n            </div>\n            <div class="col-md-3 form-group">\n                <label for="lastName">Last Name</label>\n                <input type="text" class="form-control" placeholder="Last Name" maxlength="25"\n                       ng-model="newPerson.last" id="lastName" required>\n            </div>\n            <div class="col-md-4 form-group">\n                <label for="title">Title</label>\n                <input type="text" class="form-control" placeholder="Title" maxlength="150"\n                       ng-model="newPerson.title" id="title" required>\n            </div>\n            <div class="col-md-2 form-group">\n                <label for="divis">Division</label>\n                <select class="form-control" ng-model="newPerson.selDiv" ng-options="div.name for div in Directory.divisions" id="divis">\n                </select>\n            </div>\n            <div class="col-md-3 form-group">\n                <label for="dept">Department</label>\n                <select class="form-control" ng-model="newPerson.selDept" ng-options="dept.name for dept in Directory.departments" id="dept">\n                </select>\n            </div>\n            <div class="col-md-3 form-group">\n                <label for="email">Email</label>\n                <input type="text" class="form-control" placeholder="Email" maxlength="255"\n                       ng-model="newPerson.email" id="email" required>\n            </div>\n            <div class="col-md-2 form-group">\n                <label for="phone">Phone</label>\n                <input type="text" class="form-control" placeholder="Phone" maxlength="15"\n                       ng-model="newPerson.phone" id="phone" required>\n            </div>\n            <div class="col-md-2 form-group">\n                <label for="fax">Fax</label>\n                <input type="text" class="form-control" placeholder="Fax" maxlength="15" ng-model="newPerson.fax" id="fax">\n            </div>\n            <div class="col-md-12 form-group text-center">\n                <button type="submit" class="btn btn-success"\n                        ng-disabled="newPerson.first.length < 1 ||\n                                     newPerson.last.length < 1 ||\n                                     newPerson.title.length < 1 ||\n                                     newPerson.email.length < 1">\n                    Create New Record\n                </button><br>\n                {{formResponse}}\n            </div>\n        </div>\n    </form>\n\n    <h3>People List</h3>\n    <div class="row form-inline">\n        <div class="form-group col-md-12">\n            <label for="filterBy">Filter <small>{{filteredList.length}}</small> results by</label>\n            <div id="filterBy">\n                <input type="text" class="form-control" placeholder="Last name contains" ng-model="lastNameFilter">\n                <input type="text" class="form-control" placeholder="First name contains" ng-model="firstNameFilter">\n                <input type="text" class="form-control" placeholder="Title contains" ng-model="titleFilter">\n                <input type="text" class="form-control" placeholder="Department contains" ng-model="deptFilter">\n            </div>\n        </div>\n    </div>\n    <div class="text-center">\n        <pagination total-items="filteredList.length" ng-model="currentPage" max-size="maxPageSize" class="pagination-sm"\n                    boundary-links="true" rotate="false" items-per-page="perPage" ng-show="filteredList.length > perPage"></pagination>\n    </div>\n    <div class="table-responsive">\n        <table class="table table-condensed table-hover">\n            <thead>\n            <tr>\n                <th class="hidden-xs" style="width:21%">\n                    <a ng-click="sortBy(0)"\n                       ng-class="{\'sortable\': !sortModes[0].reverse && sortMode == 0, \'sortable-reverse\': sortModes[0].reverse && sortMode == 0}">\n                        Name\n                    </a>\n                </th>\n                <th class="hidden-xs" style="width:21%">\n                    <a ng-click="sortBy(1)"\n                       ng-class="{\'sortable\': !sortModes[1].reverse && sortMode == 1, \'sortable-reverse\': sortModes[1].reverse && sortMode == 1}">\n                        Title\n                    </a>\n                </th>\n                <th class="hidden-xs" style="width:21%">\n                    <a ng-click="sortBy(2)"\n                       ng-class="{\'sortable\': !sortModes[2].reverse && sortMode == 2, \'sortable-reverse\': sortModes[2].reverse && sortMode == 2}">\n                        Department/Division\n                    </a>\n                </th>\n                <th class="hidden-xs" style="width:16%">\n                    Contact Info\n                </th>\n                <th class="hidden-xs" style="width:21%">\n                    Subjects\n                </th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="person in filteredList = (Directory.list\n                                                        | filter:{lastname:lastNameFilter}\n                                                        | filter:{firstname:firstNameFilter}\n                                                        | filter:{title:titleFilter}\n                                                        | filter:{department:deptFilter}\n                                                        | orderBy:sortModes[sortMode].by:sortModes[sortMode].reverse)\n                                                        | startFrom:(currentPage-1)*perPage\n                                                        | limitTo:perPage">\n                <td ng-click="togglePerson(person)" style="cursor: pointer;">\n                    <h4>\n                        <a>\n                            <span class="fa fa-fw fa-caret-right" ng-hide="person.show"></span>\n                            <span class="fa fa-fw fa-caret-down" ng-show="person.show"></span>\n                            {{person.firstname}} {{person.lastname}}\n                        </a>\n                        <span ng-show="person.rank.length > 0">\n                            <small>{{person.rank}}</small>\n                        </span>\n                    </h4>\n                    <img ng-src="{{person.photo}}" width="180" height="225" ng-if="person.photo != null" ng-show="person.show">\n                </td>\n                <td>\n                    <h4 ng-hide="person.show">\n                        <small>{{person.title}}</small>\n                    </h4>\n                    <div class="form-group" ng-show="person.show">\n                        <label for="{{person.id}}_title">Title</label>\n                        <input type="text" class="form-control" placeholder="{{person.title}}" maxlength="150" ng-model="person.title" required\n                               id="{{person.id}}_title">\n                    </div>\n                    <div class="form-group" ng-show="person.show">\n                        <label for="{{person.id}}_rank">Rank</label>\n                        <select class="form-control" id="{{person.id}}_rank" ng-model="person.rank"\n                                ng-options="rank for rank in ranks">\n                        </select>\n                    </div>\n                    <div class="form-group" ng-show="person.show">\n                        <label for="{{person.id}}_addSubj">Select New Subject</label>\n                        <select class="form-control" id="{{person.id}}_addSubj" ng-model="person.selSubj"\n                                ng-options="sub.subject for sub in Directory.subjects">\n                        </select>\n                    </div>\n                    <div class="text-center" ng-show="person.show">\n                        <button type="button" class="btn btn-success" ng-click="updatePerson(person)"\n                                ng-disabled="person.first.length < 1 ||\n                                             person.last.length < 1 ||\n                                             person.title.length < 1 ||\n                                             person.email.length < 1">\n                            Update information\n                        </button><br>\n                        {{person.subjResponse}}\n                    </div>\n                </td>\n                <td>\n                    <h4 ng-hide="person.show">\n                        <small>{{person.department}}</small>\n                    </h4>\n                    <h4 ng-hide="person.show">\n                        <small>{{person.division}}</small>\n                    </h4>\n                    <div class="form-group" ng-show="person.show">\n                        <label for="{{person.id}}_dept">Department</label>\n                        <select class="form-control" id="{{person.id}}_dept" ng-model="person.selDept"\n                                ng-options="dept.name for dept in Directory.departments">\n                        </select>\n                    </div>\n                    <div class="form-group" ng-show="person.show">\n                        <label for="{{person.id}}_divis">Division</label>\n                        <select class="form-control" id="{{person.id}}_divis" ng-model="person.selDiv"\n                                ng-options="div.name for div in Directory.divisions">\n                        </select>\n                    </div>\n                    <div class="row form-group" ng-show="person.show">\n                        <div class="col-md-8" style="display: none;">\n                            <label for="{{person.id}}_addType">Select Subject Type</label>\n                            <select class="form-control" id="{{person.id}}_addType" ng-model="person.selType">\n                                    <option value="1"></option>\n                                    <option value="2"></option>\n                                    <option value="3" selected="selected"></option>\n                            </select>\n                        </div>\n                        <div class="col-md-4">\n                            <label>Add</label>\n                            <button type="button" class="btn btn-success" ng-click="addSubject(person)">\n                                <span class="fa fa-fw fa-plus"></span>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="text-center" ng-show="person.show">\n                        <button type="button" class="btn btn-danger" ng-click="deletePerson(person)">\n                            Delete {{person.firstname}} {{person.lastname}}\n                        </button>\n                    </div>\n                </td>\n                <td>\n                    <div ng-hide="person.show">\n                        <span class="fa fa-fw fa-envelope"></span><small>{{person.email}}</small>\n                    </div>\n                    <div ng-hide="person.show">\n                        <span class="fa fa-fw fa-phone"></span><small>{{person.phone}}</small>\n                    </div>\n                    <div ng-hide="person.show">\n                        <span class="fa fa-fw fa-fax"></span><small>{{person.fax}}</small>\n                    </div>\n                    <div class="form-group" ng-show="person.show">\n                        <label for="{{person.id}}_email">Email</label>\n                        <input type="text" class="form-control" placeholder="{{person.email}}" maxlength="1024" ng-model="person.email" required\n                               id="{{person.id}}_email">\n                    </div>\n                    <div class="form-group" ng-show="person.show">\n                        <label for="{{person.id}}_phone">Phone</label>\n                        <input type="text" class="form-control" placeholder="{{person.phone}}" maxlength="15" ng-model="person.phone" required\n                               id="{{person.id}}_phone">\n                    </div>\n                    <div class="form-group" ng-show="person.show">\n                        <label for="{{person.id}}_fax">Fax</label>\n                        <input type="text" class="form-control" placeholder="{{person.fax}}" maxlength="15" ng-model="person.fax"\n                               id="{{person.id}}_fax">\n                    </div>\n                </td>\n                <td>\n                    <div ng-repeat="subject in person.subjects" ng-hide="person.show">\n                        <a href="{{subject.link}}">{{subject.subject}}</a>\n                    </div>\n                    <div class="col-md-12 form-group" ng-show="person.show">\n                        <label for="{{person.id}}_subj">Subjects</label>\n                        <div id="{{person.id}}_subj">\n                            <div class="row form-group" ng-repeat="subject in person.subjects">\n                                <div class="col-md-2">\n                                <div class="col-md-2">\n                                    <button type="button" class="btn btn-danger" ng-click="deleteSubject(person, subject, $index)">\n                                        <span class="fa fa-fw fa-close"></span>\n                                    </button>\n                                </div>\n                                <div class="col-md-10">\n                                    <a href="{{subject.link}}">{{subject.subject}}</a><br>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n\n    <div class="text-center">\n        <pagination total-items="filteredList.length" ng-model="currentPage" max-size="maxPageSize" class="pagination-sm"\n                    boundary-links="true" rotate="false" items-per-page="perPage" ng-show="filteredList.length > perPage"></pagination>\n    </div>\n</div>')}]),angular.module("staffDirectory/staffDirectoryProfile.tpl.html",[]).run(["$templateCache",function($templateCache){
$templateCache.put("staffDirectory/staffDirectoryProfile.tpl.html",'<div class="container">\n    <h2>Profile Management</h2>\n\n    <div ng-if="userProfile.person.uid > 0 && userInfo.login">\n        <div class="row">\n            <div class="col-md-3">\n                <img class="staff-portrait thumbnail" ng-src="{{userProfile.person.photo}}" ng-if="userProfile.person.photo != null"\n                     width="180" height="225">\n                <img class="staff-portrait thumbnail" ng-src="wp-content/themes/roots-ualib/assets/img/user-profile.png"\n                     ng-if="userProfile.person.photo == null" width="180" height="225">\n            </div>\n            <div class="col-md-9">\n                <h3 class="name">\n                    <small ng-if="userProfile.person.rank">{{userProfile.person.rank}}</small>\n                    <span ng-bind-html="userProfile.person.firstname"></span> <span ng-bind-html="userProfile.person.lastname"></span>\n                </h3>\n                <h4 class="title"><span ng-bind-html="userProfile.person.title"></span></h4>\n                <h5 class="hidden-xs"><span ng-bind-html="userProfile.person.department"></span></h5>\n                <ul class="fa-ul">\n                    <li ng-if="userProfile.person.phone"><span class="fa fa-phone fa-li"></span>{{userProfile.person.phone}}</li>\n                    <li class="hidden-xs" ng-if="userProfile.person.fax"><span class="fa fa-fax fa-li"></span>{{userProfile.person.fax}}</li>\n                    <li ng-if="userProfile.person.email"><span class="fa fa-envelope fa-li"></span>\n                        <a ng-href="mailto:{{userProfile.person.email}}">{{userProfile.person.email}}</a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n\n        <div class="alert alert-info" role="alert">\n            <span class="fa fa-info-circle"></span> Note: you can edit an optional part of your <a href="/#/staffdir">Library Directory</a>\n            profile here. It is an appropriate place to post the information about your research, interests, publications,\n            photos, personal website, etc. Please try to keep your profile professional oriented.\n        </div>\n\n        <div class="row">\n            <div class="col-md-6 form-group">\n                <label for="website">Personal Website</label>\n                <input type="text" class="form-control" placeholder="http://john-doe.com/" maxlength="100"\n                       ng-model="userProfile.person.website" id="website">\n            </div>\n            <div class="col-md-6 form-group">\n                <label for="resume">External Resume / CV link</label>\n                <input type="text" class="form-control" placeholder="http://example.com/my_resume.pdf" maxlength="255"\n                       ng-model="userProfile.person.resume" id="resume">\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-md-4 form-group">\n                <label for="sn1">Social Network 1</label>\n                <input type="text" class="form-control" placeholder="http://facebook.com/johndoe" maxlength="100"\n                       ng-model="userProfile.person.social1" id="sn1">\n            </div>\n            <div class="col-md-4 form-group">\n                <label for="sn2">Social Network 2</label>\n                <input type="text" class="form-control" placeholder="http://twitter.com/johndoe" maxlength="100"\n                       ng-model="userProfile.person.social2" id="sn2">\n            </div>\n            <div class="col-md-4 form-group">\n                <label for="sn3">Social Network 3</label>\n                <input type="text" class="form-control" placeholder="http://linkedin.com/johndoe" maxlength="100"\n                       ng-model="userProfile.person.social3" id="sn3">\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-md-12 form-group">\n                <label>Description (allowed tags:\n                    <code>\n                        &lt;h3&gt;, &lt;h4&gt;, &lt;a&gt;, &lt;img&gt;, &lt;p&gt;, &lt;strong&gt;, &lt;em&gt;, &lt;ul&gt;, &lt;ol&gt;, &lt;li&gt;\n                    </code>)</label>\n                <textarea ui-tinymce="tinymceOptions" ng-model="userProfile.person.profile" rows="10"\n                          maxlength="64000"></textarea>\n            </div>\n            <div class="col-md-12 text-center form-group">\n                <button type="submit" class="btn btn-success" ng-disabled="uploading" ng-click="update()">\n                    Update Profile\n                </button><br>\n                {{userProfile.person.formResponse}}\n            </div>\n        </div>\n\n        <div class="row">\n            <div class="col-md-12">\n                <span ng-bind-html="userProfile.person.profile"></span>\n            </div>\n        </div>\n    </div>\n\n    <h4 ng-if="!userProfile.person && userInfo.login">Can not find your profile!</h4>\n    <div ng-if="!userInfo.login">\n        <h3>Sorry, you don\'t have permissions to manage staff directory</h3>\n    </div>\n</div>\n')}]),angular.module("staffDirectory/staffDirectorySubjects.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("staffDirectory/staffDirectorySubjects.tpl.html",'<div>\n    <h3>Manage Subjects</h3>\n    <div class="row">\n        <div class="row sdOpen">\n            <div class="col-md-5">\n                <input type="text" class="form-control" placeholder="Subject Name" ng-model="newSubj.subject"\n                       maxlength="255">\n            </div>\n            <div class="col-md-5">\n                <input type="text" class="form-control" placeholder="http://guides.lib.ua.edu/example" ng-model="newSubj.link"\n                       maxlength="1024">\n            </div>\n            <div class="col-md-2">\n                <button type="button" class="btn btn-success" ng-click="addSubject()" ng-disabled="newSubj.subject.length == 0">\n                    <span class="fa fa-fw fa-plus"></span>\n                </button>\n            </div>\n            {{subResponse}}\n        </div>\n        <table class="table table-hover">\n            <thead>\n            <tr>\n                <th style="width:41.6%;">Subject</th>\n                <th style="width:41.6%;">Subject Link</th>\n                <th style="width:120px;">Action</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="subject in Directory.subjects" ng-click="expandSubject(subject)">\n                <td>\n                    <span ng-hide="subject.show">{{subject.subject}}</span>\n                    <span ng-show="subject.show">\n                        <input type="text" class="form-control" placeholder="Subject Name" ng-model="subject.subject"\n                               maxlength="255">\n                    </span>\n                </td>\n                <td>\n                    <span ng-hide="subject.show">\n                        <a href="{{subject.link}}" ng-if="subject.link.length > 0">{{subject.link}}</a>\n                        <span ng-if="subject.link.length == 0">{{subject.link}}</span>\n                    </span>\n                    <span ng-show="subject.show">\n                        <input type="text" class="form-control" placeholder="Subject Link" ng-model="subject.link"\n                               maxlength="1024">\n                    </span>\n                </td>\n                <td>\n                    <div ng-show="subject.show">\n                        <button type="button" class="btn btn-success" ng-click="editSubject(subject)" ng-disabled="subject.subject.length == 0">\n                            <span class="fa fa-fw fa-edit"></span>\n                        </button>\n                        <button type="button" class="btn btn-danger" ng-click="deleteSubject(subject)">\n                            <span class="fa fa-fw fa-close"></span>\n                        </button>\n                    </div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n</div>')}]),angular.module("submittedForms/submittedForms.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("submittedForms/submittedForms.tpl.html",'<div class="container">\n    <h2>Manage Submitted Forms</h2>\n\n    <div ng-if="hasAccess">\n      \x3c!-- removed 3 july 2019; php memory issue\n        <div class="row form-inline">\n            <div class="form-group col-md-12">\n                <label for="filterBy">Filter <small>{{filteredForms.length}}</small> results by</label>\n                <div id="filterBy">\n                    <input type="text" class="form-control" placeholder="Title contains" ng-model="titleFilter">\n                </div>\n                <label for="sortBy">Sort by</label>\n                <div id="sortBy">\n                    <button type="button" class="btn btn-default" ng-model="sortButton" btn-radio="0" ng-click="sortBy(0)">\n                        Title\n                        <span class="fa fa-fw fa-long-arrow-down" ng-show="!sortModes[0].reverse"></span>\n                        <span class="fa fa-fw fa-long-arrow-up" ng-show="sortModes[0].reverse"></span>\n                    </button>\n                    <button type="button" class="btn btn-default" ng-model="sortButton" btn-radio="1" ng-click="sortBy(1)">\n                        Status\n                        <span class="fa fa-fw fa-long-arrow-down" ng-show="!sortModes[1].reverse"></span>\n                        <span class="fa fa-fw fa-long-arrow-up" ng-show="sortModes[1].reverse"></span>\n                    </button>\n                    <button type="button" class="btn btn-default" ng-model="sortButton" btn-radio="2" ng-click="sortBy(2)">\n                        Date Submitted\n                        <span class="fa fa-fw fa-long-arrow-down" ng-show="!sortModes[2].reverse"></span>\n                        <span class="fa fa-fw fa-long-arrow-up" ng-show="sortModes[2].reverse"></span>\n                    </button>\n                </div>\n            </div>\n        </div>\n      --\x3e\n      <div class="row">\n        <div class="alert alert-warning"><span class="fa fa-exclamation-triangle"></span> If you need assistance with form data, please contact <a class="alert-link" href="https://www.lib.ua.edu/library-help/kacecontact-form/">Web Services</a>.</div>\n      </div>\n\n        <div class="text-center">\n            <pagination total-items="filteredForms.length" ng-model="currentPage" max-size="maxPageSize" class="pagination-sm"\n                        boundary-links="true" rotate="false" items-per-page="perPage" ng-show="filteredForms.length > 0"></pagination>\n        </div>\n        <div class="row row-clickable"\n             ng-repeat="form in filteredForms = (data.forms | filter:{title:titleFilter}\n                                                            | orderBy:sortModes[sortMode].by:sortModes[sortMode].reverse)\n            | startFrom:(currentPage-1)*perPage | limitTo:perPage"\n             ng-class="{sdOpen: form.show}">\n            <div class="col-md-12 clickable" ng-click="toggleForms(form)">\n                <div class="col-md-10">\n                    <h4>\n                        <span class="fa fa-fw fa-caret-right" ng-hide="form.show"></span>\n                        <span class="fa fa-fw fa-caret-down" ng-show="form.show"></span>\n                        {{form.title}}\n                        <small>{{form.fields[0].value}}</small>\n                    </h4>\n                </div>\n                <div class="col-md-2">\n                    <h5>{{form.created}}</h5>\n                </div>\n            </div>\n            <div class="col-md-12" ng-show="form.show">\n                <div class="col-md-12 panel panel-default">\n                    <div class="panel-heading">\n                        <h4 class="panel-title">Form was sent to</h4>\n                    </div>\n                    <div class="panel-body">\n                        {{form.addresseeEmails}}\n                    </div>\n                </div>\n                <div class="col-md-4 panel panel-default" ng-repeat="field in form.fields"\n                     ng-show="field.name.length > 0 && field.value.length > 0">\n                    <div class="panel-heading">\n                        <h4 class="panel-title">{{field.name}}</h4>\n                    </div>\n                    <div class="panel-body">\n                        {{field.value}}\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="text-center">\n            <pagination total-items="filteredForms.length" ng-model="currentPage" max-size="maxPageSize" class="pagination-sm"\n                        boundary-links="true" rotate="false" items-per-page="perPage" ng-show="filteredForms.length > 0"></pagination>\n        </div>\n        <div class="text-center">\n            <h4 ng-show="filteredForms.length == 0">Nothing found</h4>\n        </div>\n    </div>\n    <div ng-if="!hasAccess">\n        <h3>Sorry, you don\'t have permissions to manage submitted forms</h3>\n    </div>\n</div>\n')}]),angular.module("manage",["ngResource","ngAnimate","ngRoute","ui.bootstrap","manage.common","manage.templates","manage.manageHours","manage.manageHoursUsers","manage.manageUserGroups","manage.manageOneSearch","manage.staffDirectory","manage.manageDatabases","manage.manageSoftware","manage.manageNews","manage.submittedForms","manage.manageAlerts","manage.oneSearchErrors","manage.manageERCarousel"]).constant("HOURS_MANAGE_URL","https://www.lib.ua.edu/libhours2/").constant("USER_GROUPS_URL","https://www.lib.ua.edu/userGroupsAdmin/").constant("SITE_FEEDBACK_URL","https://www.lib.ua.edu/siteSurvey/").constant("ONE_SEARCH_URL","https://www.lib.ua.edu/oneSearch/").constant("STAFF_DIR_URL","https://www.lib.ua.edu/staffDir/").constant("DATABASES_URL","https://www.lib.ua.edu/databases/").constant("SOFTWARE_URL","https://www.lib.ua.edu/softwareList/").constant("FORMS_URL","//www.lib.ua.edu/form/").constant("NEWS_URL","https://www.lib.ua.edu/newsApp/").constant("ALERTS_URL","https://www.lib.ua.edu/alerts/").constant("ERRORS_URL","https://www.lib.ua.edu/errors/").constant("ERCAROUSEL_URL","https://www.lib.ua.edu/erCarousel/api/"),angular.module("manage.common",["common.manage"]).filter("startFrom",[function(){return function(input,start){if(angular.isObject(input))return start=+start,void 0===input?input:input.slice(start)}}]),angular.module("common.manage",[]).constant("API","https://www.lib.ua.edu/wp-json/wp/v2/").config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("AuthInterceptor")}]).factory("AuthInterceptor",["AuthService",function(AuthService){return{request:function(config){config.headers=config.headers||{};var token=AuthService.getToken();return 0===config.url.indexOf("https://www.lib.ua.edu/")&&token&&(config.headers.Authorization="Bearer "+token),"undefined"!=typeof myLocalized?config.headers["X-WP-Nonce"]=myLocalized.nonce:console.log("myLocalized is not defined."),config},response:function(res){return 0===res.config.url.indexOf("https://www.lib.ua.edu/")&&angular.isDefined(res.data.token)&&AuthService.saveToken(res.data.token),res}}}]).service("AuthService",["$window",function($window){var self=this;self.parseJWT=function(token){var base64Url=token.split(".")[1],base64=base64Url.replace("-","+").replace("_","/");return JSON.parse($window.atob(base64))},self.saveToken=function(token){$window.localStorage["ualibweb.Token"]=token,console.log("Token saved")},self.getToken=function(){return $window.localStorage["ualibweb.Token"]},self.isAuthorized=function(){var token=self.getToken();if(token){var params=self.parseJWT(token);if(Math.round((new Date).getTime()/1e3)<=params.exp)return console.log("Authenticated."),params.user}return console.log("Authentication failed."),!1},self.logout=function(){$window.localStorage.removeItem("ualibweb.Token"),console.log("Token deleted")}}]).factory("ercFactory",["$resource","ERCAROUSEL_URL",function($resource,API){return{slides:function(){return console.log("ercFactory.Slides"),$resource(API+"/slides/:slideID",{slideID:"@slideID"})}}}]).factory("hmFactory",["$http","HOURS_MANAGE_URL",function($http,url){return{getData:function(pPoint){return $http({method:"GET",url:url+"api/"+pPoint,params:{}})},postData:function(params,data){return params=angular.isDefined(params)?params:{},$http({method:"POST",url:url+"manageHours.php",params:params,data:data})}}}]).factory("ugFactory",["$http","USER_GROUPS_URL",function($http,url){return{getData:function(){return $http({method:"GET",url:url+"api/users",params:{}})},postData:function(params,data){return params=angular.isDefined(params)?params:{},$http({method:"POST",url:url,params:params,data:data})}}}]).factory("osFactory",["$http","ONE_SEARCH_URL",function($http,url){return{getData:function(pPoint){return $http({method:"GET",url:url+"api/"+pPoint,params:{}})},postData:function(params,data){return params=angular.isDefined(params)?params:{},$http({method:"POST",url:url+"processData.php",params:params,data:data})}}}]).factory("sdFactory",["$http","STAFF_DIR_URL",function($http,url){return{getData:function(){return $http({method:"GET",url:url+"api/people",params:{}})},getProfile:function(login){return $http({method:"GET",url:url+"api/profile/"+login,params:{}})},postData:function(params,data){return params=angular.isDefined(params)?params:{},$http({method:"POST",url:url+"processData.php",params:params,data:data})}}}]).factory("mdbFactory",["$http","DATABASES_URL",function($http,url){return{getData:function(){return $http({method:"GET",url:url+"api/all",params:{}})},postData:function(params,data){return params=angular.isDefined(params)?params:{},$http({method:"POST",url:url+"processData.php",params:params,data:data})}}}]).factory("swFactory",["$http","SOFTWARE_URL",function($http,url){return{getData:function(pPoint){return $http({method:"GET",url:url+"api/"+pPoint,params:{}})},postData:function(params,data){return params=angular.isDefined(params)?params:{},$http({method:"POST",url:url+"processData.php",params:params,data:data})}}}]).factory("newsFactory",["$http","NEWS_URL",function($http,url){return{getData:function(pPoint){return $http({method:"GET",url:url+"api/"+pPoint,params:{}})},postData:function(params,data){return params=angular.isDefined(params)?params:{},$http({method:"POST",url:url+"processData.php",params:params,data:data})}}}]).factory("formFactory",["$http","FORMS_URL",function($http,url){return{getData:function(){return $http({method:"GET",url:url+"api/all",params:{}})},postData:function(params,data){return params=angular.isDefined(params)?params:{},$http({method:"POST",url:url+"processData.php",params:params,data:data})},submitForm:function(data){return $http({method:"POST",url:url+"api/process",params:{},data:data})}}}]).factory("alertFactory",["$http","ALERTS_URL",function($http,url){return{getData:function(){return $http({method:"GET",url:url+"api/all",params:{}})},postData:function(params,data){return params=angular.isDefined(params)?params:{},$http({method:"POST",url:url+"processData.php",params:params,data:data})}}}]).factory("errorsFactory",["$http","ERRORS_URL",function($http,url){return{getData:function(){return $http({method:"GET",url:url+"api/all",params:{}})}}}]).factory("wpUsersFactory",["$http","API",function($http,API){return{getAllUsersWP:function(){return $http.get(API+"users?per_page=100")}}}]).service("tokenReceiver",["$http","API",function($http,API){function makeRequest(){return $http.get(API+"users/me").then(function(r1){angular.isDefined(r1.data.id)&&$http.get(API+"users/"+r1.data.id,{context:"edit"}).then(function(r2){return r2.data})})}this.promise=null,this.getPromise=function(update){return!update&&this.promise||(this.promise=makeRequest()),this.promise}}]).run(["$rootScope",function($rootScope){$rootScope.userInfo={}}]),angular.module("manage.manageAlerts",[]).constant("TYPES",[{name:"Success",value:0},{name:"Warning",value:1},{name:"Danger",value:2}]).constant("ALERTS_GROUP",512).config(["$routeProvider",function($routeProvider){$routeProvider.when("/manage-alerts",{controller:"manageAlertsCtrl",templateUrl:"manageAlerts/manageAlerts.tpl.html",resolve:{userData:function(tokenReceiver){return tokenReceiver.getPromise()}}})}]).controller("manageAlertsCtrl",["$scope","alertFactory","TYPES","userData","ALERTS_GROUP","AuthService",function($scope,alertFactory,TYPES,userData,ALERTS_GROUP,AuthService){$scope.userInfo=AuthService.isAuthorized(),$scope.data={},$scope.newAlert={},$scope.newAlert.message="",$scope.newAlert.selType=TYPES[0],$scope.newAlert.dateStartDP=new Date,$scope.newAlert.dateStartDP.setHours(0,0,0,0),$scope.newAlert.dateEndDP=new Date,$scope.newAlert.dateEndDP.setHours(0,0,0,0),$scope.newAlert.url="",$scope.newAlert.dpStart=!1,$scope.newAlert.dpEnd=!1,$scope.uploading=!1,$scope.sortModes=[{by:"message",reverse:!1},{by:"type",reverse:!1},{by:"dateStart",reverse:!0},{by:"dateEnd",reverse:!0}],$scope.sortMode=$scope.sortModes[2],$scope.sortBy=function(by){$scope.sortMode===by?$scope.sortModes[by].reverse=!$scope.sortModes[by].reverse:$scope.sortMode=by},$scope.currentPage=1,$scope.maxPageSize=10,$scope.perPage=20,$scope.hasAccess=!1,angular.isDefined($scope.userInfo.group)&&(parseInt($scope.userInfo.group)&ALERTS_GROUP)===ALERTS_GROUP&&($scope.hasAccess=!0),alertFactory.getData("all").success(function(data){console.dir(data);for(var i=0;i<data.alerts.length;i++){data.alerts[i].show=!1,data.alerts[i].dpStart=!1,data.alerts[i].dpEnd=!1,data.alerts[i].selType=TYPES[0];for(var j=1;j<TYPES.length;j++)if(TYPES[j].value==data.alerts[i].type){data.alerts[i].selType=TYPES[j];break}data.alerts[i].dateStart=new Date(data.alerts[i].dateStart),data.alerts[i].dateStart.setTime(data.alerts[i].dateStart.getTime()+60*data.alerts[i].dateStart.getTimezoneOffset()*1e3),data.alerts[i].dateEnd=new Date(data.alerts[i].dateEnd),data.alerts[i].dateEnd.setTime(data.alerts[i].dateEnd.getTime()+60*data.alerts[i].dateEnd.getTimezoneOffset()*1e3)}$scope.data=data}).error(function(data,status,headers,config){console.log(data)}),$scope.toggleAlerts=function(alert){$scope.data.alerts[$scope.data.alerts.indexOf(alert)].show=!$scope.data.alerts[$scope.data.alerts.indexOf(alert)].show},$scope.validateAlert=function(alert){return angular.isDefined(alert.dateStart)?angular.isDefined(alert.dateEnd)?angular.isDefined(alert.message)&&alert.message.length>10?"":"Please enter alert Message, minimum 10 characters!":"Please enter Active Until date!":"Please enter Active From date!"},$scope.deleteAlert=function(alert){1==confirm("Delete alert permanently?")&&($scope.uploading=!0,alert.formResponse="",alertFactory.postData({action:1},alert).success(function(data,status,headers,config){1==data?$scope.data.alerts.splice($scope.data.alerts.indexOf(alert),1):alert.formResponse="Error: Can not delete alert! "+data,$scope.uploading=!1,console.log(data)}).error(function(data,status,headers,config){alert.formResponse="Error: Could not delete alert! "+data,$scope.uploading=!1,console.log(data)}))},$scope.updateAlert=function(alert){alert.formResponse=$scope.validateAlert(alert),alert.formResponse.length<1&&($scope.uploading=!0,alert.tsStart=alert.dateStart.valueOf()/1e3,alert.tsEnd=alert.dateEnd.valueOf()/1e3,alertFactory.postData({action:2},alert).success(function(data,status,headers,config){alert.formResponse=1==data?"Alert has been updated!":"Error: Can not update alert! "+data,$scope.uploading=!1,console.log(data)}).error(function(data,status,headers,config){alert.formResponse="Error: Could not update alert! "+data,$scope.uploading=!1,console.log(data)}))},$scope.createAlert=function(alert){$scope.newAlert.formResponse="",$scope.newAlert.formResponse=$scope.validateAlert(alert),$scope.newAlert.formResponse.length<1&&($scope.uploading=!0,alert.tsStart=alert.dateStart.valueOf()/1e3,alert.tsEnd=alert.dateEnd.valueOf()/1e3,alertFactory.postData({action:3},alert).success(function(data,status,headers,config){if("object"==typeof data&&null!==data){var newAlert={};newAlert=angular.copy(alert),newAlert.aid=data.id,newAlert.show=!1,newAlert.selType=TYPES[0];for(var j=1;j<TYPES.length;j++)if(TYPES[j].value==alert.type){newAlert.selType=TYPES[j];break}$scope.data.alerts.push(newAlert),$scope.newAlert.formResponse="Alert has been created."}else $scope.newAlert.formResponse="Error: Can not create alert! "+data;console.dir(data),$scope.uploading=!1}).error(function(data,status,headers,config){$scope.newAlert.formResponse="Error: Could not create alert! "+data,console.log(data),$scope.uploading=!1}))}}]).controller("manageAlertFieldsCtrl",["$scope","TYPES",function($scope,TYPES){$scope.types=TYPES,$scope.dpFormat="MM/dd/yyyy",$scope.showDatePicker=function(alert,isFrom){alert.aid>0?!0===isFrom?$scope.data.alerts[$scope.data.alerts.indexOf(alert)].dpStart=!0:$scope.data.alerts[$scope.data.alerts.indexOf(alert)].dpEnd=!0:!0===isFrom?$scope.alert.dpStart=!0:$scope.alert.dpEnd=!0}}]).directive("alertsItemFields",["$timeout",function($timeout){return{restrict:"AC",scope:{alert:"=alertdata",data:"=list"},controller:"manageAlertFieldsCtrl",link:function(scope,elm,attrs){scope.onAlertDPFocus=function(alert,isFrom){$timeout(function(){scope.showDatePicker(alert,isFrom),scope.$apply()},0)}},templateUrl:"manageAlerts/manageAlertsItemFields.tpl.html"}}]),angular.module("manage.manageDatabases",[]).constant("DATABASES_GROUP",32).config(["$routeProvider",function($routeProvider){$routeProvider.when("/manage-databases",{controller:"manageDBCtrl",templateUrl:"manageDatabases/manageDatabases.tpl.html",resolve:{userData:function(tokenReceiver){return tokenReceiver.getPromise()}}})}]).controller("manageDBCtrl",["$scope","$filter","mdbFactory","userData","DATABASES_GROUP","AuthService",function($scope,$filter,mdbFactory,userData,DATABASES_GROUP,AuthService){function processFilters(newVal,oldVal){newVal=angular.isUndefined(newVal)?angular.copy($scope.filters):newVal;var db=angular.copy(DBList.databases);for(var filter in newVal)if(void 0===oldVal||newVal[filter]!==oldVal[filter]||"sort"===filter)switch(filter){case"sort":db=$filter("orderBy")(db,newVal[filter].by,newVal[filter].reverse);break;case"titleStart":db=$filter("filter")(db,{title:newVal[filter]},startTitle);break;default:var f={};f[filter]=newVal[filter],db=$filter("filter")(db,f)}$scope.filteredDB=angular.copy(db)}function startTitle(actual,expected){return!expected||0==actual.toLowerCase().indexOf(expected.toLowerCase())}$scope.userInfo=AuthService.isAuthorized();var DBList={};$scope.filters={titleStart:"",title:"",description:"",subjects:"",types:"",publisher:"",vendor:"",disabled:"",sort:{}},$scope.filteredDB=null,$scope.disValues=[{name:"Show all",value:""},{name:"Enabled only",value:"0"},{name:"Disabled only",value:"1"}],$scope.sortMode=0,$scope.sortModes=[{by:"title",reverse:!1},{by:"dateCreated",reverse:!1},{by:"lastModified",reverse:!1},{by:"tmpDisabled",reverse:!0}],$scope.newDB={},$scope.newDB.subjects=[],$scope.newDB.types=[],$scope.currentPage=1,$scope.maxPageSize=10,$scope.perPage=20,$scope.subjectValues=[1,2],$scope.fullTextValues=["","A","N","P","S"],$scope.inEDSValues=["","Y","P"],$scope.hasAccess=!1,angular.isDefined($scope.userInfo.group)&&(parseInt($scope.userInfo.group)&DATABASES_GROUP)===DATABASES_GROUP&&($scope.hasAccess=!0,$scope.newDB.updatedBy=$scope.userInfo.login),mdbFactory.getData().success(function(data){for(var i=0;i<data.databases.length;i++)data.databases[i].show=!1,data.databases[i].changed=!1,data.databases[i].class="",data.databases[i].selSubj=data.subjects[0],data.databases[i].subjType=1,data.databases[i].selType=data.types[0];$scope.newDB.selSubj=data.subjects[0],$scope.newDB.subjType=1,$scope.newDB.selType=data.types[0],$scope.types=angular.copy(data.types),$scope.subjects=angular.copy(data.subjects),DBList=angular.copy(data),$scope.filteredDB=angular.copy(data.databases),$scope.filters.sort={by:"title",reverse:!1}}).error(function(data,status,headers,config){console.log(data)}),$scope.$watchCollection("filters",processFilters),$scope.sortBy=function(by){$scope.sortMode===by?$scope.sortModes[by].reverse=!$scope.sortModes[by].reverse:$scope.sortMode=by,$scope.filters.sort=angular.copy($scope.sortModes[by])},$scope.toggleDB=function(db){db.show=!db.show},$scope.changed=function(db){db.changed=!0},$scope.deleteDB=function(db){1==confirm("Delete "+db.title+" permanently?")&&mdbFactory.postData({action:1},db).success(function(data,status,headers,config){1==data?($scope.filteredDB.splice($scope.filteredDB.indexOf(db),1),DBList.databases=DBList.databases.filter(function(item){return item.id!==db.id}),$scope.formResponse="Database has been deleted."):($scope.formResponse="Error: Can not delete database! "+data,alert($scope.formResponse)),console.log(data)}).error(function(data,status,headers,config){$scope.formResponse="Error: Could not delete database! "+data,alert($scope.formResponse),console.log(data)})},$scope.updateDB=function(db){return db.title.length<1?(alert("Form error: Please fill out Title field!"),!1):db.url.length<11?(alert("Form error: Please fill out URL field!"),!1):db.description.length<1?(alert("Form error: Please fill out Description field!"),!1):(db.updatedBy=$scope.newDB.updatedBy,void mdbFactory.postData({action:2},db).success(function(data,status,headers,config){$scope.formResponse=1==data?"Database has been updated.":"Error: Can not update database! "+data,db.changed=!1,alert($scope.formResponse),DBList.databases=DBList.databases.filter(function(item){return item.id!==db.id}),DBList.databases.push(angular.copy(db)),console.log(data)}).error(function(data,status,headers,config){$scope.formResponse="Error: Could not update database! "+data,alert($scope.formResponse),console.log(data)}))},$scope.createDB=function(){mdbFactory.postData({action:3},$scope.newDB).success(function(data,status,headers,config){if("object"==typeof data&&null!==data){var newDB={};newDB=angular.extend({publisher:"",vendor:"",disabled:0},$scope.newDB),newDB.id=data.id,newDB.subjects=angular.copy(data.subjects),newDB.types=angular.copy(data.types),newDB.show=!1,newDB.changed=!1,newDB.class="",newDB.selSubj=data.subjects[0],newDB.subjType=1,newDB.selType=data.types[0],DBList.databases.push(newDB),processFilters(),$scope.formResponse="Database has been created."}else $scope.formResponse="Error: Can not create database! "+data;console.dir(data)}).error(function(data,status,headers,config){$scope.formResponse="Error: Could not create database! "+data,console.dir(data)})},$scope.addSubject=function(db){var newSubject={};newSubject.dbid=db.id,newSubject.type=db.subjType,newSubject.sid=db.selSubj.sid,newSubject.subject=db.selSubj.subject,newSubject.updatedBy=$scope.newDB.updatedBy,mdbFactory.postData({action:4},newSubject).success(function(data,status,headers,config){"object"==typeof data&&null!==data?(newSubject.id=data.id,void 0===db.subjects&&(db.subjects=[]),db.subjects.push(newSubject),$scope.formResponse="Subject has been added."):($scope.formResponse="Error: Can not add subject! "+data,alert($scope.formResponse)),console.dir(data)}).error(function(data,status,headers,config){$scope.formResponse="Error: Could not add subject! "+data,alert($scope.formResponse),console.dir(data)})},$scope.deleteSubject=function(db,subject){subject.dbid=db.id,subject.updatedBy=$scope.newDB.updatedBy,mdbFactory.postData({action:5},subject).success(function(data,status,headers,config){1==data?(db.subjects.splice(db.subjects.indexOf(subject),1),$scope.formResponse="Subject has been deleted."):($scope.formResponse="Error: Can not delete subject! "+data,alert($scope.formResponse))}).error(function(data,status,headers,config){
$scope.formResponse="Error: Could not delete subject! "+data,alert($scope.formResponse)})},$scope.addType=function(db){var newType={};newType.dbid=db.id,newType.tid=db.selType.tid,newType.type=db.selType.type,newType.updatedBy=$scope.newDB.updatedBy,mdbFactory.postData({action:6},newType).success(function(data,status,headers,config){"object"==typeof data&&null!==data?(newType.id=data.id,void 0===db.types&&(db.types=[]),db.types.push(newType),$scope.formResponse="Type has been added."):($scope.formResponse="Error: Can not add type! "+data,alert($scope.formResponse))}).error(function(data,status,headers,config){$scope.formResponse="Error: Could not add type! "+data,alert($scope.formResponse)})},$scope.deleteType=function(db,type){type.dbid=db.id,type.updatedBy=$scope.newDB.updatedBy,mdbFactory.postData({action:7},type).success(function(data,status,headers,config){1==data?(db.types.splice(db.types.indexOf(type),1),$scope.formResponse="Type has been deleted."):($scope.formResponse="Error: Can not delete type! "+data,alert($scope.formResponse))}).error(function(data,status,headers,config){$scope.formResponse="Error: Could not delete type! "+data,alert($scope.formResponse)})},$scope.delSubjNewDB=function(index){$scope.newDB.subjects.splice(index,1)},$scope.addSubjNewDB=function(){var newSubject={};newSubject.type=$scope.newDB.subjType,newSubject.sid=$scope.newDB.selSubj.sid,newSubject.subject=$scope.newDB.selSubj.subject,void 0===$scope.newDB.subjects&&($scope.newDB.subjects=[]);for(var isPresent=!1,i=0;i<$scope.newDB.subjects.length;i++)if($scope.newDB.subjects[i].sid==newSubject.sid){isPresent=!0;break}isPresent||$scope.newDB.subjects.push(newSubject)},$scope.delTypeNewDB=function(index){$scope.newDB.types.splice(index,1)},$scope.addTypeNewDB=function(){var newType={};newType.tid=$scope.newDB.selType.tid,newType.type=$scope.newDB.selType.type,void 0===$scope.newDB.types&&($scope.newDB.types=[]);for(var isPresent=!1,i=0;i<$scope.newDB.types.length;i++)if($scope.newDB.types[i].tid==newType.tid){isPresent=!0;break}isPresent||$scope.newDB.types.push(newType)}}]),angular.module("manage.manageERCarousel",["ngFileUpload"]).constant("ERC_GROUP",1024).config(["$routeProvider",function($routeProvider){$routeProvider.when("/manage-erc",{controller:"manageErcCtrl",templateUrl:"manageERCarousel/manageERCarousel.tpl.html",resolve:{userData:function(tokenReceiver){return tokenReceiver.getPromise()}}})}]).controller("manageErcCtrl",["$scope","ercFactory","userData","ERC_GROUP","AuthService",function($scope,ercFactory,userData,ERC_GROUP,AuthService){$scope.userInfo=AuthService.isAuthorized(),$scope.slides={},$scope.numShow=0,$scope.admin=!1,$scope.newSlide={},$scope.newSlide.selectedFiles=[],$scope.newSlide.picFile=[],$scope.updating=!0,$scope.hasAccess=!1,angular.isDefined($scope.userInfo.group)&&(parseInt($scope.userInfo.group)&ERC_GROUP)===ERC_GROUP&&($scope.hasAccess=!0),ercFactory.slides().get().$promise.then(function(data){$scope.updating=!1,console.dir(data.slides);for(var i=0;i<data.slides.length;i++)data.slides[i].priority=parseInt(data.slides[i].priority),data.slides[i].show=!1,data.slides[i].selectedFiles=[],data.slides[i].tmpPriority=data.slides[i].priority;$scope.slides=data.slides,$scope.numShow=data.numShow,$scope.admin=data.admin},function(data,status){$scope.updating=!1,console.dir(data)})}]).controller("manageSlideListCtrl",["$scope","$timeout","Upload","ercFactory","ERCAROUSEL_URL",function($scope,$timeout,Upload,ercFactory,appURL){$scope.appURL=appURL,$scope.uploading=!1,$scope.newSlide.title="",$scope.newSlide.tmpPriority=0,$scope.newSlide.url="",$scope.toggleSlide=function(slide){$scope.slides[$scope.slides.indexOf(slide)].show=!$scope.slides[$scope.slides.indexOf(slide)].show},$scope.validateSlide=function(slide){return slide.title.length<1?"Form error: Please fill out Title!":slide.url.length<11?"Form error: Please fill out URL!":""},$scope.approveSlide=function(slide){1==confirm("Are you sure you want to approve "+slide.title+"?")&&($scope.uploading=!0,slide.approve=!0,ercFactory.slides().save({slideID:slide.sid},slide).$promise.then(function(data){$scope.uploading=!1,$scope.slides[$scope.slides.indexOf(slide)].status=data.status},function(data,status){$scope.uploading=!1,$scope.slides[$scope.slides.indexOf(slide)].formResponse=data.message,console.dir(data)}))},$scope.deleteSlide=function(slide){1==confirm("Delete "+slide.title+" permanently?")&&($scope.uploading=!0,slide.approve=!0,ercFactory.slides().delete({slideID:slide.sid}).$promise.then(function(data){$scope.uploading=!1,$scope.slides.splice($scope.slides.indexOf(slide),1)},function(data,status){$scope.uploading=!1,$scope.formResponse="Error: Could not delete slide! "+data,console.dir(data)}))},$scope.updateSlide=function(slide){if(console.dir(slide),$scope.slides[$scope.slides.indexOf(slide)].formResponse=$scope.validateSlide(slide),$scope.slides[$scope.slides.indexOf(slide)].formResponse.length>0)return!1;if($scope.uploading=!0,slide.title=slide.title.replace(/\//g," "),slide.priority=slide.tmpPriority,slide.selectedFiles.length<1)ercFactory.slides().save({slideID:slide.sid},slide).$promise.then(function(data){$scope.uploading=!1,$scope.slides[$scope.slides.indexOf(slide)].formResponse=data.message},function(data,status){$scope.uploading=!1,$scope.slides[$scope.slides.indexOf(slide)].formResponse=data.message,console.dir(data)});else{for(var names=[],i=0;i<slide.selectedFiles.length;i++)names.push(slide.selectedFiles[i].name);slide.selectedFiles.upload=Upload.upload({url:appURL+"slides/"+slide.sid,method:"POST",fields:{erCarousel:slide},file:slide.selectedFiles,fileFormDataName:names}),slide.selectedFiles.upload.then(function(response){$timeout(function(){slide.selectedFiles.length=0,slide.picFile.length=0,$scope.slides[$scope.slides.indexOf(slide)].formResponse=response.data.message,$scope.uploading=!1})},function(response){response.status>0&&($scope.slides[$scope.slides.indexOf(slide)].formResponse=response.status+": "+response.data),$scope.uploading=!1}),slide.selectedFiles.upload.progress(function(evt){slide.selectedFiles.progress=Math.min(100,parseInt(100*evt.loaded/evt.total))})}},$scope.createSlide=function(slide){if(slide.formResponse=$scope.validateSlide(slide),slide.formResponse.length>0)return!1;if($scope.uploading=!0,slide.title=slide.title.replace(/\//g," "),slide.priority=slide.tmpPriority,slide.selectedFiles.length>0){for(var names=[],i=0;i<slide.selectedFiles.length;i++)names.push(slide.selectedFiles[i].name);slide.selectedFiles.upload=Upload.upload({url:appURL+"slides/",method:"POST",fields:{erCarousel:slide},file:slide.selectedFiles,fileFormDataName:names}),slide.selectedFiles.upload.then(function(res){$timeout(function(){if($scope.uploading=!1,angular.isDefined(res.data.sid)&&angular.isDefined(res.data.status)&&angular.isDefined(res.data.image)){var newSlide={};newSlide.sid=res.data.sid,newSlide.status=res.data.status,newSlide.image=res.data.image,newSlide.title=slide.title,newSlide.priority=slide.priority,newSlide.url=slide.url,newSlide.show=!1,newSlide.selectedFiles=[],$scope.slides.push(newSlide)}slide.formResponse=res.data.message})},function(response){$scope.uploading=!1,response.status>0&&(slide.formResponse=response.status+": "+response.data)}),slide.selectedFiles.upload.progress(function(evt){slide.selectedFiles.progress=Math.min(100,parseInt(100*evt.loaded/evt.total))})}else slide.formResponse="Please select a slide image."}}]).directive("manageSlideList",[function(){return{restrict:"A",controller:"manageSlideListCtrl",link:function(scope,elm,attrs){},templateUrl:"manageERCarousel/manageSlideList.tpl.html"}}]).controller("slideFieldsCtrl",["$scope","$timeout","Upload",function($scope,$timeout,Upload){$scope.generateThumb=function(files,slide){if(files.length>0&&null!==files)for(var i=0;i<files.length;i++)$scope.slide.selectedFiles.push(files[i]),$scope.fileReaderSupported&&files[i].type.indexOf("image")>-1&&$timeout(function(){var fileReader=new FileReader;fileReader.readAsDataURL(files[i]),fileReader.onload=function(e){$timeout(function(){files[i].dataUrl=e.target.result})}})}}]).directive("slideFieldsList",["$timeout",function($timeout){return{restrict:"AC",scope:{slide:"="},controller:"slideFieldsCtrl",link:function(scope,elm,attrs){},templateUrl:"manageERCarousel/manageSlideFields.tpl.html"}}]),angular.module("manage.manageHours",[]).constant("HOURS_FROM",[{name:"Closed 24hrs",value:"-1"},{name:"Midnight",value:"0"},{name:"6:00 am",value:"600"},{name:"7:00 am",value:"700"},{name:"7:30 am",value:"730"},{name:"7:45 am",value:"745"},{name:"8:00 am",value:"800"},{name:"9:00 am",value:"900"},{name:"10:00 am",value:"1000"},{name:"11:00 am",value:"1100"},{name:"Noon",value:"1200"},{name:"1:00 pm",value:"1300"},{name:"2:00 pm",value:"1400"},{name:"2:30 pm",value:"1430"},{name:"3:00 pm",value:"1500"},{name:"6:00 pm",value:"1800"}]).constant("HOURS_TO",[{name:"1:00 am",value:"100"},{name:"2:00 am",value:"200"},{name:"3:00 am",value:"300"},{name:"8:00 am",value:"800"},{name:"9:00 am",value:"900"},{name:"10:00 am",value:"1000"},{name:"11:00 am",value:"1100"},{name:"Noon",value:"1200"},{name:"1:00 pm",value:"1300"},{name:"2:00 pm",value:"1400"},{name:"3:00 pm",value:"1500"},{name:"4:00 pm",value:"1600"},{name:"4:30 pm",value:"1630"},{name:"4:45 pm",value:"1645"},{name:"5:00 pm",value:"1700"},{name:"5:30 pm",value:"1730"},{name:"6:00 pm",value:"1800"},{name:"6:30 pm",value:"1830"},{name:"7:00 pm",value:"1900"},{name:"8:00 pm",value:"2000"},{name:"9:00 pm",value:"2100"},{name:"10:00 pm",value:"2200"},{name:"11:00 pm",value:"2300"},{name:"Midnight",value:"2400"}]).constant("DP_FORMAT","MM/dd/yyyy").constant("HOURS_GROUP",2).config(["$routeProvider",function($routeProvider){$routeProvider.when("/manage-hours",{controller:"manageHrsCtrl",templateUrl:"manageHours/manageHours.tpl.html",resolve:{userData:function(tokenReceiver){return tokenReceiver.getPromise()}}})}]).controller("manageHrsCtrl",["$scope","$animate","hmFactory","HOURS_FROM","HOURS_TO","DP_FORMAT","userData","HOURS_GROUP","AuthService",function($scope,$animate,hmFactory,hoursFrom,hoursTo,dpFormat,userData,HOURS_GROUP,AuthService){$scope.userInfo=AuthService.isAuthorized(),$scope.allowedLibraries=[],$scope.format=dpFormat,$scope.hrsFrom=hoursFrom,$scope.hrsTo=hoursTo,$scope.selLib={},$scope.hasAccess=!1,angular.isDefined($scope.userInfo.group)&&(parseInt($scope.userInfo.group)&HOURS_GROUP)===HOURS_GROUP&&($scope.hasAccess=!0),$scope.initSemesters=function(semesters){for(var sem=0;sem<semesters.length;sem++)semesters[sem].startdate=new Date(semesters[sem].startdate),semesters[sem].startdate.setTime(semesters[sem].startdate.getTime()+60*semesters[sem].startdate.getTimezoneOffset()*1e3),semesters[sem].enddate=new Date(semesters[sem].enddate),semesters[sem].enddate.setTime(semesters[sem].enddate.getTime()+60*semesters[sem].enddate.getTimezoneOffset()*1e3),semesters[sem].dp=!1;return semesters},hmFactory.getData("semesters").success(function(data){console.dir(data),$scope.selLib=data.libraries[0];for(var lib=0;lib<data.libraries.length;lib++){for(var ex=0;ex<data.exc[lib].length;ex++)data.exc[lib][ex].datems=new Date(1e3*data.exc[lib][ex].date),data.exc[lib][ex].dp=!1;data.sem[lib]=$scope.initSemesters(data.sem[lib])}$scope.allowedLibraries=data}).error(function(data,status,headers,config){console.log(data)}),$scope.tabs=[{name:"Semesters",number:0,active:!0},{name:"Exceptions",number:1,active:!1}]}]).controller("semListCtrl",["$scope","hmFactory",function($scope,hmFactory){$scope.expSem=-1,$scope.weekHrs=[],$scope.loading=!1,$scope.newSemester={},$scope.newSemester.dp=!1,$scope.newSemester.dow=[],$scope.newSemester.name="",$scope.newSemester.startdate=new Date,$scope.newSemester.startdate.setHours(0,0,0,0);for(var day=0;day<7;day++)$scope.newSemester.dow[day]={},$scope.newSemester.dow[day].from=-1,$scope.newSemester.dow[day].to=0;$scope.onSemFocus=function($event,index){$event.preventDefault(),$event.stopPropagation(),void 0!==index&&index>=0?$scope.allowedLibraries.sem[$scope.selLib.index][index].dp=!0:$scope.newSemester.dp=!0},$scope.expandSem=function($event,semester){if($scope.expSem!==semester.dsid){$scope.result="",$scope.resultDel="";for(var i=0;i<7;i++){var len=$scope.hrsFrom.length;$scope.weekHrs[i]={},$scope.weekHrs[i].from=$scope.hrsFrom[0],$scope.weekHrs[i].to=$scope.hrsTo[0];for(var j=0;j<len;j++)$scope.hrsFrom[j].value==semester.dow[i].from&&($scope.weekHrs[i].from=$scope.hrsFrom[j]),$scope.hrsTo[j].value==semester.dow[i].to&&($scope.weekHrs[i].to=$scope.hrsTo[j])}}else $event.preventDefault(),$event.stopPropagation();$scope.expSem=semester.dsid},$scope.isExpSem=function(semID){return $scope.expSem===semID},$scope.saveChanges=function(semester){semester.lid=$scope.selLib.lid,semester.libName=$scope.selLib.name,$scope.loading=!0,hmFactory.postData({action:1},semester).success(function(data){"object"==typeof data&&null!==data?($scope.result="Semester updated",$scope.allowedLibraries.sem[$scope.selLib.index]=$scope.initSemesters(data)):$scope.result="Error! Could not save data!",$scope.loading=!1}).error(function(data,status,headers,config){$scope.loading=!1})},$scope.deleteSem=function(semester,index){confirm("Are you sure you want to delete "+semester.name+" semester?")&&($scope.loading=!0,semester.lid=$scope.selLib.lid,semester.libName=$scope.selLib.name,hmFactory.postData({action:3},semester).success(function(data){"object"==typeof data&&null!==data?($scope.result="Semester deleted",$scope.allowedLibraries.sem[$scope.selLib.index]=$scope.initSemesters(data)):$scope.result="Error! Could not delete semester!",$scope.loading=!1}).error(function(data,status,headers,config){$scope.loading=!1}))},$scope.createSem=function(){$scope.loading=!0,$scope.newSemester.lid=$scope.selLib.lid,$scope.newSemester.libName=$scope.selLib.name,hmFactory.postData({action:2},$scope.newSemester).success(function(data){"object"==typeof data&&null!==data?($scope.result="Semester created",$scope.allowedLibraries.sem[$scope.selLib.index]=$scope.initSemesters(data)):$scope.result="Error! Could not create semester!",$scope.loading=!1}).error(function(data,status,headers,config){$scope.loading=!1})}}]).directive("semesterList",[function(){return{restrict:"A",controller:"semListCtrl",templateUrl:"manageHours/manageSem.tpl.html"}}]).controller("exListCtrl",["$scope","hmFactory",function($scope,hmFactory){$scope.newException={},$scope.newException.from=-1,$scope.newException.to=0,$scope.newException.dp=!1,$scope.newException.isGlobal=!1,$scope.newException.desc="",$scope.newException.days=1,$scope.newException.datems=new Date,$scope.newException.datems.setHours(0,0,0,0),$scope.expExc=-1,$scope.onExcFocus=function($event,index){$event.preventDefault(),$event.stopPropagation(),void 0!==index&&index>=0?$scope.allowedLibraries.exc[$scope.selLib.index][index].dp=!0:$scope.newException.dp=!0},$scope.expandExc=function($event,exception){$scope.expExc!=exception.id?($scope.result="",$scope.resultDel=""):($event.preventDefault(),$event.stopPropagation()),$scope.expExc=exception.id},$scope.isExpExc=function(excID){return $scope.expExc===excID},$scope.updateExc=function(exception){$scope.loading=!0,exception.lid=$scope.selLib.lid,exception.datems2=exception.datems.valueOf()/1e3,hmFactory.postData({action:4},exception).success(function(data){$scope.result=1==data?"Saved":"Error! Could not update exception!",$scope.loading=!1}).error(function(data,status,headers,config){$scope.loading=!1})},$scope.deleteExc=function(exception,index){confirm("Are you sure you want to delete "+exception.desc+" exception?")&&($scope.loading=!0,exception.lid=$scope.selLib.lid,hmFactory.postData({action:5},exception).success(function(data){1==data?($scope.allowedLibraries.exc[$scope.selLib.index].splice(index,1),$scope.expExc=-1):$scope.result="Error! Could not delete exception!",$scope.loading=!1}).error(function(data,status,headers,config){$scope.loading=!1}))},$scope.createExc=function(){$scope.loading=!0,$scope.newException.lid=$scope.selLib.lid,$scope.newException.datems2=$scope.newException.datems.valueOf()/1e3,hmFactory.postData({action:6},$scope.newException).success(function(data){if("object"==typeof data&&null!==data){var i=0;for(i=0;i<data.length;i++){var newExc={};newExc.id=data[i].id,newExc.datems=new Date(1e3*$scope.newException.datems2),newExc.days=$scope.newException.days,newExc.desc=$scope.newException.desc,newExc.from=$scope.newException.from,newExc.to=$scope.newException.to,newExc.dp=!1;var l=0;for(l=0;l<$scope.allowedLibraries.libraries.length&&$scope.allowedLibraries.libraries[l].lid!==data[i].lid;l++);$scope.allowedLibraries.exc[$scope.allowedLibraries.libraries[l].index].push(newExc)}$scope.result="Created exceptions count: "+i}else $scope.result="Error! Could not create an exception!";$scope.loading=!1,console.log(data)}).error(function(data,status,headers,config){$scope.loading=!1})},$scope.deleteOldExc=function(){$scope.loading=!0,hmFactory.postData({action:7},$scope.selLib).success(function(data){if("object"==typeof data&&null!==data){$scope.expExc=-1;for(var ex=0;ex<data.length;ex++)data[ex].datems=new Date(1e3*data[ex].date),data[ex].dp=!1;$scope.allowedLibraries.exc[$scope.selLib.index]=data,$scope.resultDel="Outdated exceptions deleted"}else $scope.resultDel="Error! Could not delete exceptions!";$scope.loading=!1}).error(function(data,status,headers,config){$scope.loading=!1})}}]).directive("exceptionList",[function(){return{restrict:"A",controller:"exListCtrl",link:function(scope,elem,attrs){},templateUrl:"manageHours/manageEx.tpl.html"}}]),angular.module("manage.manageHoursUsers",[]).constant("HOURS_GROUP",2).config(["$routeProvider",function($routeProvider){$routeProvider.when("/manage-hours-users",{controller:"manageHrsUsersCtrl",templateUrl:"manageHours/manageHoursUsers.tpl.html",resolve:{userData:function(tokenReceiver){return tokenReceiver.getPromise()}}})}]).controller("manageHrsUsersCtrl",["$scope","$animate","wpUsersFactory","hmFactory","userData","HOURS_GROUP","AuthService",function($scope,$animate,wpUsersFactory,hmFactory,userData,HOURS_GROUP,AuthService){$scope.userInfo=AuthService.isAuthorized(),$scope.isLoading=!0,$scope.dataUL={},$scope.dataUL.users=[],$scope.dataUL.locations=[],$scope.wpUsers=[],$scope.hasAccess=!1,angular.isDefined($scope.userInfo.group)&&(parseInt($scope.userInfo.group)&HOURS_GROUP)===HOURS_GROUP&&($scope.hasAccess=!0),wpUsersFactory.getAllUsersWP().success(function(data){for(i=0;i<data.length;i++)nameArray=data[i].name.split(" "),nameArray.length>1&&(data[i].fullName=data[i].name);$scope.wpUsers=data,$scope.newUser=$scope.wpUsers[0],console.dir(data),hmFactory.getData("users").success(function(data2){for(i=0;i<data2.users.length;i++)for(var j=0;j<$scope.wpUsers.length;j++)if(data2.users[i].name===$scope.wpUsers[j].nickname){data2.users[i].fullName=$scope.wpUsers[j].fullName;break}$scope.dataUL=data2,$scope.isLoading=!1,console.dir(data2)}).error(function(data,status,headers,config){$scope.isLoading=!1})}).error(function(data,status,headers,config){$scope.isLoading=!1,console.dir(data)}),$scope.tabs=[{name:"Users",number:0,active:!0},{name:"Locations",number:1,active:!1}]}]).controller("hrsUserListCtrl",["$scope","hmFactory",function($scope,hmFactory){$scope.expUser=-1,$scope.expUserIndex=-1,$scope.newUserAdmin=!1,$scope.newUserAccess=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],$scope.expandUser=function(user){if($scope.expUser!=user.uid)for(var i=0;i<$scope.dataUL.users.length;i++)if($scope.dataUL.users[i].uid==user.uid){$scope.expUserIndex=i;break}$scope.result="",$scope.result2="",$scope.expUser=user.uid},$scope.isExpUser=function(uID){return $scope.expUser===uID},$scope.updateUser=function(user){$scope.isLoading=!0,user.locations=$scope.dataUL.locations,hmFactory.postData({action:8},user).success(function(data){$scope.result=1==data?"Saved":"Error! Could not save data!",$scope.isLoading=!1}).error(function(data,status,headers,config){$scope.result="Error! Could not save data!",$scope.isLoading=!1})},$scope.createUser=function(user){$scope.isLoading=!0,$scope.result2="",user.admin=$scope.newUserAdmin,user.access=$scope.newUserAccess,user.locations=$scope.dataUL.locations,hmFactory.postData({action:9},user).success(function(data){if("object"==typeof data&&null!==data){$scope.result2="Access granted!";var createdUser={};createdUser.name=user.nickname,createdUser.fullName=user.fullName,createdUser.uid=data.uid,createdUser.role=user.admin,createdUser.access=[];for(var i=0;i<user.access.length;i++)user.access[i]?createdUser.access[i]=!0:createdUser.access[i]=!1;$scope.dataUL.users.push(createdUser),$scope.expandUser(createdUser),$scope.result2="User has been added!"}else $scope.result2="Error! Could not grant access!";$scope.isLoading=!1}).error(function(data,status,headers,config){$scope.isLoading=!1,$scope.result2="Error! Could not grant access!"})},$scope.deleteUser=function(user,index){confirm("Are you sure you want to remove access for "+user.name+"?")&&($scope.isLoading=!0,hmFactory.postData({action:10},user).success(function(data){1==data?($scope.result="User access deleted!",$scope.dataUL.users.splice(index,1)):$scope.result="Error! Could not delete user access!"+data,$scope.isLoading=!1}).error(function(data,status,headers,config){$scope.result="Error! Could not delete user access!",$scope.isLoading=!1}))}}]).directive("hoursUserList",[function(){return{restrict:"AC",controller:"hrsUserListCtrl",templateUrl:"manageHours/manageUsers.tpl.html"}}]).controller("hrsLocationsCtrl",["$scope","hmFactory",function($scope,hmFactory){$scope.newLocation="",$scope.newParent=$scope.dataUL.locations[0],$scope.createLoc=function(loc,par){if(loc.length<3)return alert("Library name is too short!"),!1;$scope.isLoading=!0;var newLoc={};newLoc.name=loc,void 0===par?newLoc.parent="0":null===par?newLoc.parent="0":par.lid>0?newLoc.parent=par.lid:newLoc.parent="0",hmFactory.postData({action:11},newLoc).success(function(data){"object"==typeof data&&null!==data?(newLoc.lid=data.lid,$scope.dataUL.locations.push(newLoc),$scope.result2="Location created!"):$scope.result2="Error! Could not create location!",$scope.isLoading=!1}).error(function(data,status,headers,config){$scope.isLoading=!1,$scope.result2="Error! Could not create location!"})}}]).directive("hoursLocationList",[function(){return{restrict:"AC",controller:"hrsLocationsCtrl",templateUrl:"manageHours/manageLoc.tpl.html"}}]),angular.module("manage.manageNews",["ngFileUpload","oc.lazyLoad","ui.tinymce"]).constant("NEWS_GROUP",256).config(["$routeProvider",function($routeProvider){$routeProvider.when("/manage-news",{controller:"manageNewsCtrl",templateUrl:"manageNews/manageNews.tpl.html",resolve:{userData:function(tokenReceiver){return tokenReceiver.getPromise()},lazyLoad:["$ocLazyLoad",function($ocLazyLoad){return $ocLazyLoad.load("https://cdn.tinymce.com/4/tinymce.min.js")}]}})}]).controller("manageNewsCtrl",["$scope","newsFactory","userData","NEWS_GROUP","lazyLoad","AuthService",function($scope,newsFactory,userData,NEWS_GROUP,lazyLoad,AuthService){$scope.userInfo=AuthService.isAuthorized(),$scope.data={},$scope.newNews={},$scope.newNews.creator=$scope.userInfo.login,$scope.newNews.selectedFiles=[],$scope.newNews.picFile=[],$scope.sortModes=[{by:"title",reverse:!1},{by:"created",reverse:!0}],$scope.hasAccess=!1,angular.isDefined($scope.userInfo.group)&&(parseInt($scope.userInfo.group)&NEWS_GROUP)===NEWS_GROUP&&($scope.hasAccess=!0),newsFactory.getData("all").success(function(data){console.dir(data);for(var i=0;i<data.news.length;i++){data.news[i].created=new Date(1e3*data.news[i].created),null!==data.news[i].activeFrom&&(data.news[i].activeFrom=new Date(1e3*data.news[i].activeFrom)),null!==data.news[i].activeUntil&&(data.news[i].activeUntil=new Date(1e3*data.news[i].activeUntil));for(var j=0;j<data.people.length;j++)if(data.news[i].contactID.uid===data.people[j].uid){data.news[i].contactID=data.people[j];break}data.news[i].show=!1,data.news[i].class="",data.news[i].dpFrom=!1,data.news[i].dpUntil=!1,data.news[i].selectedFiles=[]}$scope.newNews.contactID=data.people[0],$scope.data=data}).error(function(data,status,headers,config){console.log(data)}),$scope.tabs=[{name:"News and Exhibits",number:0,active:!0},{name:"Admins",number:1,active:!1}]}]).controller("manageNewsListCtrl",["$scope","$timeout","Upload","newsFactory","NEWS_URL",function($scope,$timeout,Upload,newsFactory,appURL){$scope.titleFilter="",$scope.descrFilter="",$scope.sortMode=1,$scope.appURL=appURL,$scope.uploading=!1,$scope.newNews.activeFrom=new Date,$scope.newNews.activeFrom.setHours(0,0,0,0),$scope.newNews.activeUntil=new Date,$scope.newNews.activeUntil.setHours(0,0,0,0),$scope.newNews.dpFrom=!1,$scope.newNews.dpUntil=!1,$scope.newNews.contactName="",$scope.newNews.contactEmail="",$scope.newNews.contactPhone="",$scope.newNews.sticky=0,$scope.newNews.type=0,$scope.currentPage=1,$scope.maxPageSize=10,$scope.perPage=20,$scope.toggleNews=function(news){$scope.data.news[$scope.data.news.indexOf(news)].show=!$scope.data.news[$scope.data.news.indexOf(news)].show},$scope.sortBy=function(by){$scope.sortMode===by?$scope.sortModes[by].reverse=!$scope.sortModes[by].reverse:$scope.sortMode=by},$scope.validateNews=function(news){return news.title.length<1?"Form error: Please fill out Title!":news.description.length<1?"Form error: Please fill out Description!":""},$scope.approveNews=function(news){news.admin=$scope.newNews.creator,1==confirm("Are you sure you want to approve "+news.title+"?")&&newsFactory.postData({action:4},news).success(function(data,status,headers,config){1==data?$scope.data.news[$scope.data.news.indexOf(news)].status=1:alert("Error: Cannot approve news item! "+data),console.log(data)}).error(function(data,status,headers,config){alert("Error: Could not approve news item! "+data),console.log(data)})},$scope.deleteNews=function(news){1==confirm("Delete "+news.title+" permanently?")&&newsFactory.postData({action:1},news).success(function(data,status,headers,config){1==data?($scope.data.news.splice($scope.data.news.indexOf(news),1),$scope.formResponse="News item has been deleted."):$scope.formResponse="Error: Cannot delete news item! "+data,console.log(data)}).error(function(data,status,headers,config){$scope.formResponse="Error: Could not delete news item! "+data,console.log(data)})},$scope.updateNews=function(news){if($scope.data.news[$scope.data.news.indexOf(news)].formResponse=$scope.validateNews(news),$scope.data.news[$scope.data.news.indexOf(news)].formResponse.length>0)return!1;if($scope.uploading=!0,news.title=news.title.replace(/\//g,""),news.type<1&&(news.activeFrom=null,news.activeUntil=null),null!==news.activeFrom?news.tsFrom=news.activeFrom.valueOf()/1e3:news.tsFrom=null,null!==news.activeUntil?news.tsUntil=news.activeUntil.valueOf()/1e3:news.tsUntil=null,news.selectedFiles.length<1)newsFactory.postData({action:21},news).success(function(data,status,headers,config){$scope.data.news[$scope.data.news.indexOf(news)].formResponse="object"==typeof data&&null!==data?"News has been updated.":"Error: Can not update news! "+data,console.log(data),$scope.uploading=!1}).error(function(data,status,headers,config){$scope.data.news[$scope.data.news.indexOf(news)].formResponse="Error: Could not update news! "+data,console.log(data),$scope.uploading=!1});else{for(var names=[],i=0;i<news.selectedFiles.length;i++)names.push(news.selectedFiles[i].name);news.selectedFiles.upload=Upload.upload({url:appURL+"processData.php?action=2",method:"POST",fields:{news:news},file:news.selectedFiles,fileFormDataName:names}),news.selectedFiles.upload.then(function(response){$timeout(function(){"object"==typeof response.data&&null!==response.data?($scope.data.news[$scope.data.news.indexOf(news)].images=[],$scope.data.news[$scope.data.news.indexOf(news)].images=angular.copy(response.data.images),news.selectedFiles.length=0,news.picFile.length=0,$scope.data.news[$scope.data.news.indexOf(news)].formResponse="News has been updated, images have been uploaded."):$scope.data.news[$scope.data.news.indexOf(news)].formResponse="Error: Can not update news! "+response.data,console.log(response.data),$scope.uploading=!1})},function(response){response.status>0&&($scope.data.news[$scope.data.news.indexOf(news)].formResponse=response.status+": "+response.data),$scope.uploading=!1}),news.selectedFiles.upload.progress(function(evt){news.selectedFiles.progress=Math.min(100,parseInt(100*evt.loaded/evt.total))})}},$scope.createNews=function(){if($scope.newNews.formResponse=$scope.validateNews($scope.newNews),$scope.newNews.formResponse.length>0)return!1;if($scope.uploading=!0,$scope.newNews.title=$scope.newNews.title.replace(/\//g,""),$scope.newNews.type<1&&($scope.newNews.activeFrom=null,$scope.newNews.activeUntil=null),null!==$scope.newNews.activeFrom?$scope.newNews.tsFrom=$scope.newNews.activeFrom.valueOf()/1e3:$scope.newNews.tsFrom=null,null!==$scope.newNews.activeUntil?$scope.newNews.tsUntil=$scope.newNews.activeUntil.valueOf()/1e3:$scope.newNews.tsUntil=null,$scope.newNews.selectedFiles.length<1)newsFactory.postData({action:31},$scope.newNews).success(function(data,status,headers,config){if("object"==typeof data&&null!==data){var newNews={};newNews.nid=data.id,newNews.images=angular.copy(data.images),newNews.altText=$scope.newNews.altText,newNews.title=$scope.newNews.title,newNews.description=$scope.newNews.description,$scope.newNews.activeFrom>0?newNews.activeFrom=new Date(1e3*$scope.newNews.activeFrom):newNews.activeFrom=null,$scope.newNews.activeUntil>0?newNews.activeUntil=new Date(1e3*$scope.newNews.activeUntil):newNews.activeUntil=null,newNews.contactName=$scope.newNews.contactName,newNews.contactEmail=$scope.newNews.contactEmail,newNews.contactPhone=$scope.newNews.contactPhone,newNews.sticky=$scope.newNews.sticky;for(var j=0;j<$scope.data.people.length;j++)if($scope.newNews.contactID.uid===$scope.data.people[j].uid){newNews.contactID=$scope.data.people[j];break}newNews.show=!1,newNews.class="",newNews.status=0,newNews.type=$scope.newNews.type,newNews.selectedFiles=[],$scope.data.news.push(newNews),$scope.newNews.formResponse="News has been added."}else $scope.newNews.formResponse="Error: Cannot add news 2! "+data;console.dir(data),$scope.uploading=!1}).error(function(data,status,headers,config){$scope.data.news[$scope.data.news.indexOf(news)].formResponse="Error: Could not add news 2! "+data,console.log(data),$scope.uploading=!1});else{for(var names=[],i=0;i<$scope.newNews.selectedFiles.length;i++)names.push($scope.newNews.selectedFiles[i].name);$scope.newNews.selectedFiles.upload=Upload.upload({url:appURL+"processData.php?action=3",method:"POST",fields:{news:$scope.newNews},file:$scope.newNews.selectedFiles,fileFormDataName:names}),$scope.newNews.selectedFiles.upload.then(function(response){$timeout(function(){if("object"==typeof response.data&&null!==response.data){var newNews={};newNews.nid=response.data.id,newNews.images=angular.copy(response.data.images),newNews.altText=$scope.newNews.altText,newNews.title=$scope.newNews.title,newNews.description=$scope.newNews.description,$scope.newNews.activeFrom>0?newNews.activeFrom=new Date(1e3*$scope.newNews.activeFrom):newNews.activeFrom=null,$scope.newNews.activeUntil>0?newNews.activeUntil=new Date(1e3*$scope.newNews.activeUntil):newNews.activeUntil=null,newNews.contactName=$scope.newNews.contactName,newNews.contactEmail=$scope.newNews.contactEmail,newNews.contactPhone=$scope.newNews.contactPhone,newNews.sticky=$scope.newNews.sticky;for(var j=0;j<$scope.data.people.length;j++)if($scope.newNews.contactID.uid===$scope.data.people[j].uid){newNews.contactID=$scope.data.people[j];break}newNews.show=!1,newNews.class="",newNews.status=0,newNews.type=$scope.newNews.type,newNews.selectedFiles=[],$scope.data.news.push(newNews),$scope.newNews.formResponse="News has been added."}else $scope.newNews.formResponse="Error: Can not add news! "+response.data;console.dir(response.data),$scope.uploading=!1})},function(response){
response.status>0&&($scope.newNews.formResponse=response.status+": "+response.data),$scope.uploading=!1}),$scope.newNews.selectedFiles.upload.progress(function(evt){$scope.newNews.selectedFiles.progress=Math.min(100,parseInt(100*evt.loaded/evt.total))})}}}]).directive("manageNewsList",[function(){return{restrict:"A",controller:"manageNewsListCtrl",link:function(scope,elm,attrs){},templateUrl:"manageNews/manageNewsList.tpl.html"}}]).controller("NewsItemFieldsCtrl",["$scope","$timeout","Upload",function($scope,$timeout,Upload){$scope.dpFormat="MM/dd/yyyy",$scope.tinymceOptions={inline:!1,plugins:"link spellchecker code",toolbar:"undo redo | bold italic | link | code",menubar:!1,skin:"lightgray",theme:"modern"},$scope.generateThumb=function(files,news){if(files.length>0&&null!==files)for(var i=0;i<files.length;i++)news.nid>0?$scope.data.news[$scope.data.news.indexOf(news)].selectedFiles.push(files[i]):$scope.news.selectedFiles.push(files[i]),$scope.fileReaderSupported&&files[i].type.indexOf("image")>-1&&$timeout(function(){var fileReader=new FileReader;fileReader.readAsDataURL(files[i]),fileReader.onload=function(e){$timeout(function(){files[i].dataUrl=e.target.result})}})},$scope.showDatePicker=function(news,isFrom){news.nid>0?!0===isFrom?(null==$scope.data.news[$scope.data.news.indexOf(news)].activeFrom&&($scope.data.news[$scope.data.news.indexOf(news)].activeFrom=new Date,$scope.data.news[$scope.data.news.indexOf(news)].activeFrom.setHours(0,0,0,0)),$scope.data.news[$scope.data.news.indexOf(news)].dpFrom=!0):(null==$scope.data.news[$scope.data.news.indexOf(news)].activeUntil&&($scope.data.news[$scope.data.news.indexOf(news)].activeUntil=new Date,$scope.data.news[$scope.data.news.indexOf(news)].activeUntil.setHours(0,0,0,0)),$scope.data.news[$scope.data.news.indexOf(news)].dpUntil=!0):!0===isFrom?$scope.news.dpFrom=!0:$scope.news.dpUntil=!0}}]).directive("newsItemFieldsList",["$timeout",function($timeout){return{restrict:"AC",scope:{news:"=newsdata",data:"=list"},controller:"NewsItemFieldsCtrl",link:function(scope,elm,attrs){scope.onNewsDPFocus=function($event,news,isFrom){$timeout(function(){scope.showDatePicker(news,isFrom),scope.$apply()},0)}},templateUrl:"manageNews/manageNewsItemFields.tpl.html"}}]).controller("manageAdminsListCtrl",["$scope","newsFactory",function($scope,newsFactory){}]).directive("manageAdminsList",[function(){return{restrict:"A",controller:"manageAdminsListCtrl",link:function(scope,elm,attrs){},templateUrl:"manageNews/manageNewsAdmins.tpl.html"}}]),angular.module("manage.manageOneSearch",[]).constant("ONESEARCH_GROUP",4).config(["$routeProvider",function($routeProvider){$routeProvider.when("/manage-onesearch",{controller:"mainOneSearchCtrl",templateUrl:"manageOneSearch/mainOneSearch.tpl.html",resolve:{userData:function(tokenReceiver){return tokenReceiver.getPromise()}}})}]).controller("mainOneSearchCtrl",["$scope","userData","ONESEARCH_GROUP","AuthService",function($scope,userData,ONESEARCH_GROUP,AuthService){$scope.userInfo=AuthService.isAuthorized(),$scope.hasAccess=!1,angular.isDefined($scope.userInfo.group)&&(parseInt($scope.userInfo.group)&ONESEARCH_GROUP)===ONESEARCH_GROUP&&($scope.hasAccess=!0),$scope.tabs=[{name:"Recommended Links",number:0,active:!0},{name:"Search Statistics",number:1,active:!1}]}]).controller("manageOneSearchCtrl",["$scope","osFactory",function($scope,osFactory){$scope.recList=[],$scope.addRec={},$scope.addRec.keyword="",$scope.addRec.link="",$scope.addRec.description="",$scope.response="",$scope.filterKeyword="",$scope.filterLink="",$scope.filterLinkTitle="",$scope.expanded=-1,$scope.sortModes=[{by:"keyword",reverse:!1},{by:"description",reverse:!1},{by:"link",reverse:!1}],osFactory.getData("reclist").success(function(data){$scope.recList=data}).error(function(data,status,headers,config){console.log(data)}),$scope.expand=function(rec){$scope.expanded=rec.id},$scope.sortBy=function(by){$scope.sortMode===by?$scope.sortModes[by].reverse=!$scope.sortModes[by].reverse:$scope.sortMode=by},$scope.addRecommendation=function(){$scope.addRec.keyword.length>0&&$scope.addRec.link.length>0&&$scope.addRec.description.length>0?osFactory.postData({action:1},$scope.addRec).success(function(data,status,headers,config){if(console.dir(data),"object"==typeof data&&null!==data){var newRec={};newRec.id=data.rid,newRec.linkid=data.lid,newRec.keyword=$scope.addRec.keyword,newRec.link=$scope.addRec.link,newRec.description=$scope.addRec.description,$scope.recList.RecList.push(newRec),$scope.response=data.text}else $scope.response=data}).error(function(data,status,headers,config){$scope.response="Error: Could not add recommendation link! "+data}):alert("Please fill out all required fields!")},$scope.deleteRec=function(rec,index){confirm("Are you sure you want to delete "+rec.description+" link?")&&osFactory.postData({action:2},rec).success(function(data,status,headers,config){$scope.response=data,$scope.recList.RecList.splice(index,1),$scope.expanded=-1}).error(function(data,status,headers,config){$scope.response="Error: Could not delete recommendation! "+data})},$scope.updateRec=function(rec){osFactory.postData({action:3},rec).success(function(data,status,headers,config){$scope.response=data,$scope.expanded=-1}).error(function(data,status,headers,config){$scope.response="Error: Could not update recommendation! "+data})}}]).directive("recommendedLinksList",[function(){return{restrict:"AC",controller:"manageOneSearchCtrl",templateUrl:"manageOneSearch/manageOneSearch.tpl.html"}}]).controller("oneSearchStatCtrl",["$scope","osFactory",function($scope,osFactory){$scope.statList=[],osFactory.getData("statistics").success(function(data){$scope.statList=data}).error(function(data,status,headers,config){console.log(data)})}]).directive("searchStatisticsList",[function(){return{restrict:"AC",controller:"oneSearchStatCtrl",templateUrl:"manageOneSearch/oneSearchStat.tpl.html"}}]),angular.module("manage.manageSoftware",["ngFileUpload"]).constant("OS",[{name:"MS Windows",value:1},{name:"Apple Mac",value:2}]).constant("SOFTWARE_GROUP",64).config(["$routeProvider",function($routeProvider){$routeProvider.when("/manage-software",{controller:"manageSWCtrl",templateUrl:"manageSoftware/manageSoftware.tpl.html",resolve:{userData:function(tokenReceiver){return tokenReceiver.getPromise()}}})}]).controller("manageSWCtrl",["$scope","swFactory","OS","userData","SOFTWARE_GROUP","AuthService",function($scope,swFactory,OS,userData,SOFTWARE_GROUP,AuthService){$scope.userInfo=AuthService.isAuthorized(),$scope.SWList={},$scope.newSW={},$scope.newComp={},$scope.hasAccess=!1,angular.isDefined($scope.userInfo.group)&&(parseInt($scope.userInfo.group)&SOFTWARE_GROUP)===SOFTWARE_GROUP&&($scope.hasAccess=!0),swFactory.getData("all/backend").success(function(data){console.dir(data);for(var i=0;i<data.software.length;i++){data.software[i].show=!1,data.software[i].class="",data.software[i].selCat=data.categories[0],data.software[i].newVer={},data.software[i].newVer.version="",data.software[i].newVer.selOS=OS[0];for(var j=0;j<data.software[i].versions.length;j++){data.software[i].versions[j].newLoc={},data.software[i].versions[j].newLoc.selLoc=data.locations[0],data.software[i].versions[j].newLoc.devices=[];for(var k=0;k<data.devices.length;k++)data.software[i].versions[j].newLoc.devices[k]=!1}for(var j=0;j<data.licenseModes.length;j++)data.licenseModes[j].lmid===data.software[i].lmid&&(data.software[i].selMode=data.licenseModes[j]);data.software[i].newLink={},data.software[i].newLink.description="",data.software[i].newLink.title="",data.software[i].newLink.url=""}$scope.newSW.selCat=data.categories[0],$scope.newSW.selMode=data.licenseModes[0],$scope.selMap=data.maps[3],$scope.newComp.selLoc=data.locations[0],$scope.SWList=data}).error(function(data,status,headers,config){console.log(data)}),$scope.tabs=[{name:"Software List",number:0,active:!0},{name:"Locations and Categories",number:1,active:!1},{name:"Computer Maps",number:2,active:!1}]}]).controller("manageSWListCtrl",["$scope","$timeout","Upload","swFactory","SOFTWARE_URL","OS",function($scope,$timeout,Upload,swFactory,appURL,OS){this.swFactory=swFactory,$scope.titleFilter="",$scope.descrFilter="",$scope.sortMode=0,$scope.sortModes=[{by:"title",reverse:!1},{by:"status",reverse:!1}],$scope.sortButton=$scope.sortMode,$scope.appURL=appURL,$scope.newSW.versions=[],$scope.newSW.links=[],$scope.newSW.categories=[],$scope.newSW.newVer={},$scope.newSW.newVer.selOS=OS[0],$scope.newSW.newVer.version="",$scope.newSW.newLink={},$scope.newSW.newLink.description="",$scope.newSW.newLink.title="",$scope.newSW.newLink.url="",$scope.newSW.modules="",$scope.newSW.trf=0,$scope.newSW.po=0,$scope.newSW.num_licenses=0,$scope.newSW.trf_notes="",$scope.newSW.purch_date="2015-1-1",$scope.newSW.vendor_name="",$scope.newSW.vendor_contact="",$scope.newSW.vendor_phone="",$scope.newSW.vendor_email="",$scope.newSW.main_effect="2015-1-1",$scope.newSW.main_exp="2015-1-1",$scope.newSW.pkey="",$scope.newSW.devices="",$scope.newSW.owner={},$scope.newSW.owner.department="",$scope.newSW.owner.name="",$scope.newSW.owner.email="",$scope.newSW.owner.phone="",$scope.newSW.partners=[],$scope.newSW.partners[0]={},$scope.newSW.partners[0].department="",$scope.newSW.partners[0].name="",$scope.newSW.partners[0].email="",$scope.newSW.partners[0].phone="",$scope.newSW.requester={},$scope.newSW.requester.department="",$scope.newSW.requester.name="",$scope.newSW.requester.email="",$scope.newSW.requester.phone="",$scope.currentPage=1,$scope.maxPageSize=10,$scope.perPage=20,$scope.startTitle=function(actual,expected){return!expected||0==actual.toLowerCase().indexOf(expected.toLowerCase())},$scope.toggleSW=function(sw){$scope.SWList.software[$scope.SWList.software.indexOf(sw)].show=!$scope.SWList.software[$scope.SWList.software.indexOf(sw)].show},$scope.sortBy=function(by){$scope.sortMode===by?$scope.sortModes[by].reverse=!$scope.sortModes[by].reverse:$scope.sortMode=by},$scope.publishSW=function(sw){swFactory.postData({action:10},sw).success(function(data,status,headers,config){1==data?($scope.SWList.software[$scope.SWList.software.indexOf(sw)].status=1,$scope.formResponse="Software has been published."):$scope.formResponse="Error: Can not publish software! "+data,console.log(data)}).error(function(data,status,headers,config){$scope.formResponse="Error: Could not publish software! "+data,console.log(data)})},$scope.unpublishSW=function(sw){swFactory.postData({action:11},sw).success(function(data,status,headers,config){1==data?($scope.SWList.software[$scope.SWList.software.indexOf(sw)].status=0,$scope.formResponse="Software has been unpublished."):$scope.formResponse="Error: Can not publish software! "+data,console.log(data)}).error(function(data,status,headers,config){$scope.formResponse="Error: Could not publish software! "+data,console.log(data)})},$scope.deleteSW=function(sw){1==confirm("Delete "+sw.title+" permanently?")&&swFactory.postData({action:1},sw).success(function(data,status,headers,config){1==data?($scope.SWList.software.splice($scope.SWList.software.indexOf(sw),1),$scope.formResponse="Software has been deleted."):$scope.formResponse="Error: Can not delete software! "+data,console.log(data)}).error(function(data,status,headers,config){$scope.formResponse="Error: Could not delete software! "+data,console.log(data)})},$scope.updateSW=function(sw){if($scope.SWList.software[$scope.SWList.software.indexOf(sw)].formResponse=$scope.validateSW(sw),$scope.SWList.software[$scope.SWList.software.indexOf(sw)].formResponse.length>0)return!1;console.dir(sw),void 0===sw.picFile?swFactory.postData({action:21},sw).success(function(data,status,headers,config){$scope.SWList.software[$scope.SWList.software.indexOf(sw)].formResponse="object"==typeof data&&null!==data?"Software has been updated, Icon has not changed.":"Error: Can not update software! "+data,console.log(data)}).error(function(data,status,headers,config){$scope.SWList.software[$scope.SWList.software.indexOf(sw)].formResponse="Error: Could not delete software! "+data,console.log(data)}):(sw.picFile.upload=Upload.upload({url:appURL+"processData.php?action=2",method:"POST",fields:{sw:sw},file:sw.picFile,fileFormDataName:"editSW"+sw.sid}),sw.picFile.upload.then(function(response){$timeout(function(){"object"==typeof response.data&&null!==response.data?($scope.SWList.software[$scope.SWList.software.indexOf(sw)].formResponse="Software has been updated, ",response.data.iconUploaded?$scope.SWList.software[$scope.SWList.software.indexOf(sw)].formResponse+="Icon uploaded.":$scope.SWList.software[$scope.SWList.software.indexOf(sw)].formResponse+="Icon has not changed."):$scope.SWList.software[$scope.SWList.software.indexOf(sw)].formResponse="Error: Can not update software! "+response.data,console.log(response.data)})},function(response){response.status>0&&($scope.SWList.software[$scope.SWList.software.indexOf(sw)].formResponse=response.status+": "+response.data)}),sw.picFile.upload.progress(function(evt){sw.picFile.progress=Math.min(100,parseInt(100*evt.loaded/evt.total))}))},$scope.createSW=function(){return void 0===$scope.newSW.picFile?($scope.newSW.formResponse="Please select icon file (.png)!",!1):($scope.newSW.formResponse=$scope.validateSW($scope.newSW),!($scope.newSW.formResponse.length>0)&&($scope.newSW.picFile.upload=Upload.upload({url:appURL+"processData.php?action=3",method:"POST",fields:{sw:$scope.newSW},file:$scope.newSW.picFile,fileFormDataName:"addNewSW"}),$scope.newSW.picFile.upload.then(function(response){$timeout(function(){if("object"==typeof response.data&&null!==response.data){var newSW={};newSW.sid=response.data.id,newSW.title=$scope.newSW.title,newSW.description=$scope.newSW.description,newSW.modules=$scope.newSW.modules,newSW.versions=angular.copy(response.data.versions),newSW.links=angular.copy(response.data.links),newSW.categories=angular.copy(response.data.categories),newSW.status=0,newSW.icon=response.data.icon,newSW.show=!1,newSW.class="";for(var i=0;i<newSW.versions.length;i++){newSW.versions[i].newLoc={},newSW.versions[i].newLoc.selLoc=$scope.SWList.locations[0],newSW.versions[i].newLoc.devices=[];for(var j=0;j<$scope.SWList.devices.length;j++)newSW.versions[i].newLoc.devices[j]=!1}newSW.selCat=response.data.categories[0],newSW.newVer={},newSW.newVer.selOS=OS[0],newSW.newVer.version="",newSW.newLink={},newSW.newLink.description="",newSW.newLink.title="",newSW.newLink.url="",newSW.trf=$scope.newSW.trf,newSW.po=$scope.newSW.po,newSW.num_licenses=$scope.newSW.num_licenses,newSW.trf_notes=$scope.newSW.trf_notes,newSW.purch_date=$scope.newSW.purch_date,newSW.vendor_name=$scope.newSW.vendor_name,newSW.vendor_contact=$scope.newSW.vendor_contact,newSW.vendor_phone=$scope.newSW.vendor_phone,newSW.vendor_email=$scope.newSW.vendor_email,newSW.main_effect=$scope.newSW.main_effect,newSW.main_exp=$scope.newSW.main_exp,newSW.pkey=$scope.newSW.pkey,newSW.devices=$scope.newSW.devices,$scope.SWList.software.push(newSW),$scope.newSW.formResponse="Software has been added."}else $scope.newSW.formResponse="Error: Can not add software! "+response.data;console.dir(response.data)})},function(response){response.status>0&&($scope.newSW.formResponse=response.status+": "+response.data)}),void $scope.newSW.picFile.upload.progress(function(evt){$scope.newSW.picFile.progress=Math.min(100,parseInt(100*evt.loaded/evt.total))})))},$scope.copySW=function(sw){$scope.newSW=angular.copy(sw),$scope.newSW.selCat=$scope.SWList.categories[0],$scope.newSW.newVer={},$scope.newSW.newVer.version="",$scope.newSW.newVer.selOS=OS[0];for(var j=0;j<$scope.newSW.versions.length;j++){$scope.newSW.versions[j].newLoc={},$scope.newSW.versions[j].newLoc.selLoc=$scope.SWList.locations[0],$scope.newSW.versions[j].newLoc.devices=[];for(var k=0;k<$scope.SWList.devices.length;k++)$scope.newSW.versions[j].newLoc.devices[k]=!1}for(var j=0;j<$scope.SWList.licenseModes.length;j++)$scope.SWList.licenseModes[j].lmid===$scope.newSW.lmid&&($scope.newSW.selMode=$scope.SWList.licenseModes[j])},$scope.validateSW=function(sw){return sw.title.length<1?"Form error: Please fill out Title!":sw.description.length<1?"Form error: Please fill out Description!":sw.versions.length<1?"Form error: Please add a version!":sw.categories.length<1?"Form error: Please add a category!":""}}]).directive("softwareManageList",["$timeout",function($timeout){return{restrict:"A",controller:"manageSWListCtrl",link:function(scope,elm,attrs,Ctrl){scope.export=function(){$timeout(function(){Ctrl.swFactory.getData("export").success(function(data){var blob=new Blob([JSON.stringify(data)],{type:"application/json"});scope.exportUrl=(window.URL||window.webkitURL).createObjectURL(blob);var downloadLink=angular.element("<a></a>");downloadLink.attr("href",scope.exportUrl),downloadLink.attr("target","_self"),downloadLink.attr("download","softwareData.json"),elm.append(downloadLink),downloadLink[0].click(),scope.$apply()}).error(function(data,status,headers,config){console.log(data)})},0)}},templateUrl:"manageSoftware/manageSoftwareList.tpl.html"}}]).controller("SWItemFieldsCtrl",["$scope","$timeout","Upload","OS",function($scope,$timeout,Upload,OS){$scope.os=OS,$scope.generateThumb=function(sw,files){files.length>0&&null!==files&&files[0].type.indexOf("image")>-1&&(sw.sid>0?($scope.data.software[$scope.data.software.indexOf(sw)].picFile=[],$scope.data.software[$scope.data.software.indexOf(sw)].picFile.push(files[0])):($scope.sw.picFile=[],$scope.sw.picFile.push(files[0])),console.dir(sw),$timeout(function(){var fileReader=new FileReader;fileReader.readAsDataURL(files[0]),fileReader.onload=function(e){$timeout(function(){files[0].dataUrl=e.target.result})}}))},$scope.checkDevices=function(device,number){return device=parseInt(device),number=parseInt(number),(device&number)===number},$scope.addVersionBoth=function(sw){if(sw.newVer.version.length>0){for(var isPresent=!1,i=0;i<sw.versions.length;i++)if(sw.versions[i].version===sw.newVer.version&&sw.versions[i].os===sw.newVer.os){isPresent=!0;break}if(!isPresent){var newVer={};newVer.version=sw.newVer.version,newVer.os=sw.newVer.selOS.value,newVer.locations=[],newVer.newLoc={},newVer.newLoc.selLoc=$scope.data.locations[0],newVer.newLoc.devices=[];for(var j=0;j<$scope.data.devices.length;j++)newVer.newLoc.devices[j]=!1;sw.sid>0?(newVer.vid=-1,newVer.sid=sw.sid,$scope.data.software[$scope.data.software.indexOf(sw)].versions.push(newVer)):$scope.sw.versions.push(newVer)}}},$scope.deleteVersionBoth=function(sw,version){sw.sid>0?$scope.data.software[$scope.data.software.indexOf(sw)].versions.splice($scope.data.software[$scope.data.software.indexOf(sw)].versions.indexOf(version),1):$scope.sw.versions.splice($scope.sw.versions.indexOf(version),1)},$scope.addLocationBoth=function(sw,version){for(var isPresent=!1,i=0;i<version.locations.length;i++)if(version.locations[i].lid===version.newLoc.selLoc.lid){isPresent=!0;break}if(!isPresent){var newLoc={};newLoc.lid=version.newLoc.selLoc.lid,newLoc.name=version.newLoc.selLoc.name,newLoc.parent=version.newLoc.selLoc.parent,newLoc.devices=0;for(var i=0;i<$scope.data.devices.length;i++)version.newLoc.devices[i]&&(newLoc.devices+=parseInt($scope.data.devices[i].did));newLoc.devices>0?sw.sid>0?(newLoc.id=-1,newLoc.sid=sw.sid,newLoc.vid=version.vid,$scope.data.software[$scope.data.software.indexOf(sw)].versions[$scope.data.software[$scope.data.software.indexOf(sw)].versions.indexOf(version)].locations.push(newLoc)):$scope.sw.versions[$scope.sw.versions.indexOf(version)].locations.push(newLoc):alert("Please select at least one device type!")}},$scope.deleteLocationBoth=function(sw,version,location){sw.sid>0?$scope.data.software[$scope.data.software.indexOf(sw)].versions[$scope.data.software[$scope.data.software.indexOf(sw)].versions.indexOf(version)].locations.splice($scope.data.software[$scope.data.software.indexOf(sw)].versions[$scope.data.software[$scope.data.software.indexOf(sw)].versions.indexOf(version)].locations.indexOf(location),1):$scope.sw.versions[$scope.sw.versions.indexOf(version)].locations.splice($scope.sw.versions[$scope.sw.versions.indexOf(version)].locations.indexOf(location),1)},$scope.addCategoryBoth=function(sw){for(var isPresent=!1,i=0;i<sw.categories.length;i++)if(sw.categories[i].cid===sw.selCat.cid){isPresent=!0;break}if(!isPresent){var newCat={};newCat.cid=sw.selCat.cid,newCat.name=sw.selCat.name,sw.sid>0?(newCat.id=-1,$scope.data.software[$scope.data.software.indexOf(sw)].categories.push(newCat)):$scope.sw.categories.push(newCat)}},$scope.deleteCategoryBoth=function(sw,category){sw.sid>0?$scope.data.software[$scope.data.software.indexOf(sw)].categories.splice($scope.data.software[$scope.data.software.indexOf(sw)].categories.indexOf(category),1):$scope.sw.categories.splice($scope.sw.categories.indexOf(category),1)},$scope.addLinkBoth=function(sw){if(sw.newLink.title.length>0&&sw.newLink.url.length>1){for(var isPresent=!1,i=0;i<sw.links.length;i++)if(sw.links[i].title===sw.newLink.title&&sw.links[i].url===sw.newLink.url){isPresent=!0;break}if(!isPresent){var newLink={};newLink.description=sw.newLink.description,newLink.title=sw.newLink.title,newLink.url=sw.newLink.url,sw.sid>0?(newLink.linkid=-1,newLink.sid=sw.sid,$scope.data.software[$scope.data.software.indexOf(sw)].links.push(newLink)):$scope.sw.links.push(newLink)}}},$scope.deleteLinkBoth=function(sw,link){sw.sid>0?$scope.data.software[$scope.data.software.indexOf(sw)].links.splice($scope.data.software[$scope.data.software.indexOf(sw)].links.indexOf(link),1):$scope.sw.links.splice($scope.sw.links.indexOf(link),1)},$scope.addPartnerBoth=function(sw){var partner={};partner.department="",partner.name="",partner.email="",partner.phone="",sw.sid>0?$scope.data.software[$scope.data.software.indexOf(sw)].partners.push(partner):$scope.sw.partners.push(partner)},$scope.deletePartnerBoth=function(sw,partner){sw.sid>0?$scope.data.software[$scope.data.software.indexOf(sw)].partners.splice($scope.data.software[$scope.data.software.indexOf(sw)].partners.indexOf(partner),1):$scope.sw.partners.splice($scope.sw.partners.indexOf(partner),1)}}]).directive("softwareItemFieldsList",["$timeout","Upload",function($timeout,Upload){return{restrict:"AC",scope:{sw:"=swdata",data:"=list"},controller:"SWItemFieldsCtrl",link:function(scope,elm,attrs){scope.addVersion=function(sw){$timeout(function(){scope.addVersionBoth(sw),scope.$apply()},0)},scope.deleteVersion=function(sw,version){$timeout(function(){scope.deleteVersionBoth(sw,version),scope.$apply()},0)},scope.addLocation=function(sw,version){$timeout(function(){scope.addLocationBoth(sw,version),scope.$apply()},0)},scope.deleteLocation=function(sw,version,location){$timeout(function(){scope.deleteLocationBoth(sw,version,location),scope.$apply()},0)},scope.addCategory=function(sw){$timeout(function(){scope.addCategoryBoth(sw),scope.$apply()},0)},scope.deleteCategory=function(sw,category){$timeout(function(){scope.deleteCategoryBoth(sw,category),scope.$apply()},0)},scope.addLink=function(sw){$timeout(function(){scope.addLinkBoth(sw),scope.$apply()},0)},scope.deleteLink=function(sw,link){$timeout(function(){scope.deleteLinkBoth(sw,link),scope.$apply()},0)},scope.addPartner=function(sw){$timeout(function(){scope.addPartnerBoth(sw),scope.$apply()},0)},scope.deletePartner=function(sw,partner){$timeout(function(){scope.deletePartnerBoth(sw,partner),scope.$apply()},0)}},templateUrl:"manageSoftware/manageSoftwareItemFields.tpl.html"}}]).controller("manageSWLocCatCtrl",["$scope","$timeout","swFactory","OS",function($scope,$timeout,swFactory,OS){$scope.selLocation=-1,$scope.selCategory=-1,$scope.newLocation={},$scope.newLocation.name="",$scope.newLocation.parent=0,$scope.newCategory="",$scope.locResponse="",$scope.catResponse="",$scope.os=OS,$scope.selectLocation=function(location){$scope.selLocation=location.lid},$scope.selectCategory=function(category){$scope.selCategory=category.cid},$scope.addLocation=function(){swFactory.postData({action:4},$scope.newLocation).success(function(data,status,headers,config){if("object"==typeof data&&null!==data){var newLoc={};if(newLoc.lid=data.id,newLoc.name=$scope.newLocation.name,newLoc.parent=0,newLoc.fullName=newLoc.name,$scope.newLocation.parent>0)for(var i=0;i<$scope.SWList.locations.length;i++)if($scope.SWList.locations[i].lid===$scope.newLocation.parent){newLoc.parent=$scope.newLocation.parent,newLoc.fullName=$scope.SWList.locations[i].name+": "+newLoc.name;break}$scope.SWList.locations.push(newLoc),$scope.locResponse="Location has been added!"}else $scope.locResponse="Error: Can not add location! "+data;console.log(data)}).error(function(data,status,headers,config){$scope.locResponse="Error: Could not add location! "+data,console.log(data)})},$scope.deleteLocation=function(location){1==confirm("Delete "+location.name+" permanently?")&&swFactory.postData({action:5},location).success(function(data,status,headers,config){1==data?($scope.SWList.locations.splice($scope.SWList.locations.indexOf(location),1),$scope.locResponse="Location has been deleted!"):$scope.locResponse="Error: Can not delete location! "+data,console.log(data)}).error(function(data,status,headers,config){$scope.locResponse="Error: Could not delete location! "+data,console.log(data)})},$scope.editLocation=function(location){swFactory.postData({action:6},location).success(function(data,status,headers,config){$scope.locResponse=1==data?"Location name has been updated!":"Error: Can not update location! "+data,console.log(data)}).error(function(data,status,headers,config){$scope.locResponse="Error: Could not update location! "+data,console.log(data)})},$scope.addCategory=function(){swFactory.postData({action:7},{name:$scope.newCategory}).success(function(data,status,headers,config){if("object"==typeof data&&null!==data){var newCat={};newCat.cid=data.id,newCat.name=$scope.newCategory,$scope.SWList.categories.push(newCat),$scope.catResponse="Category has been added!"}else $scope.catResponse="Error: Can not add category! "+data;console.log(data)}).error(function(data,status,headers,config){$scope.catResponse="Error: Could not add category! "+data,console.log(data)})},$scope.deleteCategory=function(category){1==confirm("Delete "+category.name+" permanently?")&&swFactory.postData({action:8},category).success(function(data,status,headers,config){1==data?($scope.SWList.categories.splice($scope.SWList.categories.indexOf(category),1),$scope.catResponse="Category has been deleted!"):$scope.catResponse="Error: Can not delete category! "+data,console.log(data)}).error(function(data,status,headers,config){$scope.catResponse="Error: Could not delete category! "+data,console.log(data)})},$scope.editCategory=function(category){swFactory.postData({action:9},category).success(function(data,status,headers,config){$scope.catResponse=1==data?"Category name has been updated!":"Error: Can not update category! "+data,console.log(data)}).error(function(data,status,headers,config){$scope.catResponse="Error: Could not update category! "+data,console.log(data)})}}]).directive("softwareManageLocCat",[function(){return{restrict:"A",controller:"manageSWLocCatCtrl",link:function(scope,elm,attrs){},templateUrl:"manageSoftware/manageSoftwareLocCat.tpl.html"}}]).controller("manageSWCompMapsCtrl",["$scope","$window","swFactory","OS",function($scope,$window,swFactory,OS){function getOffset(elm){var rect=elm.getBoundingClientRect(),doc=elm.ownerDocument,docElem=doc.documentElement;return{top:rect.top+$window.pageYOffset-docElem.clientTop,left:rect.left+$window.pageXOffset-docElem.clientLeft}}$scope.selComp=-1,$scope.selCompX=0,$scope.selCompY=0,$scope.selCompOS={},$scope.selCompLoc={},$scope.high=-1,$scope.newComp.name="",$scope.newComp.selType=OS[0],$scope.showCreate=!1,$scope.compStatus=[{name:"Off",value:0},{name:"On",value:1}],$scope.selCompStatus=$scope.compStatus[0],$scope.os=OS,$scope.highlight=function(comp){$scope.high=comp.compid},$scope.expand=function(index){if($scope.selComp!==index){$scope.selComp=index;var comp=$scope.selMap.computers[index];$scope.selCompX=parseInt(comp.mapX)+15,$scope.selCompY=parseInt(comp.mapY)+15,comp.type==OS[0].value?$scope.selCompOS=OS[0]:$scope.selCompOS=OS[1],1==comp.status?$scope.selCompStatus=$scope.compStatus[1]:$scope.selCompStatus=$scope.compStatus[0];for(var i=0;i<$scope.SWList.locations.length;i++)if($scope.SWList.locations[i].lid==comp.lid){$scope.selCompLoc=$scope.SWList.locations[i];break}$scope.compResponse=""}else $scope.selComp=-1},$scope.updateMap=function(){$scope.selComp=-1,$scope.showCreate=!1},$scope.createComp=function(event){if(2===event.button&&"computer-map"===event.target.id){$scope.newComp.mid=$scope.selMap.mid;var offset=getOffset(event.target);$scope.newComp.mapX=Math.round(event.pageX-offset.left),$scope.newComp.mapY=Math.round(event.pageY-offset.top),$scope.showCreate=!0,$scope.compResponse=""}},$scope.addComp=function(){swFactory.postData({action:12},$scope.newComp).success(function(data,status,headers,config){if("object"==typeof data&&null!==data){var newComputer={};newComputer.compid=data.id,newComputer.name=$scope.newComp.name,newComputer.type=$scope.newComp.selType.value,newComputer.lid=$scope.newComp.selLoc.lid,newComputer.mid=$scope.newComp.mid,newComputer.mapX=$scope.newComp.mapX,newComputer.mapY=$scope.newComp.mapY,newComputer.status=1,$scope.SWList.maps[$scope.SWList.maps.indexOf($scope.selMap)].computers.push(newComputer),$scope.showCreate=!1,$scope.compResponse="Computer has been added!"}else $scope.compResponse="Error: Can not add Computer! "+data;console.log(data)}).error(function(data,status,headers,config){$scope.compResponse="Error: Could not add Computer! "+data,console.log(data)})},$scope.deleteComp=function(){1==confirm("Delete "+$scope.selMap.computers[$scope.selComp].name+" permanently?")&&swFactory.postData({action:13},$scope.selMap.computers[$scope.selComp]).success(function(data,status,headers,config){1==data?($scope.SWList.maps[$scope.SWList.maps.indexOf($scope.selMap)].computers.splice($scope.selComp,1),$scope.selComp=-1,$scope.compResponse="Computer has been deleted!"):$scope.compResponse="Error: Can not delete Computer! "+data,console.log(data)}).error(function(data,status,headers,config){$scope.compResponse="Error: Could not delete Computer! "+data,console.log(data)})},$scope.updateComp=function(){$scope.SWList.maps[$scope.SWList.maps.indexOf($scope.selMap)].computers[$scope.selComp].type=$scope.selCompOS.value,$scope.SWList.maps[$scope.SWList.maps.indexOf($scope.selMap)].computers[$scope.selComp].lid=$scope.selCompLoc.lid,$scope.SWList.maps[$scope.SWList.maps.indexOf($scope.selMap)].computers[$scope.selComp].status=$scope.selCompStatus.value,swFactory.postData({action:14},$scope.SWList.maps[$scope.SWList.maps.indexOf($scope.selMap)].computers[$scope.selComp]).success(function(data,status,headers,config){$scope.compResponse=1==data?"Computer name has been updated!":"Error: Can not update Computer! "+data,console.log(data)}).error(function(data,status,headers,config){$scope.compResponse="Error: Could not update Computer! "+data,console.log(data)})}}]).directive("softwareManageComputerMaps",[function(){return{restrict:"A",controller:"manageSWCompMapsCtrl",link:function(scope,elm,attrs){},templateUrl:"manageSoftware/manageSoftwareComputerMaps.tpl.html"}}]),angular.module("manage.manageUserGroups",[]).constant("USERS_GROUP",1).config(["$routeProvider",function($routeProvider){$routeProvider.when("/manage-user-groups",{controller:"userGroupsCtrl",templateUrl:"manageUserGroups/manageUG.tpl.html",resolve:{userData:function(tokenReceiver){return tokenReceiver.getPromise()}}})}]).controller("userGroupsCtrl",["$scope","wpUsersFactory","ugFactory","userData","USERS_GROUP","AuthService",function($scope,wpUsersFactory,ugFactory,userData,USERS_GROUP,AuthService){$scope.userInfo=AuthService.isAuthorized(),$scope.isLoading=!0,$scope.expUser=-1,$scope.wpUsers=[],$scope.users=[],$scope.apps=[],$scope.newUserAccess=[],$scope.hasAccess=!1,
angular.isDefined($scope.userInfo.group)&&(parseInt($scope.userInfo.group)&USERS_GROUP)===USERS_GROUP&&($scope.hasAccess=!0),wpUsersFactory.getAllUsersWP().success(function(data){for(i=0;i<data.length;i++)nameArray=data[i].name.split(" "),nameArray.length>1&&(data[i].fullName=data[i].name);$scope.wpUsers=data,$scope.newUser=$scope.wpUsers[0],console.log("WP user list received:"),ugFactory.getData().success(function(data2){if(angular.isDefined(data2.users)&&angular.isDefined(data2.apps)){for($scope.users=data2.users,$scope.apps=data2.apps,i=0;i<$scope.apps.length;i++)$scope.newUserAccess[i]=!1;$scope.isLoading=!1,console.log("User groups received.")}else console.dir(data2)}).error(function(data2,status,headers,config){$scope.result="Error! Could not retrieve user data! "+data2,$scope.isLoading=!1,console.dir(data2)})}).error(function(data,status,headers,config){$scope.isLoading=!1,console.dir(data)}),$scope.tabs=[{name:"Users",number:0,active:!0},{name:"Applications",number:1,active:!1}],$scope.sortMode=1,$scope.sortModes=[{by:"wpLogin",reverse:!1},{by:"name",reverse:!1}],$scope.expandUser=function(user){$scope.result="",$scope.expUser=user.id},$scope.isExpUser=function(uID){return $scope.expUser===uID},$scope.sortBy=function(by){$scope.sortMode===by?$scope.sortModes[by].reverse=!$scope.sortModes[by].reverse:$scope.sortMode=by},$scope.updateUser=function(user){$scope.isLoading=!0,ugFactory.postData({action:1},user).success(function(data){$scope.result=1==data?"Saved":"Error! Could not save data! "+data,$scope.isLoading=!1,console.dir(data)}).error(function(data,status,headers,config){$scope.result="Error! Could not save data! "+data,$scope.isLoading=!1,console.dir(data)})},$scope.createUser=function(user){$scope.isLoading=!0,user.access=$scope.newUserAccess,console.dir(user),ugFactory.postData({action:2},user).success(function(data){if("object"==typeof data&&null!==data){$scope.result2="Access granted!";var createdUser={};createdUser.name=user.name,createdUser.wpLogin=user.login,createdUser.id=data.id,createdUser.access=[];for(var i=0;i<user.access.length;i++)user.access[i]?createdUser.access[i]=!0:createdUser.access[i]=!1;$scope.users.push(createdUser),$scope.expandUser(createdUser)}else $scope.result2="Error! Could not grant access! "+data;$scope.isLoading=!1}).error(function(data,status,headers,config){$scope.isLoading=!1,$scope.result2="Error! Could not grant access! "+data})},$scope.deleteUser=function(user,index){confirm("Are you sure you want to remove access for "+user.name+"?")&&($scope.isLoading=!0,ugFactory.postData({action:3},user).success(function(data){1==data?($scope.result="User access deleted!",$scope.users.splice(index,1)):$scope.result="Error! Could not delete user access! "+data,$scope.isLoading=!1}).error(function(data,status,headers,config){$scope.result="Error! Could not delete user access! "+data,$scope.isLoading=!1}))}}]).controller("myWebAppsCtrl",["$scope",function($scope){$scope.appsAccess=!1,angular.isDefined($scope.userInfo.group)&&($scope.appsAccess=!0)}]).directive("viewMyWebApps",[function(){return{restrict:"A",controller:"myWebAppsCtrl",templateUrl:"manageUserGroups/viewMyWebApps.tpl.html"}}]),angular.module("manage.oneSearchErrors",["oc.lazyLoad"]).config(["$routeProvider",function($routeProvider){$routeProvider.when("/onesearch-errors",{controller:"oneSearchErrorsCtrl",templateUrl:"oneSearchErrors/oneSearchErrors.tpl.html",resolve:{lazyLoad:["$ocLazyLoad",function($ocLazyLoad){return $ocLazyLoad.load("https://d3js.org/d3.v3.min.js")}]}})}]).controller("oneSearchErrorsCtrl",["$scope","errorsFactory","lazyLoad",function($scope,errorsFactory,lazyLoad){$scope.dataProcessed=!1,$scope.errors={},$scope.errors.tree={},$scope.errors.list=[],$scope.errors.mapped={},$scope.errors.mapped.today=[],$scope.errors.mapped.month=[],$scope.errors.mapped.year=[],$scope.eEngine={},$scope.eEngine.engine=0,errorsFactory.getData().success(function(data){for(var months=["January","February","March","April","May","June","July","August","September","October","November","December"],today=new Date,tree=[],j=0;j<3;j++){tree[j]={},tree[j].years=[],$scope.errors.mapped.today[j]=[],$scope.errors.mapped.month[j]=[],$scope.errors.mapped.year[j]=[];for(var i=0;i<24;i++)$scope.errors.mapped.today[j].push({x:i,y:0});for(i=0;i<31;i++)$scope.errors.mapped.month[j].push({x:i+1,y:0});for(i=0;i<12;i++)$scope.errors.mapped.year[j].push({x:i,y:0});var curData=[];switch(j){case 0:curData=data.scout;break;case 1:curData=data.catalog;break;case 2:curData=data.ejournals}for(i=0;i<curData.length;i++){curData[i].recorded=curData[i].recorded.replace(/-/g,"/");var dt=new Date(curData[i].recorded),isPresent=!1,y=0,m=0,d=0;for(y=0;y<tree[j].years.length;y++)if(tree[j].years[y].name===dt.getFullYear()){isPresent=!0;break}if(!isPresent){var year={};year.open=!1,year.counter=0,year.name=dt.getFullYear(),year.months=[],tree[j].years.push(year),y=tree[j].years.length-1}for(isPresent=!1,m=0;m<tree[j].years[y].months.length;m++)if(tree[j].years[y].months[m].mm===dt.getMonth()){isPresent=!0;break}if(!isPresent){var month={};month.open=!1,month.counter=0,month.mm=dt.getMonth(),month.name=months[month.mm],month.days=[],tree[j].years[y].months.push(month),m=tree[j].years[y].months.length-1}for(isPresent=!1,d=0;d<tree[j].years[y].months[m].days.length;d++)if(tree[j].years[y].months[m].days[d].day===dt.getDate()){isPresent=!0;break}if(!isPresent){var day={};day.open=!1,day.day=dt.getDate(),day.counter=0,day.errors=[],tree[j].years[y].months[m].days.push(day),d=tree[j].years[y].months[m].days.length-1}tree[j].years[y].counter++,tree[j].years[y].months[m].counter++,tree[j].years[y].months[m].days[d].counter++,tree[j].years[y].months[m].days[d].errors.push({recorded:dt,description:curData[i].description}),dt.getFullYear()===today.getFullYear()&&($scope.errors.mapped.year[j][dt.getMonth()].y++,dt.getMonth()===today.getMonth()&&($scope.errors.mapped.month[j][dt.getDate()-1].y++,dt.getDate()===today.getDate()&&$scope.errors.mapped.today[j][dt.getHours()].y++))}$scope.errors.list[j]=curData}$scope.errors.tree=tree,$scope.dataProcessed=!0,console.dir($scope.errors)}).error(function(data,status,headers,config){console.log(data)}),$scope.tabs=[{name:"Today",number:0,active:!0},{name:"This Month",number:1,active:!1},{name:"This Year",number:2,active:!1}]}]).controller("errorGraphCtrl",["$scope",function($scope){}]).directive("errorGraph",["$window",function($window){return{restrict:"A",scope:{errors:"=",range:"@"},controller:"errorGraphCtrl",link:function(scope,elm,attrs){function transitionStacked(){console.log("drawing stacked"),y.domain([0,yStackMax]),rect.transition().duration(500).delay(function(d,i){return 10*i}).attr("y",function(d){return y(d.y0+d.y)}).attr("height",function(d){return y(d.y0)-y(d.y0+d.y)}).transition().attr("x",function(d){return x(d.x)}).attr("width",x.rangeBand())}var layers,x,xAxis,n=3,m=0,margin={top:40,right:10,bottom:20,left:10},width=960-margin.left-margin.right,height=540-margin.top-margin.bottom,stack=d3.layout.stack(),axisX=0,axisY=height;switch(scope.range){case"today":m=24,layers=stack(scope.errors.mapped.today),x=d3.scale.ordinal().domain(d3.range(m)).rangeRoundBands([0,width],.08),xAxis=d3.svg.axis().scale(x).tickSize(0).tickPadding(6).orient("bottom");break;case"month":m=31,layers=stack(scope.errors.mapped.month),x=d3.scale.ordinal().domain(d3.range(1,m+1)).rangeRoundBands([0,width],.08),xAxis=d3.svg.axis().scale(x).tickSize(0).tickPadding(6).orient("bottom");break;case"year":default:m=12,axisX=44,axisY=height-16,layers=stack(scope.errors.mapped.year),x=d3.scale.ordinal().domain(d3.range(m)).rangeRoundBands([0,width],.08);var xD=d3.time.scale().domain([new Date(2015,0,1),new Date(2015,11,31)]).range([0,width]);xAxis=d3.svg.axis().scale(xD).orient("bottom").ticks(d3.time.months).tickSize(16,0).tickFormat(d3.time.format("%B"))}console.log(scope.range+" : "+m);var yGroupMax=d3.max(layers,function(layer){return d3.max(layer,function(d){return d.y})}),yStackMax=d3.max(layers,function(layer){return d3.max(layer,function(d){return d.y0+d.y})}),y=d3.scale.linear().domain([0,yStackMax]).range([height,0]),yTicks=20;yTicks>yGroupMax&&(yTicks=yGroupMax);var yAxis=d3.svg.axis().scale(y).ticks(yTicks).orient("right"),color=d3.scale.linear().domain([0,n-1]).range(["#aad","#556"]),svg=d3.select(elm[0]).append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")"),layer=svg.selectAll(".layer").data(layers).enter().append("g").attr("class","layer").style("fill",function(d,i){return color(i)}),rect=layer.selectAll("rect").data(function(d){return d}).enter().append("rect").attr("x",function(d){return x(d.x)}).attr("y",height).attr("width",x.rangeBand()).attr("height",0);rect.transition().delay(function(d,i){return 10*i}).attr("y",function(d){return y(d.y0+d.y)}).attr("height",function(d){return y(d.y0)-y(d.y0+d.y)}),svg.append("g").attr("class","x axis").attr("transform","translate("+axisX+","+axisY+")").call(xAxis),svg.append("g").attr("class","y axis").attr("transform","translate(0, 0)").call(yAxis),transitionStacked()},template:"<div></div>"}}]),angular.module("manage.staffDirectory",["oc.lazyLoad","ui.tinymce"]).constant("STAFF_DIR_RANKS",["","Prof.","Assoc. Prof.","Asst. Prof."]).constant("STAFFDIR_GROUP",8).config(["$routeProvider",function($routeProvider){$routeProvider.when("/manage-staff-directory",{controller:"staffDirCtrl",templateUrl:"staffDirectory/staffDirectory.tpl.html",resolve:{userData:function(tokenReceiver){return tokenReceiver.getPromise()}}}).when("/manage-my-profile",{controller:"staffDirProfileCtrl",templateUrl:"staffDirectory/staffDirectoryProfile.tpl.html",resolve:{userData:function(tokenReceiver){return tokenReceiver.getPromise()},lazyLoad:["$ocLazyLoad",function($ocLazyLoad){return $ocLazyLoad.load("https://cdn.tinymce.com/4/tinymce.min.js")}]}})}]).controller("staffDirCtrl",["$scope","sdFactory","STAFF_DIR_URL","userData","STAFFDIR_GROUP","AuthService",function($scope,sdFactory,appUrl,userData,STAFFDIR_GROUP,AuthService){$scope.userInfo=AuthService.isAuthorized(),$scope.Directory={},$scope.newPerson={},$scope.newDept={},$scope.tabs=[{name:"Directory",number:0,active:!0},{name:"Subjects",number:1,active:!1},{name:"Departments/Locations",number:2,active:!1}],$scope.subjectTypes=[{name:"Specialist",value:1},{name:"Instructor",value:2},{name:"Both",value:3}],$scope.sortModes=[{by:"lastname",reverse:!1},{by:"title",reverse:!1},{by:"department",reverse:!1}],$scope.sortMode=$scope.sortModes[0],$scope.sortBy=function(by){$scope.sortMode===by?$scope.sortModes[by].reverse=!$scope.sortModes[by].reverse:$scope.sortMode=by},$scope.hasAccess=!1,angular.isDefined($scope.userInfo.group)&&(parseInt($scope.userInfo.group)&STAFFDIR_GROUP)===STAFFDIR_GROUP&&($scope.hasAccess=!0),sdFactory.getData().success(function(data){console.dir(data),$scope.Directory=data;for(var i=0;i<$scope.Directory.list.length;i++){$scope.Directory.list[i].selSubj=$scope.Directory.subjects[0],$scope.Directory.list[i].selType=$scope.subjectTypes[0];for(var j=0;j<$scope.Directory.departments.length;j++)if($scope.Directory.departments[j].depid==$scope.Directory.list[i].dept){$scope.Directory.list[i].selDept=$scope.Directory.departments[j];break}for(var j=0;j<$scope.Directory.divisions.length;j++)if($scope.Directory.divisions[j].divid==$scope.Directory.list[i].divis){$scope.Directory.list[i].selDiv=$scope.Directory.divisions[j];break}$scope.Directory.list[i].class="",$scope.Directory.list[i].show=!1,$scope.Directory.list[i].image=appUrl+"staffImages/"+$scope.Directory.list[i].id+".jpg"}$scope.newPerson.selSubj=$scope.Directory.subjects[0];for(var i=0;i<$scope.Directory.subjects.length;i++)$scope.Directory.subjects[i].show=!1;$scope.newPerson.selDept=$scope.Directory.departments[0];for(var i=0;i<$scope.Directory.departments.length;i++){$scope.Directory.departments[i].show=!1;for(var j=0;j<$scope.Directory.libraries.length;j++)$scope.Directory.libraries[j].lid==$scope.Directory.departments[i].library&&($scope.Directory.departments[i].selLib=$scope.Directory.libraries[j])}$scope.newPerson.selDiv=$scope.Directory.divisions[0];for(var i=0;i<$scope.Directory.libraries.length;i++)$scope.Directory.libraries[i].show=!1;for(var i=0;i<$scope.Directory.divisions.length;i++)$scope.Directory.divisions[i].show=!1;$scope.newDept.selLib=$scope.Directory.libraries[0],$scope.sortBy(0)}).error(function(data,status,headers,config){console.log(data)})}]).controller("staffDirPeopleCtrl",["$scope","sdFactory","STAFF_DIR_RANKS","STAFF_DIR_URL",function($scope,sdFactory,ranks,appUrl){$scope.lastNameFilter="",$scope.firstNameFilter="",$scope.titleFilter="",$scope.deptFilter="",$scope.ranks=ranks,$scope.newPerson.first="",$scope.newPerson.last="",$scope.newPerson.email="",$scope.newPerson.title="",$scope.newPerson.phone="",$scope.newPerson.fax="",$scope.newPerson.rank=ranks[0],$scope.formResponse="",$scope.currentPage=1,$scope.maxPageSize=10,$scope.perPage=20,$scope.togglePerson=function(person){$scope.Directory.list[$scope.Directory.list.indexOf(person)].show=!$scope.Directory.list[$scope.Directory.list.indexOf(person)].show,$scope.Directory.list[$scope.Directory.list.indexOf(person)].subjResponse=""},$scope.deletePerson=function(person){1==confirm("Delete "+person.lastname+", "+person.firstname+" record permanently?")&&sdFactory.postData({action:1},person).success(function(data,status,headers,config){$scope.formResponse=data,$scope.Directory.list.splice($scope.Directory.list.indexOf(person),1)}).error(function(data,status,headers,config){$scope.formResponse="Error: Could not delete person data! "+data})},$scope.updatePerson=function(person){sdFactory.postData({action:2},person).success(function(data,status,headers,config){$scope.Directory.list[$scope.Directory.list.indexOf(person)].subjResponse="Person has been updated!"}).error(function(data,status,headers,config){$scope.Directory.list[$scope.Directory.list.indexOf(person)].subjResponse="Error: Person update failed! "+data})},$scope.deleteSubject=function(person,subject,index){$scope.Directory.list[$scope.Directory.list.indexOf(person)].subjects.splice(index,1)},$scope.addSubject=function(person){for(var isPresent=!1,i=0;i<person.subjects.length;i++)if(person.subjects[i].sid===person.selSubj.sid){isPresent=!0,$scope.Directory.list[$scope.Directory.list.indexOf(person)].subjects[i].type=person.selType.value;break}if(!isPresent){var newSubj={};newSubj.sid=person.selSubj.sid,newSubj.subject=person.selSubj.subject,newSubj.link=person.selSubj.link,newSubj.type=3,$scope.Directory.list[$scope.Directory.list.indexOf(person)].subjects.push(newSubj)}},$scope.isValidEmailAddress=function(emailAddress){return new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(emailAddress)},$scope.addPerson=function(){$scope.formResponse="",$scope.newPerson.first.length>0?$scope.newPerson.last.length>0?$scope.isValidEmailAddress($scope.newPerson.email)?$scope.newPerson.title.length>0?$scope.newPerson.phone.length>=7?sdFactory.postData({action:3},$scope.newPerson).success(function(data,status,headers,config){if("object"==typeof data&&null!==data){var createdUser={};createdUser.id=data.id,createdUser.lastname=$scope.newPerson.last,createdUser.firstname=$scope.newPerson.first,createdUser.title=$scope.newPerson.title,createdUser.rank=$scope.newPerson.rank,createdUser.department=$scope.newPerson.selDept.name,createdUser.division=$scope.newPerson.selDiv.name,createdUser.phone=$scope.newPerson.phone,createdUser.email=$scope.newPerson.email,createdUser.fax=$scope.newPerson.fax,createdUser.subjects=[],createdUser.show=!1,createdUser.selSubj=$scope.Directory.subjects[0],createdUser.selType=$scope.subjectTypes[0];for(var j=0;j<$scope.Directory.departments.length;j++)if($scope.Directory.departments[j].depid==$scope.newPerson.selDept.depid){createdUser.selDept=$scope.Directory.departments[j];break}for(var j=0;j<$scope.Directory.divisions.length;j++)if($scope.Directory.divisions[j].divid==$scope.newPerson.selDiv.divid){createdUser.selDiv=$scope.Directory.divisions[j];break}createdUser.class="",createdUser.image=appUrl+"staffImages/"+createdUser.id+".jpg",$scope.Directory.list.push(createdUser),$scope.formResponse="Person has been added!"}else $scope.formResponse="Error: Person could not be added! "+data}).error(function(data,status,headers,config){$scope.formResponse="Error: Person Creation failed! "+data}):alert("Phone number is too short!"):alert("Title is too short!"):alert("User email is invalid!"):alert("Last Name is too short!"):alert("First Name is too short!")}}]).directive("manageSdPeople",[function(){return{restrict:"AC",controller:"staffDirPeopleCtrl",link:function(scope,elm,attrs){},templateUrl:"staffDirectory/staffDirectoryPeople.tpl.html"}}]).controller("staffDirSubjectsCtrl",["$scope","sdFactory",function($scope,sdFactory){$scope.newSubj={},$scope.newSubj.subject="",$scope.newSubj.link="",$scope.subResponse="",$scope.expandSubject=function(subject){$scope.Directory.subjects[$scope.Directory.subjects.indexOf(subject)].show||($scope.Directory.subjects[$scope.Directory.subjects.indexOf(subject)].show=!0)},$scope.editSubject=function(subject){sdFactory.postData({action:6},subject).success(function(data,status,headers,config){1==data?$scope.Directory.subjects[$scope.Directory.subjects.indexOf(subject)].show=!1:$scope.subResponse="Error: Can not save subject! "+data}).error(function(data,status,headers,config){$scope.subResponse="Error: Could not save subject! "+data})},$scope.deleteSubject=function(subject){1==confirm("Delete "+subject.subject+" subject?")&&sdFactory.postData({action:7},subject).success(function(data,status,headers,config){1==data?($scope.Directory.subjects.splice($scope.Directory.subjects.indexOf(subject),1),$scope.subResponse="Subject has been deleted!"):$scope.subResponse="Error: Can not delete subject! "+data}).error(function(data,status,headers,config){$scope.subResponse="Error: Could not delete subject! "+data})},$scope.addSubject=function(){sdFactory.postData({action:8},$scope.newSubj).success(function(data,status,headers,config){if("object"==typeof data&&null!=data){var newSubject={};newSubject.sid=data.id,newSubject.subject=$scope.newSubj.subject,newSubject.link=$scope.newSubj.link,newSubject.show=!1,$scope.Directory.subjects.push(newSubject),$scope.subResponse="Subject has been added!"}else $scope.subResponse="Error: Can not add subject! "+data}).error(function(data,status,headers,config){$scope.subResponse="Error: Could not add subject! "+data})}}]).directive("manageSdSubjects",[function(){return{restrict:"AC",controller:"staffDirSubjectsCtrl",link:function(scope,elm,attrs){},templateUrl:"staffDirectory/staffDirectorySubjects.tpl.html"}}]).controller("staffDirDepartmentsCtrl",["$scope","sdFactory",function($scope,sdFactory){$scope.newDept.name="",$scope.newLoc={},$scope.newLoc.name="",$scope.newDiv={},$scope.newDiv.name="",$scope.depResponse="",$scope.libResponse="",$scope.divResponse="",$scope.expandDepartment=function(dept){$scope.Directory.departments[$scope.Directory.departments.indexOf(dept)].show||($scope.Directory.departments[$scope.Directory.departments.indexOf(dept)].show=!0)},$scope.expandLibrary=function(lib){$scope.Directory.libraries[$scope.Directory.libraries.indexOf(lib)].show||($scope.Directory.libraries[$scope.Directory.libraries.indexOf(lib)].show=!0)},$scope.expandDivision=function(division){$scope.Directory.divisions[$scope.Directory.divisions.indexOf(division)].show||($scope.Directory.divisions[$scope.Directory.divisions.indexOf(division)].show=!0)},$scope.editDepartment=function(dept){sdFactory.postData({action:9},dept).success(function(data,status,headers,config){1==data?$scope.Directory.departments[$scope.Directory.departments.indexOf(dept)].show=!1:$scope.depResponse="Error: Can not save department! "+data}).error(function(data,status,headers,config){$scope.depResponse="Error: Could not save subject! "+data})},$scope.deleteDepartment=function(dept){1==confirm("Delete "+dept.name+" department?")&&sdFactory.postData({action:10},dept).success(function(data,status,headers,config){1==data?($scope.Directory.departments.splice($scope.Directory.departments.indexOf(dept),1),$scope.depResponse="Department has been deleted!"):$scope.depResponse="Error: Can not delete department! "+data}).error(function(data,status,headers,config){$scope.depResponse="Error: Could not delete department! "+data})},$scope.addDepartment=function(){sdFactory.postData({action:11},$scope.newDept).success(function(data,status,headers,config){if("object"==typeof data&&null!=data){var newDepartment={};newDepartment.depid=data.id,newDepartment.name=$scope.newDept.name,newDepartment.library=$scope.newDept.selLib.lid,newDepartment.show=!1,$scope.Directory.departments.push(newDepartment),$scope.depResponse="Department has been added!"}else $scope.depResponse="Error: Can not add department! "+data}).error(function(data,status,headers,config){$scope.depResponse="Error: Could not add department! "+data})},$scope.editLibrary=function(lib){sdFactory.postData({action:12},lib).success(function(data,status,headers,config){1==data?$scope.Directory.libraries[$scope.Directory.libraries.indexOf(lib)].show=!1:$scope.libResponse="Error: Can not update library! "+data}).error(function(data,status,headers,config){$scope.libResponse="Error: Could not update library! "+data})},$scope.deleteLibrary=function(lib){1==confirm("Delete "+lib.name+"?")&&sdFactory.postData({action:13},lib).success(function(data,status,headers,config){1==data?($scope.Directory.libraries.splice($scope.Directory.libraries.indexOf(lib),1),$scope.libResponse="Library has been deleted!"):$scope.libResponse="Error: Can not delete library! "+data}).error(function(data,status,headers,config){$scope.libResponse="Error: Could not delete library! "+data})},$scope.addLibrary=function(){sdFactory.postData({action:14},$scope.newLoc).success(function(data,status,headers,config){if("object"==typeof data&&null!=data){var newLibrary={};newLibrary.lid=data.id,newLibrary.name=$scope.newLoc.name,newLibrary.show=!1,$scope.Directory.libraries.push(newLibrary),$scope.libResponse="Library has been added!"}else $scope.libResponse="Error: Can not add library! "+data}).error(function(data,status,headers,config){$scope.libResponse="Error: Could not add library! "+data})},$scope.editDivision=function(division){sdFactory.postData({action:15},division).success(function(data,status,headers,config){1==data?$scope.Directory.divisions[$scope.Directory.divisions.indexOf(division)].show=!1:$scope.divResponse="Error: Can not save division! "+data}).error(function(data,status,headers,config){$scope.divResponse="Error: Could not save division! "+data})},$scope.deleteDivision=function(division){1==confirm("Delete "+division.name+" division?")&&sdFactory.postData({action:16},division).success(function(data,status,headers,config){1==data?($scope.Directory.divisions.splice($scope.Directory.divisions.indexOf(division),1),$scope.divResponse="Division has been deleted!"):$scope.divResponse="Error: Can not delete division! "+data}).error(function(data,status,headers,config){$scope.divResponse="Error: Could not delete division! "+data})},$scope.addDivision=function(){sdFactory.postData({action:17},$scope.newDiv).success(function(data,status,headers,config){if("object"==typeof data&&null!=data){var newDivision={};newDivision.divid=data.id,newDivision.name=$scope.newDiv.name,newDivision.show=!1,$scope.Directory.divisions.push(newDivision),$scope.divResponse="Division has been added!"}else $scope.divResponse="Error: Can not add division! "+data}).error(function(data,status,headers,config){$scope.divResponse="Error: Could not add division! "+data})}}]).directive("manageSdDepartments",[function(){return{restrict:"AC",controller:"staffDirDepartmentsCtrl",link:function(scope,elm,attrs){},templateUrl:"staffDirectory/staffDirectoryDepartments.tpl.html"}}]).controller("staffDirProfileCtrl",["$scope","sdFactory","userData","lazyLoad","AuthService",function($scope,sdFactory,userData,lazyLoad,AuthService){$scope.userInfo=AuthService.isAuthorized(),$scope.userProfile={},$scope.tinymceOptions={onChange:function(e){},inline:!1,plugins:"link image lists spellchecker code print preview",skin:"lightgray",theme:"modern"},angular.isDefined($scope.userInfo.login)&&sdFactory.getProfile($scope.userInfo.login).success(function(data){$scope.userProfile=data,console.dir(data)}).error(function(data,status,headers,config){console.log(data)}),$scope.update=function(){$scope.userProfile.person.login=$scope.userInfo.login,$scope.userProfile.person.formResponse="",sdFactory.postData({action:18},$scope.userProfile.person).success(function(data,status,headers,config){$scope.userProfile.person.formResponse=data}).error(function(data,status,headers,config){$scope.userProfile.person.formResponse="Error: Could not update profile! "+data})}}]),angular.module("manage.submittedForms",["ngFileUpload"]).constant("FORMS_GROUP",128).config(["$routeProvider",function($routeProvider){$routeProvider.when("/manage-forms",{controller:"manageSubFormsCtrl",templateUrl:"submittedForms/submittedForms.tpl.html",resolve:{userData:function(tokenReceiver){return tokenReceiver.getPromise()}}})}]).controller("manageSubFormsCtrl",["$scope","$timeout","formFactory","userData","FORMS_GROUP","AuthService",function($scope,$timeout,formFactory,userData,FORMS_GROUP,AuthService){$scope.userInfo=AuthService.isAuthorized(),$scope.data={},$scope.currentPage=1,$scope.maxPageSize=10,$scope.perPage=20,$scope.titleFilter="",$scope.sortModes=[{by:"title",reverse:!1},{by:"status",reverse:!1},{by:"created",reverse:!0}],$scope.sortMode=2,$scope.sortButton=$scope.sortMode,$scope.mOver=0,$scope.hasAccess=!1,angular.isDefined($scope.userInfo.group)&&(parseInt($scope.userInfo.group)&FORMS_GROUP)===FORMS_GROUP&&($scope.hasAccess=!0),formFactory.getData().success(function(data){console.dir(data);for(var i=0;i<data.forms.length;i++)data.forms[i].show=!1,data.forms[i].class="";$scope.data=data}).error(function(data,status,headers,config){console.log(data)}),$scope.toggleForms=function(form){$scope.data.forms[$scope.data.forms.indexOf(form)].show=!$scope.data.forms[$scope.data.forms.indexOf(form)].show},$scope.sortBy=function(by){$scope.sortMode===by?$scope.sortModes[by].reverse=!$scope.sortModes[by].reverse:$scope.sortMode=by}}]).controller("customFormCtrl",["$scope","$timeout","formFactory","Upload","FORMS_URL",function($scope,$timeout,formFactory,Upload,API){$scope.mailToLib=0,$scope.form={},$scope.form.attachment=[],$scope.form.selectedFiles=[],$scope.uploading=!1,$scope.generateThumb=function(files){if(files.length>0&&null!==files)for(var i=0;i<files.length;i++)$scope.form.selectedFiles.push(files[i]),$scope.fileReaderSupported&&$timeout(function(){var fileReader=new FileReader;fileReader.readAsDataURL(files[i]),fileReader.onload=function(e){$timeout(function(){files[i].dataUrl=e.target.result})}})},$scope.submit=function(event){var form={};form.length=event.target.length-1,form.url=event.target.baseURI,console.dir(event.target);for(var i=0;i<event.target.length-1;i++)form[i]={},form[i].name=event.target[i].name,form[i].value=event.target[i].value,"checkbox"!=event.target[i].type&&"radio"!=event.target[i].type||event.target[i].checked||(form[i].value="");if($scope.form.selectedFiles.length<1)console.log("No attachment."),formFactory.submitForm(form).success(function(data){$scope.formResponse=data,console.log(data)}).error(function(data,status,headers,config){$scope.formResponse="Error! "+data,console.log(data)});else{console.log("File attached."),$scope.uploading=!0;for(var names=[],i=0;i<$scope.form.selectedFiles.length;i++)names.push($scope.form.selectedFiles[i].name);$scope.form.selectedFiles.upload=Upload.upload({url:API+"api/process/upload",method:"POST",fields:{form:form},file:$scope.form.selectedFiles,fileFormDataName:names}),$scope.form.selectedFiles.upload.then(function(response){$timeout(function(){$scope.formResponse=response.data,$scope.uploading=!1})},function(response){$scope.formResponse="Error: "+response.data,console.dir(response.data),$scope.uploading=!1}),$scope.form.selectedFiles.upload.progress(function(evt){$scope.form.selectedFiles.progress=Math.min(100,parseInt(100*evt.loaded/evt.total))})}}}]),angular.module("ualib.musicSearch.templates",["videos/videos-list.tpl.html"]),angular.module("videos/videos-list.tpl.html",[]).run(["$templateCache",function(a){
a.put("videos/videos-list.tpl.html",'<div class="jumbotron-header">\n    <div class="jumbotron">\n\n        <div class="container">\n            <div class="row">\n                <div class="col-md-12">\n                    <ol class="breadcrumb" typeof="BreadcrumbList" vocab="http://schema.org/">\n                        <li><a title="Go to The University of Alabama Libraries." href="/#/home" class="home">The University of Alabama Libraries</a></li>\n                        <li><a title="Go to Video Database." href="/#/videos" class="post post-page">Video Database</a></li>\n                    </ol>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-md-7">\n                    <h1>Video Database</h1>\n                </div>\n                <div class="col-md-5">\n                    <div class="well">\n                        <p class="lead"> Videos are available through the Music Library</p>\n                        <a href="https://www.lib.ua.edu/libraries-and-collections/music-library/" class="btn btn-primary" title="Music Library">Get more info <span class="fa fa-fw fa-info-circle"></span></a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="container">\n    <div class="row">\n        <div class="col-md-3 col-md-push-9">\n            <form class="facets-form">\n                <div class="form-group">\n                <span class="page-header">\n                    <h4>Filter Videos By</h4>\n                </span>\n                </div>\n                <div class="form-group">\n                    <input type="text" class="form-control" ng-model="vid.search" placeholder="Keyword search">\n                </div>\n\n                <div class="form-group hidden-xs">\n                    <h5>Format</h5>\n                    <div class="facet-group">\n                        <div class="btn-group btn-group-justified">\n                            <label class="btn btn-default" ng-model="vid.format" btn-radio="\'\'">All</label>\n                            <label class="btn btn-default" ng-model="vid.format" btn-radio="\'dvd\'">DVD</label>\n                            <label class="btn btn-default" ng-model="vid.format" btn-radio="\'vcr\'">VHS</label>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group hidden-xs">\n                    <h5>Genre</h5>\n                    <div class="facet-group">\n                        <div class="radio">\n                            <label>\n                                <input type="radio" ng-model="vid.genre" value="">\n                                All Genres\n                            </label>\n                        </div>\n                        <div class="radio" ng-repeat="genre in genres">\n                            <label>\n                                <input type="radio" ng-model="vid.genre" ng-value="genre.label">\n                                {{genre.label}}\n                            </label>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="form-group hidden-xs">\n                    <h5>Language</h5>\n                    <div class="facet-group">\n                        <div class="radio">\n                            <label>\n                                <input type="radio" ng-model="vid.language" value="">\n                                All Languages\n                            </label>\n                        </div>\n                        <div class="radio" ng-repeat="lang in languages">\n                            <label>\n                                <input type="radio" ng-model="vid.language" ng-value="lang.label">\n                                {{lang.label}}\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <button type="button" class="btn btn-block btn-primary" ng-click="resetFilters()"><span class="fa fa-fw fa-refresh"></span> Reset filters</button>\n                </div>\n            </form>\n        </div>\n        <div class="col-md-9 col-md-pull-3 videos-list-container">\n            <p>\n            <h4 class="text-right">Showing {{pager.totalItems}} results</h4>\n            <div ng-if="activeFilters.format || activeFilters.genre || activeFilters.language">\n\n                <ol class="breadcrumb facetcrumb">\n                    <li ng-if="activeFilters.format"><strong>Format:</strong> <button type="button" class="btn btn-default" ng-click="vid.format = \'\'">{{vid.format}} <span class="text-muted" aria-hidden="true">&times;</span></button></li>\n                    <li ng-if="activeFilters.genre"><strong>Genre:</strong> <button type="button" class="btn btn-default" ng-click="vid.genre = \'\'">{{vid.genre}} <span class="text-muted" aria-hidden="true">&times;</span></button></li>\n                    <li ng-if="activeFilters.language"><strong>Language:</strong> <button type="button" class="btn btn-default" ng-click="vid.language = \'\'">{{vid.language}} <span class="text-muted" aria-hidden="true">&times;</span></button></li>\n                    <li class="pull-right"><button type="button" class="btn btn-primary btn-small reset-btn" title="Reset filters" ng-click="resetFilters()"><i class="fa fa-refresh"></i></button></li>\n                </ol>\n            </div>\n\n\n            </p>\n\n            <div class="media animate-repeat" ng-repeat="item in filteredvidoes | after:(pager.page-1)*pager.perPage | limitTo:20">\n                <div class="media-body">\n\n                    <h4 class="media-heading">\n                        <span ng-bind-html="item.title | highlight:vid.search"></span>\n\n                        <small>\n                            <span ng-bind-html="item.series_title | highlight:vid.search"></span>\n                        </small>\n                    </h4>\n\n                    <div class="details-context">\n                        <span ng-bind-html="item.call_number | highlight:vid.search"></span>\n                        <span ng-bind-html="item.genre | highlight:vid.genre" ng-if="item.genre"></span>\n                        <span ng-bind-html="item.language | highlight:vid.language" ng-if="item.language"></span>\n                    </div>\n\n                    <p class="text-justify" ng-bind-html="item.notes | highlight:vid.search"></p>\n                </div>\n                <div class="details-context">\n                    <span ng-bind-html="item.keywords | highlight:vid.search"></span>\n                </div>\n            </div>\n\n\n            <div class="text-center">\n                <pagination class="pagination-sm" ng-model="pager.page" total-items="pager.totalItems" max-size="pager.maxSize" boundary-links="true" rotate="false" items-per-page="pager.perPage" ng-change="pageChange()" ng-if="pager.totalItems > pager.perPage"></pagination>\n            </div>\n\n            <div class="alert alert-warning text-center" role="alert" ng-show="pager.totalItems < 1">\n                <h2>No results found <span ng-if="vid.search"> for "{{vid.search}}"</span></h2>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("ualib.musicSearch",["ngRoute","ngResource","ngAnimate","ngSanitize","angular.filter","ui.bootstrap","duScroll","ualib.ui","ualib.musicSearch.templates"]),angular.module("musicSearch",["ualib.musicSearch"]),angular.module("ualib.musicSearch").factory("videosFactory",["$resource",function(a){return a("//www.lib.ua.edu/musicsearch/api/:videos",{videos:"showall"},{get:{method:"GET",cache:!0}})}]),angular.module("ualib.musicSearch").config(["$routeProvider",function(a){a.when("/videos",{reloadOnSearch:!1,resolve:{filters:["videosFactory",function(a){return a.get({videos:"genres"}).$promise.then(function(a){var b=a;for(var c in a)"genres"!==c&&"languages"!==c||(b[c]=a[c].filter(function(a){return 0!==a.value}));return b},function(a,b,c,d){console.log("ERROR: videos"),console.log({data:a,status:b,headers:c,config:d})})}],videos:["videosFactory",function(a){return a.get().$promise.then(function(a){return a},function(a,b,c,d){console.log("ERROR: videos"),console.log({data:a,status:b,headers:c,config:d})})}]},templateUrl:"videos/videos-list.tpl.html",controller:"VideosListCtrl"})}]).controller("VideosListCtrl",["$scope","videos","filters","$filter","$location","$document",function(a,b,c,d,e,f){function g(a){angular.forEach(a,function(a,b){angular.isDefined(a)&&""!==a?angular.isObject(a)?(a=Object.keys(a).filter(function(b){return a[b]}).join(","),a.length>0?e.search(b,a):e.search(b,null)):e.search(b,a):e.search(b,null)})}function h(){var b=e.search(),c={};angular.copy(a.vid,c),a.activeFilters=b,b.page&&(a.pager.page=b.page),angular.forEach(c,function(a,d){if(angular.isDefined(b[d]))if("genres"===d||"languages"===d){var e={};b[d].split(",").forEach(function(a){e[a]=!0}),c[d]=e}else c[d]=b[d];else c[d]=angular.isObject(a)?{}:""}),a.vid=c}var i=[];c.$promise.then(function(c){a.genres=c.genres,a.languages=c.languages,b.$promise.then(function(b){i=b.results,a.resetFilters(),h(),a.totalItems=b.processedResults})}),a.$on("$locationChangeSuccess",function(){h()});var j=a.$watch("vid",function(b,c){var e=i;e=d("filter")(e,{genre:b.genre}),e=d("filter")(e,{language:b.language}),e=d("filter")(e,{call_number:b.format}),e=d("filter")(e,b.search),a.filteredvidoes=e,a.pager.totalItems=a.filteredvidoes.length,a.pager.firstItem=(a.pager.page-1)*a.pager.perPage+1,a.pager.lastItem=a.pager.page*(a.pager.totalItems<a.pager.maxSize?a.pager.totalItems:a.pager.perPage);var f=Math.floor(a.pager.totalItems/a.pager.maxSize);f<a.pager.page&&(a.pager.page=f||1),g(angular.extend({},b,{page:a.pager.page}))},!0);a.resetFilters=function(){a.vid={genre:"",language:"",format:"",search:""},a.pager={page:1,perPage:20,maxSize:10,totalItems:0}},a.pageChange=function(){g({page:a.pager.page}),f.duScrollTo(0,30,500,function(a){return--a*a*a+1})},a.$on("$destroy",function(){j()})}]),angular.module("oneSearch.templates",["bento/bento.tpl.html","common/directives/suggest/suggest.tpl.html","common/engines/acumen/acumen.tpl.html","common/engines/catalog/catalog.tpl.html","common/engines/databases/databases.tpl.html","common/engines/ejournals/ejournals.tpl.html","common/engines/google-cs/google-cs.tpl.html","common/engines/libguides/libguides.tpl.html","common/engines/recommend/recommend.tpl.html","common/engines/scout/scout.tpl.html","common/engines/staff-directory/staff-directory.tpl.html"]),angular.module("bento/bento.tpl.html",[]).run(["$templateCache",function(a){a.put("bento/bento.tpl.html",'<div class="container bento-box-container">\n    <div class="row">\n        <div class="col-md-12">\n            <h1 class="h2">OneSearch Results</h1>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="articles">\n                <h2>\n                    Articles\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Keyword search in journal titles and full text article content in Scout."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="books">\n                <h2>\n                    Books\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Keyword search in book titles using both the Libraries\' Catalog and Scout."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n        <div class="col-sm-12 col-md-4">\n            <div class="bento-box" bento-box="journals">\n                <h2>\n                    Journals\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Keyword search in journal titles and journal collections, in both Scout and our E-Resources."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-12">\n            <div class="bento-box" hide-if-empty="true" bento-box="staffdirectory" style="min-height:0px; margin-bottom: 15px;">\n                <h2>\n                    Staff Directory\n                    <small>\n                            <span class="fa fa-info-circle"\n                                  tooltip-placement="right"\n                                  tooltip="Contact a librarian directly for help with your research."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="databases">\n                <h2>\n                    Databases\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Keyword search in titles and databases descriptions from our own Databases page."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="googleCS">\n                <h2 id="site-search">\n                    Libraries\' Website\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Targeted, full-text search of library website pages and sections."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="acumen">\n                <h2 id="acumen">\n                    Acumen <small>Digital Archives</small>\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Returns a keyword search in titles and full text of our Special Collections Digital Archive."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="other">\n                <h2>\n                    Other Items & Media\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Keyword and item type search in the Libraries\' catalog and Scout, retrieving media items - videos, DVDs, CDs, etc."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="faq">\n                <h2>\n                    FAQ\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip=\'Full text keyword search via our Google search engine interface, through our FAQ repository, also known as "Ask a Librarian."\'></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="libguides">\n                <h2>\n                    Research Guides\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Uses Google API to run a keyword search in titles and full text for our research guides."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-12">\n            <div class="bento-box well" bento-box="recommend" hide-if-empty="true" omit-from-menu="true">\n                <h2>\n                    Recommended Links\n                </h2>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("common/directives/suggest/suggest.tpl.html",[]).run(["$templateCache",function(a){a.put("common/directives/suggest/suggest.tpl.html",'<div class="input-group input-group-lg">\n    <label class="sr-only" for="osTextField">Search terms</label>\n    <input type="text" name="search" class="form-control onesearch-text" placeholder="{{prompt}}" id="osTextField"\n           ng-model="model" ng-change="onChange()" ng-trim="false" autocomplete="off" />\n    <div class="input-group-btn">\n        <button type="submit" class="btn btn-onesearch btn-primary"><span class="fa fa-search" aria-hidden="true"></span><span class="sr-only">Search OneSearch</span></button>\n\n    </div>\n\n</div>\n\n<div class="suggest" ng-show="showSuggestions && selected && (items.suggest.length > 0 || items.recommend.length > 0 || items.subjects[0].subjects.length > 0 || items.faq.length > 0)">\n    <div ng-if="items.suggest.length > 0">\n        <ul class="nav nav-pills nav-stacked">\n            <li role="presentation"\n                ng-repeat="item in filteredItems = (items.suggest | filter:compare(originalValue)) | limitTo:numShow track by $index"\n                ng-mousedown="handleSelection(item.search)" ng-class="item.class"\n                ng-mouseenter="setCurrent($index, false)">\n                <a href="#/bento/{{item.search}}" ng-click="gaTypeAhead(item.search)">{{item.search}}</a>\n            </li>\n        </ul>\n    </div>\n    <div class="suggest-row" ng-show="items.recommend.length > 0 || items.subjects[0].subjects.length > 0 || items.faq.length > 0">\n        <div class="row">\n            <div class="col-sm-4 suggest-col" ng-show="items.recommend.length > 0">\n                <div class="">\n                    <h4>Recommended Links</h4>\n                    <div ng-repeat="recommendation in items.recommend | limitTo:10">\n                        <a ng-href="{{recommendation.link}}" ng-click="gaSuggestion(recommendation.description)">\n                            {{recommendation.description}}\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div class="col-sm-4 suggest-col" ng-show="items.subjects[0].subjects.length > 0">\n                <div class="">\n                    <h4>Research Guides&#39; Subjects <a href="http://guides.lib.ua.edu/" class="small" ng-mousedown="go(\'http://guides.lib.ua.edu/\')">more guides</a></h4>\n                    <div ng-repeat="person in items.subjects | limitTo:10">\n                        <div ng-repeat="subject in person.subjects | limitTo:2">\n                            <a ng-if="subject.link.length > 7" ng-href="{{subject.link}}" ng-mousedown="go(subject.link)" ng-click="gaSuggestion(subject.subject)">\n                                {{subject.subject}}\n                            </a>\n                            <a ng-if="subject.link.length <= 7" href="#"\n                               ng-mousedown="go(\'mailto:\' + person.email + \'?subject=Question\')">\n                                Ask {{person.name}}, {{person.title}} at {{person.department}}\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="col-sm-4 suggest-col" ng-show="items.faq.length > 0">\n                <div class="">\n                    <h4>FAQ <a href="http://ask.lib.ua.edu/" class="small" ng-mousedown="go(\'http://ask.lib.ua.edu/\')">more FAQs</a></h4>\n                    <div ng-repeat="faq in items.faq | limitTo:5">\n                        <a ng-href="{{faq.link}}" ng-mousedown="go(faq.link)"  ng-click="gaSuggestion(faq.title)" ng-bind-html="faq.title">\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("common/engines/acumen/acumen.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/acumen/acumen.tpl.html",'<div class="media">\n    <a class="pull-left" ng-href="http://acumen.lib.ua.edu/{{item.link}}"  target="_acumen">\n        <img ng-src="{{item.thumb_path}}" alt="{{item.title}}">\n    </a>\n    <div class="media-body">\n        <h3 class="h4 media-heading">\n            <a ng-href="http://acumen.lib.ua.edu/{{item.link}}" target="_acumen"  ng-click="gaPush()">{{item.title | truncate: 40: \'...\': true}}</a>\n        </h3>\n        <div class="details-context">\n            <span ng-if="item.date" ng-bind-html="item.date"></span>\n            <span ng-if="item.type" ng-bind-html="item.type | ucfirst"></span>\n        </div>\n        <p>{{item.description | truncate: 100: \'...\': true}}</p>\n        <ul class="list-inline">\n            <li>\n                <a ng-href="{{resourceLink}}" class="external-link" ng-if="resourceLink" target="_{{engine}}" ng-click="gaMore()">Results in {{engineName}}</a>\n            </li>\n        </ul>\n    </div>\n</div>')}]),angular.module("common/engines/catalog/catalog.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/catalog/catalog.tpl.html",'<div class="media">\n    <div class="media-body">\n        <h3 class="h4 media-heading">\n            <a ng-href="{{item.href}}"\n               ng-bind-html="item.title | truncate: 50: \'...\': true" target="_catalog" ng-click="gaPush()"></a>\n        </h3>\n        <div class="details-context">\n            <span ng-if="item.year && item.year | number" ng-bind-html="item.year"></span>\n            <span ng-if="item.mediaType" ng-bind-html="item.mediaType"></span>\n            <span ng-if="item.issn">ISSN: {{item.issn}}</span>\n        </div>\n        <div collapse="isCollapsed" class="details-container" ng-if="item.author">\n            <span class="text-muted">Author(s)</span>\n            <span class="detail">\n                <span ng-bind-html="item.author | lowercase | ucfirst"></span>\n            </span>\n        </div>\n        <ul class="list-inline">\n            <li ng-show="item.author">\n                <a href="" ng-click="isCollapsed = !isCollapsed">Item details <span class="fa" ng-class="{\'fa-caret-down\': isCollapsed, \'fa-caret-up\': !isCollapsed}"></span></a>\n            </li>\n            <li>\n                <a ng-href="{{resourceLink}}" class="external-link" ng-if="resourceLink" target="_{{engine}}" ng-click="gaMore()">Results in {{engineName}}</a>\n            </li>\n        </ul>\n    </div>\n</div>')}]),angular.module("common/engines/databases/databases.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/databases/databases.tpl.html",'<div class="media">\n    <div class="media-body">\n        <h3 class="h4 media-heading">\n            <a ng-href="{{item.url}}" title="{{item.title}}" target="_databases" ng-click="gaPush()">{{item.title | truncate: 40: \'...\': true}}</a>\n        </h3>\n        <div class="details-context">\n            <span ng-if="item.coverage" ng-bind-html="item.coverage"></span>\n        </div>\n        <div class="details-container" ng-if="item.subjects">\n            <span class="text-muted">Subjects: </span>\n            <span class="detail" ng-repeat="subj in item.subjects">{{subj.subject}}{{$last ? \'\' : \', \'}}</span>\n        </div>\n    </div>\n</div>')}]),angular.module("common/engines/ejournals/ejournals.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/ejournals/ejournals.tpl.html",'<div class="media">\n    <div class="media-body">\n        <h3 class="h4 media-heading">\n            <a ng-href="{{item.PLink}}"\n               target="_scout"\n               ng-bind-html="item.title | lowercase | ucfirst | truncate: 80: \'...\': true" ng-click="gaPush()"></a>\n\n        </h3>\n        <div class="details-context">\n            <span ng-if="item.year">{{item.year}}</span>\n            <span ng-if="item.ISSN">ISSN: {{item.ISSN}}</span>\n            <span ng-if="item.mediaType">{{item.mediaType}} </span>\n            <span ng-if="item.FullText.Text.Availability">Full Text Online</span>\n        </div>\n\n        <ul class="list-inline">\n            <li>\n                <a ng-href="{{resourceLink}}" class="external-link" ng-if="resourceLink" target="_{{engine}}" ng-click="gaMore()">Results in {{engineName}}</a>\n            </li>\n        </ul>\n\n\n    </div>\n</div>')}]),angular.module("common/engines/google-cs/google-cs.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/google-cs/google-cs.tpl.html",'<div class="media">\n    <div class="media-body">\n        <h3 class="h4 media-heading"><a ng-href="{{item.link}}" title="{{item.title}}" target="_googlecs" ng-click="gaPush()">{{item.title | truncate: 40: \'...\': true}}</a></h3>\n        <p ng-bind-html="item.snippet | truncate: 100: \'...\': true"></p>\n        <ul class="list-inline">\n            <li>\n                <a ng-href="{{resourceLink}}" class="external-link" ng-if="resourceLink" target="_{{engine}}" ng-click="gaMore()">Results in {{engineName}}</a>\n            </li>\n        </ul>\n    </div>\n</div>')}]),angular.module("common/engines/libguides/libguides.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/libguides/libguides.tpl.html",'<div class="media">\n    <div class="media-body">\n        <h3 class="h4 media-heading"><a ng-href="{{item.url}}"  target="_libguides" ng-click="gaPush()">{{item.name | truncate: 40: \'...\': true}}</a></h3>\n        <p ng-bind-html="item.description | truncate: 100: \'...\': true"></p>\n        <ul class="list-inline">\n            <li>\n                <a ng-href="{{resourceLink}}" class="external-link" ng-if="resourceLink" target="_{{engine}}" ng-click="gaMore()">Results in {{engineName}}</a>\n            </li>\n        </ul>\n    </div>\n</div>\n\n\n\n')}]),angular.module("common/engines/recommend/recommend.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/recommend/recommend.tpl.html",'<a ng-href="{{item.link}}" title="{{item.descr}}">{{item.descr}}</a>\n')}]),angular.module("common/engines/scout/scout.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/scout/scout.tpl.html",'<div class="media">\n    <div class="media-body">\n        <h3 class="h4 media-heading">\n            <a ng-href="{{item.PLink}}"\n               title="{{item.Items[0].Data}}"\n               target="_scout"\n               ng-bind-html="item.title | lowercase | ucfirst | truncate: 80: \'...\': true" ng-click="gaPush()"></a>\n        </h3>\n        <div class="details-context">\n            <span ng-if="item.RecordInfo.BibRecord.BibRelationships.IsPartOfRelationships[0].BibEntity.Dates[0]">{{item.RecordInfo.BibRecord.BibRelationships.IsPartOfRelationships[0].BibEntity.Dates[0].Y}} </span>\n            <span ng-if="item.mediaType">{{item.mediaType}} </span>\n            <span ng-if="item.FullText.Text.Availability">Full Text Online</span>\n        </div>\n        <div collapse="isCollapsed" ng-show="(item.RecordInfo.BibRecord.BibRelationships.HasContributorRelationships || item.source || item.RecordInfo.BibRecord.BibEntity.Subjects)">\n            <div class="details-container" ng-if="item.RecordInfo.BibRecord.BibRelationships.HasContributorRelationships">\n                <span class="text-muted">Authors </span>\n            <span class="details"...\n                  ..\n\n                  ng-repeat="author in item.RecordInfo.BibRecord.BibRelationships.HasContributorRelationships | unique: \'PersonEntity.Name.NameFull\'"\n                  ng-bind-html="author.PersonEntity.Name.NameFull | lowercase | ucfirst"></span>\n            </div>\n\n            <div class="details-container" ng-if="item.source">\n                <span class="text-muted">Sources </span>\n                <span class="details" ng-bind-html="item.source"></span>\n            </div>\n\n            <div class="details-container" ng-if="item.RecordInfo.BibRecord.BibEntity.Subjects">\n                <span class="text-muted">Subjects </span>\n            <span class="details"\n                  ng-repeat="subject in item.RecordInfo.BibRecord.BibEntity.Subjects"\n                  ng-bind-html="subject.SubjectFull"></span>\n            </div>\n        </div>\n        <ul class="list-inline">\n            <li ng-show="item.RecordInfo.BibRecord.BibRelationships.HasContributorRelationships || item.source || item.RecordInfo.BibRecord.BibEntity.Subjects">\n                <a href="" ng-click="isCollapsed = !isCollapsed">Item details <span class="fa" ng-class="{\'fa-caret-down\': isCollapsed, \'fa-caret-up\': !isCollapsed}"></span></a>\n            </li>\n            <li>\n                <a ng-href="{{resourceLink}}" class="external-link" ng-if="resourceLink" target="_{{engine}}" ng-click="gaMore()">Results in {{engineName}}</a>\n            </li>\n        </ul>\n\n    </div>\n</div>')}]),angular.module("common/engines/staff-directory/staff-directory.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/staff-directory/staff-directory.tpl.html",'<div class="col-md-4">\n    <div class="media">\n        <div class="media-left">\n                <img ng-if="item.photo" class="media-object" style="width: 128px;" src=\'https://www.lib.ua.edu/staffDir/staffImages/{{item.photo}}\' alt="Staff Directory Image of {{item.firstName}} {{item.lastName}}" />\n                <img ng-if="!item.photo" class="media-object" style="width: 128px;" src="https://www.lib.ua.edu/wp-content/themes/roots-ualib/assets/img/user-profile.png" alt="Staff Directory Image of {{item.firstName}} {{item.lastName}}" />\n        </div>\n        <div class="media-body">\n            <div class="media-heading">\n                <dl class="list-unstyled">\n                    <dt>Name</dt>\n                    <dd><a ng-href="#/staffdir/{{item.emailPrefix}}" ng-if="item.profile">\n                        {{item.firstName}} {{item.lastName}}\n                    </a></dd>\n                    <dd ng-if="!item.profile">{{item.firstName}} {{item.lastName}} </dd>\n                    <dt>Subject</dt>\n                    <dd>{{item.subject}}</dd>\n                    <dt>Phone</dt>\n                    <dd>{{item.title}}</dd>\n                    \x3c!--<div class="media-heading">{{item.department}}</div>--\x3e\n                    <dt>Email</dt>\n                    <dd><a href="mailto:{{item.email}}?subject=Research Help Request" ng-click="gaResearchRequest(item.firstName + \' \' + item.lastName)">{{item.email}}</a></dd>\n                </dl>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n\n')}]),angular.module("oneSearch",["ngRoute","ngResource","ngAnimate","ngSanitize","ui.bootstrap","angular.filter","ualib.ui","oneSearch.common","oneSearch.templates","oneSearch.bento"]).constant("UALIB_DOMAIN","//www.lib.ua.edu/").value("SearchParams",{limit:100}),angular.module("oneSearch.bento",[]).config(["$routeProvider",function(a){a.when("/bento/:s",{templateUrl:"bento/bento.tpl.html",controller:"BentoCtrl"})}]).service("Bento",["$routeParams","$rootScope","$q","oneSearch","mediaTypes",function(a,b,c,d,e){function f(a,b){var c=j.boxes[a].engines.indexOf(b);-1!=c&&(i(a),j.boxes[a].engines.splice(c,1))}function g(a){angular.forEach(j.boxes,function(b,c){
f(c,a)})}function h(a){var b=j.boxes[a].engines.length,c=b>1?1:2>b?3:2;j.boxes[a].resultLimit=c}function i(a){c.when(j.boxes[a].results).then(function(b){var c=Object.keys(b).length,d=j.boxes[a].engines.length,e=c+d;"articles"==a||"databases"==a?j.boxes[a].resultLimit=6:"journals"==a?j.boxes[a].resultLimit=2>e&&3==j.boxes[a].resultLimit?6:3:"books"==a&&(j.boxes[a].resultLimit=3>e&&2==j.boxes[a].resultLimit?3:2>e&&3==j.boxes[a].resultLimit?6:2),(2>e&&j.boxes[a].resultLimit<3||3>e&&j.boxes[a].resultLimit<2)&&j.boxes[a].resultLimit++})}var j=this;this.boxes={},this.engines={};var k;this.getBoxes=function(){k=d.searchAll(a),angular.copy(e.types,j.boxes),angular.forEach(j.boxes,function(a,b){h(b),j.boxes[b].results={},j.boxes[b].resourceLinks={},j.boxes[b].resourceLinkParams={}}),angular.forEach(k,function(a,b){a.response.then(function(c){var h=a.getResults(c),i=a.getResourceLink(c);if(isEmpty(h))g(b);else{h=h.map(function(a,b){var c=a;return c.position=b,c});var k=e.groupBy(h,a.mediaTypes);Object.keys(j.boxes).forEach(function(c){k.hasOwnProperty(c)&&(j.boxes[c].results[b]=k[c].sort(function(a,b){return a.position>b.position?1:a.position<b.position?-1:0}),j.boxes[c].resourceLinks[b]=decodeURIComponent(i[a.id]),a.resourceLink&&a.resourceLink.params?j.boxes[c].resourceLinkParams[b]=a.resourceLink.params:angular.isObject(a.mediaTypes)&&(j.boxes[c].resourceLinkParams[b]=a.mediaTypes.types[c])),f(c,b)}),j.engines[b]={},j.engines[b].tpl=d.getEngineTemplate(a),j.engines[b].controller=d.getEngineController(a)}},function(){g(b)})})}}]).controller("BentoCtrl",["$scope","Bento",function(a,b){a.$on("$routeChangeSuccess",function(){b.getBoxes()})}]).directive("bentoBox",["$rootScope","$controller","$compile","$animate","$timeout","Bento","oneSearch",function(a,b,c,d,e,f,g){return{restrict:"A",scope:{},link:function(h,i,j){function k(){var a=angular.copy(f.boxes[m].engines),b=[];for(var c in g.engines)a.indexOf(c)>-1&&g.engines[c].response&&!g.engines[c].response.done&&b.push(c);q&&!n.hasClass("unresponsive")&&(n.addClass("unresponsive"),d.enter(r,n,angular.element(n[0].lastChild))),b.length&&(q=e(k,500))}function l(a){isEmpty(f.boxes[a].results)&&(j.hideIfEmpty?i.addClass("hidden"):(i.append("<strong>No Results</strong>"),i.addClass("text-muted"))),d.leave(n),s()}var m=j.bentoBox;i.addClass(m),i.parent().attr("id",m+"-parent"),h.bento=f;var n=angular.element('<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>'),o=i.find("h2");o.attr("id",m);var p=o.text();d.enter(n,o,angular.element(o[0].lastChild));var q,r=angular.element(' <span class="unresponsive-msg">Awaiting results from provider</span>');e(k,2e3);var s=h.$watchCollection(function(){return f.boxes[m].engines},function(d,e){if(d!==e){for(var h="",j=0,k=e.length;k>j;j++){var n=e[j];if(d.indexOf(n)<0){h=n;break}}var o=a.$new();o.items=f.boxes[m].results[h],o.items&&o.items.length>0?(o.isCollapsed=!0,o.engine=h,o.engineName=g.engines[h].title?g.engines[h].title:h.charAt(0).toUpperCase()+h.slice(1),o.resourceLink="undefined"!==f.boxes[m].resourceLinks[h]&&f.boxes[m].resourceLinks[h],o.resourceLinkParams=f.boxes[m].resourceLinkParams[h],g.engines[h].resourceLink&&g.engines[h].resourceLink.params&&(o.resourceLinkParams=g.engines[h].resourceLink.params),o.boxName=p,o.mediaType=m,f.engines[h].tpl.then(function(a){var d=["$scope","$element","Bento",function(a,c,d){d.engines[a.engine].controller&&angular.extend(this,b(d.engines[a.engine].controller,{$scope:a}));var e=a.boxName.toLowerCase().trim().replace(/\s+/g,"_").replace(/[']+/g,"");a.box=d.boxes[m],a.gaPush=function(){ga("send","event","oneSearch","item_click",e)},a.gaMore=function(){ga("send","event","oneSearch","more_click","more_"+e)},a.gaResearchRequest=function(a){ga("send","event","oneSearch","research_request",a)}}],e=b(d,{$scope:o,$element:i});i.data("$ngControllerController",e),i.children().data("$ngControllerController",e);var f=angular.element('<div class="animate-repeat bento-box-item" ng-repeat="item in items | limitTo: box.resultLimit">'+a+"</div>"),g=c(f)(o);i.append(g)})):a.$broadcast("NoResultsForEngine",{engine:h,box:m}),0===d.length&&l(m)}},!0)}}}]),angular.module("oneSearch.common",["common.mediaTypes","common.oneSearch","common.engines","filters.nameFilter"]),angular.module("oneSearch.common").factory("dataFactory",["$http",function(a){return{get:function(b){return a.get(b).then(function(a){return a.data})}}}]).directive("suggestOneSearch",["$timeout","$document",function(a,b){return{restrict:"AEC",scope:{prompt:"@",model:"=",search:"="},controller:["$scope","$window","$timeout","$document","dataFactory","Bento",function(a,b,c,d,e){a.items={},a.filteredItems=[],a.model="",a.current=-1,a.originalValue=a.model,a.dataRequested=!1,a.numShow=5,a.faqSearched=!1,a.selected=!1,a.onChange=function(){a.selected=!0;var b=a.model.replace(/[&\/\\#+()$~%':*?<>{}]/g," ").trim();if(b=b.substring(0,150),(a.model.length<3||a.model.indexOf(a.originalValue)<0&&a.model.length>=a.originalValue.length||a.originalValue.indexOf(a.model)<0&&a.model.length<=a.originalValue.length)&&(a.items={},a.setCurrent(-1,!1),a.dataRequested=!1,a.selected=!1,a.faqSearched=!1),a.model.length>2&&!a.dataRequested&&(a.dataRequested=!0),a.model.length>2&&c(function(){e.get("//www.lib.ua.edu/oneSearch/api/recommend/"+encodeURI(b)).then(function(b){a.items.recommend=b}),e.get("//www.lib.ua.edu/staffDir/api/subject/"+encodeURI(b)+"/match/startwith").then(function(b){a.items.subjects=b})},0),a.model.length>4&&!a.faqSearched){b.slice(-2).indexOf(" ")>0&&c(function(){a.faqSearched=!0,e.get("https://www.googleapis.com/customsearch/v1?key=AIzaSyCMGfdDaSfjqv5zYoS0mTJnOT3e9MURWkU&cx=003453353330912650815:lfyr_-azrxe&q="+encodeURI(b)+"&siteSearch=ask.lib.ua.edu").then(function(b){a.items.faq=b.items})},0)}a.originalValue=a.model},a.go=function(c){a.model="",a.originalValue=a.model,b.location.href=c},a.setCurrent=function(b,c){if(a.current=b,void 0!==a.items.suggest)for(var d=0;d<a.items.suggest.length;d++)a.items.suggest[d].class="";b>=0&&a.filteredItems.length>0&&(b>a.filteredItems.length-1&&(b=a.filteredItems.length-1),c&&(a.model=a.filteredItems[b].search),a.filteredItems[b].class="active",a.current=b)},a.onFocus=function(){angular.isDefined(a.model)&&a.model.length>2&&(a.selected=!0)},a.onBlur=function(){a.selected=!1,d.unbind("click")},a.compare=function(a){return function(b){return 0==b.search.indexOf(a)&&!angular.equals(b.search.toLowerCase(),a.toLowerCase())}},a.gaSuggestion=function(a){ga("send","event","oneSearch","suggestion_click",a)},a.gaTypeAhead=function(a){ga("send","event","oneSearch","type_ahead_click",a)}}],link:function(c,d){c.showSuggestions=!1;var e=c.$watch("items",function(a){var b=!1;for(var d in a)if(d.length>0){b=!0;break}c.showSuggestions=c.model.length>2&&b},!0);d.bind("keydown",function(a){switch(a.keyCode){case 38:c.current>0?(c.setCurrent(c.current-1,!0),a.preventDefault()):(c.setCurrent(-1,!1),c.model=c.originalValue,a.preventDefault());break;case 40:c.model.length>2&&c.current<c.numShow-1&&c.current<c.items.suggest.length-1&&(c.setCurrent(c.current+1,!0),a.preventDefault());break;case 13:c.selected=!1,c.current>-1&&c.filteredItems[c.current]&&c.model===c.filteredItems[c.current].search&&c.gaTypeAhead(c.model);break;case 8:case 46:c.selected=!0}c.$apply()}),c.$on("$destroy",function(){d.unbind("keydown"),e()}),d.bind("click",function(a){"osTextField"===a.target.id?(c.onFocus(),b.bind("click",function(a){"osTextField"===a.target.id?c.onFocus():a.button<1&&c.onBlur(a),c.$apply()})):a.button<1&&c.onBlur(a),c.$apply()}),c.handleSelection=function(b){a(function(){c.model=b,c.originalValue="",c.items={},c.setCurrent(-1,!1),c.dataRequested=!1,c.selected=!1,c.faqSearched=!1,c.$apply(),c.search()},0)}},templateUrl:"common/directives/suggest/suggest.tpl.html"}}]),angular.module("engines.acumen",[]).config(["oneSearchProvider",function(a){a.engine("acumen",{id:8,priority:3,resultsPath:"Acumen.data",totalsPath:"Acumen.metadata.numFound",templateUrl:"common/engines/acumen/acumen.tpl.html",controller:"AcumenCtrl"})}]).controller("AcumenCtrl",["$scope","$filter",function(a){for(var b=a.items,c=0,d=b.length;d>c;c++)b[c].type&&(b[c].type="text"==b[c].type[0]&&b[c].details&&b[c].details.genre?b[c].details.genre.sort().shift():b[c].type.sort().shift())}]),angular.module("engines.catalog",[]).config(["oneSearchProvider",function(a){a.engine("catalog",{id:64,priority:5,resultsPath:"Catalog.list",totalsPath:"Catalog.total",mediaTypes:{path:"bibFormat",types:{books:["aa","ac","ad","am"],journals:["ab","as","bb","bs","cb","cs","db","ds","eb","es","fb","fs","gb","gs","ib","is","jb","js","kb","ks","mb","ms","ob","os","pb","ps","rb","rs","tb","ts"]}},templateUrl:"common/engines/catalog/catalog.tpl.html",controller:"CatalogCtrl"})}]).filter("catalogSplitTitleAuthor",[function(){return function(a){if(a.indexOf("/")>-1){a=a.split(/\s\/\sedited\sby\s([^.+]+)\./)}return a}}]).controller("CatalogCtrl",["$scope","$filter",function(a,b){for(var c={bc:"Archive/Manuscript",cm:"Music Score",em:"Map",im:"Nonmusical Recording",jm:"Musical Recording",mm:"Computer File/Software",om:"Kit",pc:"Mixed Material/Collection",pm:"Mixed Material",rm:"Visual Material"},d=a.items,e=0;e<d.length;e++){var f=d[e].bibFormat;if(d[e].mediaType=c[f],!d[e].author){var g=b("catalogSplitTitleAuthor")(d[e].title);angular.isArray(g)&&(d[e].title=g[0],d[e].author=g[2])}}if(angular.isArray(a.resourceLinkParams)){var h="&limitTo=TYPE%3D",i=h+a.resourceLinkParams.join(h);a.resourceLink.indexOf("limitTo=")>0?a.resourceLink=a.resourceLink.replace(/(&limitTo=[^&]+)/,i):a.resourceLink+=i}a.items=d}]),angular.module("engines.databases",[]).config(["oneSearchProvider",function(a){a.engine("databases",{id:2,priority:1,resultsPath:"Databases.databases",totalsPath:"Databases.totalResults",templateUrl:"common/engines/databases/databases.tpl.html"})}]),angular.module("engines.ejournals",[]).config(["oneSearchProvider",function(a){a.engine("ejournals",{id:4,priority:6,resultsPath:"eJournals.SearchResult.Data.Records",totalsPath:"Scout.SearchResult.Statistics.TotalHits",mediaTypes:{path:"Header.ResourceType",types:{books:"Book",journals:"Journal"}},templateUrl:"common/engines/ejournals/ejournals.tpl.html",controller:"EjouralsCtrl"})}]).controller("EjouralsCtrl",["$scope",function(a){for(var b,c,d,e=a.items,f=0;f<e.length;f++){if(b="",c="",d="",e[f].RecordInfo.BibRecord.BibEntity.Titles&&(b=e[f].RecordInfo.BibRecord.BibEntity.Titles[0].TitleFull)&&(e[f].title=b),e[f].RecordInfo.BibRecord.BibEntity.Identifiers){for(j=0;j<e[f].RecordInfo.BibRecord.BibEntity.Identifiers.length;j++){var g=e[f].RecordInfo.BibRecord.BibEntity.Identifiers[j].Type;if("issn-online"==g){c=e[f].RecordInfo.BibRecord.BibEntity.Identifiers[j].Value,c=c.slice(0,4)+"-"+c.slice(4,8);break}"issn-print"==g&&(c=e[f].RecordInfo.BibRecord.BibEntity.Identifiers[j].Value,c=c.slice(0,4)+"-"+c.slice(4,8))}c&&(e[f].ISSN=c)}for(j=0;j<e[f].FullTextHoldings.length;j++)if(void 0!==e[f].FullTextHoldings[j].CoverageDates){var h=e[f].FullTextHoldings[j].CoverageDates[0].StartDate;h=parseInt(h.slice(0,4)),""!==d?d>h&&(d=h):d=parseInt(h)}d&&(e[f].year=d)}a.items=e}]),angular.module("common.engines",["engines.acumen","engines.catalog","engines.databases","engines.scout","engines.googleCS","engines.faq","engines.libguides","engines.ejournals","engines.recommend","engines.staffdirectory"]).service("enginesTemplateFactory",["$http","$templateCache",function(a,b){this.get=function(a){return angular.isDefined(a.templateUrl)?this.fromUrl(a.templateUrl):null},this.fromUrl=function(c){return null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})}}]),angular.module("engines.faq",[]).config(["oneSearchProvider",function(a){a.engine("faq",{id:16,priority:2,resultsPath:"GoogleCS.items",totalsPath:"GoogleCS.searchInformation.totalResults",filterQuery:"site:ask.lib.ua.edu",templateUrl:"common/engines/google-cs/google-cs.tpl.html"})}]),angular.module("engines.googleCS",[]).config(["oneSearchProvider",function(a){a.engine("googleCS",{id:16,title:"Libraries' Website",priority:2,resultsPath:"GoogleCS.items",totalsPath:"GoogleCS.searchInformation.totalResults",filterQuery:"-site:guides.lib.ua.edu -site:ask.lib.ua.edu",templateUrl:"common/engines/google-cs/google-cs.tpl.html"})}]),angular.module("engines.libguides",[]).config(["oneSearchProvider",function(a){a.engine("libguides",{id:256,title:"Research Guides",priority:2,resultsPath:"LibGuides",templateUrl:"common/engines/libguides/libguides.tpl.html"})}]),angular.module("engines.recommend",[]).config(["oneSearchProvider",function(a){a.engine("recommend",{id:512,priority:0,resultsPath:"Recommendations",templateUrl:"common/engines/recommend/recommend.tpl.html"})}]),angular.module("engines.scout",[]).config(["oneSearchProvider",function(a){a.engine("scout",{id:1,priority:4,resultsPath:"Scout.SearchResult.Data.Records",totalsPath:"Scout.SearchResult.Statistics.TotalHits",mediaTypes:{path:"Header.PubTypeId",types:{books:["book","ebook"],articles:"academicJournal"}},resourceLink:{params:{books:["Books","eBooks"],articles:["AcademicJournals"],other:["News","Magazines","Reviews","Biographies","ConferenceMaterials","ElectronicResources","TradePublications","NonPrintResources","MusicScores","DissertationsTheses","PrimarySourceDocuments","Reports","Maps","Audio","Videos"]}},templateUrl:"common/engines/scout/scout.tpl.html",controller:"ScoutCtrl"})}]).controller("ScoutCtrl",["$scope",function(a){for(var b,c=a.items,d=0;d<c.length;d++){"audio"==c[d].Header.PubTypeId&&(c[d].mediaType="Audio"),"videoRecording"==c[d].Header.PubTypeId&&(c[d].mediaType="Video Recording"),c[d].RecordInfo.BibRecord.BibEntity.Titles&&(b=c[d].RecordInfo.BibRecord.BibEntity.Titles[0].TitleFull);var e=[];if(c[d].RecordInfo.BibRecord.hasOwnProperty("BibRelationships")&&angular.isDefined(c[d].RecordInfo.BibRecord.BibRelationships.IsPartOfRelationships)){e=c[d].RecordInfo.BibRecord.BibRelationships.IsPartOfRelationships;for(var f=0,g=e.length;g>f;f++)if(angular.isUndefined(b)&&e[f].BibEntity&&e[f].BibEntity.Titles&&(b=e[f].BibEntity.Titles[0].TitleFull),angular.isDefined(e[f].BibEntity.Identifiers)&&"issn-print"===e[f].BibEntity.Identifiers[0].Type&&(e[f].BibEntity.Titles&&(c[d].source=e[f].BibEntity.Titles[0].TitleFull),angular.isDefined(e[f].BibEntity.Numbering)))for(var h=0,i=e[f].BibEntity.Numbering.length;i>h;h++)c[d].source+=" "+e[f].BibEntity.Numbering[h].Type.substring(0,3)+"."+e[f].BibEntity.Numbering[h].Value}if(angular.isDefined(c[d].Items))for(var f=0;f<c[d].Items.length;f++)"Src"==c[d].Items[f].Group&&(c[d].source=c[d].Items[f].Data);c[d].title=b}a.items=c;var j,k=angular.copy(a.mediaType),l=angular.copy(a.resourceLink);a.resourceLinkParams[k]&&(j=a.resourceLinkParams[k].join(","),l.indexOf("facet=")>0?l=l.replace(/&facet=(.+)&?/,j):l+="&facet="+j),a.resourceLink=angular.copy(l)}]),angular.module("engines.staffdirectory",[]).config(["oneSearchProvider",function(a){a.engine("staffdirectory",{id:128,priority:5,resultsPath:"staffDir",templateUrl:"common/engines/staff-directory/staff-directory.tpl.html",controller:"StaffDirectoryCtrl"})}]).controller("StaffDirectoryCtrl",["$scope",function(a){for(var b=a.items,c=0,d=b.length;d>c;c++)if(b[c].email){var e=/^([\w-]+(?:\.[\w-]+)*)/,f=b[c].email.match(e);null!==f&&(b[c].emailPrefix=f[0])}}]),angular.module("filters.nameFilter",[]).filter("nameFilter",["$filter",function(){return function(a){if(a.indexOf(",")>-1){a=a.split(",").map(function(a){return a.trim()}).reverse().join(" ")}return a}}]);var invertArrayToObject=function(a){var b={};return Object.keys(a).map(function(c){for(var d=0,e=a[c].length;e>d;d++)b[a[c][d]]=c}),b},hasOwnProperty=Object.prototype.hasOwnProperty;angular.module("common.mediaTypes",[]).provider("mediaTypes",[function(){function a(a){var b={};return angular.forEach(a,function(a,c){var d={};switch(typeof a){case"string":case"number":a=[a];break;case"object":a=toArray(a)}d[c]=a,d=invertArrayToObject(d),angular.extend(b,d)}),b}var b={other:{engines:[],loaded:!1}};this.type=function(a,c){b[a]||(b[a]={engines:[],loaded:!1}),b.other.engines.indexOf(c)>-1||b.other.engines.push(c),b[a].engines.push(c)},this.$get=["$parse",function(c){return{types:b,groupBy:function(b,d){var e={};if(angular.isObject(d)){var f,g,h=a(d.types),i=c(d.path);angular.forEach(b,function(a){f=i(a),g=h[f],angular.isUndefined(g)?(e.other||(e.other=[]),e.other.push(a)):(e[g]||(e[g]=[]),e[g].push(a))})}else e[d]=b;return e}}}]}]),angular.module("common.oneSearch",[]).factory("Search",["$http","$q",function(a,b){function c(c){var d=b.defer(),e="//www.lib.ua.edu/oneSearch/api/search/"+c.s+"/engine/"+c.engine+"/limit/"+c.limit,f=a({method:"GET",url:e,timeout:d.promise}),g=f.then(function(a){return this.done=!0,a.data},function(){return b.reject("Error")});return g.done=!1,g.abort=function(){this.done=!0,d.resolve()},g.finally(function(){g.abort=angular.noop,d=f=g=null,this.done=!1}),g}return{request:c}}]).provider("oneSearch",["mediaTypesProvider",function(a){var b={};this.engine=function(c,d){if(angular.isString(c)){var e={id:null,title:null,priority:10,resultsPath:null,totalsPath:null,mediaTypes:null,templateUrl:null,filterQuery:null,controller:null},f=angular.extend(e,d);f.id&&(f.mediaTypes?Object.keys(f.mediaTypes.types).map(function(b){a.type(b,c)}):(a.type(c,c),f.mediaTypes=c),f.name=c,b[c]=f)}else console.log({Error:"oneSearch engine must have STRING defined name",engineParams:d})},this.$get=["$q","$parse","$filter","$rootScope","enginesTemplateFactory","SearchParams","Search",function(a,c,d,e,f,g,h){return{engines:b,searchAll:function(a){angular.extend(a,g);var e=d("orderObjectBy")(b,"priority");return angular.forEach(e,function(d,e){var f={engine:d.id};angular.extend(f,a),null!==d.filterQuery&&(f.s+=" "+d.filterQuery),d.response=h.request(f),angular.isDefined(d.resultsPath)&&(d.getResults=c(d.resultsPath)),angular.isDefined(d.totalsPath)&&(d.getTotal=c(d.totalsPath)),d.getResourceLink=c("resourceLinks"),b[e]=d}),b},getEngineTemplate:function(a){return f.get(a)},getEngineController:function(a){return angular.isDefined(a.controller)?a.controller:null}}}]}]).controller("OneSearchCtrl",["$scope","$location","$rootScope","$window","oneSearch",function(a,b,c,d,e){function f(){for(var a in e.engines)e.engines[a].response&&!e.engines[a].response.done&&e.engines[a].response.abort()}a.searchText,a.search=function(){var c=a.scoutCheckbox,e=a.searchText;if(1==c&&""!==e)ga("send","event","oneSearch","scout_checkbox_click"),window.location="http://search.ebscohost.com/login.aspx?direct=true&site=eds-live&;scope=site&type=0&custid=s4594951&groupid=main&profid=eds&mode=and&authtype=ip,guest&bquery="+e;else if(a.searchText){a.searchText=a.searchText.replace(/[&\/\\#+()$~%':*?<>{}]/g," ").trim(),a.searchText=a.searchText.substring(0,150);var g=encodeURIComponent(a.searchText);if(f(),!b.path()||b.path().indexOf("/bento")<0){var h="#/bento/"+g;switch(b.host()){case"www.lib.ua.edu":case"www.lib.ua.edu":h="//"+b.host()+h;break;case"localhost":h=b.absUrl().replace(/(#.*)/,"")+h;break;default:h="//www.lib.ua.edu"+h}d.location=h}else b.path("/bento/"+a.searchText)}},a.getRecommend=function(a){return $resource("//www.lib.ua.edu/oneSearch/api/recommend/:search").query({search:a}).$promise.then(function(a){return a})},c.$on("$routeChangeSuccess",function(b,c){c&&a.searchText!==c.params.s&&(a.searchText=c.params.s)})}]).filter("orderObjectBy",function(){return function(a,b,c){function d(a,b){return a[b]}var e=[],f={};angular.forEach(a,function(a){e.push(a)}),e.sort(function(a,c){var f=b.split(".").reduce(d,a),g=b.split(".").reduce(d,c);return f===g?0:f>g?1:-1}),c&&e.reverse();for(var g=0,h=e.length;h>g;g++){f[e[g].name]=e[g]}return f}}),function(w){"use strict";w.matchMedia=w.matchMedia||function(doc,undefined){var bool,docElem=doc.documentElement,refNode=docElem.firstElementChild||docElem.firstChild,fakeBody=doc.createElement("body"),div=doc.createElement("div");return div.id="mq-test-1",div.style.cssText="position:absolute;top:-100em",fakeBody.style.background="none",fakeBody.appendChild(div),function(q){return div.innerHTML='&shy;<style media="'+q+'"> #mq-test-1 { width: 42px; }</style>',docElem.insertBefore(fakeBody,refNode),bool=42===div.offsetWidth,docElem.removeChild(fakeBody),{matches:bool,media:q}}}(w.document)}(this),function(w){"use strict";function callMedia(){applyMedia(!0)}var respond={};w.respond=respond,respond.update=function(){};var requestQueue=[],xmlHttp=function(){var xmlhttpmethod=!1;try{xmlhttpmethod=new w.XMLHttpRequest}catch(e){xmlhttpmethod=new w.ActiveXObject("Microsoft.XMLHTTP")}return function(){return xmlhttpmethod}}(),ajax=function(url,callback){var req=xmlHttp();req&&(req.open("GET",url,!0),req.onreadystatechange=function(){4!==req.readyState||200!==req.status&&304!==req.status||callback(req.responseText)},4!==req.readyState&&req.send(null))};if(respond.ajax=ajax,respond.queue=requestQueue,respond.regex={media:/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,keyframes:/@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,urls:/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,findStyles:/@media *([^\{]+)\{([\S\s]+?)$/,only:/(only\s+)?([a-zA-Z]+)\s?/,minw:/\([\s]*min\-width\s*:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/,maxw:/\([\s]*max\-width\s*:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/},respond.mediaQueriesSupported=w.matchMedia&&null!==w.matchMedia("only all")&&w.matchMedia("only all").matches,!respond.mediaQueriesSupported){var lastCall,resizeDefer,eminpx,doc=w.document,docElem=doc.documentElement,mediastyles=[],rules=[],appendedEls=[],parsedSheets={},resizeThrottle=30,head=doc.getElementsByTagName("head")[0]||docElem,base=doc.getElementsByTagName("base")[0],links=head.getElementsByTagName("link"),getEmValue=function(){var ret,div=doc.createElement("div"),body=doc.body,originalHTMLFontSize=docElem.style.fontSize,originalBodyFontSize=body&&body.style.fontSize,fakeUsed=!1;return div.style.cssText="position:absolute;font-size:1em;width:1em",body||(body=fakeUsed=doc.createElement("body"),body.style.background="none"),docElem.style.fontSize="100%",body.style.fontSize="100%",body.appendChild(div),fakeUsed&&docElem.insertBefore(body,docElem.firstChild),ret=div.offsetWidth,fakeUsed?docElem.removeChild(body):body.removeChild(div),docElem.style.fontSize=originalHTMLFontSize,originalBodyFontSize&&(body.style.fontSize=originalBodyFontSize),ret=eminpx=parseFloat(ret)},applyMedia=function(fromResize){var name="clientWidth",docElemProp=docElem[name],currWidth="CSS1Compat"===doc.compatMode&&docElemProp||doc.body[name]||docElemProp,styleBlocks={},lastLink=links[links.length-1],now=(new Date).getTime();if(fromResize&&lastCall&&now-lastCall<resizeThrottle)return w.clearTimeout(resizeDefer),void(resizeDefer=w.setTimeout(applyMedia,resizeThrottle));lastCall=now;for(var i in mediastyles)if(mediastyles.hasOwnProperty(i)){var thisstyle=mediastyles[i],min=thisstyle.minw,max=thisstyle.maxw,minnull=null===min,maxnull=null===max,em="em";min&&(min=parseFloat(min)*(min.indexOf(em)>-1?eminpx||getEmValue():1)),max&&(max=parseFloat(max)*(max.indexOf(em)>-1?eminpx||getEmValue():1)),thisstyle.hasquery&&(minnull&&maxnull||!(minnull||currWidth>=min)||!(maxnull||currWidth<=max))||(styleBlocks[thisstyle.media]||(styleBlocks[thisstyle.media]=[]),styleBlocks[thisstyle.media].push(rules[thisstyle.rules]))}for(var j in appendedEls)appendedEls.hasOwnProperty(j)&&appendedEls[j]&&appendedEls[j].parentNode===head&&head.removeChild(appendedEls[j]);appendedEls.length=0;for(var k in styleBlocks)if(styleBlocks.hasOwnProperty(k)){var ss=doc.createElement("style"),css=styleBlocks[k].join("\n");ss.type="text/css",ss.media=k,head.insertBefore(ss,lastLink.nextSibling),ss.styleSheet?ss.styleSheet.cssText=css:ss.appendChild(doc.createTextNode(css)),appendedEls.push(ss)}},translate=function(styles,href,media){var qs=styles.replace(respond.regex.keyframes,"").match(respond.regex.media),ql=qs&&qs.length||0;href=href.substring(0,href.lastIndexOf("/"));var repUrls=function(css){return css.replace(respond.regex.urls,"$1"+href+"$2$3")},useMedia=!ql&&media;href.length&&(href+="/"),useMedia&&(ql=1);for(var i=0;i<ql;i++){var fullq,thisq,eachq,eql;useMedia?(fullq=media,rules.push(repUrls(styles))):(fullq=qs[i].match(respond.regex.findStyles)&&RegExp.$1,rules.push(RegExp.$2&&repUrls(RegExp.$2))),eachq=fullq.split(","),eql=eachq.length;for(var j=0;j<eql;j++)thisq=eachq[j],mediastyles.push({media:thisq.split("(")[0].match(respond.regex.only)&&RegExp.$2||"all",rules:rules.length-1,hasquery:thisq.indexOf("(")>-1,minw:thisq.match(respond.regex.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:thisq.match(respond.regex.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}applyMedia()},makeRequests=function(){if(requestQueue.length){var thisRequest=requestQueue.shift();ajax(thisRequest.href,function(styles){translate(styles,thisRequest.href,thisRequest.media),parsedSheets[thisRequest.href]=!0,w.setTimeout(function(){makeRequests()},0)})}},ripCSS=function(){for(var i=0;i<links.length;i++){var sheet=links[i],href=sheet.href,media=sheet.media,isCSS=sheet.rel&&"stylesheet"===sheet.rel.toLowerCase();href&&isCSS&&!parsedSheets[href]&&(sheet.styleSheet&&sheet.styleSheet.rawCssText?(translate(sheet.styleSheet.rawCssText,href,media),parsedSheets[href]=!0):(/^([a-zA-Z:]*\/\/)/.test(href)||base)&&href.replace(RegExp.$1,"").split("/")[0]!==w.location.host||("//"===href.substring(0,2)&&(href=w.location.protocol+href),requestQueue.push({href:href,media:media})))}makeRequests()};ripCSS(),respond.update=ripCSS,respond.getEmValue=getEmValue,w.addEventListener?w.addEventListener("resize",callMedia,!1):w.attachEvent&&w.attachEvent("onresize",callMedia)}}(this),function(e,t){"object"==typeof exports?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define(["angular"],t):t(e.angular)}(this,function(angular){return angular.module("ngMap",[]),function(){"use strict";var e,t=function(t,n,o,a,r,i,s,p,c){e=i;var u=this,l=r.startSymbol(),g=r.endSymbol();u.mapOptions,u.mapEvents,u.eventListeners,u.addObject=function(e,t){if(u.map){u.map[e]=u.map[e]||{};var n=Object.keys(u.map[e]).length;u.map[e][t.id||n]=t,u.map instanceof google.maps.Map&&("infoWindows"!=e&&t.setMap&&t.setMap&&t.setMap(u.map),t.centered&&t.position&&u.map.setCenter(t.position),"markers"==e&&u.objectChanged("markers"),"customMarkers"==e&&u.objectChanged("customMarkers"))}},u.deleteObject=function(e,t){if(t.map){var n=t.map[e];for(var o in n)n[o]===t&&(google.maps.event.clearInstanceListeners(t),delete n[o]);t.map&&t.setMap&&t.setMap(null),"markers"==e&&u.objectChanged("markers"),"customMarkers"==e&&u.objectChanged("customMarkers")}},u.observeAttrSetObj=function(t,n,o){if(n.noWatcher)return!1;for(var a=e.getAttrsToObserve(t),r=0;r<a.length;r++){var i=a[r];n.$observe(i,s.observeAndSet(i,o))}},u.zoomToIncludeMarkers=function(){if(null!=u.map.markers&&Object.keys(u.map.markers).length>0||null!=u.map.customMarkers&&Object.keys(u.map.customMarkers).length>0){var e=new google.maps.LatLngBounds;for(var t in u.map.markers)e.extend(u.map.markers[t].getPosition());for(var n in u.map.customMarkers)e.extend(u.map.customMarkers[n].getPosition());u.mapOptions.maximumZoom&&(u.enableMaximumZoomCheck=!0),u.map.fitBounds(e)}},u.objectChanged=function(e){!u.map||"markers"!=e&&"customMarkers"!=e||"auto"!=u.map.zoomToIncludeMarkers||u.zoomToIncludeMarkers()},u.initializeMap=function(){var r=u.mapOptions,i=u.mapEvents,m=u.map;if(u.map=p.getMapInstance(n[0]),s.setStyle(n[0]),m){var f=e.filter(o),v=e.getOptions(f),y=e.getControlOptions(f);r=angular.extend(v,y);for(var h in m){var b=m[h];if("object"==typeof b)for(var M in b)u.addObject(h,b[M])}u.map.showInfoWindow=u.showInfoWindow,u.map.hideInfoWindow=u.hideInfoWindow}r.zoom=r.zoom||15;var O=r.center,w=new RegExp(c(l)+".*"+c(g));if(!r.center||"string"==typeof O&&O.match(w))r.center=new google.maps.LatLng(0,0);else if("string"==typeof O&&O.match(/^[0-9.-]*,[0-9.-]*$/)){var L=parseFloat(O.split(",")[0]),k=parseFloat(O.split(",")[1]);r.center=new google.maps.LatLng(L,k)}else if(!(O instanceof google.maps.LatLng)){var $=r.center;delete r.center,s.getGeoLocation($,r.geoLocationOptions).then(function(e){u.map.setCenter(e);var n=r.geoCallback;n&&a(n)(t)},function(){r.geoFallbackCenter&&u.map.setCenter(r.geoFallbackCenter)})}u.map.setOptions(r);for(var C in i){var j=i[C],A=google.maps.event.addListener(u.map,C,j);u.eventListeners[C]=A}u.observeAttrSetObj(d,o,u.map),u.singleInfoWindow=r.singleInfoWindow,google.maps.event.trigger(u.map,"resize"),google.maps.event.addListenerOnce(u.map,"idle",function(){s.addMap(u),r.zoomToIncludeMarkers&&u.zoomToIncludeMarkers(),t.map=u.map,t.$emit("mapInitialized",u.map),o.mapInitialized&&a(o.mapInitialized)(t,{map:u.map})}),r.zoomToIncludeMarkers&&r.maximumZoom&&google.maps.event.addListener(u.map,"zoom_changed",function(){1==u.enableMaximumZoomCheck&&(u.enableMaximumZoomCheck=!1,google.maps.event.addListenerOnce(u.map,"bounds_changed",function(){u.map.setZoom(Math.min(r.maximumZoom,u.map.getZoom()))}))})},t.google=google;var d=e.orgAttributes(n),m=e.filter(o),f=e.getOptions(m,{scope:t}),v=e.getControlOptions(m),y=angular.extend(f,v),h=e.getEvents(t,m);if(Object.keys(h).length,u.mapOptions=y,u.mapEvents=h,u.eventListeners={},f.lazyInit){if(o.id&&0===o.id.indexOf(l,0)&&-1!==o.id.indexOf(g,o.id.length-g.length))var b=o.id.slice(2,-2),M=a(b)(t);else var M=o.id;u.map={id:M},s.addMap(u)}else u.initializeMap();f.triggerResize&&google.maps.event.trigger(u.map,"resize"),n.bind("$destroy",function(){p.returnMapInstance(u.map),s.deleteMap(u)})};t.$inject=["$scope","$element","$attrs","$parse","$interpolate","Attr2MapOptions","NgMap","NgMapPool","escapeRegexpFilter"],angular.module("ngMap").controller("__MapController",t)}(),function(){"use strict";var e,t=function(t,o,a,r){r=r[0]||r[1];var i=e.orgAttributes(o),s=e.filter(a),p=e.getOptions(s,{scope:t}),c=e.getEvents(t,s),u=n(p,c);r.addObject("bicyclingLayers",u),r.observeAttrSetObj(i,a,u),o.bind("$destroy",function(){r.deleteObject("bicyclingLayers",u)})},n=function(e,t){var n=new google.maps.BicyclingLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n},o=function(n){return e=n,{restrict:"E",require:["?^map","?^ngMap"],link:t}};o.$inject=["Attr2MapOptions"],angular.module("ngMap").directive("bicyclingLayer",o)}(),function(){"use strict";var e,t,n=function(t,n,o,a,r){a=a[0]||a[1];var i=e.filter(o),s=e.getOptions(i,{scope:t}),p=e.getEvents(t,i),c=n[0].parentElement.removeChild(n[0]),u=r();angular.element(c).append(u);for(var l in p)google.maps.event.addDomListener(c,l,p[l]);a.addObject("customControls",c);var g=s.position;a.map.controls[google.maps.ControlPosition[g]].push(c),n.bind("$destroy",function(){a.deleteObject("customControls",c)})},o=function(o,a){return e=o,t=a,{restrict:"E",require:["?^map","?^ngMap"],link:n,transclude:!0}};o.$inject=["Attr2MapOptions","NgMap"],angular.module("ngMap").directive("customControl",o)}(),function(){"use strict";var e,t,n,o,a=function(e){e=e||{},this.el=document.createElement("div"),this.el.style.display="inline-block",this.el.style.visibility="hidden",this.visible=!0;for(var t in e)this[t]=e[t]},r=function(){a.prototype=new google.maps.OverlayView,a.prototype.setContent=function(e,t){this.el.innerHTML=e,this.el.style.position="absolute",t&&n(angular.element(this.el).contents())(t)},a.prototype.getDraggable=function(){return this.draggable},a.prototype.setDraggable=function(e){this.draggable=e},a.prototype.getPosition=function(){return this.position},a.prototype.setPosition=function(e){e&&(this.position=e);var n=this;if(this.getProjection()&&"function"==typeof this.position.lng){var o=function(){if(n.getProjection()){var e=n.getProjection().fromLatLngToDivPixel(n.position),t=Math.round(e.x-n.el.offsetWidth/2),o=Math.round(e.y-n.el.offsetHeight-10);n.el.style.left=t+"px",n.el.style.top=o+"px",n.el.style.visibility="visible"}};n.el.offsetWidth&&n.el.offsetHeight?o():t(o,300)}},
a.prototype.setZIndex=function(e){e&&(this.zIndex=e),this.el.style.zIndex=this.zIndex},a.prototype.getVisible=function(){return this.visible},a.prototype.setVisible=function(e){this.el.style.display=e?"inline-block":"none",this.visible=e},a.prototype.addClass=function(e){var t=this.el.className.trim().split(" ");-1==t.indexOf(e)&&t.push(e),this.el.className=t.join(" ")},a.prototype.removeClass=function(e){var t=this.el.className.split(" "),n=t.indexOf(e);n>-1&&t.splice(n,1),this.el.className=t.join(" ")},a.prototype.onAdd=function(){this.getPanes().overlayMouseTarget.appendChild(this.el)},a.prototype.draw=function(){this.setPosition(),this.setZIndex(this.zIndex),this.setVisible(this.visible)},a.prototype.onRemove=function(){this.el.parentNode.removeChild(this.el)}},i=function(n,r){return function(i,s,p,c){c=c[0]||c[1];var u=e.orgAttributes(s),l=e.filter(p),g=e.getOptions(l,{scope:i}),d=e.getEvents(i,l);s[0].style.display="none";var m=new a(g);t(function(){i.$watch("["+r.join(",")+"]",function(){m.setContent(n,i)},!0),m.setContent(s[0].innerHTML,i);var e=s[0].firstElementChild.className;m.addClass("custom-marker"),m.addClass(e),g.position instanceof google.maps.LatLng||o.getGeoLocation(g.position).then(function(e){m.setPosition(e)})});for(var f in d)google.maps.event.addDomListener(m.el,f,d[f]);c.addObject("customMarkers",m),c.observeAttrSetObj(u,p,m),s.bind("$destroy",function(){c.deleteObject("customMarkers",m)})}},s=function(a,s,p,c,u,l){e=c,t=a,n=s,o=u;var g=p.startSymbol(),d=p.endSymbol(),m=new RegExp(l(g)+"([^"+d.substring(0,1)+"]+)"+l(d),"g");return{restrict:"E",require:["?^map","?^ngMap"],compile:function(e){r(),e[0].style.display="none";var t=e.html(),n=t.match(m),o=[];return(n||[]).forEach(function(e){var t=e.replace(g,"").replace(d,"");-1==e.indexOf("::")&&-1==e.indexOf("this.")&&-1==o.indexOf(t)&&o.push(e.replace(g,"").replace(d,""))}),i(t,o)}}};s.$inject=["$timeout","$compile","$interpolate","Attr2MapOptions","NgMap","escapeRegexpFilter"],angular.module("ngMap").directive("customMarker",s)}(),function(){"use strict";var e,t,n,o=function(e,t){e.panel&&(e.panel=document.getElementById(e.panel)||document.querySelector(e.panel));var n=new google.maps.DirectionsRenderer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n},a=function(e,o){var a=new google.maps.DirectionsService,r=o;r.travelMode=r.travelMode||"DRIVING";var i=["origin","destination","travelMode","transitOptions","unitSystem","durationInTraffic","waypoints","optimizeWaypoints","provideRouteAlternatives","avoidHighways","avoidTolls","region"];for(var s in r)-1===i.indexOf(s)&&delete r[s];r.waypoints&&("[]"==r.waypoints||""===r.waypoints)&&delete r.waypoints;var p=function(n){a.route(n,function(n,o){o==google.maps.DirectionsStatus.OK&&t(function(){e.setDirections(n)})})};r.origin&&r.destination&&("current-location"==r.origin?n.getCurrentPosition().then(function(e){r.origin=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),p(r)}):"current-location"==r.destination?n.getCurrentPosition().then(function(e){r.destination=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),p(r)}):p(r))},r=function(r,i,s,p){var c=r;return e=p,t=i,n=s,{restrict:"E",require:["?^map","?^ngMap"],link:function(n,r,i,s){s=s[0]||s[1];var p=c.orgAttributes(r),u=c.filter(i),l=c.getOptions(u,{scope:n}),g=c.getEvents(n,u),d=c.getAttrsToObserve(p),m=o(l,g);s.addObject("directionsRenderers",m),d.forEach(function(e){!function(e){i.$observe(e,function(n){if("panel"==e)t(function(){var e=document.getElementById(n)||document.querySelector(n);e&&m.setPanel(e)});else if(l[e]!==n){var o=c.toOptionValue(n,{key:e});l[e]=o,a(m,l)}})}(e)}),e.getMap().then(function(){a(m,l)}),r.bind("$destroy",function(){s.deleteObject("directionsRenderers",m)})}}};r.$inject=["Attr2MapOptions","$timeout","NavigatorGeolocation","NgMap"],angular.module("ngMap").directive("directions",r)}(),function(){"use strict";angular.module("ngMap").directive("drawingManager",["Attr2MapOptions",function(e){var t=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,n,o,a){a=a[0]||a[1];var r=t.filter(o),i=t.getOptions(r,{scope:e}),s=t.getControlOptions(r),p=t.getEvents(e,r),c=new google.maps.drawing.DrawingManager({drawingMode:i.drawingmode,drawingControl:i.drawingcontrol,drawingControlOptions:s.drawingControlOptions,circleOptions:i.circleoptions,markerOptions:i.markeroptions,polygonOptions:i.polygonoptions,polylineOptions:i.polylineoptions,rectangleOptions:i.rectangleoptions});o.$observe("drawingControlOptions",function(e){c.drawingControlOptions=t.getControlOptions({drawingControlOptions:e}).drawingControlOptions,c.setDrawingMode(null),c.setMap(a.map)});for(var u in p)google.maps.event.addListener(c,u,p[u]);a.addObject("mapDrawingManager",c),n.bind("$destroy",function(){a.deleteObject("mapDrawingManager",c)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("dynamicMapsEngineLayer",["Attr2MapOptions",function(e){var t=e,n=function(e,t){var n=new google.maps.visualization.DynamicMapsEngineLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,o,a,r){r=r[0]||r[1];var i=t.filter(a),s=t.getOptions(i,{scope:e}),p=t.getEvents(e,i,p),c=n(s,p);r.addObject("mapsEngineLayers",c)}}}])}(),function(){"use strict";angular.module("ngMap").directive("fusionTablesLayer",["Attr2MapOptions",function(e){var t=e,n=function(e,t){var n=new google.maps.FusionTablesLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,o,a,r){r=r[0]||r[1];var i=t.filter(a),s=t.getOptions(i,{scope:e}),p=t.getEvents(e,i,p),c=n(s,p);r.addObject("fusionTablesLayers",c),o.bind("$destroy",function(){r.deleteObject("fusionTablesLayers",c)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("heatmapLayer",["Attr2MapOptions","$window",function(e,t){var n=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,o,a,r){r=r[0]||r[1];var i=n.filter(a),s=n.getOptions(i,{scope:e});if(s.data=t[a.data]||e[a.data],!(s.data instanceof Array))throw"invalid heatmap data";s.data=new google.maps.MVCArray(s.data);var p=new google.maps.visualization.HeatmapLayer(s);n.getEvents(e,i),r.addObject("heatmapLayers",p)}}}])}(),function(){"use strict";var e=function(e,t,n,o,a,r,i){var s=e,p=function(e,r,i){var s;!e.position||e.position instanceof google.maps.LatLng||delete e.position,s=new google.maps.InfoWindow(e);for(var p in r)p&&google.maps.event.addListener(s,p,r[p]);var c=n(function(e){angular.isString(i)?o(i).then(function(t){e(angular.element(t).wrap("<div>").parent())},function(e){throw"info-window template request failed: "+e}):e(i)}).then(function(e){var t=e.html().trim();if(1!=angular.element(t).length)throw"info-window working as a template must have a container";s.__template=t.replace(/\s?ng-non-bindable[='"]+/,"")});return s.__open=function(e,n,o){c.then(function(){a(function(){o&&(n.anchor=o);var a=t(s.__template)(n);s.setContent(a[0]),n.$apply(),o&&o.getPosition?s.open(e,o):o&&o instanceof google.maps.LatLng?(s.open(e),s.setPosition(o)):s.open(e),s.content.parentElement.parentElement.parentElement.className="ng-map-info-window"})})},s};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,t,n,o){o=o[0]||o[1],t.css("display","none");var a,c=s.orgAttributes(t),u=s.filter(n),l=s.getOptions(u,{scope:e}),g=s.getEvents(e,u),d=p(l,g,l.template||t);!l.position||l.position instanceof google.maps.LatLng||(a=l.position),a&&i.getGeoLocation(a).then(function(t){d.setPosition(t),d.__open(o.map,e,t);var a=n.geoCallback;a&&r(a)(e)}),o.addObject("infoWindows",d),o.observeAttrSetObj(c,n,d),o.showInfoWindow=o.map.showInfoWindow=o.showInfoWindow||function(t,n,a){var r="string"==typeof t?t:n,i="string"==typeof t?n:a;if("string"==typeof i)if(void 0!==o.map.markers&&void 0!==o.map.markers[i])i=o.map.markers[i];else{if(void 0===o.map.customMarkers||void 0===o.map.customMarkers[i])throw new Error("Cant open info window for id "+i+". Marker or CustomMarker is not defined");i=o.map.customMarkers[i]}var s=o.map.infoWindows[r],p=i||(this.getPosition?this:null);s.__open(o.map,e,p),o.singleInfoWindow&&(o.lastInfoWindow&&e.hideInfoWindow(o.lastInfoWindow),o.lastInfoWindow=r)},o.hideInfoWindow=o.map.hideInfoWindow=o.hideInfoWindow||function(e,t){var n="string"==typeof e?e:t;o.map.infoWindows[n].close()},e.showInfoWindow=o.map.showInfoWindow,e.hideInfoWindow=o.map.hideInfoWindow;var m=d.mapId?{id:d.mapId}:0;i.getMap(m).then(function(t){if(d.visible&&d.__open(t,e),d.visibleOnMarker){var n=d.visibleOnMarker;d.__open(t,e,t.markers[n])}})}}};e.$inject=["Attr2MapOptions","$compile","$q","$templateRequest","$timeout","$parse","NgMap"],angular.module("ngMap").directive("infoWindow",e)}(),function(){"use strict";angular.module("ngMap").directive("kmlLayer",["Attr2MapOptions",function(e){var t=e,n=function(e,t){var n=new google.maps.KmlLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,o,a,r){r=r[0]||r[1];var i=t.orgAttributes(o),s=t.filter(a),p=t.getOptions(s,{scope:e}),c=t.getEvents(e,s),u=n(p,c);r.addObject("kmlLayers",u),r.observeAttrSetObj(i,a,u),o.bind("$destroy",function(){r.deleteObject("kmlLayers",u)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("mapData",["Attr2MapOptions","NgMap",function(e,t){var n=e;return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,o,a,r){r=r[0]||r[1];var i=n.filter(a),s=n.getOptions(i,{scope:e}),p=n.getEvents(e,i,p);t.getMap(r.map.id).then(function(t){for(var n in s){var o=s[n];"function"==typeof e[o]?t.data[n](e[o]):t.data[n](o)}for(var a in p)t.data.addListener(a,p[a])})}}}])}(),function(){"use strict";var e,t,n,o=[],a=[],r=function(n,r,i){var s=i.mapLazyLoadParams||i.mapLazyLoad;if(void 0===window.google||void 0===window.google.maps){a.push({scope:n,element:r,savedHtml:o[a.length]}),window.lazyLoadCallback=function(){e(function(){a.forEach(function(e){e.element.html(e.savedHtml),t(e.element.contents())(e.scope)})},100)};var p=document.createElement("script");p.src=s+(s.indexOf("?")>-1?"&":"?")+"callback=lazyLoadCallback",document.querySelector('script[src="'+p.src+'"]')||document.body.appendChild(p)}else r.html(o),t(r.contents())(n)},i=function(e,t){return t.mapLazyLoad,o.push(e.html()),n=t.mapLazyLoad,(void 0===window.google||void 0===window.google.maps)&&(e.html(""),{pre:r})},s=function(n,o){return t=n,e=o,{compile:i}};s.$inject=["$compile","$timeout"],angular.module("ngMap").directive("mapLazyLoad",s)}(),function(){"use strict";angular.module("ngMap").directive("mapType",["$parse","NgMap",function(e,t){return{restrict:"E",require:["?^map","?^ngMap"],link:function(n,o,a,r){r=r[0]||r[1];var i,s=a.name;if(!s)throw"invalid map-type name";if(!(i=e(a.object)(n)))throw"invalid map-type object";t.getMap().then(function(e){e.mapTypes.set(s,i)}),r.addObject("mapTypes",i)}}}])}(),function(){"use strict";var e=function(){return{restrict:"AE",controller:"__MapController",controllerAs:"ngmap"}};angular.module("ngMap").directive("map",[e]),angular.module("ngMap").directive("ngMap",[e])}(),function(){"use strict";angular.module("ngMap").directive("mapsEngineLayer",["Attr2MapOptions",function(e){var t=e,n=function(e,t){var n=new google.maps.visualization.MapsEngineLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,o,a,r){r=r[0]||r[1];var i=t.filter(a),s=t.getOptions(i,{scope:e}),p=t.getEvents(e,i,p),c=n(s,p);r.addObject("mapsEngineLayers",c)}}}])}(),function(){"use strict";var e,t,n,o=function(e,t){var o;if(n.defaultOptions.marker)for(var a in n.defaultOptions.marker)void 0===e[a]&&(e[a]=n.defaultOptions.marker[a]);e.position instanceof google.maps.LatLng||(e.position=new google.maps.LatLng(0,0)),o=new google.maps.Marker(e),Object.keys(t).length;for(var r in t)r&&google.maps.event.addListener(o,r,t[r]);return o},a=function(a,r,i,s){s=s[0]||s[1];var p,c=e.orgAttributes(r),u=e.filter(i),l=e.getOptions(u,a,{scope:a}),g=e.getEvents(a,u);l.position instanceof google.maps.LatLng||(p=l.position);var d=o(l,g);s.addObject("markers",d),p&&n.getGeoLocation(p).then(function(e){d.setPosition(e),l.centered&&d.map.setCenter(e);var n=i.geoCallback;n&&t(n)(a)}),s.observeAttrSetObj(c,i,d),r.bind("$destroy",function(){s.deleteObject("markers",d)})},r=function(o,r,i){return e=o,t=r,n=i,{restrict:"E",require:["^?map","?^ngMap"],link:a}};r.$inject=["Attr2MapOptions","$parse","NgMap"],angular.module("ngMap").directive("marker",r)}(),function(){"use strict";angular.module("ngMap").directive("overlayMapType",["NgMap",function(e){return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,n,o,a){a=a[0]||a[1];var r=o.initMethod||"insertAt",i=t[o.object];e.getMap().then(function(e){if("insertAt"==r){var t=parseInt(o.index,10);e.overlayMapTypes.insertAt(t,i)}else"push"==r&&e.overlayMapTypes.push(i)}),a.addObject("overlayMapTypes",i)}}}])}(),function(){"use strict";var e=function(e,t){var n=e;return{restrict:"A",require:"?ngModel",link:function(e,o,a,r){if("false"===a.placesAutoComplete)return!1;var i=n.filter(a),s=n.getOptions(i,{scope:e}),p=n.getEvents(e,i),c=new google.maps.places.Autocomplete(o[0],s);for(var u in p)google.maps.event.addListener(c,u,p[u]);var l=function(){t(function(){r&&r.$setViewValue(o.val())},100)};google.maps.event.addListener(c,"place_changed",l),o[0].addEventListener("change",l),a.$observe("types",function(e){if(e){var t=n.toOptionValue(e,{key:"types"});c.setTypes(t)}}),a.$observe("componentRestrictions",function(t){t&&c.setComponentRestrictions(e.$eval(t))})}}};e.$inject=["Attr2MapOptions","$timeout"],angular.module("ngMap").directive("placesAutoComplete",e)}(),function(){"use strict";var e=function(e,t){var n,o=e.name;switch(delete e.name,o){case"circle":e.center instanceof google.maps.LatLng||(e.center=new google.maps.LatLng(0,0)),n=new google.maps.Circle(e);break;case"polygon":n=new google.maps.Polygon(e);break;case"polyline":n=new google.maps.Polyline(e);break;case"rectangle":n=new google.maps.Rectangle(e);break;case"groundOverlay":case"image":var a=e.url,r={opacity:e.opacity,clickable:e.clickable,id:e.id};n=new google.maps.GroundOverlay(a,e.bounds,r)}for(var i in t)t[i]&&google.maps.event.addListener(n,i,t[i]);return n},t=function(t,n,o){var a=t;return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,r,i,s){s=s[0]||s[1];var p,c,u=a.orgAttributes(r),l=a.filter(i),g=a.getOptions(l,{scope:t}),d=a.getEvents(t,l);c=g.name,g.center instanceof google.maps.LatLng||(p=g.center);var m=e(g,d);s.addObject("shapes",m),p&&"circle"==c&&o.getGeoLocation(p).then(function(e){m.setCenter(e),m.centered&&m.map.setCenter(e);var o=i.geoCallback;o&&n(o)(t)}),s.observeAttrSetObj(u,i,m),r.bind("$destroy",function(){s.deleteObject("shapes",m)})}}};t.$inject=["Attr2MapOptions","$parse","NgMap"],angular.module("ngMap").directive("shape",t)}(),function(){"use strict";var e=function(e,t){var n=e,o=function(e,t,n){var o,a;t.container&&(a=document.getElementById(t.container),a=a||document.querySelector(t.container)),a?o=new google.maps.StreetViewPanorama(a,t):(o=e.getStreetView(),o.setOptions(t));for(var r in n)r&&google.maps.event.addListener(o,r,n[r]);return o};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,a,r){var i=n.filter(r),s=n.getOptions(i,{scope:e}),p=n.getControlOptions(i),c=angular.extend(s,p),u=n.getEvents(e,i);t.getMap().then(function(e){var t=o(e,c,u);e.setStreetView(t),!t.getPosition()&&t.setPosition(e.getCenter()),google.maps.event.addListener(t,"position_changed",function(){t.getPosition()!==e.getCenter()&&e.setCenter(t.getPosition())});var n=google.maps.event.addListener(e,"center_changed",function(){t.setPosition(e.getCenter()),google.maps.event.removeListener(n)})})}}};e.$inject=["Attr2MapOptions","NgMap"],angular.module("ngMap").directive("streetViewPanorama",e)}(),function(){"use strict";angular.module("ngMap").directive("trafficLayer",["Attr2MapOptions",function(e){var t=e,n=function(e,t){var n=new google.maps.TrafficLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,o,a,r){r=r[0]||r[1];var i=t.orgAttributes(o),s=t.filter(a),p=t.getOptions(s,{scope:e}),c=t.getEvents(e,s),u=n(p,c);r.addObject("trafficLayers",u),r.observeAttrSetObj(i,a,u),o.bind("$destroy",function(){r.deleteObject("trafficLayers",u)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("transitLayer",["Attr2MapOptions",function(e){var t=e,n=function(e,t){var n=new google.maps.TransitLayer(e);for(var o in t)google.maps.event.addListener(n,o,t[o]);return n};return{restrict:"E",require:["?^map","?^ngMap"],link:function(e,o,a,r){r=r[0]||r[1];var i=t.orgAttributes(o),s=t.filter(a),p=t.getOptions(s,{scope:e}),c=t.getEvents(e,s),u=n(p,c);r.addObject("transitLayers",u),r.observeAttrSetObj(i,a,u),o.bind("$destroy",function(){r.deleteObject("transitLayers",u)})}}}])}(),function(){"use strict";var e=/([\:\-\_]+(.))/g,t=/^moz([A-Z])/,n=function(){return function(n){return n.replace(e,function(e,t,n,o){return o?n.toUpperCase():n}).replace(t,"Moz$1")}};angular.module("ngMap").filter("camelCase",n)}(),function(){"use strict";var e=function(){return function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}};angular.module("ngMap").filter("escapeRegexp",e)}(),function(){"use strict";var e=function(){return function(e){try{return JSON.parse(e),e}catch(t){return e.replace(/([\$\w]+)\s*:/g,function(e,t){return'"'+t+'":'}).replace(/'([^']+)'/g,function(e,t){return'"'+t+'"'}).replace(/''/g,'""')}}};angular.module("ngMap").filter("jsonize",e)}(),function(){"use strict";var isoDateRE=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/,Attr2MapOptions=function($parse,$timeout,$log,$interpolate,NavigatorGeolocation,GeoCoder,camelCaseFilter,jsonizeFilter,escapeRegExp){var exprStartSymbol=$interpolate.startSymbol(),exprEndSymbol=$interpolate.endSymbol(),orgAttributes=function(e){e.length>0&&(e=e[0]);for(var t={},n=0;n<e.attributes.length;n++){var o=e.attributes[n];t[o.name]=o.value}return t},getJSON=function(e){var t=/^[\+\-]?[0-9\.]+,[ ]*\ ?[\+\-]?[0-9\.]+$/;return e.match(t)&&(e="["+e+"]"),JSON.parse(jsonizeFilter(e))},getLatLng=function(e){var t=e;if(e[0].constructor==Array)if(e[0][0].constructor==Array&&2==e[0][0].length||e[0][0].constructor==Object){for(var n,o=[],a=0;a<e.length;a++)n=e[a].map(function(e){return new google.maps.LatLng(e[0],e[1])}),o.push(n);t=o}else t=e.map(function(e){return new google.maps.LatLng(e[0],e[1])});else!isNaN(parseFloat(e[0]))&&isFinite(e[0])&&(t=new google.maps.LatLng(t[0],t[1]));return t},toOptionValue=function(input,options){var output;try{output=getNumber(input)}catch(err){try{var output=getJSON(input);if(output instanceof Array)output=output[0].constructor==Object?output:output[0]instanceof Array&&output[0][0].constructor==Object?output:getLatLng(output);else if(output===Object(output)){var newOptions=options;newOptions.doNotConverStringToNumber=!0,output=getOptions(output,newOptions)}}catch(err2){if(input.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{var exp="new google.maps."+input;output=eval(exp)}catch(e){output=input}else if(input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/))try{var matches=input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/);output=google.maps[matches[1]][matches[2]]}catch(e){output=input}else if(input.match(/^[A-Z]+$/))try{var capitalizedKey=options.key.charAt(0).toUpperCase()+options.key.slice(1);options.key.match(/temperatureUnit|windSpeedUnit|labelColor/)?(capitalizedKey=capitalizedKey.replace(/s$/,""),output=google.maps.weather[capitalizedKey][input]):output=google.maps[capitalizedKey][input]}catch(e){output=input}else if(input.match(isoDateRE))try{output=new Date(input)}catch(e){output=input}else if(input.match(new RegExp("^"+escapeRegExp(exprStartSymbol)))&&options.scope)try{var expr=input.replace(new RegExp(escapeRegExp(exprStartSymbol)),"").replace(new RegExp(escapeRegExp(exprEndSymbol),"g"),"");output=options.scope.$eval(expr)}catch(err){output=input}else output=input}}if(("center"==options.key||"position"==options.key)&&output instanceof Array&&(output=new google.maps.LatLng(output[0],output[1])),"bounds"==options.key&&output instanceof Array&&(output=new google.maps.LatLngBounds(output[0],output[1])),"icons"==options.key&&output instanceof Array)for(var i=0;i<output.length;i++){var el=output[i];el.icon.path.match(/^[A-Z_]+$/)&&(el.icon.path=google.maps.SymbolPath[el.icon.path])}if("icon"==options.key&&output instanceof Object){(""+output.path).match(/^[A-Z_]+$/)&&(output.path=google.maps.SymbolPath[output.path]);for(var key in output){var arr=output[key];"anchor"==key||"origin"==key||"labelOrigin"==key?output[key]=new google.maps.Point(arr[0],arr[1]):("size"==key||"scaledSize"==key)&&(output[key]=new google.maps.Size(arr[0],arr[1]))}}return output},getAttrsToObserve=function(e){var t=[],n=new RegExp(escapeRegExp(exprStartSymbol)+".*"+escapeRegExp(exprEndSymbol),"g");if(!e.noWatcher)for(var o in e){var a=e[o];a&&a.match(n)&&t.push(camelCaseFilter(o))}return t},filter=function(e){var t={};for(var n in e)n.match(/^\$/)||n.match(/^ng[A-Z]/)||(t[n]=e[n]);return t},getOptions=function(e,t){t=t||{};var n={};for(var o in e)if(e[o]||0===e[o]){if(o.match(/^on[A-Z]/))continue;if(o.match(/ControlOptions$/))continue;n[o]="string"!=typeof e[o]?e[o]:t.doNotConverStringToNumber&&e[o].match(/^[0-9]+$/)?e[o]:toOptionValue(e[o],{key:o,scope:t.scope})}return n},getEvents=function(e,t){var n={},o=function(e){return"_"+e.toLowerCase()},a=function(t){var n=t.match(/([^\(]+)\(([^\)]*)\)/),o=n[1],a=n[2].replace(/event[ ,]*/,""),r=$parse("["+a+"]");return function(t){function n(e,t){return e[t]}var a=r(e),i=o.split(".").reduce(n,e);i&&i.apply(this,[t].concat(a)),$timeout(function(){e.$apply()})}};for(var r in t)if(t[r]){if(!r.match(/^on[A-Z]/))continue;var i=r.replace(/^on/,"");i=i.charAt(0).toLowerCase()+i.slice(1),i=i.replace(/([A-Z])/g,o);var s=t[r];n[i]=new a(s)}return n},getControlOptions=function(e){var t={};if("object"!=typeof e)return!1;for(var n in e)if(e[n]){if(!n.match(/(.*)ControlOptions$/))continue;var o=e[n],a=o.replace(/'/g,'"');a=a.replace(/([^"]+)|("[^"]+")/g,function(e,t,n){return t?t.replace(/([a-zA-Z0-9]+?):/g,'"$1":'):n});try{var r=JSON.parse(a);for(var i in r)if(r[i]){var s=r[i];if("string"==typeof s?s=s.toUpperCase():"mapTypeIds"===i&&(s=s.map(function(e){return e.match(/^[A-Z]+$/)?google.maps.MapTypeId[e.toUpperCase()]:e})),"style"===i){var p=n.charAt(0).toUpperCase()+n.slice(1),c=p.replace(/Options$/,"")+"Style";r[i]=google.maps[c][s]}else r[i]="position"===i?google.maps.ControlPosition[s]:s}t[n]=r}catch(u){}}return t};return{filter:filter,getOptions:getOptions,getEvents:getEvents,getControlOptions:getControlOptions,toOptionValue:toOptionValue,getAttrsToObserve:getAttrsToObserve,orgAttributes:orgAttributes}};Attr2MapOptions.$inject=["$parse","$timeout","$log","$interpolate","NavigatorGeolocation","GeoCoder","camelCaseFilter","jsonizeFilter","escapeRegexpFilter"],angular.module("ngMap").service("Attr2MapOptions",Attr2MapOptions)}(),function(){"use strict";var e,t=function(t){var n=e.defer();return(new google.maps.Geocoder).geocode(t,function(e,t){t==google.maps.GeocoderStatus.OK?n.resolve(e):n.reject(t)}),n.promise},n=function(n){return e=n,{geocode:t}};n.$inject=["$q"],angular.module("ngMap").service("GeoCoder",n)}(),function(){"use strict";var e,t,n=function(n,o){return e=n,t=o,{load:function(n){var o=e.defer();if(void 0===window.google||void 0===window.google.maps){window.lazyLoadCallback=function(){t(function(){o.resolve(window.google)},100)};var a=document.createElement("script");a.src=n+(n.indexOf("?")>-1?"&":"?")+"callback=lazyLoadCallback",document.querySelector('script[src="'+a.src+'"]')||document.body.appendChild(a)}else o.resolve(window.google);return o.promise}}};n.$inject=["$q","$timeout"],angular.module("ngMap").service("GoogleMapsApi",n)}(),function(){"use strict";var e,t=function(t){var n=e.defer();return navigator.geolocation?(void 0===t?t={timeout:5e3}:void 0===t.timeout&&(t.timeout=5e3),navigator.geolocation.getCurrentPosition(function(e){n.resolve(e)},function(e){n.reject(e)},t)):n.reject("Browser Geolocation service failed."),n.promise},n=function(n){return e=n,{getCurrentPosition:t}};n.$inject=["$q"],angular.module("ngMap").service("NavigatorGeolocation",n)}(),function(){"use strict";var e,t,n,o=[],a=function(n){var a=t.createElement("div");a.style.width="100%",a.style.height="100%",n.appendChild(a);var r=new e.google.maps.Map(a,{});return o.push(r),r},r=function(e,t){for(var n,a=0;a<o.length;a++){var r=o[a];if(r.id==t&&!r.inUse){var i=r.getDiv();e.appendChild(i),n=r;break}}return n},i=function(e){for(var t,n=0;n<o.length;n++){var a=o[n];if(!a.id&&!a.inUse){var r=a.getDiv();e.appendChild(r),t=a;break}}return t},s=function(e){var t=r(e,e.id)||i(e);return t?n(function(){google.maps.event.trigger(t,"idle")},100):t=a(e),t.inUse=!0,t},p=function(e){e.inUse=!1},c=function(){for(var e=0;e<o.length;e++)o[e]=null;o=[]},u=function(e){for(var t=0;t<o.length;t++)null!==o[t]&&o[t].id==e&&(o[t]=null,o.splice(t,1))},l=function(a,r,i){return t=a[0],e=r,n=i,{mapInstances:o,resetMapInstances:c,getMapInstance:s,returnMapInstance:p,deleteMapInstance:u}};l.$inject=["$document","$window","$timeout"],angular.module("ngMap").factory("NgMapPool",l)}(),function(){"use strict";var e,t,n,o,a,r,i,s,p={},c=function(n,o){var a;return n.currentStyle?a=n.currentStyle[o]:e.getComputedStyle&&(a=t.defaultView.getComputedStyle(n,null).getPropertyValue(o)),a},u=function(e){var t=p[e||0];return t.map instanceof google.maps.Map?void 0:(t.initializeMap(),t.map)},l=function(t,o){function a(n){var o=Object.keys(p),s=p[o[0]];t&&p[t]?r.resolve(p[t].map):!t&&s&&s.map?r.resolve(s.map):n>i?r.reject("could not find map"):e.setTimeout(function(){a(n+100)},100)}o=o||{},t="object"==typeof t?t.id:t;var r=n.defer(),i=o.timeout||1e4;return a(0),r.promise},g=function(e){if(e.map){var t=Object.keys(p).length;p[e.map.id||t]=e}},d=function(e){var t=Object.keys(p).length-1,n=e.map.id||t;if(e.map){for(var o in e.eventListeners){var a=e.eventListeners[o];google.maps.event.removeListener(a)}e.map.controls&&e.map.controls.forEach(function(e){e.clear()})}e.map.heatmapLayers&&Object.keys(e.map.heatmapLayers).forEach(function(t){e.deleteObject("heatmapLayers",e.map.heatmapLayers[t])}),s.deleteMapInstance(n),delete p[n]},m=function(e,t){var a=n.defer();return!e||e.match(/^current/i)?o.getCurrentPosition(t).then(function(e){var t=e.coords.latitude,n=e.coords.longitude,o=new google.maps.LatLng(t,n);a.resolve(o)},function(e){a.reject(e)}):r.geocode({address:e}).then(function(e){a.resolve(e[0].geometry.location)},function(e){a.reject(e)}),a.promise},f=function(e,t){return function(n){if(n){var o=i("set-"+e),r=a.toOptionValue(n,{key:e});t[o]&&(e.match(/center|position/)&&"string"==typeof r?m(r).then(function(e){t[o](e)}):t[o](r))}}},v=function(e){"true"==e.getAttribute("default-style")?(e.style.display="block",e.style.height="300px"):("block"!=c(e,"display")&&(e.style.display="block"),c(e,"height").match(/^(0|auto)/)&&(e.style.height="300px"))};angular.module("ngMap").provider("NgMap",function(){var p={};this.setDefaultOptions=function(e){p=e};var c=function(c,y,h,b,M,O,w,L){return e=c,t=y[0],n=h,o=b,a=M,r=O,i=w,s=L,{defaultOptions:p,addMap:g,deleteMap:d,getMap:l,initMap:u,setStyle:v,getGeoLocation:m,observeAndSet:f}};c.$inject=["$window","$document","$q","NavigatorGeolocation","Attr2MapOptions","GeoCoder","camelCaseFilter","NgMapPool"],this.$get=c})}(),function(){"use strict";var e,t=function(t,n){n=n||t.getCenter();var o=e.defer();return(new google.maps.StreetViewService).getPanoramaByLocation(n||t.getCenter,100,function(e,t){t===google.maps.StreetViewStatus.OK?o.resolve(e.location.pano):o.resolve(!1)}),o.promise},n=function(e,t){new google.maps.StreetViewPanorama(e.getDiv(),{enableCloseButton:!0}).setPano(t)},o=function(o){return e=o,{getPanorama:t,setPanorama:n}};o.$inject=["$q"],angular.module("ngMap").service("StreetView",o)}(),"ngMap"}),angular.module("hours.templates",["calendar/calendar.tpl.html","hours-locations/hours-locations.tpl.html","lib-hours-today/lib-hours-today.tpl.html","list/list.tpl.html"]),angular.module("calendar/calendar.tpl.html",[]).run(["$templateCache",function(a){a.put("calendar/calendar.tpl.html",'<div class="calendar">\n    <div class="form-group">\n        <div class="btn-group">\n            <button class="btn btn-default" ng-model="calView" btn-radio="">Typical Schedule</button>\n            <button class="btn btn-default" ng-model="calView" btn-radio="1">Calendar &amp; Exceptions</button>\n        </div>\n    </div>\n    <div ng-show="!calView">\n        <div class="text-info" ng-show="defHours[1].ts > 0">\n            <span class="fa fw fa-info-circle"></span> Until {{defHours[1].ts * 1000 | date:\'MMM d, y\'}}\n        </div>\n        <table class="table table-bordered table-condensed">\n            <thead>\n                <tr>\n                    <th scope="col" aria-label="Sunday">Sun</th>\n                    <th scope="col" aria-label="Monday">Mon</th>\n                    <th scope="col" aria-label="Tuesday">Tues</th>\n                    <th scope="col" aria-label="Wednesday">Wed</th>\n                    <th scope="col" aria-label="Thursday">Thurs</th>\n                    <th scope="col" aria-label="Friday">Fri</th>\n                    <th scope="col" aria-label="Saturday">Sat</th>\n                </tr>\n            </thead>\n            <tbody>\n            <tr>\n\n                <td ng-repeat="day in defHours[0].hours" tabindex="0">\n                    <div class="hours">\n                        {{day.hoursFrom}}<span ng-show="day.hoursFrom != day.hoursTo"> to <br /> {{day.hoursTo}}</span>\n                    </div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n    <div ng-show="calView">\n        <nav class="navbar navbar-default navbar-embedded">\n            <button type="button" class="btn btn-primary navbar-btn navbar-left" ng-class="{\'disabled\': params.month <= 0}" ng-disabled="params.month <= 0" ng-click="getPrevMonth()">\n                <span class="fa fa-angle-left"></span>\n            </button>\n            <h2 class="navbar-text navbar-center">{{cal.month}}</h2>\n            <button type="button" class="btn btn-primary navbar-btn navbar-right" ng-class="{\'disabled\': params.month >= 5}" ng-disabled="params.month >= 5" ng-click="getNextMonth()"><span class="fa fa-angle-right"></span></button>\n        </nav>\n        <table class="table table-bordered table-condensed">\n            <thead>\n            <tr>\n                <td>Sun</td>\n                <td>Mon</td>\n                <td>Tue</td>\n                <td>Wed</td>\n                <td>Thur</td>\n                <td>Fri</td>\n                <td>Sat</td>\n            </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="week in cal.weeks">\n                <td ng-repeat="day in week" ng-class="day.css">\n\n                    <div class="date">\n                        {{day.ts * 1000 | date:\'d\'}}\n                    </div>\n                    <div class="hours">\n                        {{day.hoursFrom}}\n                        <div ng-if="day.hoursFrom != day.hoursTo">\n                            {{day.hoursTo}}\n                        </div>\n                    </div>\n\n\n                    <div class="fa fa-exclamation-circle exception-icon" ng-if="day.exc" popover="{{day.exc}}" popover-trigger="mouseenter" popover-append-to-body="true"></div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n    </div>\n\n\n\n</div>')}]),angular.module("hours-locations/hours-locations.tpl.html",[]).run(["$templateCache",function(a){
a.put("hours-locations/hours-locations.tpl.html",'\x3c!--<script src=\'//maps.googleapis.com/maps/api/js?sensor=false&key=AIzaSyCdXuKwZiDx5W2uP8plV5d-o-jLQ5UQtIQ&mid=z4A8-271j5C8.kowwE312jycE\'><\/script>--\x3e\n\n\n<div class="jumbotron-header">\n    <div class="jumbotron">\n        <div class="container">\n            <div class="row">\n                <div class="col-sm-12">\n                    <ol class="breadcrumb" typeof="BreadcrumbList" vocab="http://schema.org/">\n                        <li><a title="Go to The University of Alabama Libraries." href="/#/home" class="home">The University of Alabama Libraries</a></li>\n                        <li><a title="Go to Hours." href="/#/hours" class="post post-page">Hours</a></li>\n                    </ol>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-sm-8">\n                    <h1>Hours & Locations</h1>\n                    <h2 class="hidden-xs hidden-sm">{{library}}</h2>\n                    <div class="dropdown multipage-menu visible-xs visible-sm">\n                        <button class="btn btn-default btn-lg dropdown-toggle" id="locationMenu"  type="button">\n                            {{library}}\n                        </button>\n                        <ul class="dropdown-menu nav nav-stacked hours-locations-menu" role="menu" aria-labelledby="locationMenu">\n                            <li><a href="#" hours-href="{library: \'gorgas\', month: 0}">Gorgas</a>\n                                <ul class="nav nav-stacked">\n                                    <li><a href="#" hours-href="{library: \'music\', month: 0}">Music Library</a></li>\n                                    <li><a href="#" hours-href="{library: \'media\', month: 0}">Sanford Media Center</a></li>\n                                    <li><a href="#" hours-href="{library: \'williams\', month: 0}">Williams Americana Collection</a></li>\n                                </ul>\n                            </li>\n                            <li><a href="#" hours-href="{library: \'rodgers\', month: 0}">Rodgers</a></li>\n                            <li><a href="#" hours-href="{library: \'mclure\', month: 0}">McLure</a></li>\n                            <li><a href="#" hours-href="{library: \'hoole\', month: 0}">Hoole</a></li>\n                            <li><a href="#" hours-href="{library: \'bruno\', month: 0}">Bruno</a></li>\n                        </ul>\n                    </div>\n                    <ul class="list-unstyled fa-ul" ng-if="contact">\n                        <li ng-if="contact.email"><span class="fa fa-li fa-envelope"></span> <a ng-href="mailto:{{contact.email}}">{{contact.email}}</a></li>\n                        <li ng-if="contact.phone">\n                            <span class="fa fa-li fa-phone"></span>\n                            <ul class="list-unstyled">\n                                <li ng-repeat="phone in contact.phone">\n                                    <span ng-if="phone.dept">{{phone.dept}}: </span>\n                                    <a ng-href="tel:+1-205-{{phone.number}}" title="{{library}} phone number">{{phone.number}}</a>\n                                </li>\n                            </ul>\n                        </li>\n                    </ul>\n                </div>\n                <div class="col-sm-4">\n                    <div class="well">\n                        <p class="lead">What can {{library}} do for you?</p>\n                        <a ng-href="{{moreLink}}" class="btn btn-primary btn-primary-dark">Learn more <span class="fa fa-fw fa-info-circle"></span></a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="container">\n    <div class="row">\n        <div class="col-md-3 col-md-push-9">\n            <div class="hidden-xs hidden-sm">\n                <ul class="nav nav-pills nav-stacked hours-locations-menu">\n                    <li><a href="#" hours-href="{library: \'gorgas\', month: 0}">Gorgas</a>\n                        <ul class="nav nav-pills nav-stacked">\n                            <li><a href="#" hours-href="{library: \'media\', month: 0}">Sanford Media Center</a></li>\n                        </ul>\n                    </li>\n                    <li><a href="#" hours-href="{library: \'rodgers\', month: 0}">Rodgers</a></li>\n                    <li><a href="#" hours-href="{library: \'mclure\', month: 0}">McLure</a></li>\n                    <li><a href="#" hours-href="{library: \'hoole\', month: 0}">Hoole</a></li>\n                    <li><a href="#" hours-href="{library: \'bruno\', month: 0}">Bruno</a></li>\n                </ul>\n            </div>\n        </div>\n        <div class="col-md-9 col-md-pull-3">\n\n            <div class="row">\n                <div class="col-md-12">\n                    <div class="hours-calendar"></div>\n                </div>\n            </div>\n\n\n             <div class="row">\n                <div class="col-md-12">\n                    <div class="panel panel-default">\n                        <div class="panel-body">\n                            <div map-lazy-load="https://maps.google.com/maps/api/js"\n                                 map-lazy-load-params="{{googleMapsUrl}}">\n                                <ng-map center=\'{{center}}\' zoom=\'18\' scrollwheel="false" id="map-canvas" map-initialized="updateMap()">\n                                    <marker\n                                            ng-repeat="l in loc"\n                                            no-watcher="true"\n                                            position="{{l.latitude}}, {{l.longitude}}"\n                                            title="{{l.name}}"></marker>\n                                </ng-map>\n                            </div>\n                        </div>\n\n                        <div class="panel-footer">\n                            <form ng-submit="getDirections()">\n                                <div class="input-group">\n                                    <input type="text" class="form-control" ng-model="directionsFrom" placeholder="Your address or location" required>\n                        <span class="input-group-btn">\n                            <button type="submit" class="btn btn-default" target="_gmaps">Get Directions <span class="fa fa-external-link"></span></button>\n                        </span>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</div>\n')}]),angular.module("lib-hours-today/lib-hours-today.tpl.html",[]).run(["$templateCache",function(a){a.put("lib-hours-today/lib-hours-today.tpl.html",'<div class="library-hours-today" ng-cloak>\n    <div class="media">\n        <div class="media-left">\n            <div class="media-object fa fa-2x fa-clock-o">\n            </div>\n        </div>\n        <div class="media-body">\n            <h3 class="media-heading">Today</h3>\n            <h4 class="media-heading">{{today.hours}} <span class="fa fa-lg fa-info-circle" ng-if="today.description" tooltip="{{today.description}}"></span></h4>\n            <span class="label" ng-class="today.status.css">{{today.status.text}}</span>\n            <a class="btn btn-default btn-xs" ng-href="/#hours?library={{today.name}}" title="All hours {{today.name}}">See all hours <span class="fa fa-fw fa-chevron-right"></span></a>\n        </div>\n    </div>\n</div>')}]),angular.module("list/list.tpl.html",[]).run(["$templateCache",function(a){a.put("list/list.tpl.html",'<div class="responsive-table">\n  <table class="table table-hover">\n    <caption class="visually-hidden">A listing of hours for all library locations across campus, sorted alphabetically by library name</caption>\n    <thead class="visually-hidden">\n      <tr>\n        <th>Library</th>\n        <th>Hours</th>\n        <th>Status</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat-start="lib in hoursList track by $index" ng-click="selectLib(lib)">\n        <td><a href="#" ng-href="#/hours?library={{lib.name}}">{{lib.name}}</a></td>\n        <td>{{lib.hours}}</td>\n        <td><span ng-class="lib.status.css">{{lib.status.text}}</span></td>\n        <td><span class="fa fa-lg fa-info-circle" ng-if="lib.description" tooltip="{{lib.description}}"></span></td>\n      </tr>\n      <tr class="hours-list-child" ng-repeat="child in lib.children track by $index" ng-click="selectLib(child)">\n        <td><a ng-href="#/hours?library={{child.name}}">{{child.name}}</a></td>\n        <td>{{child.hours}}</td>\n        <td><span ng-class="child.status.css">{{child.status.text}}</span></td>\n        <td><span class="fa fa-lg fa-info-circle" ng-if="child.description" tooltip="{{child.description}}"></span></td>\n      </tr>\n      \x3c!-- Williams Collection data is removed from the Database; therefore the data is hardcoded !--\x3e\n      <tr ng-repeat-end ng-if="lib.name == \'Gorgas Library\'" class="hours-list-child">\n        <td><a ng-href="https://www.lib.ua.edu/collections/williams/">Williams Collection</a></td>\n        <td> Call for appt.</td>\n        <td> (205) 348-0500 </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n')}]),angular.module("ualib.hours",["ngAnimate","ngRoute","ngResource","ui.bootstrap","oc.lazyLoad","angular.filter","ngMap","hours.common","hours.templates","hours.list","hours.calendar"]).config(["$ocLazyLoadProvider",function(a){}]),angular.module("hours",["ualib.hours"]),angular.module("hours.calendar",[]).controller("CalendarCtrl",["$scope","$location","$filter","hoursFactory","$rootScope",function(a,b,c,d,e){function f(b){var d,f,g,i;b=c("filterBy")(b,["library.name"],a.params.library),d=b[0].library.lid,f=b[0].library.name,g=b[0].calendar[a.params.month],i=b[0].defaultHours,a.params.lid=d,a.library=f,a.cal=h(g),a.defHours=i,e.$broadcast("hoursLoaded")}function g(){var c=b.search(),d=a.params;for(var e in c)d.hasOwnProperty(e)&&(d[e]=c[e]);a.params=d}function h(a){for(var b=0,c=a.weeks.length;b<c;b++)for(var d=0,e=a.weeks[b].length;d<e;d++){var f=[];a.weeks[b][d].hasOwnProperty("today")&&f.push("today"),a.weeks[b][d].hasOwnProperty("date")||f.push("not-current-month"),"Closed"===a.weeks[b][d].hoursTo&&f.push("closed"),a.weeks[b][d].hasOwnProperty("exc")&&f.push("exception"),a.weeks[b][d].css=f.join(" ")}return a}var i;a.cal,a.month,a.library,a.defHours,a.params={lid:1,month:0,library:"gorgas"},d.get({view:"calendar"}).$promise.then(function(b){g(),i=b.cal,f(i),a.$on("$locationChangeSuccess",function(){g(),f(i)})},function(a,b,c,d){console.log("Initial Error: "+a)}),a.getPrevMonth=function(){var c=parseInt(a.params.month)-1;c<0&&(c=0),b.search("month",c),b.replace()},a.getNextMonth=function(){var c=parseInt(a.params.month)+1;c>5&&(c=5),b.search("month",c),b.replace()}}]).directive("hoursCalendar",[function(){return{restrict:"AC",templateUrl:"calendar/calendar.tpl.html",controller:"CalendarCtrl"}}]),angular.module("hours.common",["common.hours"]),angular.module("common.hours",[]).factory("hoursFactory",["$resource",function(a){return a("//www.lib.ua.edu/libhours2/api/:view",{},{get:{cache:!0}})}]),angular.module("ualib.hours").config(["$routeProvider",function(a){a.when("/hours",{reloadOnSearch:!1,templateUrl:"hours-locations/hours-locations.tpl.html",controller:"HoursLocationsCtrl"})}]).controller("HoursLocationsCtrl",["$scope","$location","NgMap",function(a,b,c){function d(){var b=a.params.lid-1,c=a.loc[b];a.center=[c.latitude,c.longitude],a.zoom=18,a.contact=c.contact,a.moreLink=c.link,a.library=c.name}var e=a.$on("hoursLoaded",function(){d()});a.center=[33.211803,-87.546032],a.googleMapsUrl="https://maps.googleapis.com/maps/api/js?key=AIzaSyCdXuKwZiDx5W2uP8plV5d-o-jLQ5UQtIQ&mid=z4A8-271j5C8.kowwE312jycE",a.loc=[{id:1,name:"Gorgas Library",latitude:33.211803,longitude:-87.546032,icon:"https://maps.google.com/mapfiles/ms/icons/yellow-dot.png",contact:{phone:[{number:"(205) 348-6047",dept:"Reference"},{number:"(205) 348-9748",dept:"Circulation"}],email:"gorgasinfo@ua.edu"},link:"/libraries/gorgas/"},{id:2,name:"Bruno Business Library",latitude:33.211107,longitude:-87.549255,icon:"https://maps.google.com/mapfiles/ms/icons/green-dot.png",contact:{phone:[{number:"(205) 348-1080"}],email:"brunolibrary@culverhouse.ua.edu"},link:"/libraries/bruno/"},{id:3,name:"Rodgers Library",latitude:33.2134785,longitude:-87.5427543,icon:"https://maps.google.com/mapfiles/ms/icons/red-dot.png",contact:{phone:[{number:"(205) 348-2100",dept:"Reference & Circulation"}],email:"scenglib@bama.ua.edu"},link:"/libraries/rodgers/"},{id:4,name:"Hoole Special Collections",latitude:33.210927,longitude:-87.543182,icon:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png",contact:{phone:[{number:"(205) 348-0500",dept:"Front Desk"}],email:"archives@bama.ua.edu",alert:[{type:"info",msg:"For reference questions"}]},link:"/libraries/hoole/"},{id:5,name:"McLure Education Library",latitude:33.2104774,longitude:-87.5490442,icon:"https://maps.google.com/mapfiles/ms/icons/pink-dot.png",contact:{phone:[{number:"(205) 348-6055",dept:"Reference & Circulation"}]},link:"/libraries/mclure/"},{id:6,name:"Music Library",latitude:33.211803,longitude:-87.546032,icon:"https://maps.google.com/mapfiles/ms/icons/yellow-dot.png",link:"/libraries/music/"},{id:7,name:"Sanford Media Center",latitude:33.211803,longitude:-87.546032,icon:"https://maps.google.com/mapfiles/ms/icons/yellow-dot.png",contact:{phone:[{number:"(205) 348-4651"}]},link:"/using-the-library/sanford-media-center/"}],a.getDirections=function(){var b="https://www.google.com/maps/dir/"+a.directionsFrom+"/"+a.center[0]+","+a.center[1];window.open(b)},a.$on("$destroy",function(){e()})}]).directive("hoursLocationsMenu",["$location",function(a){return{restrict:"AC",link:function(a,b){function c(a){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]library=([^&#]*)"),c=b.exec(a);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}a.$on("$locationChangeSuccess",function(a,d,e){c(d)!==c(e)&&b.find("li").removeClass("active")})}}}]).directive("hoursHref",["$location",function(a){return{restrict:"A",scope:{hoursHref:"@"},link:function(b,c){function d(d){d.preventDefault(),b.$apply(function(){for(var b in f)a.search(b,f[b]),a.replace()}),c.parent().addClass("active")}var e=a.search().library||"gorgas",f=b.$eval(b.hoursHref);c.bind("click",d),-1!==e.toLowerCase().indexOf(f.library)&&c.parent().addClass("active"),b.$on("$destroy",function(){c.unbind("click")})}}}]),angular.module("ualib.hours").directive("libHoursToday",["hoursFactory","$filter",function(a,b){return{restrict:"EAC",replace:!0,scope:{library:"@"},templateUrl:"lib-hours-today/lib-hours-today.tpl.html",controller:["$scope","$element",function(c,d){function e(a){var b="open",c="label label",d={text:b,css:c+"-success"};return a.timeLeft<=7200&&a.timeLeft>0?(a.isOpen?d.text="closing soon":d.text="opening soon",d.css=c+"-warning"):a.isOpen||(d.text="closed",d.css=c+"-danger"),a.status=d,a}angular.isDefined(c.library)&&c.library,a.get({view:"today"},function(a){var f=[];if(angular.isDefined(a.today.libraries)){for(var g in a.today.libraries)f.push(a.today.libraries[g]),a.today.libraries[g].hasOwnProperty("children")&&(f=f.concat(a.today.libraries[g].children));var h=b("filter")(f,{name:c.library});c.today=e(h[0]),d.addClass("loaded")}else console.log("Error: could not retrieve today hours")},function(a){console.log(a)})}]}}]),angular.module("hours.list",[]).controller("ListCtrl",["$scope","$element","$animate","hoursFactory",function(a,b,c,d){function e(a){for(var b=[],c=0,d=a.length;c<d;c++){var f="open",g="label label",h={text:f,css:g+"-success"};a[c].timeLeft<=7200&&a[c].timeLeft>0?(a[c].isOpen?h.text="closing soon":h.text="opening soon",h.css=g+"-warning"):a[c].isOpen||(h.text="closed",h.css=g+"-danger"),a[c].status=h,angular.isObject(a[c].children)&&(a[c].children=e(a[c].children)),b.push(a[c])}return b}a.hoursList={},d.get({view:"today"},function(b){var c=e(b.today.libraries);a.hoursList=c},function(a){console.log(a)}),a.selectLib=function(b){a.libID=b.id}}]).directive("hoursList",[function(){return{restrict:"AC",templateUrl:"list/list.tpl.html",controller:"ListCtrl"}}]),function(y,w,z){"use strict";function u(f,a,c){r.directive(f,["$parse","$swipe",function(m,p){return function(h,n,l){function k(d){if(!b)return!1;var s=Math.abs(d.y-b.y);return d=(d.x-b.x)*a,v&&s<75&&0<d&&d>30&&s/d<.3}var b,v,s=m(l[f]);p.bind(n,{start:function(d,s){b=d,v=!0},cancel:function(b){v=!1},end:function(b,a){k(b)&&h.$apply(function(){n.triggerHandler(c),s(h,{$event:a})})}})}}])}var r=w.module("ngTouch",[]);r.factory("$swipe",[function(){function f(a){var c=a.touches&&a.touches.length?a.touches:[a];return a=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||c[0].originalEvent||c[0],{x:a.clientX,y:a.clientY}}return{bind:function(a,c){var m,p,q,g,e=!1;a.on("touchstart mousedown",function(a){q=f(a),e=!0,p=m=0,g=q,c.start&&c.start(q,a)}),a.on("touchcancel",function(a){e=!1,c.cancel&&c.cancel(a)}),a.on("touchmove mousemove",function(a){if(e&&q){var n=f(a);m+=Math.abs(n.x-g.x),p+=Math.abs(n.y-g.y),g=n,10>m&&10>p||(p>m?(e=!1,c.cancel&&c.cancel(a)):(a.preventDefault(),c.move&&c.move(n,a)))}}),a.on("touchend mouseup",function(a){e&&(e=!1,c.end&&c.end(f(a),a))})}}}]),r.config(["$provide",function(f){f.decorator("ngClickDirective",["$delegate",function(a){return a.shift(),a}])}]),r.directive("ngClick",["$parse","$timeout","$rootElement",function(f,a,c){function m(a,b,c){for(var d=0;d<a.length;d+=2)if(Math.abs(a[d]-b)<e&&Math.abs(a[d+1]-c)<e)return a.splice(d,d+2),!0;return!1}function p(a){if(!(Date.now()-n>g)){var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].clientX,b=b[0].clientY;1>c&&1>b||k&&k[0]===c&&k[1]===b||(k&&(k=null),"label"===a.target.tagName.toLowerCase()&&(k=[c,b]),m(l,c,b)||(a.stopPropagation(),a.preventDefault(),a.target&&a.target.blur()))}}function q(c){c=c.touches&&c.touches.length?c.touches:[c];var b=c[0].clientX,e=c[0].clientY;l.push(b,e),a(function(){for(var a=0;a<l.length;a+=2)if(l[a]==b&&l[a+1]==e){l.splice(a,a+2);break}},g,!1)}var n,l,k,g=2500,e=25,h="ng-click-active";return function(a,b,e){function d(){k=!1,b.removeClass(h)}var t,r,u,x,g=f(e.ngClick),k=!1;b.on("touchstart",function(a){k=!0,t=a.target?a.target:a.srcElement,3==t.nodeType&&(t=t.parentNode),b.addClass(h),r=Date.now(),a=a.touches&&a.touches.length?a.touches:[a],a=a[0].originalEvent||a[0],u=a.clientX,x=a.clientY}),b.on("touchmove",function(a){d()}),b.on("touchcancel",function(a){d()}),b.on("touchend",function(a){var g=Date.now()-r,f=a.changedTouches&&a.changedTouches.length?a.changedTouches:a.touches&&a.touches.length?a.touches:[a],h=f[0].originalEvent||f[0],f=h.clientX,h=h.clientY,s=Math.sqrt(Math.pow(f-u,2)+Math.pow(h-x,2));k&&750>g&&12>s&&(l||(c[0].addEventListener("click",p,!0),c[0].addEventListener("touchstart",q,!0),l=[]),n=Date.now(),m(l,f,h),t&&t.blur(),w.isDefined(e.disabled)&&!1!==e.disabled||b.triggerHandler("click",[a])),d()}),b.onclick=function(a){},b.on("click",function(b,c){a.$apply(function(){g(a,{$event:c||b})})}),b.on("mousedown",function(a){b.addClass(h)}),b.on("mousemove mouseup",function(a){b.removeClass(h)})}}]),u("ngSwipeLeft",-1,"swipeleft"),u("ngSwipeRight",1,"swiperight")}(window,window.angular),angular.module("angular-carousel",["ngTouch","angular-carousel.shifty"]),angular.module("angular-carousel").directive("rnCarouselAutoSlide",["$interval",function(a){return{restrict:"A",link:function(b,c,d){var e=function(){b.autoSlider&&(a.cancel(b.autoSlider),b.autoSlider=null)},f=function(){b.autoSlide()};b.$watch("carouselIndex",f),d.hasOwnProperty("rnCarouselPauseOnHover")&&"false"!==d.rnCarouselPauseOnHover&&(c.on("mouseenter",e),c.on("mouseleave",f)),b.$on("$destroy",function(){e(),c.off("mouseenter",e),c.off("mouseleave",f)})}}}]),angular.module("angular-carousel").directive("rnCarouselIndicators",["$parse",function(a){return{restrict:"A",scope:{slides:"=",index:"=rnCarouselIndex"},templateUrl:"carousel-indicators.html",link:function(b,c,d){var e=a(d.rnCarouselIndex);b.goToSlide=function(a){e.assign(b.$parent.$parent,a)}}}}]),angular.module("angular-carousel").run(["$templateCache",function(a){a.put("carousel-indicators.html",'<div class="rn-carousel-indicator">\n<span ng-repeat="slide in slides" ng-class="{active: $index==index}" ng-click="goToSlide($index)">●</span></div>')}]),function(){"use strict";angular.module("angular-carousel").service("DeviceCapabilities",function(){function a(){var a="transform";return void 0!==document.body.style[a]?["webkit","moz","o","ms"].every(function(b){var c="-"+b+"-transform";return void 0===document.body.style[c]||(a=c,!1)}):a=void 0!==document.body.style.webkitTransform?"-webkit-transform":void 0,a}function b(){var a,b=document.createElement("p"),c={webkitTransform:"-webkit-transform",msTransform:"-ms-transform",transform:"transform"};document.body.insertBefore(b,null);for(var d in c)void 0!==b.style[d]&&(b.style[d]="translate3d(1px,1px,1px)",a=window.getComputedStyle(b).getPropertyValue(c[d]));return document.body.removeChild(b),void 0!==a&&a.length>0&&"none"!==a}return{has3d:b(),transformProperty:a()}}).service("computeCarouselSlideStyle",["DeviceCapabilities",function(a){return function(b,c,d){var e="none";0==100*b+c&&(e="inline-block");var g,h={display:e},i=100*b+c,j=a.has3d?"translate3d("+i+"%, 0, 0)":"translate3d("+i+"%, 0)",k=(100-Math.abs(i))/100;if(a.transformProperty)if("fadeAndSlide"==d)h[a.transformProperty]=j,g=0,Math.abs(i)<100&&(g=.3+.7*k),h.opacity=g;else if("hexagon"==d){var l=100,m=0,n=60*(k-1);l=-100*b>c?100:0,m=-100*b>c?n:-n,h[a.transformProperty]=j+" rotateY("+m+"deg)",h[a.transformProperty+"-origin"]=l+"% 50%"}else if("zoom"==d){h[a.transformProperty]=j;var o=1;Math.abs(i)<100&&(o=1+2*(1-k)),h[a.transformProperty]+=" scale("+o+")",h[a.transformProperty+"-origin"]="50% 50%",g=0,Math.abs(i)<100&&(g=.3+.7*k),h.opacity=g}else h[a.transformProperty]=j;else h["margin-left"]=i+"%";return h}}]).service("createStyleString",function(){return function(a){var b=[];return angular.forEach(a,function(a,c){b.push(c+":"+a)}),b.join(";")}}).directive("rnCarousel",["$swipe","$window","$document","$parse","$compile","$timeout","$interval","computeCarouselSlideStyle","createStyleString","Tweenable",function(a,b,c,d,e,f,g,h,i,j){function k(a,b,c){var d=c;return a.every(function(a,c){return!angular.equals(a,b)||(d=c,!1)}),d}var l=0;return b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame,{restrict:"A",scope:!0,compile:function(m,n){var o,p,q=m[0].querySelector("li"),r=q?q.attributes:[],s=!1,t=!1;return["ng-repeat","data-ng-repeat","ng:repeat","x-ng-repeat"].every(function(a){var b=r[a];if(angular.isDefined(b)){var c=b.value.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),d=c[3];if(o=c[1],p=c[2],o)return angular.isDefined(n.rnCarouselBuffered)&&(t=!0,b.value=o+" in "+p+"|carouselSlice:carouselBufferIndex:carouselBufferSize",d&&(b.value+=" track by "+d)),s=!0,!1}return!0}),function(m,n,o,q){function r(){return n[0].querySelectorAll("ul[rn-carousel] > li")}function u(a){N=!0,D({x:a.clientX,y:a.clientY},a)}function v(a){var b=100*m.carouselBufferIndex+a;angular.forEach(r(),function(a,c){a.style.cssText=i(h(c,b,K.transitionType))})}function w(a,b){if(void 0===a&&(a=m.carouselIndex),b=b||{},!1===b.animate||"none"===K.transitionType)return S=!1,M=-100*a,m.carouselIndex=a,void E();S=!0,(new j).tween({from:{x:M},to:{x:-100*a},duration:K.transitionDuration,easing:K.transitionEasing,step:function(a){v(a.x)},finish:function(){m.$apply(function(){m.carouselIndex=a,M=-100*a,E(),f(function(){S=!1},0,!1)})}})}function x(){var a=n[0].getBoundingClientRect();return a.width?a.width:a.right-a.left}function y(){P=x()}function z(){R||(R=!0,c.bind("mouseup",u))}function A(){R&&(R=!1,c.unbind("mouseup",u))}function B(a,b){return S||O.length<=1?void 0:(y(),Q=n[0].querySelector("li").getBoundingClientRect().left,G=!0,H=a.x,!1)}function C(a,b){var c,d;if(z(),G&&(c=a.x,(d=H-c)>2||-2>d)){N=!0;v(M+100*-d/P)}return!1}function D(a,b,c){if((!b||N)&&(A(),G=!1,N=!1,0!==(I=H-a.x)&&!S))if(M+=100*-I/P,K.isSequential){var e=K.moveTreshold*P,f=-I,g=-Math[f>=0?"ceil":"floor"](f/P),h=Math.abs(f)>e;O&&g+m.carouselIndex>=O.length&&(g=O.length-1-m.carouselIndex),g+m.carouselIndex<0&&(g=-m.carouselIndex);var i=h?g:0;I=m.carouselIndex+i,w(I),void 0!==o.rnCarouselOnInfiniteScrollRight&&0===g&&0!==m.carouselIndex&&(d(o.rnCarouselOnInfiniteScrollRight)(m),w(0)),void 0!==o.rnCarouselOnInfiniteScrollLeft&&0===g&&0===m.carouselIndex&&0===i&&(d(o.rnCarouselOnInfiniteScrollLeft)(m),w(O.length))}else m.$apply(function(){m.carouselIndex=parseInt(-M/100,10),E()})}function E(){var a=0,b=(m.carouselBufferSize-1)/2;t?(a=m.carouselIndex<=b?0:O&&O.length<m.carouselBufferSize?0:O&&m.carouselIndex>O.length-m.carouselBufferSize?O.length-m.carouselBufferSize:m.carouselIndex-b,m.carouselBufferIndex=a,f(function(){v(M)},0,!1)):f(function(){v(M)},0,!1)}function F(){y(),w()}l++;var G,H,I,J={transitionType:o.rnCarouselTransition||"slide",transitionEasing:o.rnCarouselEasing||"easeTo",transitionDuration:parseInt(o.rnCarouselDuration,10)||300,isSequential:!0,autoSlideDuration:3,bufferSize:5,moveTreshold:.1,defaultIndex:0},K=angular.extend({},J),M=0,N=!1,O=[],P=null,Q=null,R=!1,S=!1;"true"!==o.rnSwipeDisabled&&a.bind(n,{start:B,move:C,end:D,cancel:function(a){D({},a)}}),m.nextSlide=function(a){var b=m.carouselIndex+1;b>O.length-1&&(b=0),S||w(b,a)},m.prevSlide=function(a){var b=m.carouselIndex-1;0>b&&(b=O.length-1),w(b,a)};var T=!0;if(m.carouselIndex=0,s||(O=[],angular.forEach(r(),function(a,b){O.push({id:b})})),void 0!==o.rnCarouselControls){var U=s?p.replace("::","")+".length - 1":O.length-1,V='<div class="rn-carousel-controls">\n  <button class="rn-carousel-control rn-carousel-control-prev" aria-label="Previous slide" ng-keyup="$event.keyCode == 13 && prevSlide()" ng-click="prevSlide()" role="button" tabindex="0" ng-if="carouselIndex > 0"></button>\n  <button class="rn-carousel-control rn-carousel-control-next" aria-label="Next slide" ng-keyup="$event.keyCode == 13 && nextSlide()" ng-click="nextSlide()" role="button" tabindex="0" ng-if="carouselIndex < '+U+'"></button>\n</div>';n.parent().append(e(angular.element(V))(m))}if(void 0!==o.rnCarouselAutoSlide){var W=parseInt(o.rnCarouselAutoSlide,10)||K.autoSlideDuration;m.autoSlide=function(){m.autoSlider&&(g.cancel(m.autoSlider),m.autoSlider=null),m.autoSlider=g(function(){S||G||m.nextSlide()},1e3*W)}}if(o.rnCarouselDefaultIndex){var X=d(o.rnCarouselDefaultIndex);K.defaultIndex=X(m.$parent)||0}if(o.rnCarouselIndex){var Y=function(a){Z.assign(m.$parent,a)},Z=d(o.rnCarouselIndex);angular.isFunction(Z.assign)?(m.$watch("carouselIndex",function(a){Y(a)}),m.$parent.$watch(Z,function(a,b){void 0!==a&&null!==a&&(O&&O.length>0&&a>=O.length?(a=O.length-1,Y(a)):O&&0>a&&(a=0,Y(a)),S||w(a,{animate:!T}),T=!1)}),!0,K.defaultIndex&&w(K.defaultIndex,{animate:!T})):isNaN(o.rnCarouselIndex)||w(parseInt(o.rnCarouselIndex,10),{animate:!1})}else w(K.defaultIndex,{animate:!T}),T=!1;if(o.rnCarouselLocked&&m.$watch(o.rnCarouselLocked,function(a,b){S=!0===a}),s){var $=void 0!==o.rnCarouselDeepWatch;m[$?"$watch":"$watchCollection"](p,function(a,b){if(O=a,$&&angular.isArray(a)){w(k(a,b[m.carouselIndex],m.carouselIndex),{animate:!1})}else w(m.carouselIndex,{animate:!1})},!0)}m.$on("$destroy",function(){A()}),m.carouselBufferIndex=0,m.carouselBufferSize=K.bufferSize;var _=angular.element(b);_.bind("orientationchange",F),_.bind("resize",F),m.$on("$destroy",function(){A(),_.unbind("orientationchange",F),_.unbind("resize",F)})}}}}])}(),angular.module("angular-carousel.shifty",[]).factory("Tweenable",function(){return function(a){var b=function(){"use strict";function b(){}function c(a,b){var c;for(c in a)Object.hasOwnProperty.call(a,c)&&b(c)}function d(a,b){return c(b,function(c){a[c]=b[c]}),a}function e(a,b){c(b,function(c){void 0===a[c]&&(a[c]=b[c])})}function f(a,b,c,d,e,f,h){var i,j=(a-f)/e;for(i in b)b.hasOwnProperty(i)&&(b[i]=g(c[i],d[i],l[h[i]],j));return b}function g(a,b,c,d){return a+(b-a)*c(d)}function h(a,b){var d=k.prototype.filter,e=a._filterArgs;c(d,function(c){void 0!==d[c][b]&&d[c][b].apply(a,e)})}function i(a,b,c,d,e,g,i,j,k){s=b+c,t=Math.min(r(),s),u=t>=s,v=c-(s-t),a.isPlaying()&&!u?(a._scheduleId=k(a._timeoutHandler,p),h(a,"beforeTween"),f(t,d,e,g,c,b,i),h(a,"afterTween"),j(d,a._attachment,v)):u&&(j(g,a._attachment,v),a.stop(!0))}function j(a,b){var d={};return"string"==typeof b?c(a,function(a){d[a]=b}):c(a,function(a){d[a]||(d[a]=b[a]||n)}),d}function k(a,b){this._currentState=a||{},this._configured=!1,this._scheduleFunction=m,void 0!==b&&this.setConfig(b)}var l,m,n="linear",o=500,p=1e3/60,q=Date.now?Date.now:function(){return+new Date},r="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:q;m="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var s,t,u,v;return k.prototype.tween=function(a){return this._isTweening?this:(void 0===a&&this._configured||this.setConfig(a),this._timestamp=r(),this._start(this.get(),this._attachment),this.resume())},k.prototype.setConfig=function(a){a=a||{},this._configured=!0,this._attachment=a.attachment,this._pausedAtTime=null,this._scheduleId=null,this._start=a.start||b,this._step=a.step||b,this._finish=a.finish||b,this._duration=a.duration||o,this._currentState=a.from||this.get(),this._originalState=this.get(),this._targetState=a.to||this.get();var c=this._currentState,d=this._targetState;return e(d,c),this._easing=j(c,a.easing||n),this._filterArgs=[c,this._originalState,d,this._easing],h(this,"tweenCreated"),this},k.prototype.get=function(){return d({},this._currentState)},k.prototype.set=function(a){this._currentState=a},k.prototype.pause=function(){return this._pausedAtTime=r(),this._isPaused=!0,this},k.prototype.resume=function(){this._isPaused&&(this._timestamp+=r()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0;var a=this;return this._timeoutHandler=function(){i(a,a._timestamp,a._duration,a._currentState,a._originalState,a._targetState,a._easing,a._step,a._scheduleFunction)},this._timeoutHandler(),this},k.prototype.seek=function(a){return this._timestamp=r()-a,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,i(this,this._timestamp,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction),this._timeoutHandler(),this.pause()),this},k.prototype.stop=function(c){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=b,(a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.oCancelAnimationFrame||a.msCancelAnimationFrame||a.mozCancelRequestAnimationFrame||a.clearTimeout)(this._scheduleId),c&&(d(this._currentState,this._targetState),h(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},k.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},k.prototype.setScheduleFunction=function(a){this._scheduleFunction=a},k.prototype.dispose=function(){var a;for(a in this)this.hasOwnProperty(a)&&delete this[a]},k.prototype.filter={},k.prototype.formula={linear:function(a){return a}},l=k.prototype.formula,d(k,{now:r,each:c,tweenProps:f,tweenProp:g,applyFilter:h,shallowCopy:d,defaults:e,composeEasingObject:j}),a.Tweenable=k,k}();!function(){b.shallowCopy(b.prototype.formula,{easeInQuad:function(a){return Math.pow(a,2)},easeOutQuad:function(a){return-(Math.pow(a-1,2)-1)},easeInOutQuad:function(a){return(a/=.5)<1?.5*Math.pow(a,2):-.5*((a-=2)*a-2)},easeInCubic:function(a){
return Math.pow(a,3)},easeOutCubic:function(a){return Math.pow(a-1,3)+1},easeInOutCubic:function(a){return(a/=.5)<1?.5*Math.pow(a,3):.5*(Math.pow(a-2,3)+2)},easeInQuart:function(a){return Math.pow(a,4)},easeOutQuart:function(a){return-(Math.pow(a-1,4)-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*Math.pow(a,4):-.5*((a-=2)*Math.pow(a,3)-2)},easeInQuint:function(a){return Math.pow(a,5)},easeOutQuint:function(a){return Math.pow(a-1,5)+1},easeInOutQuint:function(a){return(a/=.5)<1?.5*Math.pow(a,5):.5*(Math.pow(a-2,5)+2)},easeInSine:function(a){return 1-Math.cos(a*(Math.PI/2))},easeOutSine:function(a){return Math.sin(a*(Math.PI/2))},easeInOutSine:function(a){return-.5*(Math.cos(Math.PI*a)-1)},easeInExpo:function(a){return 0===a?0:Math.pow(2,10*(a-1))},easeOutExpo:function(a){return 1===a?1:1-Math.pow(2,-10*a)},easeInOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*--a))},easeInCirc:function(a){return-(Math.sqrt(1-a*a)-1)},easeOutCirc:function(a){return Math.sqrt(1-Math.pow(a-1,2))},easeInOutCirc:function(a){return(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeOutBounce:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInBack:function(a){var b=1.70158;return a*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return(a-=1)*a*((b+1)*a+b)+1},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?a*a*((1+(b*=1.525))*a-b)*.5:.5*((a-=2)*a*((1+(b*=1.525))*a+b)+2)},elastic:function(a){return-1*Math.pow(4,-8*a)*Math.sin((6*a-1)*(2*Math.PI)/2)+1},swingFromTo:function(a){var b=1.70158;return(a/=.5)<1?a*a*((1+(b*=1.525))*a-b)*.5:.5*((a-=2)*a*((1+(b*=1.525))*a+b)+2)},swingFrom:function(a){var b=1.70158;return a*a*((b+1)*a-b)},swingTo:function(a){var b=1.70158;return(a-=1)*a*((b+1)*a+b)+1},bounce:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},bouncePast:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?2-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?2-(7.5625*(a-=2.25/2.75)*a+.9375):2-(7.5625*(a-=2.625/2.75)*a+.984375)},easeFromTo:function(a){return(a/=.5)<1?.5*Math.pow(a,4):-.5*((a-=2)*Math.pow(a,3)-2)},easeFrom:function(a){return Math.pow(a,4)},easeTo:function(a){return Math.pow(a,.25)}})}(),function(){function a(a,b,c,d,e,f){function g(a){return((n*a+o)*a+p)*a}function h(a){return((q*a+r)*a+s)*a}function i(a){return(3*n*a+2*o)*a+p}function j(a){return 1/(200*a)}function k(a,b){return h(m(a,b))}function l(a){return a>=0?a:0-a}function m(a,b){var c,d,e,f,h,j;for(e=a,j=0;8>j;j++){if(f=g(e)-a,l(f)<b)return e;if(h=i(e),l(h)<1e-6)break;e-=f/h}if(c=0,d=1,e=a,c>e)return c;if(e>d)return d;for(;d>c;){if(f=g(e),l(f-a)<b)return e;a>f?c=e:d=e,e=.5*(d-c)+c}return e}var n=0,o=0,p=0,q=0,r=0,s=0;return p=3*b,o=3*(d-b)-p,n=1-p-o,s=3*c,r=3*(e-c)-s,q=1-s-r,k(a,j(f))}function c(b,c,d,e){return function(f){return a(f,b,c,d,e,1)}}b.setBezierFunction=function(a,d,e,f,g){var h=c(d,e,f,g);return h.x1=d,h.y1=e,h.x2=f,h.y2=g,b.prototype.formula[a]=h},b.unsetBezierFunction=function(a){delete b.prototype.formula[a]}}(),function(){function a(a,c,d,e,f){return b.tweenProps(e,c,a,d,1,0,f)}var c=new b;c._filterArgs=[],b.interpolate=function(d,e,f,g){var h=b.shallowCopy({},d),i=b.composeEasingObject(d,g||"linear");c.set({});var j=c._filterArgs;j.length=0,j[0]=h,j[1]=d,j[2]=e,j[3]=i,b.applyFilter(c,"tweenCreated"),b.applyFilter(c,"beforeTween");var k=a(d,h,e,f,i);return b.applyFilter(c,"afterTween"),k}}(),function(a){function b(a,b){B.length=0;var c,d=a.length;for(c=0;d>c;c++)B.push("_"+b+"_"+c);return B}function c(a){var b=a.match(v);return b?(1===b.length||a[0].match(u))&&b.unshift(""):b=["",""],b.join(A)}function d(b){a.each(b,function(a){var c=b[a];"string"==typeof c&&c.match(z)&&(b[a]=e(c))})}function e(a){return i(z,a,f)}function f(a){var b=g(a);return"rgb("+b[0]+","+b[1]+","+b[2]+")"}function g(a){return a=a.replace(/#/,""),3===a.length&&(a=a.split(""),a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),C[0]=h(a.substr(0,2)),C[1]=h(a.substr(2,2)),C[2]=h(a.substr(4,2)),C}function h(a){return parseInt(a,16)}function i(a,b,c){var d=b.match(a),e=b.replace(a,A);if(d)for(var f,g=d.length,h=0;g>h;h++)f=d.shift(),e=e.replace(A,c(f));return e}function j(a){return i(x,a,k)}function k(a){for(var b=a.match(w),c=b.length,d=a.match(y)[0],e=0;c>e;e++)d+=parseInt(b[e],10)+",";return d=d.slice(0,-1)+")"}function l(d){var e={};return a.each(d,function(a){var f=d[a];if("string"==typeof f){var g=r(f);e[a]={formatString:c(f),chunkNames:b(g,a)}}}),e}function m(b,c){a.each(c,function(a){for(var d=b[a],e=r(d),f=e.length,g=0;f>g;g++)b[c[a].chunkNames[g]]=+e[g];delete b[a]})}function n(b,c){a.each(c,function(a){var d=b[a],e=o(b,c[a].chunkNames),f=p(e,c[a].chunkNames);d=q(c[a].formatString,f),b[a]=j(d)})}function o(a,b){for(var c,d={},e=b.length,f=0;e>f;f++)c=b[f],d[c]=a[c],delete a[c];return d}function p(a,b){D.length=0;for(var c=b.length,d=0;c>d;d++)D.push(a[b[d]]);return D}function q(a,b){for(var c=a,d=b.length,e=0;d>e;e++)c=c.replace(A,+b[e].toFixed(4));return c}function r(a){return a.match(w)}function s(b,c){a.each(c,function(a){for(var d=c[a],e=d.chunkNames,f=e.length,g=b[a].split(" "),h=g[g.length-1],i=0;f>i;i++)b[e[i]]=g[i]||h;delete b[a]})}function t(b,c){a.each(c,function(a){for(var d=c[a],e=d.chunkNames,f=e.length,g="",h=0;f>h;h++)g+=" "+b[e[h]],delete b[e[h]];b[a]=g.substr(1)})}var u=/(\d|\-|\.)/,v=/([^\-0-9\.]+)/g,w=/[0-9.\-]+/g,x=new RegExp("rgb\\("+w.source+/,\s*/.source+w.source+/,\s*/.source+w.source+"\\)","g"),y=/^.*\(/,z=/#([0-9]|[a-f]){3,6}/gi,A="VAL",B=[],C=[],D=[];a.prototype.filter.token={tweenCreated:function(a,b,c,e){d(a),d(b),d(c),this._tokenData=l(a)},beforeTween:function(a,b,c,d){s(d,this._tokenData),m(a,this._tokenData),m(b,this._tokenData),m(c,this._tokenData)},afterTween:function(a,b,c,d){n(a,this._tokenData),n(b,this._tokenData),n(c,this._tokenData),t(d,this._tokenData)}}}(b)}(window),window.Tweenable}),function(){"use strict";angular.module("angular-carousel").filter("carouselSlice",function(){return function(a,b,c){return angular.isArray(a)?a.slice(b,b+c):angular.isObject(a)?a:void 0}})}(),angular.module("ualib.news.templates",["news-item/event-card.tpl.html","news-item/news-card.tpl.html","news-item/news-item.tpl.html","news/news-list.tpl.html","today/news-today.tpl.html"]),angular.module("news-item/event-card.tpl.html",[]).run(["$templateCache",function(a){a.put("news-item/event-card.tpl.html",'<a ng-href="{{newsCard.link}}" target="_new" class="media news-card">\n    <div class="media-left">\n        <div class="cal-icon">\n            <div class="cal-month">{{newsCard.activeFrom | date:\'MMM\'}}</div>\n            <div class="cal-day">{{newsCard.activeFrom | date:\'d\'}}</div>\n        </div>\n    </div>\n    <div class="media-body">\n        <h3 class="h4 media-heading" ng-bind-html="newsCard.title | truncate:50:\'...\':true"></h3>\n        <p ng-bind-html="newsCard.blurb | truncate:150:\'...\':true"></p>\n    </div>\n</a>\n')}]),angular.module("news-item/news-card.tpl.html",[]).run(["$templateCache",function(a){a.put("news-item/news-card.tpl.html",'<a ng-href="#/news-exhibits/{{newsCard.link}}" class="media news-card">\n    <div class="media-body">\n        <h3 class="h4 media-heading">\n            <span ng-bind-html="newsCard.title | truncate:50:\'...\':true"></span>\n        </h3>\n        <div class="details-context" ng-if="(newsCard.activeFrom != newsCard.activeUntil && newsCard.type != 0)">\n            {{newsCard.activeFrom | date:mediumDate}} - {{newsCard.activeUntil | date:mediumDate}}\n        </div>\n        <div class="details-context" ng-if="(newsCard.type == 0)">\n            {{newsCard.created | date:mediumDate}}\n        </div>\n        <p ng-bind-html="newsCard.blurb | truncate:150:\'...\':true"></p>\n    </div>\n</a>')}]),angular.module("news-item/news-item.tpl.html",[]).run(["$templateCache",function(a){a.put("news-item/news-item.tpl.html",'<div class="jumbotron-header">\n    <div class="jumbotron">\n        <div class="container">\n            <div class="row">\n                <div class="col-sm-12">\n                    <ol class="breadcrumb" typeof="BreadcrumbList" vocab="http://schema.org/">\n                        <li><a title="Go to The University of Alabama Libraries." href="/#/home" class="home">The University of Alabama Libraries</a></li>\n                        <li><a title="Go to News." href="/#/news-exhibits" class="post post-page">News</a></li>\n                        <li><a title="Go to news article." href="" class="post post-page">{{newsItem.title | truncate: 30: \'...\': true}}</a></li>\n                    </ol>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-sm-7">\n                    <h1>News &amp; Exhibits</h1>\n                </div>\n                <div class="col-sm-5">\n                    <div class="well">\n                        <p class="lead">Looking for upcoming events in the University Libraries?</p>\n                        <a href="https://www.ua.edu/events/category/22/view/month/" class="btn btn-primary btn-primary-dark" target="_new">View event calendar <span class="fa fa-external-link"></span></a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="container">\n    <div class="page-header">\n        <h2>{{newsItem.title}}</h2>\n    </div>\n    <div class="row">\n        <div class="col-md-4 col-md-push-8">\n            <div class="well" ng-if="newsItem.contactName">\n                <h3 class="h4">For more information contact</h3>\n                <ul class="fa-ul">\n                    <li><span class="fa fa-user fa-li"></span>{{newsItem.contactName}}</li>\n                    <li><span class="fa fa-phone fa-li"></span>{{newsItem.contactPhone}}</li>\n                    <li><span class="fa fa-envelope fa-li"></span>{{newsItem.contactEmail}}</li>\n                </ul>\n            </div>\n            <a href="#/news-exhibits" class="btn btn-default"><span class="fa fa-reply"></span> See all news &amp; exhibits</a>\n        </div>\n        <div class="col-md-8 col-md-pull-4">\n            <div class="text-center news-carousel-container-small" ng-if="newsItem.images.length > 0">\n                <div class="layer text-center image-holder" ng-repeat="img in newsItem.images track by $index">\n                    <img class="news-image" ng-src="{{img.src}}" ng-click="enlargeImages(true, $index)" ng-if="newsItem.altText != null" ng-attr-alt="{{newsItem.altText}}" />\n                    <img class="news-image" ng-src="{{img.src}}" ng-click="enlargeImages(true, $index)" ng-if="newsItem.altText == null" />\n                </div>\n            </div>\n            <h5 class="text-muted">\n                <span>Created on {{newsItem.created | date:mediumDate}}</span>\n            </h5>\n            <p class="text-justify" ng-bind-html="newsItem.description"></p>\n        </div>\n    </div>\n</div>\n')}]),angular.module("news/news-list.tpl.html",[]).run(["$templateCache",function(a){a.put("news/news-list.tpl.html",'<div class="jumbotron-header">\n    <div class="jumbotron">\n        <div class="container">\n            <div class="row">\n                <div class="col-sm-12">\n                    <ol class="breadcrumb" typeof="BreadcrumbList" vocab="http://schema.org/">\n                        <li><a title="Go to The University of Alabama Libraries." href="/#/home" class="home">The University of Alabama Libraries</a></li>\n                        <li><a title="Go to News." href="/#/news-exhibits" class="post post-page">News</a></li>\n                    </ol>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-sm-7">\n                    <h1>News &amp; Exhibits</h1>\n                </div>\n                <div class="col-sm-5">\n                    <div class="well">\n                        <p class="lead">Looking for upcoming events in the University Libraries?</p>\n                        <a href="https://www.ua.edu/events/category/22/view/month/" class="btn btn-primary btn-primary-dark" target="_new">View event calendar <span class="fa fa-external-link"></span></a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n<div class="container">\n    <div class="row">\n        <div class="col-md-3 col-md-push-9 hidden-xs">\n            <h2 class="h4">Filters</h2>\n            <form class="facets-form">\n                <div class="form-group">\n                    <h3 class="h5" id="filterNews">Search news and exhibits</h3>\n                    <input type="text" aria-labelledby="filterNews" class="form-control" ng-model="newsFilters.search" placeholder="Keyword search">\n                </div>\n            </form>\n        </div>\n        <div class="col-md-9 col-md-pull-3">\n\n            <div class="media animate-repeat" ng-repeat="item in news | filter:{type: newsFilters.type}\n                                                                  | filter:newsFilters.search\n                                                                  | orderBy:[\'-sticky\',\'-created\']">\n                <div class="media-left hidden-sm hidden-xs">\n                    <span class="news-list-tb" ng-class="{img: item.tb}">\n                        <img class="media-object" ng-src="{{item.tb}}" alt={{item.altText}} ng-if="item.tb" />\n                        <span class="media-object"\n                          ng-if="item.type == 0 && !item.tb"><span class="fa fa-newspaper-o"></span></span>\n                        <span class="media-object"\n                          ng-if="item.type == 1 && !item.tb"><span class="fa fa-calendar"></span></span>\n                    </span>\n                </div>\n                <div class="media-body">\n                    <h2 class="h3 media-heading">\n                        <a ng-href="#/news-exhibits/{{item.link}}" ng-bind-html="item.title | highlight:newsFilters.search"></a>\n                    </h2>\n\n                    <h3 class="h5 text-muted" ng-if="item.type > 0">Exhibit {{item.activeFrom | date:mediumDate}} - {{item.activeUntil | date:mediumDate}}</h5>\n                    <h3 class="h5 text-muted" ng-if="item.type < 1">Created on {{item.created | date:mediumDate}}</h5>\n                    <p class="text-justify">\n                    <span ng-bind-html="item.blurb | highlight:newsFilters.search">\n                    </span>\n                    </p>\n                </div>\n            </div>\n\n            <div class="text-center">\n                <pagination total-items="filteredNews.length" ng-model="soft.page" max-size="10" class="pagination-sm" boundary-links="true" items-per-page="soft.perPage" ng-change="update()" ng-if="filteredNews.length > soft.perPage"></pagination>\n            </div>\n\n            <div class="alert alert-warning text-center" role="alert" ng-show="news.length < 1">\n                <span class="h2">\n                    No\n                    <span ng-show="newsFilters.type == \'\'">News or Exhibits</span>\n                    <span ng-show="newsFilters.type == \'0\'">News</span>\n                    <span ng-show="newsFilters.type == \'1\'">Exhibits</span>\n                    match the search "<strong>{{newsFilters.search}}</strong>"</span>\n                </span>\n            </div>\n        </div>\n\n\n\n    </div>\n</div>')}]),angular.module("today/news-today.tpl.html",[]).run(["$templateCache",function(a){a.put("today/news-today.tpl.html",'<div class="row" ng-controller="NewsTodayCtrl">\n\n    <a news-card="item" ng-repeat="item in news">\n    </a>\n\n    <masonry>\n        <div class="masonry-brick">\n            <a news-card="item" ng-repeat="item in news">\n            </a>\n        </div>\n        <div class="masonry-brick">\n            <a news-card="item" ng-repeat="item in events">\n            </a>\n        </div>\n        <div class="masonry-brick">\n            <div class="hours-list"></div>\n        </div>\n    </masonry>\n\n</div>')}]),angular.module("ualib.news",["ngRoute","ngResource","ngSanitize","ngAnimate","angular.filter","duScroll","ui.bootstrap","angular-carousel","ualib.ui","ualib.news.templates"]),angular.module("ualib.news").factory("ualibNewsFactory",["$resource","$sce","$filter","$http",function(a,b,c,d){function e(a){return a=c("unique")(a,"title"),a.map(function(a){var b=a;return b.type=1,null!==a.activeFrom?(b.activeFrom=new Date(correctEventTime(a.activeFrom)),console.log(b.activeFrom)):b.activeFrom=null,null!==a.activeUntil?b.activeUntil=new Date(correctEventTime(a.activeUntil)):b.activeUntil=null,null===b.activeFrom&&null===b.activeUntil&&(b.type=0),b.created=new Date(1e3*a.created),b.hasOwnProperty("link")||(b.link=c("slugify")(b.title)),b.hasOwnProperty("blurb")||(b.blurb=c("stripTags")(b.description),b.blurb=c("truncate")(b.blurb,250,"...",!0)),b})}function f(a,b){return a=angular.isArray(a)?a:[a],a.concat(b)}return a("//www.lib.ua.edu/newsApp/api/:news",{},{get:{method:"GET",params:{news:"archive"},cache:!0,transformResponse:f(d.defaults.transformResponse,function(a){var b=angular.fromJson(a);return formatted=e(b.news),b.news=formatted,b})},today:{method:"GET",params:{news:"today"},cache:!0,transformResponse:f(d.defaults.transformResponse,function(a){var b=angular.fromJson(a);for(var c in b)angular.isArray(b[c])&&(b[c]=e(b[c]));return b})}})}]),angular.module("ualib.news").config(["$routeProvider",function(a){a.when("/news-exhibits/:link",{reloadOnSearch:!1,resolve:{newsItem:["ualibNewsFactory",function(a){return a.get({news:"archive"},function(a){return a},function(a,b,c,d){console.log("ERROR: news item"),console.log({data:a,status:b,headers:c,config:d})})}]},templateUrl:"news-item/news-item.tpl.html",controller:"newsItemCtrl"})}]).controller("newsItemCtrl",["$scope","newsItem","$routeParams","$document","$q",function(a,b,c,d,e){function f(a,b,c,d){b=b||0,c=c||a.images.length,d=d||e.defer(),c<1&&d.resolve(a);var g=new Image;return g.onload=function(){this.styles="url("+this.src+")",this.width/this.height<1.3&&(this.isPortrait=!0,console.log("PORTRAIT TRUE!")),a.images[b]=this,b+1===c?d.resolve(a):(b++,f(a,b,c,d))},g.src=a.images[b],d.promise}d.duScrollTo(0,30,500,function(a){return--a*a*a+1}),a.showEnlarged=!1,a.curImage=0;var g;a.enlargeImages=function(b,c){b?(a.showEnlarged=!0,a.isLocked=!0,a.curEnlImage=c,g||(g=angular.element(document.querySelectorAll(".rn-carousel-controls, .rn-carousel-indicator, .fullsize-img")),g.bind("click",function(a){a.preventDefault(),a.stopPropagation()}))):(a.showEnlarged=!1,a.isLocked=!1)},a.setCurEnlImage=function(b){a.curEnlImage=b},b.$promise.then(function(b){for(var d=null,e=0,g=b.news.length;e<g&&(d=b.news[e],!d.link||d.link!==c.link);e++);f(d).then(function(b){a.newsItem=b,""===a.newsItem.altText?(console.log("Alt text empty!"),console.log(a.newsItem)):console.log(a.newsItem)})}),a.$on("$destroy",function(){g&&g.unbind("click")})}]).directive("newsCard",[function(){return{restrict:"A",replace:!0,scope:{newsCard:"=?",newsFilters:"=?",newsType:"@"},templateUrl:function(a,b){return"news-item/"+(angular.isDefined(b.newsType)?b.newsType:"news")+"-card.tpl.html"}}}]),angular.module("ualib.news").config(["$routeProvider",function(a){a.when("/news-exhibits/",{reloadOnSearch:!1,resolve:{newsList:["ualibNewsFactory",function(a){return a.get({news:"archive"},function(a){return a},function(a,b,c,d){console.log("ERROR: news"),console.log({data:a,status:b,headers:c,config:d})})}]},templateUrl:"news/news-list.tpl.html",controller:"newsListCtrl"})}]).controller("newsListCtrl",["$scope","$location","newsList",function(a,b,c){function d(){var c=b.search();for(var d in c)a.newsFilters.hasOwnProperty(d)&&(a.newsFilters[d]=c[d])}function e(){var c=a.newsFilters,d=b.search();for(var e in c)angular.isDefined(c[e])&&""!==c[e]?b.search(e,c[e]):d.hasOwnProperty(e)&&b.search(e,null)}var f;a.newsFilters={sort:"created",type:"",search:""},c.$promise.then(function(b){a.news=b.news,d(),f=a.$watch("newsFilters",function(a,b){a!==b&&e()},!0)}),a.$on("$destroy",function(){f()})}]),angular.module("ualib.news").controller("NewsTodayCtrl",["$scope","$filter","ualibNewsFactory",function(a,b,c){c.today().$promise.then(function(b){a.news=b.news,a.events=b.events,a.newsOverflow=b.news.length+b.events.length>3})}]),angular.module("ualib.softwareList.templates",["software-list/software-list.tpl.html"]),angular.module("software-list/software-list.tpl.html",[]).run(["$templateCache",function(a){a.put("software-list/software-list.tpl.html",'<div class="jumbotron-header">\n    <div class="jumbotron">\n        <div class="container">\n            <div class="row">\n                <div class="col-md-12">\n                    <ol class="breadcrumb" typeof="BreadcrumbList" vocab="http://schema.org/">\n                        <li><a title="Go to The University of Alabama Libraries." href="/#/home" class="home">The University of Alabama Libraries</a></li>\n                        <li><a title="Go to SoftwareList." href="/#/software" class="post post-page">Software List</a></li>\n                    </ol>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-md-12">\n                    <h1>University Libraries Software List</h1>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="container">\n    <div class="row">\n        <div class="col-md-3 col-md-push-9">\n            <form class="software-list-facets">\n                <div class="form-group">\n                <span class="page-header">\n                    <h2 class="h4">Filter Software List By</h2>\n                </span>\n                </div>\n                <div class="form-group">\n\n                    <input type="text" class="form-control" ng-model="soft.search" placeholder="Search software, locations, etc..." aria-label="Search our software list">\n\n                </div>\n                <div class="form-group">\n                    <div class="btn-group btn-group-justified">\n                        <button class="btn btn-default active" ng-model="soft.os" btn-radio="\'\'" uncheckable>All</button>\n                        <button class="btn btn-default" ng-model="soft.os" btn-radio="\'1\'" uncheckable><span class="fa fa-fw fa-windows"></span><span class="sr-only">Windows</span></button>\n                        <button class="btn btn-default" ng-model="soft.os" btn-radio="\'2\'" uncheckable><span class="fa fa-fw fa-apple"></span><span class="sr-only">Mac</span></button>\n                    </div>\n                </div>\n                <div class="form-group hidden-xs">\n                    <h3 class="h5">Locations</h3>\n                    <div class="radio">\n                        <label>\n                            <input type="radio" value="" ng-model="soft.loc" checked>\n                            All Locations\n                        </label>\n                    </div>\n                    <div class="radio" ng-repeat="loc in locations">\n                        <label>\n                            <input type="radio" value="{{loc.name}}" ng-model="soft.loc">\n                            {{loc.name}}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group hidden-xs">\n                    <h3 class="h5">Categories</h3>\n                    <div class="radio">\n                        <label>\n                            <input type="radio" value="" ng-model="soft.cat">\n                            All categories\n                        </label>\n                    </div>\n                    <div class="radio" ng-repeat="cat in categories">\n                        <label>\n                            <input type="radio" value="{{cat.name}}" ng-model="soft.cat">\n                            {{cat.name}}\n                        </label>\n                    </div>\n                </div>\n                <div class="form-group hidden-xs">\n                    <button type="button" class="btn btn-block btn-primary" ng-click="resetFilters()"><span class="fa fa-fw fa-refresh"></span> Reset filters</button>\n                </div>\n            </form>\n        </div>\n        <div class="col-md-9 col-md-pull-3 software-list-container">\n            <span class="h4 text-right" ng-show="pager.totalItems > 0">\n                Showing {{pager.firstItem}}-{{pager.lastItem}} of {{pager.totalItems}} results\n            </span>\n\n            <div ng-if="(soft.cat || soft.os || soft.loc)">\n\n                <ol class="breadcrumb facetcrumb">\n                    <li ng-if="soft.os"><strong>OS:</strong> <button type="button" class="btn btn-default" ng-click="soft.os = \'\'">{{soft.os == 1 ? \'Windows\' : \'OS X\'}} <span class="text-muted" aria-hidden="true">&times;</span></button></li>\n                    <li ng-if="soft.loc"><strong>Location:</strong> <button type="button" class="btn btn-default" ng-click="soft.loc = \'\'">{{soft.loc}} <span class="text-muted" aria-hidden="true">&times;</span></button></li>\n                    <li ng-if="soft.cat"><strong>Category:</strong> <button type="button" class="btn btn-default" ng-click="soft.cat = \'\'">{{soft.cat}} <span class="text-muted" aria-hidden="true">&times;</span></button></li>\n\n                    <li class="pull-right"><button type="button" class="btn btn-primary btn-small reset-btn" title="Reset filters" ng-click="resetFilters()"><i class="fa fa-refresh"></i></button></li>\n                </ol>\n            </div>\n\n            <div class="media software-item animate-repeat" ng-repeat="item in filteredSoft | after:(pager.page-1)*pager.perPage | limitTo:20">\n                <div class="media-left">\n                    <img class="media-object" ng-src="{{item.icon}}" alt="{{item.title}}">\n                </div>\n                <div class="media-body">\n                    <h3 class="media-heading" ng-bind-html="item.title | highlight:soft.search">\n                    </h3>\n\n                    <div ng-bind-html="item.description | highlight:soft.search"></div>\n\n                    <div class="row">\n                        <div class="details-context col-md-6" ng-repeat="ver in item.versions | orderBy:os">\n                            <div class="h4 text-muted">\n                                <span class="fa fa-{{ver.osName}}"></span>\n                                Version {{ver.version}}\n                            </div>\n                        <span ng-repeat="loc in ver.locations | orderBy:\'name\'">\n                            \x3c!--<span ng-if="loc.parent" ng-bind-html="(locations | filter:loc.parent)[0].name"></span>--\x3e\n                            <span ng-bind-html="loc.name | highlight:soft.search | highlight:soft.loc:true"></span>\n                        </span>\n                        </div>\n                    </div>\n\n                    <div class="details hidden-xs">\n                        <div class="software-links">\n                            <ul class="list-inline nav-justified" style="margin-top: 5px;">\n                                <li ng-repeat="link in item.links" ng-if="item.links">\n                                    <a ng-href="{{link.url}}" target="{{link.title}}" class="external-link">{{link.title}}</a>\n                                </li>\n                                <li ng-if="item.modules">\n                                    <div collapse="!isCollapsed" ng-bind-html="item.modules | highlight:soft.search"></div>\n                                    <button class="btn btn-default btn-xs" ng-click="isCollapsed = !isCollapsed">\n                                        {{!isCollapsed ? "Show" : "Hide"}} Available Modules\n                                    </button>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="text-center">\n                <pagination class="pagination-sm" ng-model="pager.page" total-items="pager.totalItems" max-size="pager.maxSize" boundary-links="true" rotate="false" items-per-page="pager.perPage" ng-change="pageChange()" ng-if="pager.totalItems > pager.perPage"></pagination>\n            </div>\n\n            <div class="alert alert-warning text-center" role="alert" ng-show="pager.totalItems < 1">\n                <h2>\n                    No <span ng-if="soft.cat"><strong>{{soft.cat | lowercase}}</strong></span> software is available\n                    <span ng-if="soft.os">on <strong>{{soft.os == 1 ? \'Windows\' : \'OS X\'}}</strong> computers</span>\n                    <span ng-if="soft.loc">in <strong>{{soft.loc}}</strong></span>\n                    <span ng-if="soft.search">that matches the search "<strong>{{soft.search}}</strong>"</span>\n                </h2>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("ualib.softwareList",["ngRoute","ngResource","ngSanitize","ngAnimate","angular.filter","ui.bootstrap","duScroll","ualib.ui","ualib.softwareList.templates"]),angular.module("ualib.softwareList").factory("softwareFactory",["$resource",function(a){return a("//www.lib.ua.edu/softwareList/api/:software",{software:"all"},{get:{method:"GET",cache:!0}})}]),angular.module("ualib.softwareList").config(["$routeProvider",function(a){a.when("/software",{reloadOnSearch:!1,resolve:{software:["$filter","softwareFactory",function(a,b){return b.get({software:"all"},function(a){for(var b=0,c=a.software.length;c>b;b++){for(var d=[],e=0,f=a.software[b].versions.length;f>e;e++)switch(d.push(a.software[b].versions[e].os),a.software[b].versions[e].os){case"3":a.software[b].versions[e].osName="linux";break;case"2":a.software[b].versions[e].osName="apple";break;default:a.software[b].versions[e].osName="windows"}a.software[b].os=d.join("")}return a},function(a,b,c,d){console.log("ERROR: software list"),console.log({data:a,status:b,headers:c,config:d})})}]},templateUrl:"software-list/software-list.tpl.html",controller:"SoftwareListCtrl"})}]).controller("SoftwareListCtrl",["$scope","software","$location","$filter","$document",function(a,b,c,d,e){function f(b){var c=b;c=d("filter")(c,{categories:a.soft.cat}),c=d("filter")(c,{versions:a.soft.loc}),c=d("filter")(c,a.soft.search),c=d("filterBy")(c,["os"],a.soft.os),a.filteredSoft=c,a.pager.totalItems=a.filteredSoft.length,a.pager.firstItem=(a.pager.page-1)*a.pager.perPage+1,a.pager.lastItem=a.pager.totalItems<a.pager.perPage?a.pager.totalItems:a.pager.page*a.pager.perPage;var e=Math.floor(a.pager.totalItems/a.pager.maxSize);e<a.pager.page&&(a.pager.page=e||1)}var g=[];a.soft={};var h={os:"",search:"",cat:"",loc:""};b.$promise.then(function(b){g=b.software,a.resetFilters(),a.categories=b.categories,a.locations=b.locations.filter(function(a){return 0===parseInt(a.parent)});var d=c.search();for(var e in d)a.pager.hasOwnProperty(e)&&(a.pager[e]=d[e]),a.soft.hasOwnProperty(e)&&(a.soft[e]=d[e]);a.$on("$locationChangeSuccess",function(){f(g)}),a.$on("$destroy",function(){i()}),f(g)});var i=a.$watch("soft",function(a,b){for(var d in a)""!==a[d]?c.search(d,a[d]):c.search(d,null)},!0);a.update=function(){var a={};angular.forEach(soft,function(b,c){angular.isDefined(b)&&""!==b&&(a[c]=b)}),c.search(a)},a.pageChange=function(){c.search("page",a.pager.page),e.duScrollTo(0,30,500,function(a){return--a*a*a+1})},a.resetFilters=function(){a.pager={page:1,perPage:20,maxSize:10,totalItems:0},angular.copy(h,a.soft)}}]),
angular.module("ualib.staffdir.templates",["staff-card/staff-card-list.tpl.html","staff-card/staff-card-md.tpl.html","staff-directory/staff-directory-facets.tpl.html","staff-directory/staff-directory-listing.tpl.html","staff-directory/staff-directory.tpl.html","staff-profile/staff-profile.tpl.html"]),angular.module("staff-card/staff-card-list.tpl.html",[]).run(["$templateCache",function(a){a.put("staff-card/staff-card-list.tpl.html",'<div ng-repeat="person in filteredList | after:(staffdir.pager.page-1)*staffdir.pager.perPage | limitTo:staffdir.pager.perPage"><div class=page-slice><div class=row><div class="hidden-xs col-sm-3"><img class="staff-portrait thumbnail" ng-if=person.photo ng-src={{person.photo}} alt=""> <img class="staff-portrait thumbnail" ng-if=!person.photo ng-src=https://www.lib.ua.edu/wp-content/themes/roots-ualib/assets/img/user-profile.png alt=""></div><div class="col-xs-12 col-sm-7"><div class=row><div class="col-xs-12 col-sm-7 name-plate"><h3 class=name><small ng-if=person.rank>{{person.rank}}</small> <a ng-href=#/staffdir/{{person.emailPrefix}} ng-if=person.profile><span ng-class="{\'sorting-by\': staffdir.facet.sortBy == \'firstname\'}" ng-bind-html="person.firstname | highlight:staffdir.facet.search"></span> <span ng-class="{\'sorting-by\': staffdir.facet.sortBy == \'lastname\'}" ng-bind-html="person.lastname | highlight:staffdir.facet.search"></span> </a><span ng-if=!person.profile><span ng-class="{\'sorting-by\': staffdir.facet.sortBy == \'firstname\'}" ng-bind-html="person.firstname | highlight:staffdir.facet.search"></span> <span ng-class="{\'sorting-by\': staffdir.facet.sortBy == \'lastname\'}" ng-bind-html="person.lastname | highlight:staffdir.facet.search"></span></span></h3><h4 class=title><span ng-bind-html="person.title | highlight:staffdir.facet.search"></span></h4><h5 class=hidden-xs><span ng-bind-html="person.department | highlight:staffdir.facet.search"></span></h5></div><div class="col-xs-12 col-sm-5"><ul class=fa-ul><li ng-if=person.phone><span class="fa fa-phone fa-li"></span><a ng-href=tel:+1{{person.phone}}>{{person.phone}}</a></li><li class=hidden-xs ng-if=person.fax><span class="fa fa-fax fa-li"></span>{{person.fax}}</li><li ng-if=person.email><span class="fa fa-envelope fa-li"></span><a ng-href=mailto:{{person.email}} title="Email {{person.firstname}} {{person.lastname}}">{{person.email}}</a></li></ul></div><div class="col-sm-12 subject-specialty hidden-xs" ng-if=person.subjects><table class="table table-condensed"><thead><tr><th>Liaison</th></tr></thead><tbody><tr ng-repeat="subject in person.subjects | orderBy:\'subject\'"><td><a ng-href={{subject.link}} title={{subject.subject}} ng-if=subject.link ng-bind-html="subject.subject | highlight:staffdir.facet.search"></a> <span ng-if=!subject.link ng-bind-html="subject.subject | highlight:staffdir.facet.search">{{subject.subject}}</span></td></tr></tbody></table></div></div></div></div></div></div><div class="alert alert-warning text-center" role=alert ng-if="filteredList.length < 1"><h2>No staff members found <span ng-if=staffdir.facet.library>in {{staffdir.facet.library}}</span> <span ng-if=staffdir.facet.liaison>that are liaisons</span> <span ng-if=staffdir.facet.subject><span ng-if=staffdir.facet.liaison>for</span> <span ng-if=!staffdir.facet.liaison>with a specialty in</span> {{staffdir.facet.subject}}</span></h2></div>')}]),angular.module("staff-card/staff-card-md.tpl.html",[]).run(["$templateCache",function(a){a.put("staff-card/staff-card-md.tpl.html",'<div class="staff-card-container panel panel-default"><div class=panel-body><div class=row><div class="name-plate col-sm-12 text-right"><h4 class=name><small ng-if=staffPerson.rank>{{staffPerson.rank}} </small>{{staffPerson.firstname}} {{staffPerson.lastname}}</h4><div class=title>{{staffPerson.title}}</div><div>{{staffPerson.department}}</div></div></div><div class=row><div class=col-xs-6><div class=staff-card-detail><h6>Contact</h6><ul class=fa-ul><li ng-if=staffPerson.phone><span class="fa fa-phone fa-li"></span><a ng-href=tel:+1-{{staffPerson.phone}}>{{staffPerson.phone}}</a></li><li ng-if=staffPerson.fax><span class="fa fa-fax fa-li"></span>{{staffPerson.fax}}</li><li ng-if=staffPerson.email><span class="fa fa-envelope fa-li"></span><a href=mailto:{{staffPerson.email}}>{{staffPerson.email}}</a></li></ul></div></div><div class=col-xs-6><div class=staff-card-detail ng-if=staffPerson.subjects><h6>Subject Expertise</h6><ul class=list-unstyled><li role=presentation ng-repeat="subject in staffPerson.subjects | orderBy:subject.subject" ng-class="{\'disabled\': !subject.link}"><a ng-href={{subject.link}} title={{subject.subject}} ng-if=subject.link>{{subject.subject}}</a> <span title={{subject.subject}} ng-if=!subject.link>{{subject.subject}}</span></li></ul></div></div></div></div></div>')}]),angular.module("staff-directory/staff-directory-facets.tpl.html",[]).run(["$templateCache",function(a){a.put("staff-directory/staff-directory-facets.tpl.html",'<form class=facets-form><div class=form-group><h2 class=h4>Filters</h2></div><div class=form-group><div class=facet-group><h3 id=searchStaffDirectory class=h5>Search staff directory</h3><input class=form-control id=directorySearch aria-labelledby=searchStaffDirectory name=directorySearch ng-model=staffdir.facet.search placeholder="Keyword Search..." ng-keyup="staffdir.changeFacet(\'search\')"></div></div><div class=form-group><h3 class=h5>Sort by</h3><div class=facet-group><div class="btn-group btn-group-justified"><button class="btn btn-default" ng-model=staffdir.facet.sortBy btn-radio="\'lastname\'" ng-change="staffdir.changeFacet(\'sortBy\')">Last name</button> <button class="btn btn-default" ng-model=staffdir.facet.sortBy btn-radio="\'firstname\'" ng-change="staffdir.changeFacet(\'sortBy\')">First name</button></div></div></div><div class="form-group hidden-xs hidden-sm"><h3 class=h5>Liaison area</h3><div class=facet-group><select class=form-control ng-model=staffdir.facet.subject name=subject ng-options="subject for subject in facets.subjects" ng-change="staffdir.changeFacet(\'subject\')"><option value="">-- Select Subject --</option></select><label class=checkbox-inline><input type=checkbox ng-true-value=1 ng-model=staffdir.facet.liaison ng-change="staffdir.changeFacet(\'liaison\')">Limit to liaisons</label></div></div><div class="form-group hidden-xs hidden-sm"><h3 class=h5>Department</h3><div class=facet-group><select class=form-control ng-model=staffdir.facet.department name=department ng-options="department for department in facets.departments" ng-change="staffdir.changeFacet(\'department\')"><option value="">-- Select Department --</option></select></div></div><div class="form-group hidden-xs hidden-sm"><h3 class=h5>Library Location</h3><div class=facet-group><div class=radio><label><input type=radio ng-model=staffdir.facet.library ng-checked=!staffdir.facet.library ng-change="staffdir.changeFacet(\'library\')"> All</label></div><div class=radio ng-repeat="library in facets.libraries"><label><input type=radio ng-model=staffdir.facet.library value={{library}} ng-change="staffdir.changeFacet(\'library\')"> {{library}}</label></div></div></div><div class="form-group hidden-xs hidden-sm"><button class="btn btn-primary btn-primary-dark btn-block" type=button ng-click=staffdir.clearFacets()><span class="fa fa-fw fa-refresh"></span> Reset Filters</button></div></form>')}]),angular.module("staff-directory/staff-directory-listing.tpl.html",[]).run(["$templateCache",function(a){a.put("staff-directory/staff-directory-listing.tpl.html",'<div class=table-responsive><table class="table table-striped table-condensed table-hover"><thead><tr><th><a href=# ng-click="sortList($event, \'lastname\')" ng-class="{\'sortable\': !staffdir.sortReverse && staffdir.facet.sortBy == \'lastname\', \'sortable-reverse\': staffdir.sortReverse && staffdir.facet.sortBy == \'lastname\'}">Name</a></th><th class=hidden-xs><a href=# ng-click="sortList($event, \'title\')" ng-class="{\'sortable\': !staffdir.sortReverse && staffdir.facet.sortBy == \'title\', \'sortable-reverse\': staffdir.sortReverse && staffdir.facet.sortBy == \'title\'}">Title</a></th><th class=hidden-xs><a href=# ng-click="sortList($event, \'department\')" ng-class="{\'sortable\': !staffdir.sortReverse && staffdir.facet.sortBy == \'department\', \'sortable-reverse\': staffdir.sortReverse && staffdir.sortBy == \'department\'}">Department/Unit</a></th><th>Contact</th><th class="hidden-xs hidden-sm">Specialty</th></tr></thead><tbody><tr ng-repeat="person in filteredList = (list | filter:staffdir.facet.search | filter:staffdir.facet.subject:true | orderBy:staffdir.sortBy:staffdir.sortReverse) track by $index"><td class=text-nowrap><div ng-if=person.rank class=text-muted>{{person.rank}}</div><span ng-bind-html="person.firstname | highlight:staffdir.facet.search"></span> <strong ng-bind-html="person.lastname | highlight:staffdir.facet.search"></strong></td><td class=hidden-xs><span ng-bind-html="person.title | highlight:staffdir.facet.search"></span></td><td class=hidden-xs><span ng-bind-html="person.department | highlight:staffdir.facet.search"></span></td><td><ul class=fa-ul><li ng-if=person.phone><span class="fa fa-phone fa-li"></span>{{person.phone}}</li><li ng-if=person.fax><span class="fa fa-fax fa-li"></span>{{person.fax}}</li><li ng-if=person.email><span class="fa fa-envelope fa-li"></span> <a ng-href=mailto:{{person.email}} title="Email {{person.firstname}} {{persone.lastname}}">{{person.email}}</a></li></ul></td><td class="hidden-xs hidden-sm"><ul class=list-unstyled ng-if=person.subjects><li ng-repeat="subject in person.subjects | orderBy:subject.subject"><a ng-href={{subject.link}} title={{subject.subject}} ng-if=subject.link ng-bind-html="subject.subject | highlight:staffdir.facet.search"></a> <span ng-if=!subject.link ng-bind-html="subject.subject | highlight:staffdir.facet.search">{{subject.subject}}</span></li></ul></td></tr></tbody></table><div class="alert alert-warning text-center" role=alert ng-show="filteredList.length === 0"><h2>No results<span ng-if=staffdir.facet.subject><strong> for {{staffdir.facet.subject}}</strong> subject specialists</span> <span ng-if=staffdir.facet.search>matching <strong>"{{staffdir.facet.search}}"</strong></span></h2></div></div>')}]),angular.module("staff-directory/staff-directory.tpl.html",[]).run(["$templateCache",function(a){a.put("staff-directory/staff-directory.tpl.html",'<div class=jumbotron-header><div class=jumbotron><div class=container><div class=row><div class=col-sm-12><ol class=breadcrumb typeof=BreadcrumbList vocab=http://schema.org/ ><li><a title="Go to The University of Alabama Libraries." href=/#/home class=home>The University of Alabama Libraries</a></li><li><a title="Go to News." href=/#/staffdir class="post post-page">Staff Directory</a></li></ol></div></div><div class=row><div class=col-md-12><h1>Staff Directory</h1></div></div></div></div></div><div class=container><div class="row staff-directory"><div class="col-md-3 col-md-push-9"><div class=staff-directory-facets facets=staffdir.facets></div></div><div class="col-md-9 col-md-pull-3"><div ng-show=facets.showFacetBar><ol class="breadcrumb facetcrumb"><li ng-if=facets.facet.department><strong>Department:</strong> <button type=button class="btn btn-default" ng-click="facets.clearFacets(\'department\')">{{facets.facet.department | truncate : 20 : \'...\'}} <span class=text-muted aria-hidden=true>&times;</span></button></li><li ng-if=facets.facet.library><strong>Library:</strong> <button type=button class="btn btn-default" ng-click="facets.clearFacets(\'library\')">{{facets.facet.library}} <span class=text-muted aria-hidden=true>&times;</span></button></li><li ng-if=facets.facet.subject><strong>Liaison area:</strong> <button type=button class="btn btn-default" ng-click="facets.clearFacets(\'subject\')">{{facets.facet.subject}} <span class=text-muted aria-hidden=true>&times;</span></button></li><li ng-if=facets.facet.liaison><button type=button class="btn btn-default" ng-click="facets.clearFacets(\'liaison\')">Liaison <span class=text-muted aria-hidden=true>&times;</span></button></li><li class=pull-right><button type=button class="btn btn-primary btn-small reset-btn" title="Reset filters" ng-click=facets.clearFacets()><i class="fa fa-refresh"></i></button></li></ol></div><div class=text-center><pagination class=pagination-sm ng-model=facets.pager.page total-items=facets.pager.totalItems max-size=facets.pager.maxSize boundary-links=true rotate=false items-per-page=facets.pager.perPage ng-change="facets.changeFacet(\'page\')" ng-if="facets.pager.totalItems > facets.pager.perPage"></pagination></div><div class=staff-directory-listing id=staff-directory-listing list=staffdir.list sort-by=lastname></div><div class=text-center><pagination class=pagination-sm ng-model=facets.pager.page total-items=facets.pager.totalItems max-size=facets.pager.maxSize boundary-links=true rotate=false items-per-page=facets.pager.perPage ng-change="facets.changeFacet(\'page\')" ng-if="facets.pager.totalItems > facets.pager.perPage"></pagination></div></div></div></div>')}]),angular.module("staff-profile/staff-profile.tpl.html",[]).run(["$templateCache",function(a){a.put("staff-profile/staff-profile.tpl.html",'<div class=container><ol class=breadcrumb typeof=BreadcrumbList vocab=http://schema.org/ ><li><a title="Go to The University of Alabama Libraries." href=/#/home class=home>The University of Alabama Libraries</a></li><li><a title="Go to the Staff Directory." href=/#/staffdir class=home>Staff Directory</a></li><li><a title="Go to user profile." href="" class=home>{{userProfile.person.firstname}} {{userProfile.person.lastname}}</a></li></ol><div class=page-header><h2>Faculty/Staff Profile</h2></div><div class="row staff-profile"><div class="hidden-xs col-md-3"><img class="staff-portrait thumbnail" ng-src={{userProfile.person.photo}} ng-if=userProfile.person.photo alt=""> <img class="staff-portrait thumbnail" ng-src=https://www.lib.ua.edu/wp-content/themes/roots-ualib/assets/img/user-profile.png ng-if=!userProfile.person.photo alt=""></div><div class=col-md-9><div class=name-plate><h1 class=name><small ng-if=userProfile.person.rank>{{userProfile.person.rank}}</small> <span ng-bind-html=userProfile.person.firstname></span> <span ng-bind-html=userProfile.person.lastname></span></h1><h2 class=title><span ng-bind-html=userProfile.person.title></span></h2><h3 class=hidden-xs><span ng-bind-html=userProfile.person.department></span></h3></div><div class=row><div class=page-slice><div class=col-md-6><ul class=fa-ul><li ng-if=userProfile.person.phone><span class="fa fa-phone fa-li"></span><a ng-href=tel:+1-{{userProfile.person.phone}}>{{userProfile.person.phone}}</a></li><li class=hidden-xs ng-if=userProfile.person.fax><span class="fa fa-fax fa-li"></span>{{userProfile.person.fax}}</li><li ng-if=userProfile.person.email><span class="fa fa-envelope fa-li"></span> <a href=mailto:{{userProfile.person.email}}>{{userProfile.person.email}}</a></li><li ng-if="userProfile.person.website.length > 11"><span class="fa fa-external-link-square fa-li"></span> <a ng-href={{userProfile.person.website}} class=external-link>Personal website</a></li></ul></div><div class=col-md-6><ul class=fa-ul><li ng-if="userProfile.person.resume.length > 11"><span class="fa fa-file-text fa-li"></span> <a ng-href={{userProfile.person.resume}}>Resume / CV</a></li><li ng-if=userProfile.person.social1><span class={{userProfile.person.snClass1}}></span> <a ng-href={{userProfile.person.social1}} class=external-link>{{userProfile.person.snTitle1}}</a></li><li ng-if=userProfile.person.social2><span class={{userProfile.person.snClass2}}></span> <a ng-href={{userProfile.person.social2}} class=external-link>{{userProfile.person.snTitle2}}</a></li><li ng-if=userProfile.person.social3><span class={{userProfile.person.snClass3}}></span> <a ng-href={{userProfile.person.social3}} class=external-link>{{userProfile.person.snTitle3}}</a></li></ul></div></div></div></div></div><div class=row><div class=col-md-12><span ng-bind-html=userProfile.person.profile></span></div></div></div>')}]),angular.module("ualib.staffdir",["ngRoute","ngResource","ngAnimate","ngSanitize","angular.filter","ui.bootstrap","ualib.ui","ualib.staffdir.templates"]),angular.module("staffdir",["ualib.staffdir"]),angular.module("ualib.staffdir").service("StaffDirectoryService",["$location","$rootScope",function(a,b){function c(a){var b;for(b in a)if(a[b]&&!d.facetExceptions.hasOwnProperty(b))return!1;return!0}var d=this;this.sortReverse=!1,this.sortable={},this.facet={},this.facetExceptions={sortBy:"lastname",search:"",page:1},this.pager={page:1,perPage:20,maxSize:10,totalItems:0},this.showFacetBar=!1,this.init=function(){var b=a.search();for(var c in b)this.showFacetBar||this.facetExceptions.hasOwnProperty(c)||(this.showFacetBar=!0),this.facet[c]=b[c]},this.clearFacets=function(){var e=arguments.length?arguments:Object.keys(d.facet),f=Array.prototype.concat.apply(Array.prototype,e),g={},h={};Object.keys(d.facet).map(function(b){d.facetExceptions.hasOwnProperty(b)?(h[b]=d.facetExceptions[b],a.search(b,null)):-1===f.indexOf(b)?(h[b]=d.facet[b],g[b]=d.facet[b]):a.search(b,null)}),d.showFacetBar=!c(g),d.facet=angular.copy(h),b.$broadcast("facetsChange")},this.changeFacet=function(e){var f=d.facet.hasOwnProperty(e)&&""!==d.facet[e]&&!1!==d.facet[e]?d.facet[e]:null;a.search(e,f),a.replace(),d.showFacetBar=!c(d.facet),b.$broadcast("facetsChange",e)},this.specialtyType=function(a){var b=d.facet.liaison;return!b||(b=3,a.subjects.filter(function(a){var c=(a.type&b)===b;return 3===b?(console.log(d.facet.subject),d.facet.subject?d.facet.subject===a.subject&&a.type>0:a.type>0):d.facet.subject?d.facet.subject===a.subject&&c:c}).length>0)}}]),angular.module("ualib.staffdir").factory("StaffFactory",["$resource","$filter","$http",function(a,b,c){function d(a,b){return a=angular.isArray(a)?a:[a],a.concat(b)}return{directory:function(){return a("//www.lib.ua.edu/staffDir/api/people",{},{get:{cache:!0,method:"GET",transformResponse:d(c.defaults.transformResponse,function(a){var c=["division","prefix","website","resume","social1","social2","social3"],d=angular.fromJson(a),e={list:[],facets:{}},f=[],g=[];return angular.forEach(d.list,function(a){var b={};for(var d in a)a.hasOwnProperty(d)&&-1===c.indexOf(d)&&(b[d]=a[d]);a=b,a.photo=a.photo||"",a.profile&&(a.profile=!0);var e=/^([\w-]+(?:\.[\w-]+)*)/,h=a.email.match(e);null!==h&&(a.emailPrefix=h[0]),g.push(a),angular.isDefined(a.subjects)&&a.subjects.length>0&&angular.forEach(a.subjects,function(a){f.push(a)})}),f=b("unique")(f,"subject"),f=b("orderBy")(f,"subject"),e.facets.subjects=f.map(function(a){return a.subject}),e.facets.libraries=d.libraries.map(function(a){return a.name}),e.facets.departments=d.departments.map(function(a){return a.name}),e.list=g,e})}})},byEmail:function(){return a("//www.lib.ua.edu/staffDir/api/people/search/email/:email",{},{cache:!0})},byName:function(){return a("//www.lib.ua.edu/staffDir/api/people/search/firstname/:firstname/lastname/:lastname",{},{cache:!0})},byId:function(){return a("//www.lib.ua.edu/staffDir/api/people/search/id/:id",{},{cache:!0})},profile:function(){return a("//www.lib.ua.edu/staffDir/api/profile/:login",{},{cache:!0})}}}]),angular.module("ualib.staffdir").config(["$routeProvider",function(a){a.when("/staffdir/cardlist",{template:'<div class="staff-card-list"></div>'})}]).directive("staffCardList",["StaffFactory",function(a){return{restrict:"AC",templateUrl:"staff-card/staff-card-list.tpl.html",controller:["$scope",function(b){b.staffdir={},a.directory().get().$promise.then(function(a){b.staffdir=a.list},function(){console.log("Staffdir Error -- Come on, put in proper error handling already")})}]}}]).directive("staffCard",["StaffFactory",function(a){return{restrict:"EA",scope:{person:"@",size:"@"},templateUrl:function(a,b){var c="staff-card/";switch(b.size){case"sm":c+="staff-card-sm.tpl.html";break;default:c+="staff-card-md.tpl.html"}return c},link:function(b,c){if(angular.isDefined(b.person))if(b.info={},angular.isNumber(b.person))a.byId().get({id:b.person}).$promise.then(function(a){b.staffPerson=a.list[0]},function(){console.log("Staffdir Error -- Come on, put in proper error handling already")});else{var d=b.person.split(/\s/);d.length>1?a.byName().get({firstname:d[0],lastname:d[1]}).$promise.then(function(a){b.staffPerson=a.list[0]},function(){console.log("Staffdir Error -- Come on, put in proper error handling already")}):a.byEmail().get({email:d[0]}).$promise.then(function(a){b.staffPerson=a.list[0]},function(){console.log("Staffdir Error -- Come on, put in proper error handling already")})}}}}]),angular.module("ualib.staffdir").config(["$routeProvider",function(a){a.when("/staffdir",{reloadOnSearch:!1,controller:"StaffDirCtrl",templateUrl:"staff-directory/staff-directory.tpl.html",resolve:{StaffDir:["StaffFactory",function(a){return a.directory().get().$promise.then(function(a){return a},function(a,b){return console.log("Error"+b+": "+a),staff})}]}})}]).controller("StaffDirCtrl",["$scope","StaffDir","StaffDirectoryService",function(a,b,c){a.staffdir=b,a.facets=c,c.pager.totalItems=b.list.length}]).directive("staffDirectoryListing",["StaffDirectoryService","$document","$filter",function(a,b,c){return{restrict:"AC",scope:{list:"=",sortBy:"@"},templateUrl:"staff-card/staff-card-list.tpl.html",controller:["$scope",function(d){function e(b){a.pager.totalItems=b;var c=Math.floor(a.pager.totalItems/a.pager.maxSize);c<a.pager.page&&(a.pager.page=c||1),a.pager.firstItem=(a.pager.page-1)*a.pager.perPage+1,a.pager.lastItem=Math.min(a.pager.totalItems,a.pager.page*a.pager.perPage)}function f(){d.filteredList=g(d.list),e(d.filteredList.length),b.duScrollTo(0,30,500,function(a){return--a*a*a+1})}function g(b){for(var d in a.facet)switch(d){case"department":case"library":b=c("filterBy")(b,[d],a.facet[d]);break;case"selector":case"instructor":case"liaison":b=c("filter")(b,a.specialtyType);break;case"subject":b=c("filter")(b,a.facet[d],!0);break;case"sortBy":b=c("orderBy")(b,a.facet[d],a.sortReverse);break;default:var e=a.facet[d].split(" ");for(i=0;i<e.length;i++)b=c("filter")(b,e[i])}return b}a.init(),d.staffdir=a,d.filteredList=g(d.list),e(d.filteredList.length),d.placeholder="https://www.lib.ua.edu/wp-content/themes/roots-ualib/assets/img/user-profile.png",angular.isUndefined(a.facet.sortBy)&&(d.staffdir.facet.sortBy=angular.isDefined(d.sortBy)?d.sortBy:"lastname");var h=d.$on("facetsChange",function(){f()});d.$on("$destroy",function(){h()})}]}}]).directive("staffDirectoryFacets",["StaffDirectoryService",function(a){return{restrict:"AC",scope:{facets:"="},templateUrl:"staff-directory/staff-directory-facets.tpl.html",controller:["$scope",function(b){b.staffdir=a}]}}]).filter("alphaIndex",function(){return function(a,b){return a.map(function(a){return a.alphaIndex=a[b].charAt(0).toUpperCase(),a})}}),angular.module("ualib.staffdir").config(["$routeProvider",function(a){a.when("/staffdir/:email",{template:function(a){return'<div class="staff-faculty-profile" email="'+a.email+'"></div>'}})}]).directive("staffFacultyProfile",["StaffFactory",function(a){return{restrict:"AC",scope:{login:"@email"},templateUrl:"staff-profile/staff-profile.tpl.html",controller:["$scope",function(b){b.userProfile={},a.profile().get({login:b.login}).$promise.then(function(a){for(var c=1;c<4;c++)null!==a.person["social"+c]&&(a.person["snClass"+c]="fa fa-user fa-li",a.person["snTitle"+c]="Social Network",a.person["social"+c].toLowerCase().indexOf("facebook.com")>0&&(a.person["snClass"+c]="fa fa-facebook fa-li",a.person["snTitle"+c]="Facebook"),a.person["social"+c].toLowerCase().indexOf("twitter.com")>0&&(a.person["snClass"+c]="fa fa-twitter fa-li",a.person["snTitle"+c]="Twitter"),a.person["social"+c].toLowerCase().indexOf("linkedin.com")>0&&(a.person["snClass"+c]="fa fa-linkedin fa-li",a.person["snTitle"+c]="LinkedIn"),a.person["social"+c].toLowerCase().indexOf("vk.com")>0&&(a.person["snClass"+c]="fa fa-vk fa-li",a.person["snTitle"+c]="VK"),a.person["social"+c].toLowerCase().indexOf("plus.google.com")>0&&(a.person["snClass"+c]="fa fa-google-plus fa-li",a.person["snTitle"+c]="Google Plus"),a.person["social"+c].toLowerCase().indexOf("instagram.com")>0&&(a.person["snClass"+c]="fa fa-instagram fa-li",a.person["snTitle"+c]="Instagram"),a.person["social"+c].toLowerCase().indexOf("youtube.com")>0&&(a.person["snClass"+c]="fa fa-youtube fa-li",a.person["snTitle"+c]="Youtube"));b.userProfile=a},function(a){console.log("Error: cold not get profile! "+a)})}]}}]);