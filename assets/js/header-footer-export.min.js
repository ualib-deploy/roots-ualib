function inArray(a,b){return b.indexOf(a)>-1}function isEmpty(a){if(null==a)return!0;if(a.length>0)return!1;if(0===a.length)return!0;for(var b in a)if(hasOwnProperty.call(a,b))return!1;return!0}function toArray(a){return Array.isArray(a)?a:Object.keys(a).map(function(b){return a[b]})}angular.module("ualib",["ngAnimate","ui.bootstrap","ualib.ui","oneSearch"]),angular.module("ui.bootstrap",["ui.bootstrap.collapse"]),angular.module("ualib.ui",[]),angular.module("templates-header_footer_export",[]),function(a,b,c){"use strict";function d(a){return D(a)?a:Object.keys(a).map(function(b){return a[b]})}function e(a){return null===a}function f(a,b){return-1==Object.keys(a).map(function(d){return b[d]!==c&&b[d]==a[d]}).indexOf(!1)}function g(a,b){if(""===b)return a;var c=a.indexOf(b.charAt(0));return-1!==c&&g(a.substr(c+1),b.substr(1))}function h(a,b,c){var d=0;return a.filter(function(a){var e=x(c)?b>d&&c(a):b>d;return d=e?d+1:d,e})}function i(a,b,c){return c.round(a*c.pow(10,b))/c.pow(10,b)}function j(a,b,c){return b=b||[],Object.keys(a).forEach(function(d){if(C(a[d])&&!D(a[d])){var e=c?c+"."+d:c;j(a[d],b,e||d)}else{var f=c?c+"."+d:d;b.push(f)}}),b}function k(a){return a&&a.$evalAsync&&a.$watch}function l(){return function(a,b){return a>b}}function m(){return function(a,b){return a>=b}}function n(){return function(a,b){return b>a}}function o(){return function(a,b){return b>=a}}function p(){return function(a,b){return a==b}}function q(){return function(a,b){return a!=b}}function r(){return function(a,b){return a===b}}function s(){return function(a,b){return a!==b}}function t(a){return function(b,c){return b=C(b)?d(b):b,!(!D(b)||y(c))&&b.some(function(b){return C(b)||z(c)?a(c)(b):b===c})}}function u(a,b){return b=b||0,b>=a.length?a:D(a[b])?u(a.slice(0,b).concat(a[b],a.slice(b+1)),b):u(a,b+1)}function v(a){return function(b,c){function e(a,b){return!y(b)&&a.some(function(a){return H(a,b)})}if(b=C(b)?d(b):b,!D(b))return b;var f=[],g=a(c);return y(c)?b.filter(function(a,b,c){return c.indexOf(a)===b}):b.filter(function(a){var b=g(a);return!e(f,b)&&(f.push(b),!0)})}}function w(a,b,c){return b?a+c+w(a,--b,c):a}var x=b.isDefined,y=b.isUndefined,z=b.isFunction,A=b.isString,B=b.isNumber,C=b.isObject,D=b.isArray,E=b.forEach,F=b.extend,G=b.copy,H=b.equals;String.prototype.contains||(String.prototype.contains=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),b.module("a8m.angular",[]).filter("isUndefined",function(){return function(a){return b.isUndefined(a)}}).filter("isDefined",function(){return function(a){return b.isDefined(a)}}).filter("isFunction",function(){return function(a){return b.isFunction(a)}}).filter("isString",function(){return function(a){return b.isString(a)}}).filter("isNumber",function(){return function(a){return b.isNumber(a)}}).filter("isArray",function(){return function(a){return b.isArray(a)}}).filter("isObject",function(){return function(a){return b.isObject(a)}}).filter("isEqual",function(){return function(a,c){return b.equals(a,c)}}),b.module("a8m.conditions",[]).filter({isGreaterThan:l,">":l,isGreaterThanOrEqualTo:m,">=":m,isLessThan:n,"<":n,isLessThanOrEqualTo:o,"<=":o,isEqualTo:p,"==":p,isNotEqualTo:q,"!=":q,isIdenticalTo:r,"===":r,isNotIdenticalTo:s,"!==":s}),b.module("a8m.is-null",[]).filter("isNull",function(){return function(a){return e(a)}}),b.module("a8m.after-where",[]).filter("afterWhere",function(){return function(a,b){if(a=C(a)?d(a):a,!D(a)||y(b))return a;var c=a.map(function(a){return f(b,a)}).indexOf(!0);return a.slice(-1===c?0:c)}}),b.module("a8m.after",[]).filter("after",function(){return function(a,b){return a=C(a)?d(a):a,D(a)?a.slice(b):a}}),b.module("a8m.before-where",[]).filter("beforeWhere",function(){return function(a,b){if(a=C(a)?d(a):a,!D(a)||y(b))return a;var c=a.map(function(a){return f(b,a)}).indexOf(!0);return a.slice(0,-1===c?a.length:++c)}}),b.module("a8m.before",[]).filter("before",function(){return function(a,b){return a=C(a)?d(a):a,D(a)?a.slice(0,b?--b:b):a}}),b.module("a8m.chunk-by",[]).filter("chunkBy",[function(){function a(a,b){for(var c=[];a--;)c[a]=b;return c}return function(b,c,d){return D(b)?b.map(function(b,e,f){return e*=c,b=f.slice(e,e+c),!y(d)&&b.length<c?b.concat(a(c-b.length,d)):b}).slice(0,Math.ceil(b.length/c)):b}}]),b.module("a8m.concat",[]).filter("concat",[function(){return function(a,b){if(y(b))return a;if(D(a))return C(b)?a.concat(d(b)):a.concat(b);if(C(a)){var c=d(a);return C(b)?c.concat(d(b)):c.concat(b)}return a}}]),b.module("a8m.contains",[]).filter({contains:["$parse",t],some:["$parse",t]}),b.module("a8m.count-by",[]).filter("countBy",["$parse",function(a){return function(b,c){var e,f={},g=a(c);return b=C(b)?d(b):b,!D(b)||y(c)?b:(b.forEach(function(a){e=g(a),f[e]||(f[e]=0),f[e]++}),f)}}]),b.module("a8m.defaults",[]).filter("defaults",["$parse",function(a){return function(b,c){if(b=C(b)?d(b):b,!D(b)||!C(c))return b;var e=j(c);return b.forEach(function(b){e.forEach(function(d){var e=a(d),f=e.assign;y(e(b))&&f(b,e(c))})}),b}}]),b.module("a8m.every",[]).filter("every",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!(D(b)&&!y(c))||b.every(function(b){return C(b)||z(c)?a(c)(b):b===c})}}]),b.module("a8m.filter-by",[]).filter("filterBy",["$parse",function(a){return function(b,e,f){var g;return f=A(f)||B(f)?String(f).toLowerCase():c,b=C(b)?d(b):b,!D(b)||y(f)?b:b.filter(function(b){return e.some(function(c){if(~c.indexOf("+")){var d=c.replace(new RegExp("\\s","g"),"").split("+");g=d.reduce(function(c,d,e){return 1===e?a(c)(b)+" "+a(d)(b):c+" "+a(d)(b)})}else g=a(c)(b);return!(!A(g)&&!B(g))&&String(g).toLowerCase().contains(f)})})}}]),b.module("a8m.first",[]).filter("first",["$parse",function(a){return function(b){var e,f,g;return b=C(b)?d(b):b,D(b)?(g=Array.prototype.slice.call(arguments,1),e=B(g[0])?g[0]:1,f=B(g[0])?B(g[1])?c:g[1]:g[0],g.length?h(b,e,f?a(f):f):b[0]):b}}]),b.module("a8m.flatten",[]).filter("flatten",function(){return function(a,b){return b=b||!1,a=C(a)?d(a):a,D(a)?b?[].concat.apply([],a):u(a,0):a}}),b.module("a8m.fuzzy-by",[]).filter("fuzzyBy",["$parse",function(a){return function(b,c,e,f){var h,i,j=f||!1;return b=C(b)?d(b):b,!D(b)||y(c)||y(e)?b:(i=a(c),b.filter(function(a){return h=i(a),!!A(h)&&(h=j?h:h.toLowerCase(),e=j?e:e.toLowerCase(),!1!==g(h,e))}))}}]),b.module("a8m.fuzzy",[]).filter("fuzzy",function(){return function(a,b,c){function e(a,b){var c,d;return 0<Object.keys(a).filter(function(e){return c=a[e],!!d||!!A(c)&&(c=f?c:c.toLowerCase(),d=!1!==g(c,b))}).length}var f=c||!1;return a=C(a)?d(a):a,!D(a)||y(b)?a:(b=f?b:b.toLowerCase(),a.filter(function(a){return A(a)?(a=f?a:a.toLowerCase(),!1!==g(a,b)):!!C(a)&&e(a,b)}))}}),b.module("a8m.group-by",["a8m.filter-watcher"]).filter("groupBy",["$parse","filterWatcher",function(a,b){return function(c,d){function e(a,b){var c,d={};return E(a,function(a){c=b(a),d[c]||(d[c]=[]),d[c].push(a)}),d}if(!C(c)||y(d))return c;var f=a(d);return b.isMemoized("groupBy",arguments)||b.memoize("groupBy",arguments,this,e(c,f))}}]),b.module("a8m.is-empty",[]).filter("isEmpty",function(){return function(a){return C(a)?!d(a).length:!a.length}}),b.module("a8m.join",[]).filter("join",function(){return function(a,b){return y(a)||!D(a)?a:(y(b)&&(b=" "),a.join(b))}}),b.module("a8m.last",[]).filter("last",["$parse",function(a){return function(b){var e,f,g,i=G(b);return i=C(i)?d(i):i,D(i)?(g=Array.prototype.slice.call(arguments,1),e=B(g[0])?g[0]:1,f=B(g[0])?B(g[1])?c:g[1]:g[0],g.length?h(i.reverse(),e,f?a(f):f).reverse():i[i.length-1]):i}}]),b.module("a8m.map",[]).filter("map",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.map(function(b){return a(c)(b)})}}]),b.module("a8m.omit",[]).filter("omit",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.filter(function(b){return!a(c)(b)})}}]),b.module("a8m.pick",[]).filter("pick",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.filter(function(b){return a(c)(b)})}}]),b.module("a8m.range",[]).filter("range",function(){return function(a,b){for(var c=0;c<parseInt(b);c++)a.push(c);return a}}),b.module("a8m.remove-with",[]).filter("removeWith",function(){return function(a,b){return y(b)?a:(a=C(a)?d(a):a,a.filter(function(a){return!f(b,a)}))}}),b.module("a8m.remove",[]).filter("remove",function(){return function(a){a=C(a)?d(a):a;var b=Array.prototype.slice.call(arguments,1);return D(a)?a.filter(function(a){return!b.some(function(b){return H(b,a)})}):a}}),b.module("a8m.reverse",[]).filter("reverse",[function(){return function(a){return a=C(a)?d(a):a,A(a)?a.split("").reverse().join(""):D(a)?a.slice().reverse():a}}]),b.module("a8m.search-field",[]).filter("searchField",["$parse",function(a){return function(b){var c,e;b=C(b)?d(b):b;var f=Array.prototype.slice.call(arguments,1);return D(b)&&f.length?b.map(function(b){return e=f.map(function(d){return(c=a(d))(b)}).join(" "),F(b,{searchField:e})}):b}}]),b.module("a8m.to-array",[]).filter("toArray",function(){return function(a,b){return C(a)?b?Object.keys(a).map(function(b){return F(a[b],{$key:b})}):d(a):a}}),b.module("a8m.unique",[]).filter({unique:["$parse",v],uniq:["$parse",v]}),b.module("a8m.where",[]).filter("where",function(){return function(a,b){return y(b)?a:(a=C(a)?d(a):a,a.filter(function(a){return f(b,a)}))}}),b.module("a8m.xor",[]).filter("xor",["$parse",function(a){return function(b,c,e){function f(b,c){var d=a(e);return c.some(function(a){return e?H(d(a),d(b)):H(a,b)})}return e=e||!1,b=C(b)?d(b):b,c=C(c)?d(c):c,D(b)&&D(c)?b.concat(c).filter(function(a){return!(f(a,b)&&f(a,c))}):b}}]),b.module("a8m.math.byteFmt",["a8m.math"]).filter("byteFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1==0&&c>=0&&B(b)&&isFinite(b)?1024>b?i(b,c,a)+" B":1048576>b?i(b/1024,c,a)+" KB":1073741824>b?i(b/1048576,c,a)+" MB":i(b/1073741824,c,a)+" GB":"NaN"}}]),b.module("a8m.math.degrees",["a8m.math"]).filter("degrees",["$math",function(a){return function(b,c){if(B(c)&&isFinite(c)&&c%1==0&&c>=0&&B(b)&&isFinite(b)){var d=180*b/a.PI;return a.round(d*a.pow(10,c))/a.pow(10,c)}return"NaN"}}]),b.module("a8m.math.kbFmt",["a8m.math"]).filter("kbFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1==0&&c>=0&&B(b)&&isFinite(b)?1024>b?i(b,c,a)+" KB":1048576>b?i(b/1024,c,a)+" MB":i(b/1048576,c,a)+" GB":"NaN"}}]),b.module("a8m.math",[]).factory("$math",["$window",function(a){return a.Math}]),b.module("a8m.math.max",["a8m.math"]).filter("max",["$math","$parse",function(a,b){function c(c,d){var e=c.map(function(a){return b(d)(a)});return e.indexOf(a.max.apply(a,e))}return function(b,d){return D(b)?y(d)?a.max.apply(a,b):b[c(b,d)]:b}}]),b.module("a8m.math.min",["a8m.math"]).filter("min",["$math","$parse",function(a,b){function c(c,d){var e=c.map(function(a){return b(d)(a)});return e.indexOf(a.min.apply(a,e))}return function(b,d){return D(b)?y(d)?a.min.apply(a,b):b[c(b,d)]:b}}]),b.module("a8m.math.percent",["a8m.math"]).filter("percent",["$math","$window",function(a,b){return function(c,d,e){var f=A(c)?b.Number(c):c;return d=d||100,e=e||!1,!B(f)||b.isNaN(f)?c:e?a.round(f/d*100):f/d*100}}]),b.module("a8m.math.radians",["a8m.math"]).filter("radians",["$math",function(a){return function(b,c){if(B(c)&&isFinite(c)&&c%1==0&&c>=0&&B(b)&&isFinite(b)){var d=3.14159265359*b/180;return a.round(d*a.pow(10,c))/a.pow(10,c)}return"NaN"}}]),b.module("a8m.math.radix",[]).filter("radix",function(){return function(a,b){var c=/^[2-9]$|^[1-2]\d$|^3[0-6]$/;return B(a)&&c.test(b)?a.toString(b).toUpperCase():a}}),b.module("a8m.math.shortFmt",["a8m.math"]).filter("shortFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1==0&&c>=0&&B(b)&&isFinite(b)?1e3>b?b:1e6>b?i(b/1e3,c,a)+" K":1e9>b?i(b/1e6,c,a)+" M":i(b/1e9,c,a)+" B":"NaN"}}]),b.module("a8m.math.sum",[]).filter("sum",function(){return function(a,b){return D(a)?a.reduce(function(a,b){return a+b},b||0):a}}),b.module("a8m.ends-with",[]).filter("endsWith",function(){return function(a,b,c){var d,e=c||!1;return!A(a)||y(b)?a:(a=e?a:a.toLowerCase(),d=a.length-b.length,-1!==a.indexOf(e?b:b.toLowerCase(),d))}}),b.module("a8m.latinize",[]).filter("latinize",[function(){function a(a){return a.replace(/[^\u0000-\u007E]/g,function(a){return c[a]||a})}for(var b=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],c={},d=0;d<b.length;d++)for(var e=b[d].letters.split(""),f=0;f<e.length;f++)c[e[f]]=b[d].base;return function(b){return A(b)?a(b):b}}]),b.module("a8m.ltrim",[]).filter("ltrim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp("^"+c+"+"),""):a}}),b.module("a8m.match",[]).filter("match",function(){return function(a,b,c){var d=new RegExp(b,c);return A(a)?a.match(d):null}}),b.module("a8m.repeat",[]).filter("repeat",[function(){return function(a,b,c){var d=~~b;return A(a)&&d?w(a,--b,c||""):a}}]),b.module("a8m.rtrim",[]).filter("rtrim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp(c+"+$"),""):a}}),b.module("a8m.slugify",[]).filter("slugify",[function(){return function(a,b){var c=y(b)?"-":b;return A(a)?a.toLowerCase().replace(/\s+/g,c):a}}]),b.module("a8m.starts-with",[]).filter("startsWith",function(){return function(a,b,c){var d=c||!1;return!A(a)||y(b)?a:(a=d?a:a.toLowerCase(),!a.indexOf(d?b:b.toLowerCase()))}}),b.module("a8m.stringular",[]).filter("stringular",function(){return function(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,c){return y(b[c])?a:b[c]})}}),b.module("a8m.strip-tags",[]).filter("stripTags",function(){return function(a){return A(a)?a.replace(/<\S[^><]*>/g,""):a}}),b.module("a8m.test",[]).filter("test",function(){return function(a,b,c){var d=new RegExp(b,c);return A(a)?d.test(a):a}}),b.module("a8m.trim",[]).filter("trim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp("^"+c+"+|"+c+"+$","g"),""):a}}),b.module("a8m.truncate",[]).filter("truncate",function(){return function(a,b,c,d){return b=y(b)?a.length:b,d=d||!1,c=c||"",!A(a)||a.length<=b?a:a.substring(0,d?-1===a.indexOf(" ",b)?a.length:a.indexOf(" ",b):b)+c}}),b.module("a8m.ucfirst",[]).filter("ucfirst",[function(){return function(a){return A(a)?a.split(" ").map(function(a){return a.charAt(0).toUpperCase()+a.substring(1)}).join(" "):a}}]),b.module("a8m.uri-component-encode",[]).filter("uriComponentEncode",["$window",function(a){return function(b){return A(b)?a.encodeURIComponent(b):b}}]),b.module("a8m.uri-encode",[]).filter("uriEncode",["$window",function(a){return function(b){return A(b)?a.encodeURI(b):b}}]),b.module("a8m.wrap",[]).filter("wrap",function(){return function(a,b,c){return A(a)&&x(b)?[b,a,c||b].join(""):a}}),b.module("a8m.filter-watcher",[]).provider("filterWatcher",function(){this.$get=["$window","$rootScope",function(a,c){function d(a,c){return[a,b.toJson(c)].join("#").replace(/"/g,"")}function e(a){var b=a.targetScope.$id;E(l[b],function(a){delete j[a]}),delete l[b]}function f(){m(function(){c.$$phase||(j={})})}function g(a,b){var c=a.$id;return y(l[c])&&(a.$on("$destroy",e),l[c]=[]),l[c].push(b)}function h(a,b){var c=d(a,b);return j[c]}function i(a,b,c,e){var h=d(a,b);return j[h]=e,k(c)?g(c,h):f(),e}var j={},l={},m=a.setTimeout;return{isMemoized:h,memoize:i}}]}),b.module("angular.filter",["a8m.ucfirst","a8m.uri-encode","a8m.uri-component-encode","a8m.slugify","a8m.latinize","a8m.strip-tags","a8m.stringular","a8m.truncate","a8m.starts-with","a8m.ends-with","a8m.wrap","a8m.trim","a8m.ltrim","a8m.rtrim","a8m.repeat","a8m.test","a8m.match","a8m.to-array","a8m.concat","a8m.contains","a8m.unique","a8m.is-empty","a8m.after","a8m.after-where","a8m.before","a8m.before-where","a8m.defaults","a8m.where","a8m.reverse","a8m.remove","a8m.remove-with","a8m.group-by","a8m.count-by","a8m.chunk-by","a8m.search-field","a8m.fuzzy-by","a8m.fuzzy","a8m.omit","a8m.pick","a8m.every","a8m.filter-by","a8m.xor","a8m.map","a8m.first","a8m.last","a8m.flatten","a8m.join","a8m.range","a8m.math","a8m.math.max","a8m.math.min","a8m.math.percent","a8m.math.radix","a8m.math.sum","a8m.math.degrees","a8m.math.radians","a8m.math.byteFmt","a8m.math.kbFmt","a8m.math.shortFmt","a8m.angular","a8m.conditions","a8m.is-null","a8m.filter-watcher"])}(window,window.angular),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(a){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){if(k)k=!1,i(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});c[0].offsetWidth;c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i)}}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]);var duScrollDefaultEasing=function(a){"use strict";return a<.5?Math.pow(2*a,2)/2:1-Math.pow(2*(1-a),2)/2},duScroll=angular.module("duScroll",["duScroll.scrollspy","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.spyContext","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollSpyWait",100).value("duScrollSpyRefreshInterval",0).value("duScrollGreedy",!1).value("duScrollOffset",0).value("duScrollEasing",duScrollDefaultEasing).value("duScrollCancelOnEvents","scroll mousedown mousewheel touchmove keydown").value("duScrollBottomSpy",!1).value("duScrollActiveClass","active");"undefined"!=typeof module&&module&&module.exports&&(module.exports=duScroll),angular.module("duScroll.scrollHelpers",["duScroll.requestAnimation"]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset","duScrollCancelOnEvents",function(a,b,c,d,e,f,g,h){"use strict";var i={},j=function(a){return"undefined"!=typeof HTMLDocument&&a instanceof HTMLDocument||a.nodeType&&a.nodeType===a.DOCUMENT_NODE},k=function(a){return"undefined"!=typeof HTMLElement&&a instanceof HTMLElement||a.nodeType&&a.nodeType===a.ELEMENT_NODE},l=function(a){return k(a)||j(a)?a:a[0]};i.duScrollTo=function(b,c,d,e){var f;if(angular.isElement(b)?f=this.duScrollToElement:angular.isDefined(d)&&(f=this.duScrollToAnimated),f)return f.apply(this,arguments);var g=l(this);if(j(g))return a.scrollTo(b,c);g.scrollLeft=b,g.scrollTop=c};var m,n;i.duScrollToAnimated=function(a,f,g,i){g&&!i&&(i=e);var j=this.duScrollLeft(),k=this.duScrollTop(),l=Math.round(a-j),o=Math.round(f-k),p=null,q=0,r=this,s=function(a){(!a||q&&a.which>0)&&(h&&r.unbind(h,s),c(m),n.reject(),m=null)};if(m&&s(),n=b.defer(),0===g||!l&&!o)return 0===g&&r.duScrollTo(a,f),n.resolve(),n.promise;var t=function(a){null===p&&(p=a),q=a-p;var b=q>=g?1:i(q/g);r.scrollTo(j+Math.ceil(l*b),k+Math.ceil(o*b)),b<1?m=d(t):(h&&r.unbind(h,s),m=null,n.resolve())};return r.duScrollTo(j,k),h&&r.bind(h,s),m=d(t),n.promise},i.duScrollToElement=function(a,b,c,d){var e=l(this);angular.isNumber(b)&&!isNaN(b)||(b=g);var f=this.duScrollTop()+l(a).getBoundingClientRect().top-b;return k(e)&&(f-=e.getBoundingClientRect().top),this.duScrollTo(0,f,c,d)},i.duScrollLeft=function(b,c,d){if(angular.isNumber(b))return this.duScrollTo(b,this.duScrollTop(),c,d);var e=l(this);return j(e)?a.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:e.scrollLeft},i.duScrollTop=function(b,c,d){if(angular.isNumber(b))return this.duScrollTo(this.duScrollLeft(),b,c,d);var e=l(this);return j(e)?a.scrollY||document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop},i.duScrollToElementAnimated=function(a,b,c,d){return this.duScrollToElement(a,b,c||f,d)},i.duScrollTopAnimated=function(a,b,c){return this.duScrollTop(a,b||f,c)},i.duScrollLeftAnimated=function(a,b,c){return this.duScrollLeft(a,b||f,c)},angular.forEach(i,function(a,b){angular.element.prototype[b]=a;var c=b.replace(/^duScroll/,"scroll");angular.isUndefined(angular.element.prototype[c])&&(angular.element.prototype[c]=a)})}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function(a){"use strict";var b=["webkit","moz","o","ms"];return function(c,d){if(a[c])return a[c];for(var e,f=c.substr(0,1).toUpperCase()+c.substr(1),g=0;g<b.length;g++)if(e=b[g]+f,a[e])return a[e];return d}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(a,b){"use strict";var c=0;return a("requestAnimationFrame",function(a,d){var e=(new Date).getTime(),f=Math.max(0,16-(e-c)),g=b(function(){a(e+f)},f);return c=e+f,g})}]).factory("cancelAnimation",["polyfill","$timeout",function(a,b){"use strict";return a("cancelAnimationFrame",function(a){b.cancel(a)})}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","$timeout","$interval","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait","duScrollSpyRefreshInterval","duScrollBottomSpy","duScrollActiveClass",function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=function(c){var f=!1,i=!1,l=function(){i=!1;var b,f=c.container,h=f[0],l=0;if("undefined"!=typeof HTMLElement&&h instanceof HTMLElement||h.nodeType&&h.nodeType===h.ELEMENT_NODE)l=h.getBoundingClientRect().top,b=Math.round(h.scrollTop+h.clientHeight)>=h.scrollHeight;else{var m=e[0].body.scrollHeight||e[0].documentElement.scrollHeight;b=Math.round(d.pageYOffset+d.innerHeight)>=m}var n,o,p,q,r,s,t=j&&b?"bottom":"top";for(q=c.spies,o=c.currentlyActive,p=void 0,n=0;n<q.length;n++)r=q[n],(s=r.getTargetPosition())&&r.$element&&(j&&b||s.top+r.offset-l<20&&(g||-1*s.top+l)<s.height)&&(!p||p[t]<s[t])&&(p={spy:r},p[t]=s[t]);p&&(p=p.spy),o===p||g&&!p||(o&&o.$element&&(o.$element.removeClass(k),a.$broadcast("duScrollspy:becameInactive",o.$element,angular.element(o.getTargetElement()))),p&&(p.$element.addClass(k),a.$broadcast("duScrollspy:becameActive",p.$element,angular.element(p.getTargetElement()))),c.currentlyActive=p)};return h?function(){f?i=!0:(l(),f=b(function(){f=!1,i&&l()},h,!1))}:l},m={},n=function(a){var b=a.$id,c={spies:[]};return c.handler=l(c),m[b]=c,a.$on("$destroy",function(){o(a)}),b},o=function(a){var b=a.$id,d=m[b],e=d.container;d.intervalPromise&&c.cancel(d.intervalPromise),e&&e.off("scroll",d.handler),delete m[b]},p=n(a),q=function(a){return m[a.$id]?m[a.$id]:a.$parent?q(a.$parent):m[p]},r=function(a){var b,c,d=a.$scope;if(d)return q(d);for(c in m)if(b=m[c],-1!==b.spies.indexOf(a))return b},s=function(a){for(;a.parentNode;)if((a=a.parentNode)===document)return!0;return!1};return{addSpy:function(a){var b=r(a);b&&(b.spies.push(a),b.container&&s(b.container)||(b.container&&b.container.off("scroll",b.handler),b.container=f.getContainer(a.$scope),i&&!b.intervalPromise&&(b.intervalPromise=c(b.handler,i,0,!1)),b.container.on("scroll",b.handler).triggerHandler("scroll")))},removeSpy:function(b){var c=r(b);b===c.currentlyActive&&(a.$broadcast("duScrollspy:becameInactive",c.currentlyActive.$element),c.currentlyActive=null);var d=c.spies.indexOf(b);-1!==d&&c.spies.splice(d,1),b.$element=null},createContext:n,destroyContext:o,getContextForScope:q}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function(a){"use strict";var b={},c=function(a,c){var d=a.$id;return b[d]=c,d},d=function(a){return b[a.$id]?a.$id:a.$parent?d(a.$parent):void 0};return{getContainerId:d,getContainer:function(c){var e=d(c);return e?b[e]:a},setContainer:c,removeContainer:function(a){var c=d(a);c&&delete b[c]}}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","duScrollOffset","scrollContainerAPI",function(a,b,c){"use strict";return{link:function(d,e,f){e.on("click",function(e){if(f.href&&-1!==f.href.indexOf("#")||""!==f.duSmoothScroll){var g=f.href?f.href.replace(/.*(?=#[^\s]+$)/,"").substring(1):f.duSmoothScroll,h=document.getElementById(g)||document.getElementsByName(g)[0];if(h&&h.getBoundingClientRect){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault();var i=f.offset?parseInt(f.offset,10):b,j=f.duration?parseInt(f.duration,10):a;c.getContainer(d).duScrollToElement(angular.element(h),isNaN(i)?0:i,isNaN(j)?0:j)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(a){"use strict";return{restrict:"A",scope:!0,compile:function(b,c,d){return{pre:function(b,c,d,e){a.createContext(b)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(a){"use strict";return{restrict:"A",scope:!0,compile:function(b,c,d){return{pre:function(b,c,d,e){d.$observe("duScrollContainer",function(d){angular.isString(d)&&(d=document.getElementById(d)),d=angular.isElement(d)?angular.element(d):c,a.setContainer(b,d),b.$on("$destroy",function(){a.removeContainer(b)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","duScrollOffset","$timeout","$rootScope",function(a,b,c,d){"use strict";var e=function(a,b,c,d){angular.isElement(a)?this.target=a:angular.isString(a)&&(this.targetId=a),this.$scope=b,this.$element=c,this.offset=d};return e.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)||document.getElementsByName(this.targetId)[0]),this.target},e.prototype.getTargetPosition=function(){var a=this.getTargetElement();if(a)return a.getBoundingClientRect()},e.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function(f,g,h){var i,j=h.ngHref||h.href;if(j&&-1!==j.indexOf("#")?i=j.replace(/.*(?=#[^\s]+$)/,"").substring(1):h.duScrollspy?i=h.duScrollspy:h.duSmoothScroll&&(i=h.duSmoothScroll),i){var k=c(function(){var c=new e(i,f,g,-(h.offset?parseInt(h.offset,10):b));a.addSpy(c),f.$on("$locationChangeSuccess",c.flushTargetCache.bind(c));var j=d.$on("$stateChangeSuccess",c.flushTargetCache.bind(c));f.$on("$destroy",function(){a.removeSpy(c),j()})},0,!1);f.$on("$destroy",function(){c.cancel(k)})}}}}]),angular.module("ualib.ui").constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(a){var b=null;this.open=function(e){b||(a.bind("click",c),a.bind("keydown",d)),b&&b!==e&&(b.isOpen=!1),b=e},this.close=function(e){b===e&&(b=null,a.unbind("click",c),a.unbind("keydown",d))};var c=function(a){if(b){var c=b.getToggleElement();a&&c&&c[0].contains(a.target)||b.$apply(function(){b.isOpen=!1})}},d=function(a){27===a.which&&(b.focusToggleElement(),c())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(a,b,c,d,e,f){var g,h=this,i=a.$new(),j=d.openClass,k=angular.noop,l=b.onToggle?c(b.onToggle):angular.noop;this.init=function(d){h.$element=d,b.isOpen&&(g=c(b.isOpen),k=g.assign,a.$watch(g,function(a){i.isOpen=!!a}))},this.toggle=function(a){return i.isOpen=arguments.length?!!a:!i.isOpen},this.isOpen=function(){return i.isOpen},i.getToggleElement=function(){return h.toggleElement},i.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},i.$watch("isOpen",function(b,c){f[b?"addClass":"removeClass"](h.$element,j),b?(i.focusToggleElement(),e.open(i)):e.close(i),k(a,b),angular.isDefined(b)&&b!==c&&l(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){i.isOpen=!1}),a.$on("$destroy",function(){i.$destroy()})}]).directive("dropdown",function(){return{restrict:"AC",controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownToggle",function(){return{restrict:"AC",require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ualib.ui").directive("dropdownSticky",[function(){return{restrict:"AC",link:function(a,b){b.bind("click",function(a){a.stopPropagation()}),a.$on("$destroy",function(){b.unbind("click")})}}}]),
angular.module("oneSearch.templates",["bento/bento.tpl.html","common/directives/suggest/suggest.tpl.html","common/engines/catalog/catalog.tpl.html","common/engines/databases/databases.tpl.html","common/engines/digital-collections/digital-collections.tpl.html","common/engines/ejournals/ejournals.tpl.html","common/engines/google-cs/google-cs.tpl.html","common/engines/libguides/libguides.tpl.html","common/engines/recommend/recommend.tpl.html","common/engines/scout/scout.tpl.html","common/engines/staff-directory/staff-directory.tpl.html","common/engines/youtube/youtube.tpl.html"]),angular.module("bento/bento.tpl.html",[]).run(["$templateCache",function(a){a.put("bento/bento.tpl.html",'<div class="container bento-box-container">\n    <div class="row">\n        <div class="col-md-12">\n            <h1 class="h2">OneSearch Results</h1>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="articles">\n                <h2>\n                    Articles\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Keyword search in journal titles and full text article content in Scout."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="books">\n                <h2>\n                    Books\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Keyword search in book titles using both the Libraries\' Catalog and Scout."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n        <div class="col-sm-12 col-md-4">\n            <div class="bento-box" bento-box="journals">\n                <h2>\n                    Journals\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Keyword search in journal titles and journal collections, in both Scout and our E-Resources."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-12">\n            <div class="bento-box" hide-if-empty="true" bento-box="staffdirectory" style="min-height:0px; margin-bottom: 15px;">\n                <h2>\n                    Staff Directory\n                    <small>\n                            <span class="fa fa-info-circle"\n                                  tooltip-placement="right"\n                                  tooltip="Contact a librarian directly for help with your research."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="databases">\n                <h2>\n                    Databases\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Keyword search in titles and databases descriptions from our own Databases page."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="googleCS">\n                <h2 id="site-search">\n                    Libraries\' Website\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Targeted, full-text search of library website pages and sections."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="digitalcollections">\n                <h2 id="digitalcollections">\n                    Digital Collections\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Returns a keyword search in titles and full text of our digital collections."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="other">\n                <h2>\n                    Other Items & Media\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Keyword and item type search in the Libraries\' catalog and Scout, retrieving media items - videos, DVDs, CDs, etc."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="faq">\n                <h2>\n                    FAQ\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip=\'Full text keyword search via our Google search engine interface, through our FAQ repository, also known as "Ask a Librarian."\'></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n        <div class="col-md-4">\n            <div class="bento-box" bento-box="libguides">\n                <h2>\n                    Research Guides\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Uses Google to run a keyword search in titles and full text for our research guides."></span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-12">\n            <div class="bento-box" bento-box="youtube" hide-if-empty="true">\n                <h2>\n                    YouTube\n                    <small>\n                        <span class="fa fa-info-circle"\n                              tooltip-placement="right"\n                              tooltip="Keyword search of our YouTube channel"</span>\n                    </small>\n                </h2>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-md-12">\n            <div class="bento-box well" bento-box="recommend" hide-if-empty="true" omit-from-menu="true">\n                <h2>\n                    Recommended Links\n                </h2>\n            </div>\n        </div>\n    </div>\n</div>\n')}]),angular.module("common/directives/suggest/suggest.tpl.html",[]).run(["$templateCache",function(a){a.put("common/directives/suggest/suggest.tpl.html",'<div class="input-group input-group-lg">\n    <label class="sr-only" for="osTextField">Search terms</label>\n    <input type="text" name="search" class="form-control onesearch-text" placeholder="{{prompt}}" id="osTextField"\n           ng-model="model" ng-change="onChange()" ng-trim="false" autocomplete="off" />\n    <div class="input-group-btn">\n        <button type="submit" class="btn btn-onesearch btn-primary"><span class="fa fa-search" aria-hidden="true"></span><span class="sr-only">Search OneSearch</span></button>\n\n    </div>\n\n</div>\n\n<div class="suggest" ng-show="showSuggestions && selected && (items.suggest.length > 0 || items.recommend.length > 0 || items.subjects[0].subjects.length > 0 || items.faq.length > 0)">\n    <div ng-if="items.suggest.length > 0">\n        <ul class="nav nav-pills nav-stacked">\n            <li role="presentation"\n                ng-repeat="item in filteredItems = (items.suggest | filter:compare(originalValue)) | limitTo:numShow track by $index"\n                ng-mousedown="handleSelection(item.search)" ng-class="item.class"\n                ng-mouseenter="setCurrent($index, false)">\n                <a href="#/bento/{{item.search}}" ng-click="gaTypeAhead(item.search)">{{item.search}}</a>\n            </li>\n        </ul>\n    </div>\n    <div class="suggest-row" ng-show="items.recommend.length > 0 || items.subjects[0].subjects.length > 0 || items.faq.length > 0">\n        <div class="row">\n            <div class="col-sm-4 suggest-col" ng-show="items.recommend.length > 0">\n                <div class="">\n                    <h4>Recommended Links</h4>\n                    <div ng-repeat="recommendation in items.recommend | limitTo:10">\n                        <a ng-href="{{recommendation.link}}" ng-click="gaSuggestion(recommendation.description)">\n                            {{recommendation.description}}\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div class="col-sm-4 suggest-col" ng-show="items.subjects[0].subjects.length > 0">\n                <div class="">\n                    <h4>Research Guides&#39; Subjects <a href="http://guides.lib.ua.edu/" class="small" ng-mousedown="go(\'http://guides.lib.ua.edu/\')">more guides</a></h4>\n                    <div ng-repeat="person in items.subjects | limitTo:10">\n                        <div ng-repeat="subject in person.subjects | limitTo:2">\n                            <a ng-if="subject.link.length > 7" ng-href="{{subject.link}}" ng-mousedown="go(subject.link)" ng-click="gaSuggestion(subject.subject)">\n                                {{subject.subject}}\n                            </a>\n                            <a ng-if="subject.link.length <= 7" href="#"\n                               ng-mousedown="go(\'mailto:\' + person.email + \'?subject=Question\')">\n                                Ask {{person.name}}, {{person.title}} at {{person.department}}\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="col-sm-4 suggest-col" ng-show="items.faq.length > 0">\n                <div class="">\n                    <h4>FAQ <a href="http://ask.lib.ua.edu/" class="small" ng-mousedown="go(\'http://ask.lib.ua.edu/\')">more FAQs</a></h4>\n                    <div ng-repeat="faq in items.faq | limitTo:5">\n                        <a ng-href="{{faq.link}}" ng-mousedown="go(faq.link)"  ng-click="gaSuggestion(faq.title)" ng-bind-html="faq.title">\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>')}]),angular.module("common/engines/catalog/catalog.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/catalog/catalog.tpl.html",'<div class="media">\n    <div class="media-body">\n        <h3 class="h4 media-heading">\n            <a ng-href="{{item.href}}"\n               ng-bind-html="item.title | truncate: 50: \'...\': true" target="_catalog" ng-click="gaPush()"></a>\n        </h3>\n        <div class="details-context">\n            <span ng-if="item.year && item.year | number" ng-bind-html="item.year"></span>\n            <span ng-if="item.mediaType" ng-bind-html="item.mediaType"></span>\n            <span ng-if="item.issn">ISSN: {{item.issn}}</span>\n        </div>\n        <div collapse="isCollapsed" class="details-container" ng-if="item.author">\n            <span class="text-muted">Author(s)</span>\n            <span class="detail">\n                <span ng-bind-html="item.author | lowercase | ucfirst"></span>\n            </span>\n        </div>\n        <ul class="list-inline">\n            <li ng-show="item.author">\n                <a href="" ng-click="isCollapsed = !isCollapsed">Item details <span class="fa" ng-class="{\'fa-caret-down\': isCollapsed, \'fa-caret-up\': !isCollapsed}"></span></a>\n            </li>\n            <li>\n                <a ng-href="{{resourceLink}}" class="external-link" ng-if="resourceLink" target="_{{engine}}" ng-click="gaMore()">Results in {{engineName}}</a>\n            </li>\n        </ul>\n    </div>\n</div>')}]),angular.module("common/engines/databases/databases.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/databases/databases.tpl.html",'<div class="media">\n    <div class="media-body">\n        <h3 class="h4 media-heading">\n            <a ng-href="{{item.url}}" title="{{item.title}}" target="_databases" ng-click="gaPush()">{{item.title | truncate: 40: \'...\': true}}</a>\n        </h3>\n        <div class="details-context">\n            <span ng-if="item.coverage" ng-bind-html="item.coverage"></span>\n        </div>\n        <div class="details-container" ng-if="item.subjects">\n            <span class="text-muted">Subjects: </span>\n            <span class="detail" ng-repeat="subj in item.subjects">{{subj.subject}}{{$last ? \'\' : \', \'}}</span>\n        </div>\n    </div>\n</div>')}]),angular.module("common/engines/digital-collections/digital-collections.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/digital-collections/digital-collections.tpl.html",'<div class="media">\n    <a class="pull-left" ng-href="https://digitalcollections.libraries.ua.edu/digital/collection/{{item.collectionAlias}}/id/{{item.itemId}}/rec/1"  target="_digital-collections">\n        <img ng-src="https://digitalcollections.libraries.ua.edu/digital/{{item.thumbnailUri}}" alt="{{item.title}}">\n    </a>\n    <div class="media-body">\n        <h3 class="h4 media-heading">\n            <a ng-href="https://digitalcollections.libraries.ua.edu/digital/collection/{{item.collectionAlias}}/id/{{item.itemId}}/rec/1" target="_digital-collections"  ng-click="gaPush()">{{item.title | truncate: 40: \'...\': true}}</a>\n        </h3>\n        <ul class="list-inline">\n            <li>\n                <a ng-href="{{resourceLink}}" class="external-link" ng-if="resourceLink" target="_{{engine}}" ng-click="gaMore()">Results in {{engineName}}</a>\n            </li>\n        </ul>\n    </div>\n</div>\n')}]),angular.module("common/engines/ejournals/ejournals.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/ejournals/ejournals.tpl.html",'<div class="media">\n    <div class="media-body">\n        <h3 class="h4 media-heading">\n            <a ng-href="{{item.PLink}}"\n               target="_scout"\n               ng-bind-html="item.title | lowercase | ucfirst | truncate: 80: \'...\': true" ng-click="gaPush()"></a>\n\n        </h3>\n        <div class="details-context">\n            <span ng-if="item.year">{{item.year}}</span>\n            <span ng-if="item.ISSN">ISSN: {{item.ISSN}}</span>\n            <span ng-if="item.mediaType">{{item.mediaType}} </span>\n            <span ng-if="item.FullText.Text.Availability">Full Text Online</span>\n        </div>\n\n        <ul class="list-inline">\n            <li>\n                <a ng-href="{{resourceLink}}" class="external-link" ng-if="resourceLink" target="_{{engine}}" ng-click="gaMore()">Results in {{engineName}}</a>\n            </li>\n        </ul>\n\n\n    </div>\n</div>')}]),angular.module("common/engines/google-cs/google-cs.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/google-cs/google-cs.tpl.html",'<div class="media">\n    <div class="media-body">\n        <h3 class="h4 media-heading"><a ng-href="{{item.link}}" title="{{item.title}}" target="_googlecs" ng-click="gaPush()">{{item.title | truncate: 40: \'...\': true}}</a></h3>\n        <p ng-bind-html="item.snippet | truncate: 100: \'...\': true"></p>\n        <ul class="list-inline">\n            <li>\n                <a ng-href="{{resourceLink}}" class="external-link" ng-if="resourceLink" target="_{{engine}}" ng-click="gaMore()">Results in {{engineName}}</a>\n            </li>\n        </ul>\n    </div>\n</div>')}]),angular.module("common/engines/libguides/libguides.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/libguides/libguides.tpl.html",'<div class="media">\n    <div class="media-body">\n        <h3 class="h4 media-heading"><a ng-href="{{item.url}}"  target="_libguides" ng-click="gaPush()">{{item.name | truncate: 40: \'...\': true}}</a></h3>\n        <p ng-bind-html="item.description | truncate: 100: \'...\': true"></p>\n        <ul class="list-inline">\n            <li>\n                <a ng-href="{{resourceLink}}" class="external-link" ng-if="resourceLink" target="_{{engine}}" ng-click="gaMore()">Results in {{engineName}}</a>\n            </li>\n        </ul>\n    </div>\n</div>\n\n\n\n')}]),angular.module("common/engines/recommend/recommend.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/recommend/recommend.tpl.html",'<a ng-href="{{item.link}}" title="{{item.descr}}">{{item.descr}}</a>\n')}]),angular.module("common/engines/scout/scout.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/scout/scout.tpl.html",'<div class="media">\n    <div class="media-body">\n        <h3 class="h4 media-heading">\n            <a ng-href="{{item.PLink}}"\n               title="{{item.Items[0].Data}}"\n               target="_scout"\n               ng-bind-html="item.title | lowercase | ucfirst | truncate: 80: \'...\': true" ng-click="gaPush()"></a>\n        </h3>\n        <div class="details-context">\n            <span ng-if="item.RecordInfo.BibRecord.BibRelationships.IsPartOfRelationships[0].BibEntity.Dates[0]">{{item.RecordInfo.BibRecord.BibRelationships.IsPartOfRelationships[0].BibEntity.Dates[0].Y}} </span>\n            <span ng-if="item.mediaType">{{item.mediaType}} </span>\n            <span ng-if="item.FullText.Text.Availability">Full Text Online</span>\n        </div>\n        <div collapse="isCollapsed" ng-show="(item.RecordInfo.BibRecord.BibRelationships.HasContributorRelationships || item.source || item.RecordInfo.BibRecord.BibEntity.Subjects)">\n            <div class="details-container" ng-if="item.RecordInfo.BibRecord.BibRelationships.HasContributorRelationships">\n                <span class="text-muted">Authors </span>\n            <span class="details"...\n                  ..\n\n                  ng-repeat="author in item.RecordInfo.BibRecord.BibRelationships.HasContributorRelationships | unique: \'PersonEntity.Name.NameFull\'"\n                  ng-bind-html="author.PersonEntity.Name.NameFull | lowercase | ucfirst"></span>\n            </div>\n\n            <div class="details-container" ng-if="item.source">\n                <span class="text-muted">Sources </span>\n                <span class="details" ng-bind-html="item.source"></span>\n            </div>\n\n            <div class="details-container" ng-if="item.RecordInfo.BibRecord.BibEntity.Subjects">\n                <span class="text-muted">Subjects </span>\n            <span class="details"\n                  ng-repeat="subject in item.RecordInfo.BibRecord.BibEntity.Subjects"\n                  ng-bind-html="subject.SubjectFull"></span>\n            </div>\n        </div>\n        <ul class="list-inline">\n            <li ng-show="item.RecordInfo.BibRecord.BibRelationships.HasContributorRelationships || item.source || item.RecordInfo.BibRecord.BibEntity.Subjects">\n                <a href="" ng-click="isCollapsed = !isCollapsed">Item details <span class="fa" ng-class="{\'fa-caret-down\': isCollapsed, \'fa-caret-up\': !isCollapsed}"></span></a>\n            </li>\n            <li>\n                <a ng-href="{{resourceLink}}" class="external-link" ng-if="resourceLink" target="_{{engine}}" ng-click="gaMore()">Results in {{engineName}}</a>\n            </li>\n        </ul>\n\n    </div>\n</div>')}]),angular.module("common/engines/staff-directory/staff-directory.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/staff-directory/staff-directory.tpl.html",'<div class="col-md-4">\n    <div class="media">\n        <div class="media-left">\n                <img ng-if="item.photo" class="media-object" style="width: 128px;" src=\'https://www.lib.ua.edu/staffDir/staffImages/{{item.photo}}\' alt="Staff Directory Image of {{item.firstName}} {{item.lastName}}" />\n                <img ng-if="!item.photo" class="media-object" style="width: 128px;" src="https://www.lib.ua.edu/wp-content/themes/roots-ualib/assets/img/user-profile.png" alt="Staff Directory Image of {{item.firstName}} {{item.lastName}}" />\n        </div>\n        <div class="media-body">\n            <div class="media-heading">\n                <dl class="list-unstyled">\n                    <dt>Name</dt>\n                    <dd><a ng-href="#/staffdir/{{item.emailPrefix}}" ng-if="item.profile">\n                        {{item.firstName}} {{item.lastName}}\n                    </a></dd>\n                    <dd ng-if="!item.profile">{{item.firstName}} {{item.lastName}} </dd>\n                    <dt>Subject</dt>\n                    <dd>{{item.subject}}</dd>\n                    <dt>Phone</dt>\n                    <dd>{{item.title}}</dd>\n                    \x3c!--<div class="media-heading">{{item.department}}</div>--\x3e\n                    <dt>Email</dt>\n                    <dd><a href="mailto:{{item.email}}?subject=Research Help Request" ng-click="gaResearchRequest(item.firstName + \' \' + item.lastName)">{{item.email}}</a></dd>\n                </dl>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n\n')}]),angular.module("common/engines/youtube/youtube.tpl.html",[]).run(["$templateCache",function(a){a.put("common/engines/youtube/youtube.tpl.html",'<div class="col-md-4">\n\t<div class="media">\n\t\t\t<div class="media-left" ng-href="https://youtube.com/watch?v={{item.id.videoId}}"  target="_{{engine}}">\n\t\t\t\t\t<img class="media-object" ng-src="{{item.snippet.thumbnails.default.url}}" alt="Thumbnail for {{item.snippet.title}">\n\t\t\t</div>\n\t\t\t<div class="media-body">\n\t\t\t\t\t<h3 class="h4 media-heading">\n\t\t\t\t\t\t\t<a ng-href="https://youtube.com/watch?v={{item.id.videoId}}" target="_{{engine}}"  ng-click="gaPush()" ng-bind-html="item.snippet.title | truncate: 40: \'...\': true" />\n\t\t\t\t\t</h3>\n\t\t\t\t\t<ul class="list-inline">\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a ng-href="{{resourceLink}}" class="external-link" ng-if="resourceLink" target="_{{engine}}" ng-click="gaMore()">Results in {{engineName}}</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t</div>\n\t</div>\n</div>\n')}]),angular.module("oneSearch",["ngRoute","ngResource","ngAnimate","ngSanitize","ui.bootstrap","angular.filter","ualib.ui","oneSearch.common","oneSearch.templates","oneSearch.bento"]).constant("UALIB_DOMAIN","//www.lib.ua.edu/").value("SearchParams",{limit:100}),angular.module("oneSearch.bento",[]).config(["$routeProvider",function(a){a.when("/bento/:s",{templateUrl:"bento/bento.tpl.html",controller:"BentoCtrl"})}]).service("Bento",["$routeParams","$rootScope","$q","oneSearch","mediaTypes",function(a,b,c,d,e){function f(a,b){var c=j.boxes[a].engines.indexOf(b);-1!=c&&(i(a),j.boxes[a].engines.splice(c,1))}function g(a){angular.forEach(j.boxes,function(b,c){f(c,a)})}function h(a){var b=j.boxes[a].engines.length,c=b>1?1:b<2?3:2;j.boxes[a].resultLimit=c}function i(a){c.when(j.boxes[a].results).then(function(b){var c=Object.keys(b).length,d=j.boxes[a].engines.length,e=c+d;"articles"==a||"databases"==a?j.boxes[a].resultLimit=6:"journals"==a?e<2&&3==j.boxes[a].resultLimit?j.boxes[a].resultLimit=6:j.boxes[a].resultLimit=3:"books"==a&&(e<3&&2==j.boxes[a].resultLimit?j.boxes[a].resultLimit=3:e<2&&3==j.boxes[a].resultLimit?j.boxes[a].resultLimit=6:j.boxes[a].resultLimit=2),(e<2&&j.boxes[a].resultLimit<3||e<3&&j.boxes[a].resultLimit<2)&&j.boxes[a].resultLimit++})}var j=this;this.boxes={},this.engines={};var k;this.getBoxes=function(){k=d.searchAll(a),angular.copy(e.types,j.boxes),angular.forEach(j.boxes,function(a,b){h(b),j.boxes[b].results={},j.boxes[b].resourceLinks={},j.boxes[b].resourceLinkParams={}}),angular.forEach(k,function(a,b){a.response.then(function(c){var h=a.getResults(c),i=a.getResourceLink(c);if(isEmpty(h))g(b);else{h=h.map(function(a,b){var c=a;return c.position=b,c});var k=e.groupBy(h,a.mediaTypes);Object.keys(j.boxes).forEach(function(c){k.hasOwnProperty(c)&&(j.boxes[c].results[b]=k[c].sort(function(a,b){return a.position>b.position?1:a.position<b.position?-1:0}),j.boxes[c].resourceLinks[b]=decodeURIComponent(i[a.id]),a.resourceLink&&a.resourceLink.params?j.boxes[c].resourceLinkParams[b]=a.resourceLink.params:angular.isObject(a.mediaTypes)&&(j.boxes[c].resourceLinkParams[b]=a.mediaTypes.types[c])),f(c,b)}),j.engines[b]={},j.engines[b].tpl=d.getEngineTemplate(a),j.engines[b].controller=d.getEngineController(a)}},function(a){g(b)})})}}]).controller("BentoCtrl",["$scope","Bento",function(a,b){a.$on("$routeChangeSuccess",function(){b.getBoxes()})}]).directive("bentoBox",["$rootScope","$controller","$compile","$animate","$timeout","Bento","oneSearch",function(a,b,c,d,e,f,g){return{restrict:"A",scope:{},link:function(h,i,j,k){function l(){var a=angular.copy(f.boxes[n].engines),b=[];for(var c in g.engines)a.indexOf(c)>-1&&g.engines[c].response&&!g.engines[c].response.done&&b.push(c);r&&!o.hasClass("unresponsive")&&(o.addClass("unresponsive"),d.enter(s,o,angular.element(o[0].lastChild))),b.length&&(r=e(l,500))}function m(a){isEmpty(f.boxes[a].results)&&(j.hideIfEmpty?i.addClass("hidden"):(i.append("<strong>No Results</strong>"),i.addClass("text-muted"))),d.leave(o),t()}var n=j.bentoBox;i.addClass(n),i.parent().attr("id",n+"-parent"),h.bento=f;var o=angular.element('<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>'),p=i.find("h2");p.attr("id",n);var q=p.text();d.enter(o,p,angular.element(p[0].lastChild));var r,s=angular.element(' <span class="unresponsive-msg">Awaiting results from provider</span>');e(l,2e3);var t=h.$watchCollection(function(){return f.boxes[n].engines},function(d,e){if(d!==e){for(var h="",j=0,k=e.length;j<k;j++){var l=e[j];if(d.indexOf(l)<0){h=l;break}}var o=a.$new();o.items=f.boxes[n].results[h],o.items&&o.items.length>0?(o.isCollapsed=!0,o.engine=h,o.engineName=g.engines[h].title?g.engines[h].title:h.charAt(0).toUpperCase()+h.slice(1),o.resourceLink="undefined"!==f.boxes[n].resourceLinks[h]&&f.boxes[n].resourceLinks[h],o.resourceLinkParams=f.boxes[n].resourceLinkParams[h],g.engines[h].resourceLink&&g.engines[h].resourceLink.params&&(o.resourceLinkParams=g.engines[h].resourceLink.params),o.boxName=q,o.mediaType=n,f.engines[h].tpl.then(function(a){var d=["$scope","$element","Bento",function(a,c,d){d.engines[a.engine].controller&&angular.extend(this,b(d.engines[a.engine].controller,{$scope:a}));var e=a.boxName.toLowerCase().trim().replace(/\s+/g,"_").replace(/[']+/g,"");a.box=d.boxes[n],a.gaPush=function(){ga("send","event","oneSearch","item_click",e)},a.gaMore=function(){ga("send","event","oneSearch","more_click","more_"+e)},a.gaResearchRequest=function(a){ga("send","event","oneSearch","research_request",a)}}],e=b(d,{$scope:o,$element:i});i.data("$ngControllerController",e),i.children().data("$ngControllerController",e);var f=angular.element('<div class="animate-repeat bento-box-item" ng-repeat="item in items | limitTo: box.resultLimit">'+a+"</div>"),g=c(f)(o);i.append(g)})):a.$broadcast("NoResultsForEngine",{engine:h,box:n}),0===d.length&&m(n)}},!0)}}}]),angular.module("oneSearch.common",["common.mediaTypes","common.oneSearch","common.engines","filters.nameFilter"]),angular.module("oneSearch.common").factory("dataFactory",["$http",function(a){return{get:function(b){return a.get(b).then(function(a){return a.data})}}}]).directive("suggestOneSearch",["$timeout","$document",function(a,b){return{restrict:"AEC",scope:{prompt:"@",model:"=",search:"="},controller:["$scope","$window","$timeout","$document","dataFactory","Bento",function(a,b,c,d,e,f){a.items={},a.filteredItems=[],a.model="",a.current=-1,a.originalValue=a.model,a.dataRequested=!1,a.numShow=5,a.faqSearched=!1,a.selected=!1,a.onChange=function(){a.selected=!0;var b=a.model.replace(/[&\/\\#+()$~%':*?<>{}]/g," ").trim();if(b=b.substring(0,150),(a.model.length<3||a.model.indexOf(a.originalValue)<0&&a.model.length>=a.originalValue.length||a.originalValue.indexOf(a.model)<0&&a.model.length<=a.originalValue.length)&&(a.items={},a.setCurrent(-1,!1),a.dataRequested=!1,a.selected=!1,a.faqSearched=!1),a.model.length>2&&!a.dataRequested&&(a.dataRequested=!0),a.model.length>2&&c(function(){e.get("//www.lib.ua.edu/oneSearch/api/recommend/"+encodeURI(b)).then(function(b){a.items.recommend=b}),e.get("//www.lib.ua.edu/staffDir/api/subject/"+encodeURI(b)+"/match/startwith").then(function(b){a.items.subjects=b})},0),a.model.length>4&&!a.faqSearched){b.slice(-2).indexOf(" ")>0&&c(function(){a.faqSearched=!0,e.get("https://www.googleapis.com/customsearch/v1?key=AIzaSyCMGfdDaSfjqv5zYoS0mTJnOT3e9MURWkU&cx=003453353330912650815:lfyr_-azrxe&q="+encodeURI(b)+"&siteSearch=ask.lib.ua.edu").then(function(b){a.items.faq=b.items})},0)}a.originalValue=a.model},a.go=function(c){a.model="",a.originalValue=a.model,b.location.href=c},a.setCurrent=function(b,c){if(a.current=b,void 0!==a.items.suggest)for(var d=0;d<a.items.suggest.length;d++)a.items.suggest[d].class="";b>=0&&a.filteredItems.length>0&&(b>a.filteredItems.length-1&&(b=a.filteredItems.length-1),c&&(a.model=a.filteredItems[b].search),a.filteredItems[b].class="active",a.current=b)},a.onFocus=function(){angular.isDefined(a.model)&&a.model.length>2&&(a.selected=!0)},a.onBlur=function(b){a.selected=!1,d.unbind("click")},a.compare=function(a){return function(b){return 0==b.search.indexOf(a)&&!angular.equals(b.search.toLowerCase(),a.toLowerCase())}},a.gaSuggestion=function(a){ga("send","event","oneSearch","suggestion_click",a)},a.gaTypeAhead=function(a){ga("send","event","oneSearch","type_ahead_click",a)}}],link:function(c,d,e){c.showSuggestions=!1;var f=c.$watch("items",function(a,b){var d=!1;for(var e in a)if(e.length>0){d=!0;break}c.showSuggestions=c.model.length>2&&d},!0);d.bind("keydown",function(a){switch(a.keyCode){case 38:c.current>0?(c.setCurrent(c.current-1,!0),a.preventDefault()):(c.setCurrent(-1,!1),c.model=c.originalValue,a.preventDefault());break;case 40:c.model.length>2&&c.current<c.numShow-1&&c.current<c.items.suggest.length-1&&(c.setCurrent(c.current+1,!0),a.preventDefault());break;case 13:c.selected=!1,c.current>-1&&c.filteredItems[c.current]&&c.model===c.filteredItems[c.current].search&&c.gaTypeAhead(c.model);break;case 8:case 46:c.selected=!0}c.$apply()}),c.$on("$destroy",function(){d.unbind("keydown"),f()}),d.bind("click",function(a){"osTextField"===a.target.id?(c.onFocus(),b.bind("click",function(a){"osTextField"===a.target.id?c.onFocus():a.button<1&&c.onBlur(a),c.$apply()})):a.button<1&&c.onBlur(a),c.$apply()}),c.handleSelection=function(b){a(function(){c.model=b,c.originalValue="",c.items={},c.setCurrent(-1,!1),c.dataRequested=!1,c.selected=!1,c.faqSearched=!1,c.$apply(),c.search()},0)}},templateUrl:"common/directives/suggest/suggest.tpl.html"}}]),angular.module("engines.catalog",[]).config(["oneSearchProvider",function(a){a.engine("catalog",{id:64,priority:5,resultsPath:"Catalog.list",totalsPath:"Catalog.total",mediaTypes:{path:"bibFormat",types:{books:["aa","ac","ad","am"],journals:["ab","as","bb","bs","cb","cs","db","ds","eb","es","fb","fs","gb","gs","ib","is","jb","js","kb","ks","mb","ms","ob","os","pb","ps","rb","rs","tb","ts"]}},templateUrl:"common/engines/catalog/catalog.tpl.html",controller:"CatalogCtrl"})}]).filter("catalogSplitTitleAuthor",[function(){return function(a){if(a.indexOf("/")>-1){a=a.split(/\s\/\sedited\sby\s([^.+]+)\./)}return a}}]).controller("CatalogCtrl",["$scope","$filter",function(a,b){for(var c={bc:"Archive/Manuscript",cm:"Music Score",
em:"Map",im:"Nonmusical Recording",jm:"Musical Recording",mm:"Computer File/Software",om:"Kit",pc:"Mixed Material/Collection",pm:"Mixed Material",rm:"Visual Material"},d=a.items,e=0;e<d.length;e++){var f=d[e].bibFormat;if(d[e].mediaType=c[f],!d[e].author){var g=b("catalogSplitTitleAuthor")(d[e].title);angular.isArray(g)&&(d[e].title=g[0],d[e].author=g[2])}}if(angular.isArray(a.resourceLinkParams)){var h="&limitTo=TYPE%3D",i=h+a.resourceLinkParams.join(h);a.resourceLink.indexOf("limitTo=")>0?a.resourceLink=a.resourceLink.replace(/(&limitTo=[^&]+)/,i):a.resourceLink+=i}a.items=d}]),angular.module("engines.databases",[]).config(["oneSearchProvider",function(a){a.engine("databases",{id:2,priority:1,resultsPath:"Databases.databases",totalsPath:"Databases.totalResults",templateUrl:"common/engines/databases/databases.tpl.html"})}]),angular.module("engines.digitalcollections",[]).config(["oneSearchProvider",function(a){a.engine("digitalcollections",{id:8,title:"Digital Collections",priority:3,resultsPath:"digitalCollections.items",templateUrl:"common/engines/digital-collections/digital-collections.tpl.html"})}]),angular.module("engines.ejournals",[]).config(["oneSearchProvider",function(a){a.engine("ejournals",{id:4,priority:6,resultsPath:"eJournals.SearchResult.Data.Records",totalsPath:"Scout.SearchResult.Statistics.TotalHits",mediaTypes:{path:"Header.ResourceType",types:{books:"Book",journals:"Journal"}},templateUrl:"common/engines/ejournals/ejournals.tpl.html",controller:"EjouralsCtrl"})}]).controller("EjouralsCtrl",["$scope",function(a){for(var b,c,d,e=a.items,f=0;f<e.length;f++){if(b="",c="",d="",e[f].RecordInfo.BibRecord.BibEntity.Titles&&(b=e[f].RecordInfo.BibRecord.BibEntity.Titles[0].TitleFull)&&(e[f].title=b),e[f].RecordInfo.BibRecord.BibEntity.Identifiers){for(j=0;j<e[f].RecordInfo.BibRecord.BibEntity.Identifiers.length;j++){var g=e[f].RecordInfo.BibRecord.BibEntity.Identifiers[j].Type;if("issn-online"==g){c=e[f].RecordInfo.BibRecord.BibEntity.Identifiers[j].Value,c=c.slice(0,4)+"-"+c.slice(4,8);break}"issn-print"==g&&(c=e[f].RecordInfo.BibRecord.BibEntity.Identifiers[j].Value,c=c.slice(0,4)+"-"+c.slice(4,8))}c&&(e[f].ISSN=c)}if(e[f].FullTextHoldings,!0)for(j=0;j<e[f].FullTextHoldings.length;j++)if(void 0!==e[f].FullTextHoldings[j].CoverageDates){var h=e[f].FullTextHoldings[j].CoverageDates[0].StartDate;h=parseInt(h.slice(0,4)),""!==d?h<d&&(d=h):d=parseInt(h)}d&&(e[f].year=d)}a.items=e}]),angular.module("common.engines",["engines.digitalcollections","engines.catalog","engines.databases","engines.scout","engines.googleCS","engines.faq","engines.libguides","engines.ejournals","engines.recommend","engines.staffdirectory","engines.youtube"]).service("enginesTemplateFactory",["$http","$templateCache",function(a,b){this.get=function(a){return angular.isDefined(a.templateUrl)?this.fromUrl(a.templateUrl):null},this.fromUrl=function(c){return null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})}}]),angular.module("engines.faq",[]).config(["oneSearchProvider",function(a){a.engine("faq",{id:16,priority:2,resultsPath:"GoogleCS.items",totalsPath:"GoogleCS.searchInformation.totalResults",filterQuery:"site:ask.lib.ua.edu",templateUrl:"common/engines/google-cs/google-cs.tpl.html"})}]),angular.module("engines.googleCS",[]).config(["oneSearchProvider",function(a){a.engine("googleCS",{id:16,title:"Libraries' Website",priority:2,resultsPath:"GoogleCS.items",totalsPath:"GoogleCS.searchInformation.totalResults",filterQuery:"-site:guides.lib.ua.edu -site:ask.lib.ua.edu",templateUrl:"common/engines/google-cs/google-cs.tpl.html"})}]),angular.module("engines.libguides",[]).config(["oneSearchProvider",function(a){a.engine("libguides",{id:256,title:"Research Guides",priority:2,resultsPath:"LibGuides",templateUrl:"common/engines/libguides/libguides.tpl.html"})}]),angular.module("engines.recommend",[]).config(["oneSearchProvider",function(a){a.engine("recommend",{id:512,priority:0,resultsPath:"Recommendations",templateUrl:"common/engines/recommend/recommend.tpl.html"})}]),angular.module("engines.scout",[]).config(["oneSearchProvider",function(a){a.engine("scout",{id:1,priority:4,resultsPath:"Scout.SearchResult.Data.Records",totalsPath:"Scout.SearchResult.Statistics.TotalHits",mediaTypes:{path:"Header.PubTypeId",types:{books:["book","ebook"],articles:"academicJournal"}},resourceLink:{params:{books:["Books","eBooks"],articles:["AcademicJournals"],other:["News","Magazines","Reviews","Biographies","ConferenceMaterials","ElectronicResources","TradePublications","NonPrintResources","MusicScores","DissertationsTheses","PrimarySourceDocuments","Reports","Maps","Audio","Videos"]}},templateUrl:"common/engines/scout/scout.tpl.html",controller:"ScoutCtrl"})}]).controller("ScoutCtrl",["$scope",function(a){for(var b,c=a.items,d=0;d<c.length;d++){"audio"==c[d].Header.PubTypeId&&(c[d].mediaType="Audio"),"videoRecording"==c[d].Header.PubTypeId&&(c[d].mediaType="Video Recording"),c[d].RecordInfo.BibRecord.BibEntity.Titles&&(b=c[d].RecordInfo.BibRecord.BibEntity.Titles[0].TitleFull);var e=[];if(c[d].RecordInfo.BibRecord.hasOwnProperty("BibRelationships")&&angular.isDefined(c[d].RecordInfo.BibRecord.BibRelationships.IsPartOfRelationships)){e=c[d].RecordInfo.BibRecord.BibRelationships.IsPartOfRelationships;for(var f=0,g=e.length;f<g;f++)if(angular.isUndefined(b)&&e[f].BibEntity&&e[f].BibEntity.Titles&&(b=e[f].BibEntity.Titles[0].TitleFull),angular.isDefined(e[f].BibEntity.Identifiers)&&"issn-print"===e[f].BibEntity.Identifiers[0].Type&&(e[f].BibEntity.Titles&&(c[d].source=e[f].BibEntity.Titles[0].TitleFull),angular.isDefined(e[f].BibEntity.Numbering)))for(var h=0,i=e[f].BibEntity.Numbering.length;h<i;h++)c[d].source+=" "+e[f].BibEntity.Numbering[h].Type.substring(0,3)+"."+e[f].BibEntity.Numbering[h].Value}if(angular.isDefined(c[d].Items))for(var f=0;f<c[d].Items.length;f++)"Src"==c[d].Items[f].Group&&(c[d].source=c[d].Items[f].Data);c[d].title=b}a.items=c;var j,k=angular.copy(a.mediaType),l=angular.copy(a.resourceLink);a.resourceLinkParams[k]&&(j=a.resourceLinkParams[k].join(","),l.indexOf("facet=")>0?l=l.replace(/&facet=(.+)&?/,j):l+="&facet="+j),a.resourceLink=angular.copy(l)}]),angular.module("engines.staffdirectory",[]).config(["oneSearchProvider",function(a){a.engine("staffdirectory",{id:128,priority:5,resultsPath:"staffDir",templateUrl:"common/engines/staff-directory/staff-directory.tpl.html",controller:"StaffDirectoryCtrl"})}]).controller("StaffDirectoryCtrl",["$scope",function(a){for(var b=a.items,c=0,d=b.length;c<d;c++)if(b[c].email){var e=/^([\w-]+(?:\.[\w-]+)*)/,f=b[c].email.match(e);null!==f&&(b[c].emailPrefix=f[0])}}]),angular.module("engines.youtube",[]).config(["oneSearchProvider",function(a){a.engine("youtube",{id:4096,title:"YouTube",priority:3,resultsPath:"YouTube.items",templateUrl:"common/engines/youtube/youtube.tpl.html"})}]),angular.module("filters.nameFilter",[]).filter("nameFilter",["$filter",function(a){return function(a){if(a.indexOf(",")>-1){a=a.split(",").map(function(a){return a.trim()}).reverse().join(" ")}return a}}]);var invertArrayToObject=function(a){var b={};return Object.keys(a).map(function(c,d){for(var e=0,f=a[c].length;e<f;e++)b[a[c][e]]=c}),b},hasOwnProperty=Object.prototype.hasOwnProperty;angular.module("common.mediaTypes",[]).provider("mediaTypes",[function(){function a(a){var b={};return angular.forEach(a,function(a,c){var d={};switch(typeof a){case"string":case"number":a=[a];break;case"object":a=toArray(a)}d[c]=a,d=invertArrayToObject(d),angular.extend(b,d)}),b}var b={other:{engines:[],loaded:!1}};this.type=function(a,c){b[a]||(b[a]={engines:[],loaded:!1}),b.other.engines.indexOf(c)>-1||b.other.engines.push(c),b[a].engines.push(c)},this.$get=["$parse",function(c){return{types:b,groupBy:function(b,d){var e={};if(angular.isObject(d)){var f,g,h=a(d.types),i=c(d.path);angular.forEach(b,function(a){f=i(a),g=h[f],angular.isUndefined(g)?(e.other||(e.other=[]),e.other.push(a)):(e[g]||(e[g]=[]),e[g].push(a))})}else e[d]=b;return e}}}]}]),angular.module("common.oneSearch",[]).factory("Search",["$http","$q",function(a,b){function c(c){var d=b.defer(),e="//www.lib.ua.edu/oneSearch/api/search/"+c.s+"/engine/"+c.engine+"/limit/"+c.limit,f=a({method:"GET",url:e,timeout:d.promise}),g=f.then(function(a){return this.done=!0,a.data},function(a){return b.reject("Error")});return g.done=!1,g.abort=function(){this.done=!0,d.resolve()},g.finally(function(){g.abort=angular.noop,d=f=g=null,this.done=!1}),g}return{request:c}}]).provider("oneSearch",["mediaTypesProvider",function(a){var b={};this.engine=function(c,d){if(angular.isString(c)){var e={id:null,title:null,priority:10,resultsPath:null,totalsPath:null,mediaTypes:null,templateUrl:null,filterQuery:null,controller:null},f=angular.extend(e,d);f.id&&(f.mediaTypes?Object.keys(f.mediaTypes.types).map(function(b){a.type(b,c)}):(a.type(c,c),f.mediaTypes=c),f.name=c,b[c]=f)}else console.log({Error:"oneSearch engine must have STRING defined name",engineParams:d})},this.$get=["$q","$parse","$filter","$rootScope","enginesTemplateFactory","SearchParams","Search",function(a,c,d,e,f,g,h){return{engines:b,searchAll:function(a){angular.extend(a,g);var e=d("orderObjectBy")(b,"priority");return angular.forEach(e,function(d,e){var f={engine:d.id};angular.extend(f,a),null!==d.filterQuery&&(f.s+=" "+d.filterQuery),d.response=h.request(f),angular.isDefined(d.resultsPath)&&(d.getResults=c(d.resultsPath)),angular.isDefined(d.totalsPath)&&(d.getTotal=c(d.totalsPath)),d.getResourceLink=c("resourceLinks"),b[e]=d}),b},getEngineTemplate:function(a){return f.get(a)},getEngineController:function(a){return angular.isDefined(a.controller)?a.controller:null}}}]}]).controller("OneSearchCtrl",["$scope","$location","$rootScope","$window","oneSearch",function(a,b,c,d,e){function f(){for(var a in e.engines)e.engines[a].response&&!e.engines[a].response.done&&e.engines[a].response.abort()}a.searchText,a.search=function(){var c=a.scoutCheckbox,e=a.searchText;if(1==c&&""!==e)ga("send","event","oneSearch","scout_checkbox_click"),window.location="http://search.ebscohost.com/login.aspx?direct=true&site=eds-live&;scope=site&type=0&custid=s4594951&groupid=main&profid=eds&mode=and&authtype=ip,guest&bquery="+e;else if(a.searchText){a.searchText=a.searchText.replace(/[&\/\\#+()$~%':*?<>{}]/g," ").trim(),a.searchText=a.searchText.substring(0,150);var g=encodeURIComponent(a.searchText);if(f(),!b.path()||b.path().indexOf("/bento")<0){var h="#/bento/"+g;switch(b.host()){case"www.lib.ua.edu":case"www.lib.ua.edu":h="//"+b.host()+h;break;case"localhost":h=b.absUrl().replace(/(#.*)/,"")+h;break;default:h="//www.lib.ua.edu"+h}d.location=h}else b.path("/bento/"+a.searchText)}},a.getRecommend=function(a){return $resource("//www.lib.ua.edu/oneSearch/api/recommend/:search").query({search:a}).$promise.then(function(a){return a})},c.$on("$routeChangeSuccess",function(b,c){c&&a.searchText!==c.params.s&&(a.searchText=c.params.s)})}]).filter("orderObjectBy",function(){return function(a,b,c){function d(a,b){return a[b]}var e=[],f={};angular.forEach(a,function(a){e.push(a)}),e.sort(function(a,c){var e=b.split(".").reduce(d,a),f=b.split(".").reduce(d,c);return e===f?0:e>f?1:-1}),c&&e.reverse();for(var g=0,h=e.length;g<h;g++){f[e[g].name]=e[g]}return f}});