angular.module("ualib.templates",["_ualib-alerts.tpl.html","_ualib-home.tpl.html"]),angular.module("_ualib-alerts.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("_ualib-alerts.tpl.html",'<alert class=animate ng-repeat="alert in list.alerts" type={{alert.typeStr}} close=closeAlert($index)><span class="fa fa-exclamation-triangle"></span> {{alert.message}} <span ng-if=alert.url><a ng-href={{alert.url}}>More...</a></span></alert>')}]),angular.module("_ualib-home.tpl.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("_ualib-home.tpl.html",'<div class=container><div class=row><div class=col-md-12><div ualib-alerts></div></div></div><div ng-controller=NewsTodayCtrl class=animate><h1 class=sr-only>University of Alabama Libraries Homepage</h1><div class=home-slice><div class=row><div class=col-md-6><div class="card front-page-card hidden-md hidden-lg"><div class=card-body><div class=row><div class=col-sm-6><a href=http://guides.lib.ua.edu/az.php class=service-card><span class="fa fa-3x fa-database"></span><h2 class="h4 quick-link">Databases</h2></a><a href=http://guides.lib.ua.edu/ class=service-card><span class="fa fa-book"></span><h2 class="h4 quick-link">Research Guides</h2></a><a href=http://library.ua.edu/vwebv/searchBasic class=service-card><span class="fa fa-search"></span><h2 class="h4 quick-link">Libraries Catalog</h2></a><a href=https://ua.illiad.oclc.org/illiad/ class=service-card><span class="fa fa-exchange"></span><h2 class="h4 quick-link">Interlibrary Loan</h2></a></div><div class=col-sm-6><a href=https://www.lib.ua.edu/research-tools/e-resources/ class=service-card><span class="fa fa-bolt"></span><h2 class="h4 quick-link">E-Journals</h2></a><a href=/scout/ class=service-card><span class="fa fa-binoculars"></span><h2 class="h4 quick-link">Scout</h2></a><a href=/#/staffdir class=service-card><span class="fa fa-users"></span><h2 class="h4 quick-link">Staff Directory</h2></a><a href=http://ask.lib.ua.edu/ class=service-card><span class="fa fa-question-circle"></span><h2 class="h4 quick-link">Ask A Librarian</h2></a></div></div></div></div><div class="card front-page-card"><div class=card-heading><h2>Hours <small>today</small></h2></div><div class=card-body><div class=hours-list></div></div><div class=card-footer><a href=/#/hours class=more-link>All Hours</a></div></div><div class="card front-page-card"><div class=card-body><a class=reno-image href=https://apps.lib.ua.edu/blogs/renovations/ ><img src=https://www.lib.ua.edu/wp-content/uploads/Reno-Website-Graphic.jpg alt="Gorgas Library Renovation Project: Check the blog for important renovation updates and activities"></a></div></div><div class="card front-page-card" ng-show=events><div class=card-heading><h2>Events</h2></div><div class=card-body><div news-card=item news-type=event ng-repeat="item in events | limitTo : 4"></div></div><div class=card-footer><a href=https://www.ua.edu/events/category/22/view/month/ class=more-link>More Events</a></div></div></div><div class=col-md-6><div class="card front-page-card hidden-sm hidden-xs"><div class=card-body><div class=row><div class=col-sm-6><a href=http://guides.lib.ua.edu/az.php class=service-card><span class="fa fa-3x fa-database"></span><h2 class="h4 quick-link">Databases</h2></a><a href=http://guides.lib.ua.edu/ class=service-card><span class="fa fa-book"></span><h2 class="h4 quick-link">Research Guides</h2></a><a href=http://library.ua.edu/vwebv/searchBasic class=service-card><span class="fa fa-search"></span><h2 class="h4 quick-link">Libraries Catalog</h2></a><a href=https://ua.illiad.oclc.org/illiad/ class=service-card><span class="fa fa-exchange"></span><h2 class="h4 quick-link">Interlibrary Loan</h2></a></div><div class=col-sm-6><a href=https://www.lib.ua.edu/research-tools/e-resources/ class=service-card><span class="fa fa-bolt"></span><h2 class="h4 quick-link">E-Journals</h2></a><a href=/scout/ class=service-card><span class="fa fa-binoculars"></span><h2 class="h4 quick-link">Scout</h2></a><a href=/#/staffdir class=service-card><span class="fa fa-users"></span><h2 class="h4 quick-link">Staff Directory</h2></a><a href=http://ask.lib.ua.edu/ class=service-card><span class="fa fa-question-circle"></span><h2 class="h4 quick-link">Ask A Librarian</h2></a></div></div></div></div><div class="card front-page-card"><div class=card-heading><h2>News</h2></div><div class=card-body><div class=animate-repeat news-card=item ng-repeat="item in news"></div></div><div class=card-footer><a href=/#/news-exhibits class=more-link>More News</a></div></div></div></div></div></div></div>')}]),angular.module("ualib",["ngRoute","ngAnimate","ualib.templates","ualib.ui","manage","ualib.hours","oneSearch","ualib.imageCarousel","ualib.databases","musicSearch","ualib.staffdir","ualib.softwareList","ualib.news","ualib.alerts"]).value("duScrollOffset",100).config(["$httpProvider","$routeProvider","$compileProvider",function($httpProvider,$routeProvider,$compileProvider){function stripHTMLFromJSON(data){return"string"==typeof data&&(data=data.trim(),"{"!==data[0]&&"["!==data[0]&&")"!==data[0]||(console.log("Stripping HTML data from JSON in AJAX response..."),data=angular.fromJson(data.replace(/<\/?[^>]+(>|$)/g,"")))),data}$httpProvider.defaults.transformResponse.push(function(responseData){return stripHTMLFromJSON(responseData)}),$routeProvider.when("/home",{templateUrl:"_ualib-home.tpl.html",controller:["$scope","$rootScope",function($scope,$rootScope){var testVar=1,bgNum=Math.floor(1e3*Math.random())%16+testVar;$rootScope.appStyle={"background-image":"url('wp-content/themes/roots-ualib/assets/img/quad-sunset-lg_"+bgNum+".jpg')"}}]}).when("/databases",{redirectTo:function(){window.location="http://guides.lib.ua.edu/az.php"}}).otherwise({redirectTo:"/home"}),$compileProvider.aHrefSanitizationWhitelist(/^\s*(https?|mailto|file|blob|tel):/)}]).run(["$routeParams","$location","$rootScope",function($routeParams,$location,$rootScope){$rootScope.appClass="page-loaded",$rootScope.$on("$routeChangeSuccess",function(e,current,pre){if(pre&&pre.hasOwnProperty("$$route")&&pre.$$route.hasOwnProperty("originalPath")&&current.hasOwnProperty("$$route")&&current.$$route.hasOwnProperty("originalPath")&&current.$$route.originalPath!==pre.$$route.originalPath){ga("require","linkid");var hash=document.location.hash;if(""!==hash){console.log("Hash is present.");-1===hash.search("/bento/")?(console.log("Bento not found."),ga("send","pageview",$location.url())):(console.log("Bento found!"),queryTerm=decodeURIComponent(hash.split("/").pop()),ga("send","pageview","bento?q="+queryTerm))}else console.log("Hash not found."),ga("send","pageview",$location.url())}var appRoute=$location.path().split("/")[1];$rootScope.appStyle={},$rootScope.appClass="webapp "+appRoute+"-webapp",angular.element(document.querySelector("body")).addClass("webapp")})}]).directive("skipLink",[function(){return{restrict:"AC",link:function(scope,elm,attrs){elm.on("click",function(){document.getElementById("#mainContent").focus()})}}}]),angular.module("ualib.alerts",[]).constant("VIEW_ALERTS_URL","//www.lib.ua.edu/alerts/api/today").factory("viewAlerts",["$http","VIEW_ALERTS_URL",function($http,url){return{getData:function(){return $http({method:"GET",url:url,params:{}})}}}]).controller("alertsCtrl",["$scope","viewAlerts",function($scope,viewAlerts){$scope.list={},viewAlerts.getData().success(function(data){for(var i=0;i<data.alerts.length;i++)switch(data.alerts[i].type){case"0":data.alerts[i].typeStr="success";break;case"1":data.alerts[i].typeStr="warning";break;case"2":data.alerts[i].typeStr="danger";break;default:data.alerts[i].typeStr="default"}$scope.list=data}).error(function(data,status,headers,config){console.log(data)}),$scope.closeAlert=function(index){$scope.list.alerts.splice(index,1)}}]).directive("ualibAlerts",[function(){return{restrict:"AC",scope:{},controller:"alertsCtrl",link:function(scope,elm,attrs){},templateUrl:"_ualib-alerts.tpl.html"}}]),angular.module("ualib.imageCarousel",["angular-carousel"]).constant("VIEW_IMAGES_URL","//www.lib.ua.edu/erCarousel/api/slides/active").factory("imageCarouselFactory",["$http","VIEW_IMAGES_URL",function($http,url){return{getData:function(){return $http({method:"GET",url:url,params:{}})}}}]).controller("imageCarouselCtrl",["$scope","$q","imageCarouselFactory",function($scope,$q,imageCarouselFactory){function loadImages(slides,i,len,deferred){if(i=i||0,len=len||slides.length,deferred=deferred||$q.defer(),len<1)deferred.resolve(slides);else{var image=new Image;image.onload=function(){slides[i].styles="url("+this.src+")",slides[i].image=this,i+1===len?deferred.resolve(slides):(i++,loadImages(slides,i,len,deferred))},image.src=slides[i].image}return deferred.promise}$scope.slides=null,imageCarouselFactory.getData().success(function(data){loadImages(data.slides).then(function(slides){$scope.slides=slides})}).error(function(data,status,headers,config){console.log(data)})}]).directive("ualibImageCarousel",[function(){return{restrict:"AC",controller:"imageCarouselCtrl",link:function(scope,elm,attrs,Ctrl){var toggleLock=!1;scope.isLocked=!1,scope.pause=function(){toggleLock=!0,scope.isLocked=!0},scope.play=function(){toggleLock=!1,scope.isLocked=!1},scope.mouseToggle=function(){toggleLock||(scope.isLocked=!scope.isLocked)}}}}]);